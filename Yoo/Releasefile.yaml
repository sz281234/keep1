# Exported from:        https://internal.eportal.mastercard.int/xebia-prod-nz-release/
# Release version:      22.1.1
# Date created:         Thu Feb 23 15:42:21 CST 2023

---
apiVersion: xl-release/v1
kind: Templates
metadata:
  home: Decision Management/Lower Environment Releases/PEAT Release/Current release
spec:
- folderVariables:
  - type: xlrelease.BooleanVariable
    key: folder.grid_deploy_manual
  - type: xlrelease.StringVariable
    key: folder.abu_push_panmanager_version
    value: 1.29.0
  - type: xlrelease.StringVariable
    key: folder.abu_push_consumer_version
    value: 1.19.0
  - type: xlrelease.StringVariable
    key: folder.abu_push_notify_issuers_version
    value: 1.22.0
  - type: xlrelease.StringVariable
    key: folder.abu_push_notifyadapter_version
    value: automated_billing_updater/abu_push_notifyadapter/1.25.1/20210512114606
  - type: xlrelease.StringVariable
    key: folder.artifact.app-platform.version
    value: 22.6.1
  - type: xlrelease.StringVariable
    key: folder.transaction_disposition_version
    value: 2.1.2
  - type: xlrelease.PasswordStringVariable
    key: folder.metadata.jenkins.password
    value: !value "xlrelease_PasswordStringVariable_folder_metadata_jenkins_password_value"
  - type: xlrelease.StringVariable
    key: folder.release_environment
    value: PEAT
  - type: xlrelease.StringVariable
    key: folder.release_quarter
    value: "3"
  - type: xlrelease.StringVariable
    key: folder.peat_habitat_ksc_channel
    value: peat-ksc
  - type: xlrelease.StringVariable
    key: folder.peat_habitat_stl_channel
    value: peat-stl
  - type: xlrelease.StringVariable
    key: folder.abu_updates_version
    value: 1.15.1
  - type: xlrelease.StringVariable
    key: folder.app_bootstrapper_version
    value: 22.6.1
  - type: xlrelease.StringVariable
    key: folder.pan_profile_web_service_version
    value: 1.49.0
  - type: xlrelease.StringVariable
    key: folder.abu_push_watchlist_rest_version
    value: 1.49.1
  - type: xlrelease.StringVariable
    key: folder.jenkins_eid
    value: dmp_xlr
  - type: xlrelease.StringVariable
    key: folder.release_year
    value: "22"
  - type: xlrelease.BooleanVariable
    key: folder.hostmanager_deploy
  - type: xlrelease.BooleanVariable
    key: folder.grid_deploy
  - type: xlrelease.BooleanVariable
    key: folder.app_bootstrapper_deploy
  - type: xlrelease.StringVariable
    key: folder.abu_maws_version
    value: automated_billing_updater/abu_maws_api/2.52.1/20210515154704
  - type: xlrelease.StringVariable
    key: folder.ai_garage_validator_version
    value: NEED INFO
  - type: xlrelease.BooleanVariable
    key: folder.ai_garage_validator_deploy
  - type: xlrelease.StringVariable
    key: folder.pple_transformer_channel
    value: peat
  - type: xlrelease.StringVariable
    key: folder.app_platform_version
    value: dmp_user_interface_frameworks/app_platform/22.6.1/20220725165951
  - type: xlrelease.PasswordStringVariable
    key: folder.metadata.bitbucket.dmp_xlr_merging
    value: !value "xlrelease_PasswordStringVariable_folder_metadata_bitbucket_dmp_xlr_merging_value"
  - type: xlrelease.BooleanVariable
    key: folder.rbd_nudata_toml_deploy
  - type: xlrelease.StringVariable
    key: folder.the_fraud_center_apache24_version
    value: dmp_user_interface_frameworks/the_fraud_center_apache24/0.1.0/20220607141220
  - type: xlrelease.StringVariable
    key: folder.transactionviewer_version
    value: 22.5.0
  - type: xlrelease.StringVariable
    key: folder.tfc_di_version
    value: 22.5.4
  - type: xlrelease.StringVariable
    key: folder.tfc_listmanager_version
    value: 22.5.2
  - type: xlrelease.StringVariable
    key: folder.decision_center_ec_components_stage_version
    value: NEED INFO
  - type: xlrelease.StringVariable
    key: folder.host_manager_version
    value: 23.2.4
  - type: xlrelease.StringVariable
    key: folder.tfc_rulemanager_version
    value: 22.6.11
  - type: xlrelease.StringVariable
    key: folder.grid_udt_daemon_version
    value: 2.0.1
  - type: xlrelease.StringVariable
    key: folder.tfc_gateway_version
    value: 22.5.3
  - type: xlrelease.StringVariable
    key: folder.tfc_config_version
    value: 22.5.2
  - type: xlrelease.StringVariable
    key: folder.metadata.bitbucket.eid
    value: dmp_xlr_merging
  - type: xlrelease.PasswordStringVariable
    key: folder.metadata.bitbucket.token
    value: !value "xlrelease_PasswordStringVariable_folder_metadata_bitbucket_token_value"
  - type: xlrelease.PasswordStringVariable
    key: folder.metadata.jenkins.token.cd1
    value: !value "xlrelease_PasswordStringVariable_folder_metadata_jenkins_token_cd1_value"
  - type: xlrelease.PasswordStringVariable
    key: folder.metadata.jenkins.token.cd2
    value: !value "xlrelease_PasswordStringVariable_folder_metadata_jenkins_token_cd2_value"
  - type: xlrelease.PasswordStringVariable
    key: folder.metadata.jenkins.token.cd5
    value: !value "xlrelease_PasswordStringVariable_folder_metadata_jenkins_token_cd5_value"
  - type: xlrelease.StringVariable
    key: folder.dmp_decision_server_res_1_stage_version
    value: NEED INFO
  - type: xlrelease.StringVariable
    key: folder.rbd_web_service_linux2_version
    label: Rbd OEL6 ver.
    value: dmp_api_frameworks/rbd_web_service/3.66.1/20221005133342
  - type: xlrelease.StringVariable
    key: folder.dmp_decision_server_res_0_stage_version
    value: NEED INFO
  - type: xlrelease.StringVariable
    key: folder.dmp_decision_server_dvs_int_1_stage_version
    value: NEED INFO
  - type: xlrelease.StringVariable
    key: folder.consumer_controls_version
  - type: xlrelease.StringVariable
    key: folder.dmp_decision_server_dvs_int_0_stage_version
    value: NEED INFO
  - type: xlrelease.StringVariable
    key: folder.dmp_decision_server_dvs_ext_0_version
    value: decision_processing/dmpdecisionserver_dvs_ext_0_peat/22.8.3/20230110194653
  - type: xlrelease.StringVariable
    key: folder.dmp_decision_server_dvs_ext_1_stage_version
    value: NEED INFO
  - type: xlrelease.StringVariable
    key: folder.flextp_oel6_version
    value: decision_processing/flextp_host_manager/23.2.5/20230222010438
  - type: xlrelease.StringVariable
    key: folder.dmp_decision_server_dvs_ext_0_stage_version
    value: NEED INFO
  - type: xlrelease.StringVariable
    key: folder.dmp_udt_ws_version
    value: NEED INFO
  - type: xlrelease.StringVariable
    key: folder.decisioncenter_bc_service_version
    value: NEED INFO
  - type: xlrelease.BooleanVariable
    key: folder.decisioncenter_bc_service_deploy
  - type: xlrelease.StringVariable
    key: folder.decision_center_ec_webservices_stage_version
    value: NEED INFO
  - type: xlrelease.StringVariable
    key: folder.metadata.time
    value: "30"
  - type: xlrelease.StringVariable
    key: folder.dmp_udt_ws_peat_version
    value: decision_processing/dmp_udt_ws_peat/23.1.5/20230110161239
  - type: xlrelease.BooleanVariable
    key: folder.rbd_nudata_deploy
  - type: xlrelease.BooleanVariable
    key: folder.rbd_webservices_deploy
  - type: xlrelease.BooleanVariable
    key: folder.tfc_tfcgateway_toml_deploy
  - type: xlrelease.BooleanVariable
    key: folder.abu_push_deploy
  - type: xlrelease.StringVariable
    key: folder.tfc_help_version
    value: dmp_user_interface_frameworks/tfc_help/1.2.52/20220531131408
  - type: xlrelease.BooleanVariable
    key: folder.abu_updates_deploy
  - type: xlrelease.BooleanVariable
    key: folder.consumer_controls_deploy
  - type: xlrelease.BooleanVariable
    key: folder.consumer_controls_toml_deploy
  - type: xlrelease.BooleanVariable
    key: folder.tfc_di_toml_deploy
  - type: xlrelease.BooleanVariable
    key: folder.tfc-tfcconfig-toml-deploy
  - type: xlrelease.BooleanVariable
    key: folder.tfc-listmanager-toml-deploy
  - type: xlrelease.BooleanVariable
    key: folder.grid_profile_loader_deploy
  - type: xlrelease.StringVariable
    key: folder.metadata.release
    value: "22.7"
  - type: xlrelease.StringVariable
    key: folder.stl_live_grid_server
    value: rsk0stl115
  - type: xlrelease.BooleanVariable
    key: folder.grid_profile_loader_toml_deploy
  - type: xlrelease.BooleanVariable
    key: folder.account_intelligence_batch_process_deploy
  - type: xlrelease.BooleanVariable
    key: folder.account_intelligence_batch_process_toml_deploy
  - type: xlrelease.StringVariable
    key: folder.app_bootstrapper_version
    description: Habitat package version for app-bootstrapper
    value: dmp_user_interface_frameworks/app_bootstrapper/22.6.1/20220729121748
  - type: xlrelease.BooleanVariable
    key: folder.pan_profile_lifecycle_event_transformer_deploy
  - type: xlrelease.StringVariable
    key: folder.release_environment_lowercase
    value: peat
  - type: xlrelease.BooleanVariable
    key: folder.tfc-help-deploy
  - type: xlrelease.StringVariable
    key: folder.habitat.app_customer_support.version
    description: Habitat package version for app-customer-support
    value: dmp_user_interface_frameworks/app_customer_support/22.3.1/20220525103356
  - type: xlrelease.BooleanVariable
    key: folder.pan-profile-lifecycle-event-transformer-toml-deploy
  - type: xlrelease.StringVariable
    key: folder.habitat.rbd-nudata-provider.linux2.version
    label: Nudata OEL6 ver.
    value: dmp_api_frameworks/rbd_nudata_provider/3.20.2/20221006090647
  - type: xlrelease.BooleanVariable
    key: folder.ai-batch-processor-toml-deploy
  - type: xlrelease.StringVariable
    key: folder.rbd_nudata_provider_linux_version
    label: Nudata OEL7 ver.
    value: dmp_api_frameworks/rbd_nudata_provider/3.20.2/20221006090646
  - type: xlrelease.BooleanVariable
    key: folder.tfc_rulemanager_toml_deploy}
  - type: xlrelease.BooleanVariable
    key: folder.app_customer_support-deploy
  - type: xlrelease.BooleanVariable
    key: folder.abu_push_notify_adapter_toml-deploy
  - type: xlrelease.BooleanVariable
    key: folder.decision_center_ec_components-deploy
  - type: xlrelease.BooleanVariable
    key: folder.decision_center_ec_webservices-deploy
  - type: xlrelease.BooleanVariable
    key: folder.dmprulewebservice_pcf-deploy
  - type: xlrelease.StringVariable
    key: folder.staging-grid-server-stl
    value: rsk0stl15
  - type: xlrelease.BooleanVariable
    key: folder.tfc-transactionviewer-toml-deploy
  - type: xlrelease.BooleanVariable
    key: folder.decisionserver_res_service-deploy
  - type: xlrelease.BooleanVariable
    key: folder.abu_maws_springboot_deploy
  - type: xlrelease.StringVariable
    key: folder.host_manager_cli_version
    value: 23.2.3
  - type: xlrelease.PasswordStringVariable
    key: folder.metadata.jenkins.token.cd3
    value: !value "xlrelease_PasswordStringVariable_folder_metadata_jenkins_token_cd3_value"
  - type: xlrelease.StringVariable
    key: folder.all_peat_ksc_servers
    value: "rsk0stl14,rsk0stl18,rsk0stl23,rsk0stl54"
  - type: xlrelease.StringVariable
    key: folder.all_peat_ios_servers
    value: "rsk0stl500,rsk0stl501,rsk0stl502,rsk0stl504"
  - type: xlrelease.StringVariable
    key: folder.all_peat_stl_servers
    value: "rsk0stl13,rsk0stl17,rsk0stl22,rsk0stl24,rsk0stl25,rsk0stl52,rsk0stl53,rsk0stl56,rsk0stl59,rsk0stl81,rsk0stl95,rsk0stl101,rsk0stl102,rsk0stl60"
  - type: xlrelease.BooleanVariable
    key: folder.app_platform_deploy
  - type: xlrelease.BooleanVariable
    key: folder.tfc_tfcgateway_deploy
  - type: xlrelease.StringVariable
    key: folder.rbd_web_service_linux_version
    label: Rbd OEL7 ver.
    value: dmp_api_frameworks/rbd_web_service/3.66.1/20221005133343
  - type: xlrelease.BooleanVariable
    key: folder.tfc_transactionviewer_deploy
  - type: xlrelease.BooleanVariable
    key: folder.tfc_listmanager_deploy
  - type: xlrelease.BooleanVariable
    key: folder.tfc_tfcconfig_deploy
  - type: xlrelease.BooleanVariable
    key: folder.tfc_di_deploy
  - type: xlrelease.BooleanVariable
    key: folder.tfc_iisreports_pfc_deploy
  - type: xlrelease.BooleanVariable
    key: folder.tfc_rulemanager_deploy
  - type: xlrelease.BooleanVariable
    key: folder.tfc_rule_test_service_pcf_deploy
  - type: xlrelease.BooleanVariable
    key: folder.ttfc_rule_metric_service_pcf_deploy
  - type: xlrelease.BooleanVariable
    key: folder.hostmanager-toml-deploy
  - type: xlrelease.StringVariable
    key: folder.GridConfig_version
    value: 7.121.4
  - type: xlrelease.StringVariable
    key: folder.flextp+oel7_version
    value: decision_processing/flextp_host_manager/23.2.5/20230222010433
  - type: xlrelease.StringVariable
    key: folder.decisionserver_res_service_channel
    value: peat
  - type: xlrelease.BooleanVariable
    key: folder.the_fraud_center_apache24_deploy
  - type: xlrelease.BooleanVariable
    key: folder.the_fraud_center_apache24-toml_deploy
  - type: xlrelease.BooleanVariable
    key: folder.rbd_webservices_toml_deploy
  - type: xlrelease.StringVariable
    key: folder.stl_live_grid_servers
    value: "rsk0stl115, rsk0stl116, rsk0stl117, rsk0stl118"
  - type: xlrelease.StringVariable
    key: folder.metadata_release_specific_dml_ddl
    value: https://fusion.mastercard.int/stash/projects/RISKIA/repos/releasehandoff/browse/2023.1/PEAT
  - type: xlrelease.BooleanVariable
    key: folder.flat-pack-deploy
  - type: xlrelease.StringVariable
    key: folder.rulestudio_projects_version
    value: 1.185.0
  - type: xlrelease.StringVariable
    key: folder.decisioncenter_bc_service_peat_version
    value: decision_processing/decisioncenter_bc_service_peat/23.1.14/20230110162556
  - type: xlrelease.StringVariable
    key: folder.ksc.live_grid_servers
    value: "rsk0stl103, rsk0stl104, rsk0stl107, rsk0stl110, rsk0stl119, rsk0stl120"
  - type: xlrelease.StringVariable
    key: folder.ksc.staging_grid_server
    value: rsk0stl16
  - type: xlrelease.StringVariable
    key: folder.stl.staging_grid_server
    value: rsk0stl15
  - type: xlrelease.StringVariable
    key: folder.decision_center_ec_components_version
    value: decision_processing/decision_center_ec_components_peat/23.1.15/20230110162644
  - type: xlrelease.StringVariable
    key: folder.stl.grid_server_all
    value: "rsk0stl115, rsk0stl116, rsk0stl117, rsk0stl118, rsk0stl15"
  - type: xlrelease.StringVariable
    key: folder.ksc.live_grid_locators_servers
    value: "rsk0stl103, rsk0stl104"
  - type: xlrelease.StringVariable
    key: folder.stl.live_grid_locators_servers
    value: "rsk0stl115, rsk0stl116"
  - type: xlrelease.StringVariable
    key: folder.stl.live_grid_server
    value: rsk0stl115
  - type: xlrelease.StringVariable
    key: folder.stl.live_grid_servers
    value: "rsk0stl115, rsk0stl116, rsk0stl117, rsk0stl118"
  - type: xlrelease.StringVariable
    key: folder.decision_center_ec_webservices_version
    value: decision_processing/decision_center_ec_webservices_peat/23.1.15/20230110162227
  - type: xlrelease.StringVariable
    key: folder.ksc.live_grid_server
    value: rsk0stl103
  - type: xlrelease.StringVariable
    key: folder.artifact.host-manager-configuration.version
    value: 23.2.5
  - type: xlrelease.StringVariable
    key: folder.artifact.dmpdecisionserver_dvs_ext_1.version
    value: decision_processing/dmpdecisionserver_dvs_ext_1_peat/22.8.3/20230110163518
  - type: xlrelease.StringVariable
    key: folder.dmpdecisionserver_dvs_int_0_version
    value: decision_processing/dmpdecisionserver_dvs_int_0_peat/22.8.3/20230111014547
  - type: xlrelease.StringVariable
    key: folder.dmpdecisionserver_res_0_version
    value: decision_processing/dmpdecisionserver_res_0_peat/22.8.3/20230110163759
  - type: xlrelease.StringVariable
    key: folder.dmpdecisionserver_dvs_int_1_version
    value: decision_processing/dmpdecisionserver_dvs_int_1_peat/22.8.3/20230111012833
  - type: xlrelease.StringVariable
    key: folder.live_grid_version
    value: decision_processing/live_grid/7.121.4/20230216161150
  - type: xlrelease.StringVariable
    key: folder.env
    value: PEAT
  - type: xlrelease.MapStringStringVariable
    key: folder.live_grid_locator_any
    value:
      PEAT-KSC: "rsk0stl103[15000]"
      PEAT-STL: "rsk0stl115[15000]"
  - type: xlrelease.MapStringStringVariable
    key: folder.staging_grid_locator_any
    value:
      PEAT-STL: "rsk0stl15[15000]"
      PEAT-KSC: "rsk0stl16[15000]"
  - type: xlrelease.BooleanVariable
    key: folder.flatpack_legacy_deploy
  - type: xlrelease.StringVariable
    key: folder.flatpack_legacy_hosts
  - type: xlrelease.BooleanVariable
    key: folder.dmp_udt_ws_deploy
  - type: xlrelease.StringVariable
    key: folder.BOM_projects_to_verify
    value: "CommonBOM, StandInBOM, RBDBOM,PanProfileBOM"
  - type: xlrelease.MapStringStringVariable
    key: folder.staging_grid_members_all
    value:
      PEAT-STL: "rsk0stl15-locator1, rsk0stl15-server1, rsk0stl15-server2"
  - type: xlrelease.MapStringStringVariable
    key: folder.live_grid_members_all
    value:
      PEAT-STL: "rsk0stl15-locator1, rsk0stl15-server1, rsk0stl15-server2"
  - type: xlrelease.StringVariable
    key: folder.dmpdecisionserver_res_1_version
    value: decision_processing/dmpdecisionserver_res_1_peat/22.8.3/20230110163521
  - type: xlrelease.StringVariable
    key: folder.hostmanager_version
    value: 23.2.4
- template: PEAT-MASTER-PARENT
  description: This Template mirrors the PEAT DIP
  scheduledStartDate: 2019-02-06T09:00:00-06:00
  phases:
  - phase: XLR Release
    tasks:
    - name: Add Release tag
      type: xlr.AddTag
      newTag: "${release}"
      team: SCSSPeatDeployment
      tags:
      - '#bizops'
    - name: Print Release artifacts
      type: xlrelease.ScriptTask
      script: |-
        for var_name, var_value in folderVariables.items():
            if "-deploy" in var_name:
               print "%s = %s" % (var_name, folderVariables[var_name])
    color: '#0079BC'
  - phase: Pre-Implementation
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      team: SCSSPeatDeployment
      tags:
      - PEAT
      - '#bizops'
    - name: BOM/Rule Project
      type: xlrelease.Task
      description: |-
        | *Artifact Name(s)*:       | rulestudio.projects-${folder.rulestudio_projects_version}.zip |
        | ----- | ------ |
        | *BOM projects to deploy*  | ${folder..metadata.BOMProjects.toVerify} |
        | *Servers to STAGE ON*:    | local |
        | *STAGE PATH*:             | D:/${folder.release_year}.${folder.release_quarter}/${folder.release_environment} |
        ||https://artifacts.mastercard.int/artifactory/releases/com/mastercard/risk/brms/rulestudio.projects/ |
      team: SCSSPeatDeployment
      tags:
      - BOM
      - Shamrocks
      - Celtics
      - '#bizops'
    color: '#0099CC'
  - phase: Database Steps
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      team: SCSSPeatDeployment
      tags:
      - PEAT
      - '#bizops'
    - name: DDL Steps
      type: xlrelease.Task
      description: |-
        Check the deploy instructions and script using below link:

        ${folder.metadata_release_specific_dml_ddl}/DDL/
      team: DBA
      tags:
      - database
      - DDL
      - All Teams
      - '#dba'
      - DBA
    - name: DML Steps
      type: xlrelease.Task
      description: |-
        Check the deploy instructions and script using below link:

        ${folder.metadata_release_specific_dml_ddl}/DML/
      team: SCSSPeatDeployment
      tags:
      - database
      - '#bizops'
      - All Teams
      - dml
      - DBA
    color: '#0099CC'
  - phase: Parallel Deployment
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      team: SCSSPeatDeployment
      tags:
      - PEAT
      - '#bizops'
    - name: Deployment
      type: xlrelease.ParallelGroup
      tasks:
      - name: Transaction Deployment - STL
        type: xlrelease.CreateReleaseTask
        team: SCSSPeatDeployment
        tags:
        - '#bizops'
        newReleaseTitle: "${folder.release_year}.${folder.release_quarter}\
          \ PEAT Tx Processing - OFFICIAL RELEASE"
        templateVariables:
        - type: xlrelease.StringVariable
          key: release
          value: "${release}"
        createdReleaseId: "${STL-transaction-deployment-status}"
        riskProfile: Default risk profile
        template: ./PEAT-MASTER-TX-PROCESSING-STL
        folder: ./
      - name: Webapps Deployment
        type: xlrelease.CreateReleaseTask
        team: SCSSPeatDeployment
        tags:
        - '#bizops'
        newReleaseTitle: "${folder.release_year}.${folder.release_quarter}\
          \ PEAT - Webapps Deployment - OFFICIAL RELEASE"
        templateVariables:
        - type: xlrelease.StringVariable
          key: release
          value: "${release}"
        - type: xlrelease.StringVariable
          key: pple-transformer-channel
          inherited: true
        createdReleaseId: "${webapp-deployment-status}"
        riskProfile: Default risk profile
        template: ./PEAT-MASTER-WEBAPPS
        folder: ./
      - name: KSC Release
        type: xlrelease.SequentialGroup
        tags:
        - KSC
        tasks:
        - name: Lift gate to start Tx Processing KSC site deployment
          type: xlrelease.GateTask
          description: Gate to avoid unintentionally start of Tx Processing - KSC
            site deployment
          team: SCSSPeatDeployment
          tags:
          - KSC
          - '#bizops'
        - name: Transaction Deployment - KSC site
          type: xlrelease.CreateReleaseTask
          team: SCSSPeatDeployment
          tags:
          - KSC
          - '#bizops'
          newReleaseTitle: "${folder.release_year}.${folder.release_quarter}\
            \ - PEAT - Tx Processing - KSC site - OFFICIAL RELEASE"
          templateVariables:
          - type: xlrelease.StringVariable
            key: FlextpFlatpackNearRealTimeServersInvolved
            inherited: true
            value: "rsk0stl101, rsk0stl125, rsk0stl52"
          - type: xlrelease.StringVariable
            key: FlextpFlatpackAEM2DWServersInvolved
            value: "rsk0stl101, rsk0stl125, rsk0stl52"
          - type: xlrelease.StringVariable
            key: FlextpFlatpackNotificationServersInvolved
            value: "rsk0stl101, rsk0stl125, rsk0stl52"
          - type: xlrelease.StringVariable
            key: release
            value: "${release}"
          createdReleaseId: "${KSC-transaction-release-status}"
          riskProfile: Default risk profile
          template: ./PEAT-MASTER-TX-PROCESSING-KSC
          folder: ./
        - name: KSC Transaction Release Status
          type: xlr.WaitForReleaseStatus
          targetId: "${KSC-transaction-release-status}"
          untilCompleted: true
          tags:
          - '#bizops'
      - name: IOS Release
        type: xlrelease.SequentialGroup
        tags:
        - KSC
        tasks:
        - name: Lift gate to start Tx Processing IOS site deployment
          type: xlrelease.GateTask
          description: Gate to avoid unintentionally start of Tx Processing - IOS
            site deployment
          team: SCSSPeatDeployment
          tags:
          - KSC
          - '#bizops'
        - name: Transaction Deployment - IOS site
          type: xlrelease.CreateReleaseTask
          team: SCSSPeatDeployment
          tags:
          - IOS
          - '#bizops'
          newReleaseTitle: "${folder.release_year}.${folder.release_quarter}\
            \ - PEAT - Tx Processing - IOS site - OFFICIAL RELEASE"
          templateVariables:
          - type: xlrelease.StringVariable
            key: release
            inherited: true
            value: "${folder.metadata.release}"
          createdReleaseId: "${IOS-transaction-release-status}"
          riskProfile: Default risk profile
          template: ./PEAT-MASTER-TX-PROCESSING-IOS
          folder: ./
        - name: IOS Transaction Release Status
          type: xlr.WaitForReleaseStatus
          targetId: "${IOS-transaction-release-status}"
          untilCompleted: true
          tags:
          - '#bizops'
      - name: Webapp Deployment status
        type: xlr.WaitForReleaseStatus
        targetId: "${webapp-deployment-status}"
        untilCompleted: true
        tags:
        - '#bizops'
      - name: STL Transaction Deployment Status
        type: xlr.WaitForReleaseStatus
        targetId: "${STL-transaction-deployment-status}"
        untilCompleted: true
        tags:
        - '#bizops'
    color: '#0099CC'
  - phase: Publish BOM(s) and Rule Project(s)
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      team: SCSSPeatDeployment
      tags:
      - PEAT
      - '#bizops'
    - name: Publish BOM(s) and Rule Project(s)
      type: xlrelease.Task
      description: |-
        | *Server(s)*:              | local |
        | ---- | ---- |

          * Please use below URL to publish BOMs/Rule Projects to RTS.  (If Synchronization shows errors, right click on EMSBOM project and select 'Override and Publish')
            * https://fusion.mastercard.int/confluence/display/DM/Publish+BOM+Changes+in+ODM8922
          * PEAT URLs: https://peat.stl.rts1.brms.mastercard.int:25004/teamserver
        https://peat.stl.rts2.brms.mastercard.int:25004/teamserver
          * Login to RTS and verify if new BOMs broke any existing rules in the customer rule project by running 'Check Project Consistency' from the Analysis tab.
          * Recommend verifying  one rule project from each service:
            * [CardNotPesent for Merchant , MasterCard France rule project for issuer)]
          * BOM Projects to deploy:
            * ${folder..metadata.BOMProjects.toVerify}
      team: SCSSPeatDeployment
      tags:
      - Transaction Security
      - Celtics
      - '#bizops'
      - BOM
      - Shamrocks
    - name: Validate BOM deployment and Stage release
      type: xlrelease.GateTask
      description: |-
        1. Select a project that uses the bom that was deployed.

        2. go to project > analyze  > check project consistency
      team: SCSSPeatDeployment
      tags:
      - Transaction Security
      - Celtics
      - '#bizops'
      - BOM
      - Shamrocks
    color: '#0099CC'
  - phase: Post Release Clean up
    tasks:
    - name: Reset Folder Variables
      type: xlrelease.ScriptTask
      script: |-
        for var_name, var_value in folderVariables.items():
            if "-deploy" in var_name:
               print "%s = %s" % (var_name, folderVariables[var_name])
               folderVariables[var_name] = False
    color: '#0079BC'
  tags:
  - habitat
  variables:
  - type: xlrelease.StringVariable
    key: release
    value: "${folder.metadata.release}"
  - type: xlrelease.StringVariable
    key: KSC-transaction-release-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: IOS-transaction-release-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: webapp-deployment-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: STL-transaction-deployment-status
    requiresValue: false
    showOnReleaseStart: false
  extensions:
  - name: Dashboard
    type: xlrelease.Dashboard
    owner: e025882
    tiles:
    - name: Release progress
      type: xlrelease.ReleaseProgressTile
    - name: Release summary
      type: xlrelease.ReleaseSummaryTile
    - name: Resource usage
      type: xlrelease.ResourceUsageTile
    - name: Release timeline
      type: xlrelease.TimelineTile
    - name: Release health
      type: xlrelease.ReleaseHealthTile
    - name: Database
      type: xlrelease.TaskProgressTile
      row: 2
      col: 2
      tags:
      - dba
    - name: BOM
      type: xlrelease.TaskProgressTile
      row: 3
      col: 0
      tags:
      - bom
    - name: KSC
      type: xlrelease.TaskProgressTile
      row: 3
      col: 1
      tags:
      - ksc
  riskProfile: Default risk profile
- template: PEAT-MASTER-PARENT-rewrite
  description: This Template mirrors the PEAT DIP
  scheduledStartDate: 2019-02-06T09:00:00-06:00
  phases:
  - phase: XLR Release
    tasks:
    - name: Add Release tag
      type: xlr.AddTag
      newTag: "${release}"
      team: SCSSPeatDeployment
      tags:
      - '#bizops'
    - name: Print Deployable items
      type: xlrelease.ScriptTask
      tags:
      - '#bizops'
      script: |-
        for var_name, var_value in sorted(folderVariables.items()):
            if "-deploy" in var_name:
                if var_value == True:
                    print "%s = %s" % (var_name, folderVariables[var_name])
    color: '#0079BC'
  - phase: Pre-Implementation
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      team: SCSSPeatDeployment
      tags:
      - PEAT
      - '#bizops'
    - name: BOM/Rule Project
      type: xlrelease.Task
      description: |-
        | *Artifact Name(s)*:       | rulestudio.projects-${folder.rulestudio_projects_version}.zip |
        | ----- | ------ |
        | *BOM projects to deploy*  | ${folder..metadata.BOMProjects.toVerify} |
        | *Servers to STAGE ON*:    | local |
        | *STAGE PATH*:             | D:/${folder.release_year}.${folder.release_quarter}/${folder.release_environment} |
        ||https://artifacts.mastercard.int/artifactory/releases/com/mastercard/risk/brms/rulestudio.projects/ |
      team: SCSSPeatDeployment
      tags:
      - BOM
      - Shamrocks
      - Celtics
      - '#bizops'
    color: '#0099CC'
  - phase: Database Steps
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      team: SCSSPeatDeployment
      tags:
      - PEAT
      - '#bizops'
    - name: DDL Steps
      type: xlrelease.Task
      description: |-
        Check the deploy instructions and script using below link:

        ${folder.metadata_release_specific_dml_ddl}/DDL/
      team: DBA
      tags:
      - database
      - DDL
      - All Teams
      - '#dba'
      - DBA
    - name: DML Steps
      type: xlrelease.Task
      description: |-
        Check the deploy instructions and script using below link:

        ${folder.metadata_release_specific_dml_ddl}/DML/
      team: SCSSPeatDeployment
      tags:
      - database
      - '#bizops'
      - All Teams
      - dml
      - DBA
    color: '#0099CC'
  - phase: Parallel Deployment
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      team: SCSSPeatDeployment
      tags:
      - PEAT
      - '#bizops'
    - name: Deployment
      type: xlrelease.ParallelGroup
      scheduledStartDate: 2019-02-06T15:01:00-06:00
      tasks:
      - name: Transactions
        type: xlrelease.ParallelGroup
        tasks:
        - name: STL Release
          type: xlrelease.SequentialGroup
          tasks:
          - name: Transaction Deployment - STL
            type: xlrelease.CreateReleaseTask
            team: SCSSPeatDeployment
            tags:
            - '#bizops'
            newReleaseTitle: "${release} PEAT Tx Processing - OFFICIAL RELEASE"
            templateVariables:
            - type: xlrelease.StringVariable
              key: release
              value: "${release}"
            - type: xlrelease.StringVariable
              key: SITE
              description: "STL, KSC, PNQ"
              inherited: true
              value: STL
            - type: xlrelease.StringVariable
              key: hostmanager-site
              inherited: true
              value: WNG
            - type: xlrelease.StringVariable
              key: peat-habitat-channel
              value: "${folder.peat_habitat_stl_channel}"
            - type: xlrelease.StringVariable
              key: hostmanager-deploy
              value: "${folder.hostmanager_deploy}"
            - type: xlrelease.StringVariable
              key: grid-deploy
              value: "${folder.grid_deploy}"
            - type: xlrelease.StringVariable
              key: live_grid_servers
              value: "${folder.stl.live_grid_servers}"
            - type: xlrelease.StringVariable
              key: live_grid_servers_all
              inherited: true
              value: "rsk0stl115, rsk0stl116, rsk0stl117, rsk0stl118"
            - type: xlrelease.StringVariable
              key: staging_grid_servers_all
              inherited: true
              value: rsk0stl15
            - type: xlrelease.StringVariable
              key: hostmanager-toml-deploy
              value: "${folder.hostmanager-toml-deploy}"
            - type: xlrelease.StringVariable
              key: grid_all
              value: "${folder.stl.grid_server_all}"
            - type: xlrelease.StringVariable
              key: flat-pack-deploy
              value: "${folder.flat-pack-deploy}"
            - type: xlrelease.StringVariable
              key: flextp-hosts
              inherited: true
            - type: xlrelease.StringVariable
              key: flextp-flatpack-site
              inherited: true
            createdReleaseId: "${STL-transaction-deployment-status}"
            riskProfile: Default risk profile
            template: ./PEAT-MASTER-TX-PROCESSING-rewrite
            folder: ./
          - name: STL Transaction Deployment Status
            type: xlr.WaitForReleaseStatus
            targetId: "${STL-transaction-deployment-status}"
            untilCompleted: true
            tags:
            - '#bizops'
        - name: KSC Release
          type: xlrelease.SequentialGroup
          tags:
          - KSC
          tasks:
          - name: Lift gate to start Tx Processing KSC site deployment
            type: xlrelease.GateTask
            description: Gate to avoid unintentionally start of Tx Processing - KSC
              site deployment
            team: SCSSPeatDeployment
            tags:
            - KSC
            - '#bizops'
          - name: Transaction Deployment - KSC site
            type: xlrelease.CreateReleaseTask
            team: SCSSPeatDeployment
            tags:
            - KSC
            - '#bizops'
            newReleaseTitle: "${release} - PEAT - Tx Processing - KSC site - OFFICIAL\
              \ RELEASE"
            templateVariables:
            - type: xlrelease.StringVariable
              key: release
              value: "${release}"
            - type: xlrelease.StringVariable
              key: SITE
              description: "STL, KSC, PNQ"
              value: KSC
            - type: xlrelease.StringVariable
              key: hostmanager-site
              value: KC
            - type: xlrelease.StringVariable
              key: peat-habitat-channel
              value: peat-ksc
            - type: xlrelease.StringVariable
              key: hostmanager-deploy
              value: "${folder.hostmanager_deploy}"
            - type: xlrelease.StringVariable
              key: grid-deploy
              value: "${folder.grid_deploy}"
            - type: xlrelease.StringVariable
              key: live_grid_servers
              value: "${folder.ksc.live_grid_servers}"
            - type: xlrelease.StringVariable
              key: live_grid_servers_all
              inherited: true
              value: "rsk0stl115, rsk0stl116, rsk0stl117, rsk0stl118"
            - type: xlrelease.StringVariable
              key: staging_grid_servers_all
              inherited: true
              value: rsk0stl15
            - type: xlrelease.StringVariable
              key: hostmanager-toml-deploy
              value: "${folder.hostmanager-toml-deploy}"
            - type: xlrelease.StringVariable
              key: grid_all
              value: "${folder.stl.live_grid_servers}"
            - type: xlrelease.StringVariable
              key: flat-pack-deploy
              value: "${folder.flat-pack-deploy}"
            - type: xlrelease.StringVariable
              key: flextp-hosts
              inherited: true
            - type: xlrelease.StringVariable
              key: flextp-flatpack-site
              inherited: true
            createdReleaseId: "${KSC-transaction-release-status}"
            riskProfile: Default risk profile
            template: ./PEAT-MASTER-TX-PROCESSING-rewrite
            folder: ./
          - name: KSC Transaction Release Status
            type: xlr.WaitForReleaseStatus
            targetId: "${KSC-transaction-release-status}"
            untilCompleted: true
            tags:
            - '#bizops'
        - name: IOS Release
          type: xlrelease.SequentialGroup
          tags:
          - KSC
          tasks:
          - name: Lift gate to start Tx Processing IOS site deployment
            type: xlrelease.GateTask
            description: Gate to avoid unintentionally start of Tx Processing - IOS
              site deployment
            team: SCSSPeatDeployment
            tags:
            - KSC
            - '#bizops'
          - name: Transaction Deployment - IOS site
            type: xlrelease.CreateReleaseTask
            team: SCSSPeatDeployment
            tags:
            - IOS
            - '#bizops'
            newReleaseTitle: "${release} - PEAT - Tx Processing - IOS site - OFFICIAL\
              \ RELEASE"
            templateVariables:
            - type: xlrelease.StringVariable
              key: release
              value: "${release}"
            - type: xlrelease.StringVariable
              key: SITE
              description: "STL, KSC, PNQ"
              value: PNQ
            - type: xlrelease.StringVariable
              key: hostmanager-site
              value: PNQ
            - type: xlrelease.StringVariable
              key: peat-habitat-channel
              value: peat-pnq
            - type: xlrelease.StringVariable
              key: hostmanager-deploy
              value: "${folder.hostmanager_deploy}"
            - type: xlrelease.StringVariable
              key: grid-deploy
              value: "${folder.grid_deploy}"
            - type: xlrelease.StringVariable
              key: live_grid_servers
              inherited: true
              value: "rsk0stl61, rsk0stl62, rsk0stl115, rsk0stl116, rsk0stl117, rsk0stl118"
            - type: xlrelease.StringVariable
              key: live_grid_servers_all
              inherited: true
              value: "rsk0stl115, rsk0stl116, rsk0stl117, rsk0stl118"
            - type: xlrelease.StringVariable
              key: staging_grid_servers_all
              inherited: true
              value: rsk0stl15
            - type: xlrelease.StringVariable
              key: hostmanager-toml-deploy
              value: "${folder.hostmanager-toml-deploy}"
            - type: xlrelease.StringVariable
              key: grid_all
              value: "${folder.stl.live_grid_servers}"
            - type: xlrelease.StringVariable
              key: flat-pack-deploy
              value: "${folder.flat-pack-deploy}"
            - type: xlrelease.StringVariable
              key: flextp-hosts
              inherited: true
            - type: xlrelease.StringVariable
              key: flextp-flatpack-site
              inherited: true
            createdReleaseId: "${IOS-transaction-release-status}"
            riskProfile: Default risk profile
            template: ./PEAT-MASTER-TX-PROCESSING-rewrite
            folder: ./
          - name: IOS Transaction Release Status
            type: xlr.WaitForReleaseStatus
            targetId: "${IOS-transaction-release-status}"
            untilCompleted: true
            tags:
            - '#bizops'
      - name: WebApps Release
        type: xlrelease.SequentialGroup
        tasks:
        - name: Lift gate to start WebApps
          type: xlrelease.GateTask
          description: Gate to avoid unintentionally start WebApp Deployment
          team: SCSSPeatDeployment
          tags:
          - KSC
          - '#bizops'
        - name: Webapps Deployment
          type: xlrelease.CreateReleaseTask
          team: SCSSPeatDeployment
          tags:
          - '#bizops'
          newReleaseTitle: "${release} - PEAT - Webapps Deployment - OFFICIAL RELEASE"
          templateVariables:
          - type: xlrelease.StringVariable
            key: release
            value: "${release}"
          - type: xlrelease.StringVariable
            key: pple-transformer-channel
            inherited: true
            value: peat
          - type: xlrelease.StringVariable
            key: dmp_udt_ws-deploy
            value: "${folder.dmp_udt_ws_deploy}"
          - type: xlrelease.StringVariable
            key: decision_center_ec_components-deploy
            value: "${folder.decision_center_ec_components-deploy}"
          - type: xlrelease.StringVariable
            key: decision_center_ec_webservices-deploy
            value: "${folder.decision_center_ec_webservices-deploy}"
          - type: xlrelease.StringVariable
            key: decisioncenter_bc_service-deploy
            value: "${folder.decisioncenter_bc_service_deploy}"
          - type: xlrelease.StringVariable
            key: decisionserver_res_service-deploy
            value: "${folder.decisionserver_res_service-deploy}"
          - type: xlrelease.StringVariable
            key: app-bootstrapper-deploy
            value: "${folder.app_bootstrapper_deploy}"
          - type: xlrelease.StringVariable
            key: tfc_transactionviewer_deploy
            value: "${folder.tfc_transactionviewer_deploy}"
          - type: xlrelease.StringVariable
            key: tfc-tfcconfig-deploy
            value: "${folder.tfc_tfcconfig_deploy}"
          - type: xlrelease.StringVariable
            key: tfc-listmanager-deploy
            value: "${folder.tfc_listmanager_deploy}"
          - type: xlrelease.StringVariable
            key: tfc-tfcgateway-deploy
            value: "${folder.tfc_tfcgateway_deploy}"
          - type: xlrelease.StringVariable
            key: tfc-di-deploy
            value: "${folder.tfc_di_deploy}"
          - type: xlrelease.StringVariable
            key: tfc-rulemanager-deploy
            value: "${folder.tfc_rulemanager_deploy}"
          - type: xlrelease.StringVariable
            key: iisreports-pfc-deploy
            value: "${folder.tfc_iisreports_pfc_deploy}"
          - type: xlrelease.StringVariable
            key: rule-test-service-pcf-deploy
            value: "${folder.tfc_rule_test_service_pcf_deploy}"
          - type: xlrelease.StringVariable
            key: rule-metric-service-pcf-deploy
            value: "${folder.ttfc_rule_metric_service_pcf_deploy}"
          - type: xlrelease.StringVariable
            key: app-platform-deploy
            value: "${folder.app_platform_deploy}"
          - type: xlrelease.StringVariable
            key: rbd-webservices-deploy
            value: "${folder.rbd_webservices_deploy}"
          - type: xlrelease.StringVariable
            key: rbd-nudata-deploy
            value: "${folder.rbd_nudata_deploy}"
          - type: xlrelease.StringVariable
            key: ai-batch-processor-toml-deploy
            value: "${folder.ai-batch-processor-toml-deploy}"
          - type: xlrelease.StringVariable
            key: abu-maws-springboot-deploy
            value: "${folder.abu_maws_springboot_deploy}"
          - type: xlrelease.StringVariable
            key: abu-push-deploy
            value: "${folder.abu_push_deploy}"
          - type: xlrelease.StringVariable
            key: abu-updates-deploy
            value: "${folder.abu_updates_deploy}"
          - type: xlrelease.StringVariable
            key: consumer-controls-deploy
            value: "${folder.consumer_controls_deploy}"
          - type: xlrelease.StringVariable
            key: consumer-controls-toml-deploy
            value: "${folder.consumer_controls_toml_deploy}"
          - type: xlrelease.StringVariable
            key: grid-profile-loader-deploy
            value: "${folder.grid_profile_loader_deploy}"
          - type: xlrelease.StringVariable
            key: grid-profile-loader-toml-deploy
            value: "${folder.grid_profile_loader_toml_deploy}"
          - type: xlrelease.StringVariable
            key: account-intelligence-batch-process-deploy
            value: "${folder.account_intelligence_batch_process_deploy}"
          - type: xlrelease.StringVariable
            key: account-intelligence-batch-process-toml-deploy
            value: "${folder.account_intelligence_batch_process_toml_deploy}"
          - type: xlrelease.StringVariable
            key: pan-profile-lifecycle-event-transformer-deploy
            value: "${folder.pan_profile_lifecycle_event_transformer_deploy}"
          - type: xlrelease.StringVariable
            key: pan-profile-lifecycle-event-transformer-toml-deploy
            value: "${folder.pan-profile-lifecycle-event-transformer-toml-deploy}"
          - type: xlrelease.StringVariable
            key: decisionserver_res_service-channel
            inherited: true
            value: peat
          - type: xlrelease.StringVariable
            key: decisioncenter_bc_service-channel
            inherited: true
            value: peat
          - type: xlrelease.StringVariable
            key: decision_center_ec_components-channel
            inherited: true
            value: peat
          - type: xlrelease.StringVariable
            key: decision_center_ec_webservices-channel
            inherited: true
            value: peat
          - type: xlrelease.StringVariable
            key: dmp_udt_ws-channel
            inherited: true
            value: peat
          - type: xlrelease.StringVariable
            key: dmprulewebservice_pcf-deploy
            value: "${folder.dmprulewebservice_pcf-deploy}"
          - type: xlrelease.StringVariable
            key: the_fraud_center_apache24-deploy
            value: "${folder.the_fraud_center_apache24_deploy}"
          - type: xlrelease.StringVariable
            key: the_fraud_center_apache24-toml-deploy
            value: "${folder.the_fraud_center_apache24-toml_deploy}"
          - type: xlrelease.StringVariable
            key: rbd-webservices-toml-deploy
            value: "${folder.rbd_webservices_toml_deploy}"
          - type: xlrelease.StringVariable
            key: rbd-nudata-toml-deploy
            value: "${folder.rbd_nudata_toml_deploy}"
          - type: xlrelease.StringVariable
            key: tfc-tfcgateway-toml-deploy
            value: "${folder.tfc_tfcgateway_toml_deploy}"
          - type: xlrelease.StringVariable
            key: tfc-di-toml-deploy
            value: "${folder.tfc_di_toml_deploy}"
          - type: xlrelease.StringVariable
            key: tfc-rulemanager-toml-deploy
            value: "${folder.tfc_rulemanager_toml_deploy}}"
          - type: xlrelease.StringVariable
            key: tfc-transactionviewer-toml-deploy
            value: "${folder.tfc-transactionviewer-toml-deploy}"
          - type: xlrelease.StringVariable
            key: tfc-listmanager-toml-deploy
            value: "${folder.tfc-listmanager-toml-deploy}"
          - type: xlrelease.StringVariable
            key: app_customer_support-deploy
            value: "${folder.app_customer_support-deploy}"
          - type: xlrelease.StringVariable
            key: abu_push_notify_adapter_toml-deploy
            value: "${folder.abu_push_notify_adapter_toml-deploy}"
          createdReleaseId: "${webapp-deployment-status}"
          riskProfile: Default risk profile
          template: ./PEAT-MASTER-WEBAPPS-rewrite
          folder: ./
        - name: Webapp Deployment status
          type: xlr.WaitForReleaseStatus
          targetId: "${webapp-deployment-status}"
          untilCompleted: true
          tags:
          - '#bizops'
    color: '#0099CC'
  - phase: Publish BOM(s) and Rule Project(s)
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      team: SCSSPeatDeployment
      tags:
      - PEAT
      - '#bizops'
    - name: Publish BOM(s) and Rule Project(s)
      type: xlrelease.Task
      description: |-
        | *Server(s)*:              | local |
        | ---- | ---- |

          * Please use below URL to publish BOMs/Rule Projects to RTS.  (If Synchronization shows errors, right click on EMSBOM project and select 'Override and Publish')
            * https://fusion.mastercard.int/confluence/display/DM/Publish+BOM+Changes+in+ODM8922
          * PEAT URLs: https://peat.stl.rts1.brms.mastercard.int:25004/teamserver
        https://peat.stl.rts2.brms.mastercard.int:25004/teamserver
          * Login to RTS and verify if new BOMs broke any existing rules in the customer rule project by running 'Check Project Consistency' from the Analysis tab.
          * Recommend verifying  one rule project from each service:
            * [CardNotPesent for Merchant , MasterCard France rule project for issuer)]
          * BOM Projects to deploy:
            * ${folder.BOM_projects_to_verify}
      team: SCSSPeatDeployment
      tags:
      - Transaction Security
      - Celtics
      - '#bizops'
      - BOM
      - Shamrocks
    - name: Validate BOM deployment and Stage release
      type: xlrelease.GateTask
      description: |-
        1. Select a project that uses the bom that was deployed.

        2. go to project > analyze  > check project consistency
      team: SCSSPeatDeployment
      tags:
      - Transaction Security
      - Celtics
      - '#bizops'
      - BOM
      - Shamrocks
    color: '#0099CC'
  - phase: Post Release clean up
    tasks:
    - name: reset folder variables
      type: xlrelease.ScriptTask
      tags:
      - '#bizops'
      script: |-
        for var_name, var_value in folderVariables.items():
            if "-deploy" in var_name:
               print "%s = %s" % (var_name, folderVariables[var_name])
               folderVariables[var_name] = False
    color: '#0079BC'
  tags:
  - master
  - rewrite
  variables:
  - type: xlrelease.StringVariable
    key: release
  - type: xlrelease.StringVariable
    key: KSC-transaction-release-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: IOS-transaction-release-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: webapp-deployment-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: STL-transaction-deployment-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.PasswordStringVariable
    key: dmp_xlr_ad_pw
    requiresValue: false
    showOnReleaseStart: false
    value: !value "xlrelease_PasswordStringVariable_dmp_xlr_ad_pw_value"
  scriptUsername: dmp_xlr
  extensions:
  - name: Dashboard
    type: xlrelease.Dashboard
    owner: e025882
    tiles:
    - name: Release progress
      type: xlrelease.ReleaseProgressTile
    - name: Release summary
      type: xlrelease.ReleaseSummaryTile
    - name: Resource usage
      type: xlrelease.ResourceUsageTile
    - name: Release timeline
      type: xlrelease.TimelineTile
    - name: Release health
      type: xlrelease.ReleaseHealthTile
    - name: Database
      type: xlrelease.TaskProgressTile
      row: 2
      col: 2
      tags:
      - dba
    - name: BOM
      type: xlrelease.TaskProgressTile
      row: 3
      col: 0
      tags:
      - bom
    - name: KSC
      type: xlrelease.TaskProgressTile
      row: 3
      col: 1
      tags:
      - ksc
  variableMapping:
    scriptUserPassword: "${dmp_xlr_ad_pw}"
  riskProfile: Default risk profile
- template: PEAT-MASTER-TX-PROCESSING-IOS
  description: This Template mirrors the PEAT DIP
  scheduledStartDate: 2019-02-06T09:00:00-06:00
  phases:
  - phase: XLR Release
    tasks:
    - name: Add Release tag
      type: xlr.AddTag
      newTag: "${release}"
      tags:
      - '#bizops'
    color: '#0079BC'
  - phase: Tx Processing Deployment
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      team: SCSSPeatDeployment
      tags:
      - '#bizops'
    - name: Transaction Sequential
      type: xlrelease.SequentialGroup
      tags:
      - '#bizops'
      tasks:
      - name: Stop FlexTP Instances - IOS
        type: xlrelease.SequentialGroup
        tags:
        - HM
        - Habitat
        - '#bizops'
        tasks:
        - name: HM Stop Site
          type: xlrelease.Task
          description: |-
            If already logged into H8s, skip to step #6.
            1. Login to the host.
            2. sudo su - fraud
            3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
            4. Start HM CLI ./hm_and_cli_start.sh
            5. Provide RDS database login credentials for that given environment

            6. Stop all instances associated with the site PNQ
            stop site -s PNQ

            7. Verify all instances stopped using the view status command.
          team: SCSSPeatDeployment
          tags:
          - '#bizops'
      - name: Grid - IOS
        type: xlrelease.SequentialGroup
        flagComment: Grid not currently in PEAT-IOS
        precondition: "False"
        tags:
        - grid
        - IOS
        tasks:
        - name: Stop Grid Staging - IOS
          type: xlrelease.SequentialGroup
          tags:
          - grid
          - IOS
          tasks:
          - name: Stop Grid Staging Server 2 - IOS
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/stop/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/stop/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - grid
            - staging_grid_server2
            - IOS
            - '#bizops'
          - name: Stop Grid Staging Server - IOS
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/stop/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/stop/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - grid
            - staging_grid_server
            - IOS
            - '#bizops'
          - name: Stop Grid Staging Locator - IOS
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/stop/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/stop/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - staging_grid_locator
            - grid
            - IOS
            - '#bizops'
          - name: Validate Grid Staging - IOS has stopped
            type: xlrelease.GateTask
            description: |-
              Login to rsk0stl16
              cd /apps_01/fraud/gridstaging/scripts
              ./statusPhysicalMachine.sh -a stop
              No pids should be displayed
            team: SCSSPeatDeployment
            tags:
            - grid
            - IOS
            - '#bizops'
        - name: Stop Live Grid - IOS
          type: xlrelease.SequentialGroup
          tags:
          - grid
          - live_grid
          - IOS
          tasks:
          - name: Habitat Live Grid Worker Stop
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/stop/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/stop/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
            - grid
            - IOS
            - live_grid_worker
            - live_grid
          - name: Habitat Live Grid Server Stop
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/stop/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/stop/
            team: SCSSProdDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
            - grid
            - IOS
            - live_grid_server
            - live_grid
          - name: Habitat Live Grid Locator Stop
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/stop/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/stop/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
            - grid
            - IOS
            - live_grid_locator
            - live_grid
          - name: Validate Grid Live - IOS has stopped
            type: xlrelease.GateTask
            description: |-
              login to rsk0stl65 / 66 / 67 / 68

              cd /apps_01/fraud/grid/scripts

              ./statusPhysicalMachine.sh -a stop

              No pids should be displayed
            team: SCSSPeatDeployment
            tags:
            - live_grid
            - IOS
            - '#bizops'
        - name: Promote Grid - IOS
          type: xlrelease.SequentialGroup
          tags:
          - grid
          - IOS
          tasks:
          - name: TOML Grid Live
            type: xlrelease.SequentialGroup
            team: SCSSPeatDeployment
            tags:
            - live_grid
            - TOML
            - '#bizops'
            tasks:
            - name: Deploy Live Grid Locator TOML - IOS
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              jobParameters: |-
                habChannel=peat-ksc
                habServiceGroup=peat
                habService=decision_processing/live_grid_locator
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - TOML
              - Habitat
              - grid
              - live_grid_locator
              - live_grid
            - name: Deploy Live Grid Server TOML - IOS
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              jobParameters: |-
                habChannel=peat-ksc
                habServiceGroup=peat
                habService=decision_processing/live_grid_server
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - TOML
              - '#bizops'
              - Habitat
              - grid
              - live_grid_server
              - live_grid
            - name: Deploy Live Grid Worker TOML - IOS
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              jobParameters: |-
                habChannel=peat-ksc
                habServiceGroup=peat
                habService=decision_processing/live_grid_worker
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - TOML
              - '#bizops'
              - Habitat
              - grid
              - live_grid_worker
              - live_grid
          - name: TOML Grid Staging
            type: xlrelease.SequentialGroup
            tags:
            - grid
            - staging_grid
            - TOML
            tasks:
            - name: Deploy Staging Grid Locator TOML - IOS
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              jobParameters: |-
                habChannel=peat-ksc
                habServiceGroup=peat
                habService=decision_processing/staging_grid_locator
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - staging_grid_locator
              - TOML
              - '#bizops'
              - Habitat
              - grid
              - staging_grid
            - name: Deploy Staging Grid Server TOML - IOS
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              jobParameters: |-
                habChannel=peat-ksc
                habServiceGroup=peat
                habService=decision_processing/staging_grid_server
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - TOML
              - '#bizops'
              - Habitat
              - grid
              - staging_grid
              - staging_grid_server
            - name: Deploy Live Grid Server 2 TOML - IOS
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              jobParameters: |-
                habChannel=peat-ksc
                habServiceGroup=peat
                habService=decision_processing/staging_grid_server2
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - TOML
              - '#bizops'
              - Habitat
              - grid
              - staging_grid_server2
              - staging_grid
          - name: Promote Live Grid
            type: xlrelease.SequentialGroup
            tags:
            - grid
            - live_grid
            tasks:
            - name: Promote Live Grid Locator- IOS
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/live_grid_locator-promote-specific-param/
              jobParameters: |-
                packageIdent=${folder.artifact.grid-live-locator.version}
                channel=peat-ksc
                dryRun=false
                PLATFORM_FILTER=OEL6
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/live_grid_locator-promote-specific-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
              - Habitat
              - grid
              - live_grid_locator
              - live_grid
            - name: Promote Live Grid Server - IOS
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/live_grid_server-promote-specific-param/
              jobParameters: |-
                packageIdent=${folder.artifact.grid-live-server.version}
                channel=peat-ksc
                dryRun=false
                PLATFORM_FILTER=OEL6
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/live_grid_server-promote-specific-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
              - Habitat
              - grid
              - live_grid_server
              - live_grid
            - name: Promote Live Grid Worker - IOS
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/live_grid_worker-promote-specific-param/
              jobParameters: |-
                packageIdent=${folder.artifact.grid-live-worker.version}
                channel=peat-ksc
                dryRun=false
                PLATFORM_FILTER=OEL6
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/live_grid_worker-promote-specific-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
              - Habitat
              - grid
              - live_grid_worker
              - live_grid
          - name: Promote Staging Grid
            type: xlrelease.SequentialGroup
            tags:
            - grid
            - staging_grid
            tasks:
            - name: Promote Staging Grid Locator- IOS
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/staging_grid_locator-promote-specific-param/
              jobParameters: |-
                packageIdent=${folder.artifact.grid-staging-locator.version}
                channel=peat-ksc
                dryRun=false
                PLATFORM_FILTER=OEL6
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/staging_grid_locator-promote-specific-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - staging_grid_locator
              - '#bizops'
              - Habitat
              - grid
              - staging_grid
            - name: Promote Staging Grid Server - IOS
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/staging_grid_server-promote-specific-param/
              jobParameters: |-
                packageIdent=${folder.artifact.grid-staging-server.version}
                channel=peat-ksc
                dryRun=false
                PLATFORM_FILTER=OEL6
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/staging_grid_server-promote-specific-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
              - Habitat
              - grid
              - staging_grid
              - staging_grid_server
            - name: Promote Staging Grid Server 2 - IOS
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/staging_grid_server2-promote-specific-param/
              jobParameters: |-
                packageIdent=${folder.artifact.grid-staging-server-2.version}
                channel=peat-ksc
                dryRun=false
                PLATFORM_FILTER=OEL6
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/staging_grid_server2-promote-specific-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
              - Habitat
              - grid
              - staging_grid_server2
              - staging_grid
          - name: Validate Grid Live - IOS has been deployed
            type: xlrelease.GateTask
            description: |-
              Login to rsk0stl65/66/67/68

              cd /apps_01/fraud

              ls -ltr

              The grid symbolic link should point to the version you had deployed.
            team: SCSSPeatDeployment
            tags:
            - grid
            - live_grid
            - '#bizops'
        - name: Start Grid - IOS
          type: xlrelease.SequentialGroup
          tags:
          - grid
          tasks:
          - name: Live Grid
            type: xlrelease.SequentialGroup
            tags:
            - grid
            - live_grid
            tasks:
            - name: Start Live Grid Locator - IOS
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/start/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/start/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
              - Habitat
              - grid
              - live_grid_locator
              - live_grid
            - name: Start Live Grid Server - IOS
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/start/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/start/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
              - Habitat
              - grid
              - live_grid_server
              - live_grid
            - name: Start Live Grid Worker - IOS
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/start/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/start/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
              - Habitat
              - grid
              - live_grid_worker
              - live_grid
            - name: Status
              type: xlrelease.SequentialGroup
              tasks:
              - name: Status Live Grid Locator
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/status/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - '#bizops'
                - Habitat
                - grid
                - live_grid_locator
                - live_grid
              - name: Status Live Grid Server
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/status/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - '#bizops'
                - Habitat
                - grid
                - live_grid_server
                - live_grid
              - name: Status Live Grid Worker
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/status/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - '#bizops'
                - Habitat
                - grid
                - live_grid_worker
                - live_grid
              - name: Validate Status is Up
                type: xlrelease.GateTask
                description: Jenkin's jobs should show that "status" is "up"
                team: SCSSPeatDeployment
                tags:
                - grid
                - '#bizops'
          - name: Staging Grid
            type: xlrelease.SequentialGroup
            tags:
            - grid
            - staging_grid
            tasks:
            - name: Start Staging Grid Locator - IOS
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/start/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/start/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - staging_grid_locator
              - '#bizops'
              - Habitat
              - grid
              - staging_grid
            - name: Start Staging Grid Server - IOS
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/start/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/start/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
              - Habitat
              - grid
              - staging_grid
              - staging_grid_server
            - name: Start Staging Grid Server 2 - IOS
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/start/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/start/
              team: SCSSProdDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
              - Habitat
              - grid
              - staging_grid_server2
              - staging_grid
            - name: Status
              type: xlrelease.SequentialGroup
              tags:
              - '#bizops'
              tasks:
              - name: Status Staging Grid Locator
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/status/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_locator
                - '#bizops'
                - Habitat
                - grid
                - staging_grid
              - name: Status Staging Grid Server
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/status/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - '#bizops'
                - Habitat
                - grid
                - staging_grid
                - staging_grid_server
              - name: Status Staging Grid Server 2
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/status
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/status/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - '#bizops'
                - Habitat
                - grid
                - staging_grid_server2
                - staging_grid
              - name: Validate Status is Up
                type: xlrelease.GateTask
                description: Jenkin's jobs should show that "status" is "up"
                team: SCSSPeatDeployment
                tags:
                - '#bizops'
      - name: Habitat- Host Manager Deployment - IOS
        type: xlrelease.SequentialGroup
        tags:
        - HM
        - Habitat
        tasks:
        - name: Habitat
          type: xlrelease.SequentialGroup
          tags:
          - Habitat
          tasks:
          - name: IOS
            type: xlrelease.SequentialGroup
            tags:
            - IOS
            tasks:
            - name: Hostmanager TOML
              type: xlrelease.SequentialGroup
              team: SCSSPeatDeployment
              precondition: "False"
              tags:
              - TOML
              - '#bizops'
              tasks:
              - name: TOML-FlexTP-IOS
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-pnq/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-pnq/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - HM
                - flextp
                - TOML
                - '#bizops'
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                team: SCSSPeatDeployment
                tags:
                - '#bizops'
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
              - name: Validate TOML
                type: xlrelease.GateTask
                team: SCSSPeatDeployment
                tags:
                - TOML
                - '#bizops'
            - name: Promote - FlexTP - IOS - linux_kernel2
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
              jobParameters: |-
                packageIdent=${folder.flextp_oel6_version}
                channel=peat-pnq
                platform=linux_kernel2
                contactList=Chandra.Nerella@mastercard.com
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - HM
              - flextp
              - Habitat
              - '#bizops'
            - name: "Sleep ${folder.metadata.time} seconds"
              type: xlrelease.ScriptTask
              team: SCSSPeatDeployment
              tags:
              - '#bizops'
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: Promote - FlexTP - IOS - linux
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
              jobParameters: |-
                packageIdent=${folder.flextp+oel7_version}
                channel=peat-pnq
                platform=linux
                contactList=Chandra.Nerella@mastercard.com
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - HM
              - flextp
              - Habitat
              - '#bizops'
            - name: "Sleep ${folder.metadata.time} seconds"
              type: xlrelease.ScriptTask
              team: SCSSPeatDeployment
              tags:
              - '#bizops'
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: Status - FlexTP - IOS
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-pnq-peat/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-pnq-peat/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - HM
              - flextp
              - Habitat
              - '#bizops'
            - name: Validation host manager
              type: xlrelease.GateTask
              description: |-
                On the Hosts ${folder.all_peat_ios_servers} perform the below steps

                1. Login to the box and Switch to fraud user
                2. cd /apps_01/fruad/hubernetes/bin
                3. run './h8s_version.sh'
                4. The Host Manager Configuration version must match - ${folder.artifact.host-manager-configuration.version}
                5. Host Manger CLI version must match ${folder.host_manager_cli_version}
                6. Host Manager version must match ${folder.host_manager_version}
              team: SCSSPeatDeployment
              tags:
              - HM
              - '#bizops'
      - name: Host Manager Commands
        type: xlrelease.SequentialGroup
        tasks:
        - name: Deploy Flatpack
          type: xlrelease.Task
          description: |-
            If already logged into H8s, skip to step #6.
            1. Login to the host.
            2. sudo su - fraud
            3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
            4. Start HM CLI ./hm_and_cli_start.sh
            5. Provide RDS database login credentials for that given environment

            6. Run deploy flatpack command
            deploy flatpack -s PNQ

            Before Selecting the "Y" option  validate all flatpack version to match with apmate.
          team: SCSSPeatDeployment
          tags:
          - '#bizops'
        - name: Recreate Site
          type: xlrelease.Task
          description: |-
            If already logged into H8s, skip to step #6.
            1. Login to the host.
            2. sudo su - fraud
            3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
            4. Start HM CLI ./hm_and_cli_start.sh
            5. Provide RDS database login credentials for that given environment

            6. Recreate host with Force option
            recreate site -s PNQ -f

            7. use view status with the request id to check the status of the command. The command should complete to success.
          team: SCSSPeatDeployment
          tags:
          - '#bizops'
        - name: Start Site
          type: xlrelease.Task
          description: |-
            If already logged into H8s, skip to step #6.
            1. Login to the host.
            2. sudo su - fraud
            3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
            4. Start HM CLI ./hm_and_cli_start.sh
            5. Provide RDS database login credentials for that given environment

            6. Start hosts
            start site -s PNQ

            7. Verify all instances started using the view status command.
          flagStatus: ATTENTION_NEEDED
          flagComment: PEAT Team will start manually
          team: SCSSPeatDeployment
          precondition: "False"
          tags:
          - '#bizops'
      - name: grid-udt-daemon Deploy
        type: xlrelease.SequentialGroup
        precondition: "False"
        tasks:
        - name: Skip
          type: xlrelease.SequentialGroup
          precondition: "False"
          tasks:
          - name: Deploy grid-udt-daemon - Automation
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: ChefObjectPipeline/ESS/mc_dmp_chef_objects_nonprod
            description: |-
              Deploy grid-udt-daemon
                     1.  Deployment using Chef model
                           i. Merge the PR ${GridUDTDaemonPR}
                          ii. Ensure master build is successful- https://cd3.mastercard.int/jenkins/job/ChefObjectPipeline/job/ESS/job/mc_dmp_chef_objects_nonprod/
            variableMapping:
              pythonScript.buildStatus: "${GridUDTDaemonBuildStatus}"
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - Flextp
            - AIGarage
            - '#bizops'
          - name: Deploy grid-udt-daemon - Manual
            type: xlrelease.Task
            description: |-
              | *Artifact Name(s)*:       | grid-udt-daemon-${GridUDTDaemonArtifactVersion}.jar |
              | *Servers to STAGE ON*:       | rsk0stl53, rsk0stl54 |
              | *Dev Contact*:                         | Sharks Team |

              1. Create directories
              ```
                     1.  Login to the server; sesudo fraud;
                     2.  Create grid-udt-daemon Folder
                        mkdir -p /apps_01/webapps/standalone/grid-udt-daemon
                     3.  Create conf, lib, bin, logs directories
                         a.     mkdir /apps_01/webapps/standalone/grid-udt-daemon/logs
                         b.    mkdir /apps_01/webapps/standalone/grid-udt-daemon/bin
                         c.    mkdir /apps_01/webapps/standalone/grid-udt-daemon/conf
                         d.    mkdir /apps_01/webapps/standalone/grid-udt-daemon/lib ```
              2. Download files
              ```
                  1. cd /apps_01/webapps/standalone/grid-udt-daemon/lib
                  2.    wget https://artifacts.mastercard.int/artifactory/releases/com/mastercard/risk/dmp/grid/grid-udt-daemon/${GridUDTDaemonArtifactVersion}/grid-udt-daemon-${GridUDTDaemonArtifactVersion}.jar -o grid-udt-daemon.jar
                 3.    cd /apps_01/webapps/standalone/grid-udt-daemon/conf
                 4.    wget https://globalrepository.mclocal.int/stash/projects/ESSDMP-BATCH/repos/grid-udt-loader-daemon/raw/src/main/resources/config/udt-job-template.json```
            team: SCSSPeatDeployment
            precondition: "not releasevariable['GridUDTDaemonBuildStatus']"
            tags:
            - Flextp
            - AIGarage
            - '#bizops'
          - name: Start grid-udt-daemon - Manual
            type: xlrelease.Task
            description: |-
              1. Start application
              ```
                 1.    cd /apps_01/webapps/standalone/grid-udt-daemon/
                 2.    /apps_01/fraud/java1.8/bin/java  -verbose:gc -Xloggc:/apps_01/webapps/standalone/grid-udt-daemon/logs/gc.log -XX:+PrintGCDateStamps -XX:+PrintGCDetails -Xms512m -Xmx1024m -jar /apps_01/webapps/standalone/grid-udt-daemon/lib/grid-udt-daemon.jar ```
            team: SCSSPeatDeployment
            precondition: "${GridUDTDaemonBuildStatus}"
            tags:
            - Flextp
            - AIGarage
            - '#bizops'
          - name: Deployment verification
            type: xlrelease.Task
            description: |-
              Deployment verification
              ```
                     1.    cd /apps_01/webapps/standalone/
                     2.    ls -asl
                     3.    check if grid-udt-daemon application is available under fraud/rsksys user and group
                     4.    ps -ef | grep grid-udt-daemon
                     5.    If the application has started, Look up logs: cd
                                    /apps_01/webapps/standalone/grid-udt-daemon/logs
                     6.    Tail -f grid-udt-daemon.log```
            team: SCSSPeatDeployment
            tags:
            - Flextp
            - AIGarage
            - '#bizops'
        - name: Habitat
          type: xlrelease.SequentialGroup
          tasks:
          - name: TOML - grid-udt-daemon
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
            jobParameters: |-
              habChannel=peat
              habServiceGroup=stage
              habService=decision_processing/grid_udt_daemon
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            team: SCSSPeatDeployment
            tags:
            - '#bizops'
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promotion - grid-udt-daemon
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=grid-udt-daemon decision_processing/grid_udt_daemon
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - grid udt deamon
            - '#bizops'
          - name: status - grid-udt-daemon
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
            jobParameters: |-
              habEnv=peat
              habService=decision_processing/grid_udt_daemon
              habCommand=status
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: ai-garage-validator Deploy
            type: xlrelease.SequentialGroup
            precondition: "False"
            tasks:
            - name: SKIP
              type: xlrelease.SequentialGroup
              precondition: "False"
              tasks:
              - name: Deploy ai-garage-validator  - Automation
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd
                username: dmp_xlr
                jobName: ChefObjectPipeline/ESS/mc_dmp_chef_objects_nonprod
                description: |-
                  Deploy ai-garage-validator
                         1.  Deployment using Chef model
                               i. Merge the PR ${ai-garage-validatorPR}
                              ii. Ensure master build is successful- https://cd3.mastercard.int/jenkins/job/ChefObjectPipeline/job/ESS/job/mc_dmp_chef_objects_nonprod/
                variableMapping:
                  pythonScript.buildStatus: "${AIGarageValidatorBuildStatus}"
                tags:
                - Flextp
                - AIGarage
                - '#bizops'
              - name: Deploy ai-garage-validator - Manual
                type: xlrelease.Task
                description: |-
                  | *Artifact Name(s)*:       | ai-garage-validator-${AIGarageValidatorArtifactVersion}.jar |
                  | *Servers to STAGE ON*:       | rsk0stl53, rsk0stl54 |
                  | *Dev Contact*:                         | Sharks Team |

                  1. Create directories
                  ```
                         1.  Login to the server; sesudo fraud;
                         2.  Create ai-garage-validator  Folder
                            mkdir -p /apps_01/webapps/standalone/ai-garage-validator
                         3.  Create conf, lib, bin, logs directories
                             a.     mkdir /apps_01/webapps/standalone/ai-garage-validator/logs
                             b.    mkdir /apps_01/webapps/standalone/ai-garage-validator/bin
                             c.    mkdir /apps_01/webapps/standalone/ai-garage-validator/conf
                             d.    mkdir /apps_01/webapps/standalone/ai-garage-validator/lib ```
                  2. Download files
                  ```
                          1. cd /apps_01/webapps/standalone/ai-garage-validator/lib
                          2.    wget https://artifacts.mastercard.int/artifactory/releases/com/mastercard/rst/ai-garage-validator/${AIGarageValidatorArtifactVersion}/ai-garage-validator-${AIGarageValidatorArtifactVersion}.jar -o ai-garage-validator.jar
                  ```
                precondition: "not releasevariable['AIGarageValidatorBuildStatus']"
                tags:
                - Flextp
                - AIGarage
                - '#bizops'
              - name: Start ai-garage-validator - Manual
                type: xlrelease.Task
                description: |-
                  1. Start application
                  ```
                     1.    cd /apps_01/webapps/standalone/ai-garage-validator/
                     2.  Execute Below test:
                             a.    If Java Exists:
                                      i.    /apps_01/fraud/java1.8/bin/java  -verbose:gc -
                   Xloggc:/apps_01/webapps/standalone/ai-garage-validator/logs/gc.log -XX:+PrintGCDateStamps -XX:+PrintGCDetails -Xms512m -Xmx1024m -jar /apps_01/webapps/standalone/ai-garage-validator/lib/ai-garage-validator.jar suites/endToEnd.xml
                           b.    If Zing exists:
                                     i.    /apps_01/fraud/zing/bin/java  -verbose:gc -Xloggc:/apps_01/webapps/standalone/ai-garage-validator/logs/gc.log -XX:+PrintGCDateStamps -XX:+PrintGCDetails -Xms512m -Xmx1024m -jar /apps_01/webapps/standalone/ai-garage-validator/lib/ai-garage-validator.jar suites/endToEnd.xml
                  ```
                precondition: "not releasevariable['AIGarageValidatorBuildStatus']"
                tags:
                - Flextp
                - AIGarage
                - '#bizops'
              - name: Deployment verification ai-garage-validator - Manual
                type: xlrelease.Task
                description: |-
                  Deployment verification
                  ```
                         1.    cd /apps_01/webapps/standalone/
                         2.    ls -asl
                         3.      check if ai-garage-validator application is available under fraud/rsksys user and group```
                tags:
                - Flextp
                - AIGarage
                - '#bizops'
            - name: Habitat
              type: xlrelease.SequentialGroup
              tasks:
              - name: TOML-ai-garage
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat
                  habServiceGroup=stage
                  habService=decision_processing/ai-garage-validator
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - ai_garage
                - Habitat
                - TOML
                - '#bizops'
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                team: SCSSPeatDeployment
                tags:
                - '#bizops'
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
              - name: Promote-AI-Garage
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
                jobParameters: |-
                  artifactAndPackage=ai-garage-validator decision_processing/ai-garage-validator
                  promoteToChannel=peat
                  platform=OEL7
                  dryRun=false
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - ai_garage
                - Habitat
                - '#bizops'
              - name: Validate-AI-Garage
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
                jobParameters: |-
                  habEnv=peat
                  habService=decision_processing/ai-garage-validator
                  habCommand=status
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - ai_garage
                - Habitat
                - '#bizops'
          - name: Validation
            type: xlrelease.GateTask
            team: SCSSPeatDeployment
            tags:
            - '#bizops'
    color: '#0099CC'
  realFlagStatus: ATTENTION_NEEDED
  variables:
  - type: xlrelease.StringVariable
    key: FlexTPDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: etlDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPEnvNonProdBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPJSONBuildStatus
    requiresValue: false
    showOnReleaseStart: false
    description: FlexTP Global Seed Data JSON build status
  - type: xlrelease.StringVariable
    key: FlexTPDVTRunBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTDeployBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStopIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveDeployIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStartIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStopIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingDeployIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStartIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStopIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDeployIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStartIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPEnvNonIOSProdBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPJSONBuildStatusIOS
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTDeployBuildStatusRel2IOS
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPFSDOverride-Rel2-IOS-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTIOSRunBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonPR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: ai-garage-validatorPR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: AIGarageValidatorBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: AIGarageValidatorArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: artifact.flextp-oel6.version
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: artifact.flextp-oel7.version
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackSite
    requiresValue: false
    showOnReleaseStart: false
    description: "For STL, set to WNG, for KSC set to KC"
    value: KC
  - type: xlrelease.StringVariable
    key: release
    value: "${folder.metadata.release}"
  extensions:
  - name: Dashboard
    type: xlrelease.Dashboard
    owner: e025882
    tiles:
    - name: Release progress
      type: xlrelease.ReleaseProgressTile
    - name: Release summary
      type: xlrelease.ReleaseSummaryTile
    - name: Resource usage
      type: xlrelease.ResourceUsageTile
    - name: Release timeline
      type: bitbucket.TimelineTile
    - name: Release health
      type: xlrelease.ReleaseHealthTile
    - name: Grid
      type: xlrelease.TaskProgressTile
      row: 2
      col: 2
      tags:
      - grid
    - name: FlexTP
      type: xlrelease.TaskProgressTile
      row: 3
      col: 0
      tags:
      - flextp
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 3
      col: 1
  riskProfile: Default risk profile
- template: PEAT-MASTER-TX-PROCESSING-KSC
  description: This Template mirrors the PEAT DIP
  scheduledStartDate: 2019-02-06T09:00:00-06:00
  phases:
  - phase: XLR Release
    tasks:
    - name: Add Release tag
      type: xlr.AddTag
      newTag: "${release}"
      team: SCSSPeatDeployment
      tags:
      - '#bizops'
    color: '#0079BC'
  - phase: Tx Processing Deployment
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      team: SCSSPeatDeployment
      tags:
      - '#bizops'
    - name: All Transactions
      type: xlrelease.ParallelGroup
      tasks:
      - name: Transaction Sequential
        type: xlrelease.SequentialGroup
        tasks:
        - name: Stop FlexTP Instances - KSC
          type: xlrelease.SequentialGroup
          tags:
          - flextp
          - KSC
          tasks:
          - name: HM Stop Site
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Stop all instances associated with the site WNG
              stop site -s KC

              7. Verify all instances stopped using the view status command.
            team: SCSSPeatDeployment
            tags:
            - '#bizops'
        - name: Grid - KSC
          type: xlrelease.SequentialGroup
          tags:
          - grid
          - KSC
          tasks:
          - name: Stop Grid
            type: xlrelease.SequentialGroup
            tags:
            - grid
            - KSC
            tasks:
            - name: Stop staging grid (manual)
              type: xlrelease.Task
              description: |-
                - Log into rsk0stl16
                - `sesudo fraud`
                - `cd grid_REL2/scripts`
                - `./gfsh.sh`
                - `connect --locator=localhost[15000]`
                - `shutdown`
                - `list members`. Only the locator process should be present.
                - `shutdown --include-locators=true`
                - GFSH will disconnect.
                - `exit`. You will leave gfsh.
            - name: Stop live grid (manual)
              type: xlrelease.Task
              description: |-
                - Log into rsk0stl65
                - `sesudo fraud`
                - `cd grid_REL2/scripts`
                - `./gfsh.sh`
                - `connect --locator=localhost[15000]`
                - `shutdown`
                - `list members`. Only the locator process should be present.
                - `shutdown --include-locators=true`
                - GFSH will disconnect.
                - `exit`. You will leave gfsh.
            - name: Validate no Grid processes running
              type: xlrelease.Task
              description: '`ps -ef | grep pivotal` should list no Java results.'
          - name: Promote Grid - KSC
            type: xlrelease.SequentialGroup
            tags:
            - grid
            - KSC
            tasks:
            - name: TOML Live and Staging
              type: xlrelease.SequentialGroup
              precondition: "False"
              tags:
              - TOML
              - live_grid
              tasks:
              - name: Deploy Live Grid Locator TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_locator
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - '#bizops'
                - Habitat
                - grid
                - live_grid_locator
                - live_grid
              - name: Deploy Live Grid Server TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_server
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - '#bizops'
                - Habitat
                - grid
                - live_grid_server
                - live_grid
              - name: Deploy Live Grid Worker TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_worker
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - '#bizops'
                - Habitat
                - grid
                - live_grid_worker
                - live_grid
              - name: Deploy Staging Grid Locator TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/staging_grid_locator
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - staging_grid_locator
                - TOML
                - '#bizops'
                - Habitat
                - grid
                - staging_grid
              - name: Deploy Staging Grid Server TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/staging_grid_server
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - '#bizops'
                - Habitat
                - grid
                - staging_grid
                - staging_grid_server
              - name: Deploy Live Grid Server 2 TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/staging_grid_server2
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - '#bizops'
                - Habitat
                - grid
                - staging_grid_server2
                - staging_grid
            - name: Deploy grid (manual)
              type: xlrelease.Task
              description: |-
                - For each of the following servers:
                    - rsk0stl65, rsk0stl66, rsk0stl119, rsk0stl120, rsk0stl16
                - `sesudo fraud`
                - `cd staging`
                - `wget --no-check-certificate https://artifacts.mastercard.int:443/artifactory/releases/com/mastercard/risk/common/vmware-gemfire/9.15.2/vmware-gemfire-9.15.2.tgz`
                - `wget --no-check-certificate https://artifacts.mastercard.int/artifactory/releases/com/mastercard/risk/grid/GridConfig/${folder.GridConfig_version}/GridConfig-${folder.GridConfig_version}-package.zip`
                - `../bin/grid_deploy.sh ./GridConfig-${folder.GridConfig_version}-package.zip ./vmware-gemfire-9.15.2.tgz`
                - `../bin/grid_deploy.sh ./GridConfig-${folder.GridConfig_version}-package.zip ./vmware-gemfire-9.15.2.tgz -s`
            - name: Validate grid deployment (manual)
              type: xlrelease.GateTask
              description: |-
                For each of the following servers: rsk0stl65, rsk0stl66, rsk0stl119, rsk0stl120, rsk0stl16
                - `sesudo fraud`
                - `readlink grid_REL2` should point to `/apps_01/fraud/grid_builds_REL2/GridConfig-${folder.GridConfig_version}`

                For rsk0stl65, rsk0stl66, rsk0stl119, rsk0stl120

                - `cat grid_REL2/config/env.config | grep SERVERS_WNG` should show rsk0stl65 rsk0stl66 rsk0stl119 rsk0stl120
                - `cat grid_REL2/config/env.config | grep LOCATOR_WNG` should show rsk0stl65 rsk0stl66
                - `cat grid_REL2/config/env.config | grep WORKERS_WNG` should show rsk0stl65 rsk0stl66

                For rsk0stl16:

                - `cat grid_REL2/config/env.config | grep SERVERS_WNG` should show rsk0stl16
                - `cat grid_REL2/config/env.config | grep LOCATOR_WNG` should show rsk0stl16
                - `cat grid_REL2/config/env.config | grep LIVE_LOCATORS_WNG` should show rsk0stl65
          - name: Start Grid - KSC
            type: xlrelease.SequentialGroup
            tags:
            - grid
            tasks:
            - name: Start live grid (manual)
              type: xlrelease.Task
              description: |-
                For each of the following servers: rsk0stl65, rsk0stl66
                - `grid_REL2/scripts/startLocator.sh`
                - Wait until you receive a startup complete message
                - `grid_REL2/scripts/gfsh.sh -e "connect --locator=localhost[15000]"` should show "Connected to localhost[15000]"

                For each of the following servers: rsk0stl65, rsk0stl66, rsk0stl119, rsk0stl120
                - `grid_REL2/scripts/startPhysicalMachine.sh`
                - Wait until you receive a startup complete message
            - name: Start staging grid (manual)
              type: xlrelease.Task
              description: |-
                For each of the following servers: rsk0stl16
                - `grid_REL2/scripts/startLocator.sh`
                - Wait until you receive a startup complete message
                - `grid_REL2/scripts/gfsh.sh -e "connect --locator=localhost[15000]"` should show "Connected to localhost[15000]"

                For each of the following servers: rsk0stl16
                - `grid_REL2/scripts/startPhysicalMachine.sh`
                - Wait until you receive a startup complete message
            - name: Validate grid is started (manual)
              type: xlrelease.GateTask
              description: |-
                For rsk0stl65
                - `grid_REL2/scripts/gfsh.sh -e "connect --locator=localhost[15000]" -e "list members"` should show rsk0stl65-locator1, rsk0stl65-server1, rsk0stl65-worker1, rsk0stl66-locator1, rsk0stl66-server1, rsk0stl66-worker1, rsk0stl119-server1, rsk0stl120-server1

                For rsk0stl16
                - `grid_REL2/scripts/gfsh.sh -e "connect --locator=localhost[15000]" -e "list members"` should show rsk0stl16-locator1, rsk0stl16-server1, rsk0stl16-server2
        - name: Habitat- Host Manager Deployment - KSC
          type: xlrelease.SequentialGroup
          tags:
          - Habitat
          - HM
          tasks:
          - name: Habitat
            type: xlrelease.SequentialGroup
            tags:
            - Habitat
            tasks:
            - name: KSC
              type: xlrelease.SequentialGroup
              tags:
              - KSC
              tasks:
              - name: TOML
                type: xlrelease.SequentialGroup
                precondition: "False"
                tags:
                - TOML
                tasks:
                - name: TOML-FlexTP-KSC
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-KSC/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-KSC/
                  team: SCSSPeatDeployment
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - TOML
                  - flextp
                  - HM
                  - '#bizops'
                - name: "Sleep ${folder.metadata.time} seconds"
                  type: xlrelease.ScriptTask
                  team: SCSSPeatDeployment
                  tags:
                  - '#bizops'
                  script: |-
                    import time
                    time.sleep(${folder.metadata.time})
                    print "Done Sleeping"
                - name: Validate TOML
                  type: xlrelease.GateTask
                  team: SCSSPeatDeployment
                  tags:
                  - TOML
                  - '#bizops'
              - name: Promote - flextp_host_manager  - KSC - linux_kernel2
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.flextp_oel6_version}
                  channel=peat-ksc
                  platform=linux_kernel2
                  contactList=Chandra.Nerella@mastercard.com
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - flextp
                - HM
                - Habitat
                - '#bizops'
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                team: SCSSPeatDeployment
                tags:
                - '#bizops'
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
              - name: Promote - flextp_host_manager - KSC - linux
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.flextp+oel7_version}
                  channel=peat-ksc
                  platform=linux
                  contactList=Chandra.Nerella@mastercard.com
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - flextp
                - HM
                - Habitat
                - '#bizops'
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                team: SCSSPeatDeployment
                tags:
                - '#bizops'
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
              - name: Status - Host Manager - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-ksc-peat/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-ksc-peat/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - flextp
                - Habitat
                - HM
                - '#bizops'
              - name: Validation host manager
                type: xlrelease.GateTask
                description: |-
                  On the Hosts ${folder.all_peat_ksc_servers} perform the below steps

                  1. Login to the box and Switch to fraud user
                  2. cd /apps_01/fruad/hubernetes/bin
                  3. run './h8s_version.sh'
                  4. The Host Manager Configuration version must match - ${folder.artifact.host-manager-configuration.version}
                  5. Host Manger CLI version must match ${folder.host_manager_cli_version}
                  6. Host Manager version must match ${folder.host_manager_version}
                team: SCSSPeatDeployment
                tags:
                - HM
                - '#bizops'
        - name: HM Deploy Flatpack - KSC
          type: xlrelease.SequentialGroup
          tasks:
          - name: Deploy Flatpack for All Channels
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Run deploy flatpack command
              deploy flatpack -s KC

              Before Selecting the "Y" option  validate all flatpack version to match with apmate.
            team: SCSSPeatDeployment
            tags:
            - '#bizops'
        - name: HM Recreate Site - KSC
          type: xlrelease.SequentialGroup
          tasks:
          - name: Recreate All Hosts in Site
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Recreate host with Force option
              recreate site -s KC -f

              7. use view status with the request id to check the status of the command. The command should complete to success.
            team: SCSSPeatDeployment
            tags:
            - '#bizops'
        - name: HM Start Hosts - KSC
          type: xlrelease.SequentialGroup
          tasks:
          - name: Start All Instances
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Start hosts
              start site -s KC

              7. Verify all instances started using the view status command.
            team: SCSSPeatDeployment
            tags:
            - '#bizops'
        - name: grid-udt-daemon Deploy
          type: xlrelease.SequentialGroup
          precondition: "False"
          tasks:
          - name: Skip
            type: xlrelease.SequentialGroup
            precondition: "False"
            tasks:
            - name: Deploy grid-udt-daemon - Automation
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd
              username: dmp_xlr
              jobName: ChefObjectPipeline/ESS/mc_dmp_chef_objects_nonprod
              description: |-
                Deploy grid-udt-daemon
                       1.  Deployment using Chef model
                             i. Merge the PR ${GridUDTDaemonPR}
                            ii. Ensure master build is successful- https://cd3.mastercard.int/jenkins/job/ChefObjectPipeline/job/ESS/job/mc_dmp_chef_objects_nonprod/
              variableMapping:
                pythonScript.buildStatus: "${GridUDTDaemonBuildStatus}"
              tags:
              - Flextp
              - AIGarage
            - name: Deploy grid-udt-daemon - Manual
              type: xlrelease.Task
              description: |-
                | *Artifact Name(s)*:       | grid-udt-daemon-${GridUDTDaemonArtifactVersion}.jar |
                | *Servers to STAGE ON*:       | rsk0stl53, rsk0stl54 |
                | *Dev Contact*:                         | Sharks Team |

                1. Create directories
                ```
                       1.  Login to the server; sesudo fraud;
                       2.  Create grid-udt-daemon Folder
                          mkdir -p /apps_01/webapps/standalone/grid-udt-daemon
                       3.  Create conf, lib, bin, logs directories
                           a.     mkdir /apps_01/webapps/standalone/grid-udt-daemon/logs
                           b.    mkdir /apps_01/webapps/standalone/grid-udt-daemon/bin
                           c.    mkdir /apps_01/webapps/standalone/grid-udt-daemon/conf
                           d.    mkdir /apps_01/webapps/standalone/grid-udt-daemon/lib ```
                2. Download files
                ```
                    1. cd /apps_01/webapps/standalone/grid-udt-daemon/lib
                    2.    wget https://artifacts.mastercard.int/artifactory/releases/com/mastercard/risk/dmp/grid/grid-udt-daemon/${GridUDTDaemonArtifactVersion}/grid-udt-daemon-${GridUDTDaemonArtifactVersion}.jar -o grid-udt-daemon.jar
                   3.    cd /apps_01/webapps/standalone/grid-udt-daemon/conf
                   4.    wget https://globalrepository.mclocal.int/stash/projects/ESSDMP-BATCH/repos/grid-udt-loader-daemon/raw/src/main/resources/config/udt-job-template.json```
              precondition: "not releasevariable['GridUDTDaemonBuildStatus']"
              tags:
              - Flextp
              - AIGarage
            - name: Start grid-udt-daemon - Manual
              type: xlrelease.Task
              description: |-
                1. Start application
                ```
                   1.    cd /apps_01/webapps/standalone/grid-udt-daemon/
                   2.    /apps_01/fraud/java1.8/bin/java  -verbose:gc -Xloggc:/apps_01/webapps/standalone/grid-udt-daemon/logs/gc.log -XX:+PrintGCDateStamps -XX:+PrintGCDetails -Xms512m -Xmx1024m -jar /apps_01/webapps/standalone/grid-udt-daemon/lib/grid-udt-daemon.jar ```
              precondition: "${GridUDTDaemonBuildStatus}"
              tags:
              - Flextp
              - AIGarage
            - name: Deployment verification
              type: xlrelease.Task
              description: |-
                Deployment verification
                ```
                       1.    cd /apps_01/webapps/standalone/
                       2.    ls -asl
                       3.    check if grid-udt-daemon application is available under fraud/rsksys user and group
                       4.    ps -ef | grep grid-udt-daemon
                       5.    If the application has started, Look up logs: cd
                                      /apps_01/webapps/standalone/grid-udt-daemon/logs
                       6.    Tail -f grid-udt-daemon.log```
              tags:
              - Flextp
              - AIGarage
          - name: Habitat
            type: xlrelease.SequentialGroup
            tasks:
            - name: TOML - grid-udt-daemon
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              jobParameters: |-
                habChannel=peat
                habServiceGroup=stage
                habService=decision_processing/grid_udt_daemon
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - '#bizops'
            - name: "Sleep ${folder.metadata.time} seconds"
              type: xlrelease.ScriptTask
              team: SCSSPeatDeployment
              tags:
              - '#bizops'
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: Promotion - grid-udt-daemon
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              jobParameters: |-
                artifactAndPackage=grid-udt-daemon decision_processing/grid_udt_daemon
                promoteToChannel=peat
                platform=linux
                dryRun=false
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - '#bizops'
            - name: status - grid-udt-daemon
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
              jobParameters: |-
                habEnv=peat
                habService=decision_processing/grid_udt_daemon
                habCommand=status
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - '#bizops'
            - name: Validation
              type: xlrelease.GateTask
              team: SCSSPeatDeployment
              tags:
              - '#bizops'
        - name: ai-garage-validator Deploy
          type: xlrelease.SequentialGroup
          precondition: "False"
          tasks:
          - name: SKIP
            type: xlrelease.SequentialGroup
            precondition: "False"
            tasks:
            - name: Deploy ai-garage-validator  - Automation
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd
              username: dmp_xlr
              jobName: ChefObjectPipeline/ESS/mc_dmp_chef_objects_nonprod
              description: |-
                Deploy ai-garage-validator
                       1.  Deployment using Chef model
                             i. Merge the PR ${ai-garage-validatorPR}
                            ii. Ensure master build is successful- https://cd3.mastercard.int/jenkins/job/ChefObjectPipeline/job/ESS/job/mc_dmp_chef_objects_nonprod/
              variableMapping:
                pythonScript.buildStatus: "${AIGarageValidatorBuildStatus}"
              tags:
              - Flextp
              - AIGarage
            - name: Deploy ai-garage-validator - Manual
              type: xlrelease.Task
              description: |-
                | *Artifact Name(s)*:       | ai-garage-validator-${AIGarageValidatorArtifactVersion}.jar |
                | *Servers to STAGE ON*:       | rsk0stl53, rsk0stl54 |
                | *Dev Contact*:                         | Sharks Team |

                1. Create directories
                ```
                       1.  Login to the server; sesudo fraud;
                       2.  Create ai-garage-validator  Folder
                          mkdir -p /apps_01/webapps/standalone/ai-garage-validator
                       3.  Create conf, lib, bin, logs directories
                           a.     mkdir /apps_01/webapps/standalone/ai-garage-validator/logs
                           b.    mkdir /apps_01/webapps/standalone/ai-garage-validator/bin
                           c.    mkdir /apps_01/webapps/standalone/ai-garage-validator/conf
                           d.    mkdir /apps_01/webapps/standalone/ai-garage-validator/lib ```
                2. Download files
                ```
                        1. cd /apps_01/webapps/standalone/ai-garage-validator/lib
                        2.    wget https://artifacts.mastercard.int/artifactory/releases/com/mastercard/rst/ai-garage-validator/${AIGarageValidatorArtifactVersion}/ai-garage-validator-${AIGarageValidatorArtifactVersion}.jar -o ai-garage-validator.jar
                ```
              precondition: "not releasevariable['AIGarageValidatorBuildStatus']"
              tags:
              - Flextp
              - AIGarage
            - name: Start ai-garage-validator - Manual
              type: xlrelease.Task
              description: |-
                1. Start application
                ```
                   1.    cd /apps_01/webapps/standalone/ai-garage-validator/
                   2.  Execute Below test:
                           a.    If Java Exists:
                                    i.    /apps_01/fraud/java1.8/bin/java  -verbose:gc -
                 Xloggc:/apps_01/webapps/standalone/ai-garage-validator/logs/gc.log -XX:+PrintGCDateStamps -XX:+PrintGCDetails -Xms512m -Xmx1024m -jar /apps_01/webapps/standalone/ai-garage-validator/lib/ai-garage-validator.jar suites/endToEnd.xml
                         b.    If Zing exists:
                                   i.    /apps_01/fraud/zing/bin/java  -verbose:gc -Xloggc:/apps_01/webapps/standalone/ai-garage-validator/logs/gc.log -XX:+PrintGCDateStamps -XX:+PrintGCDetails -Xms512m -Xmx1024m -jar /apps_01/webapps/standalone/ai-garage-validator/lib/ai-garage-validator.jar suites/endToEnd.xml
                ```
              precondition: "not releasevariable['AIGarageValidatorBuildStatus']"
              tags:
              - Flextp
              - AIGarage
            - name: Deployment verification ai-garage-validator - Manual
              type: xlrelease.Task
              description: |-
                Deployment verification
                ```
                       1.    cd /apps_01/webapps/standalone/
                       2.    ls -asl
                       3.      check if ai-garage-validator application is available under fraud/rsksys user and group```
              tags:
              - Flextp
              - AIGarage
          - name: Habitat
            type: xlrelease.SequentialGroup
            tasks:
            - name: TOML-ai-garage
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              jobParameters: |-
                habChannel=peat
                habServiceGroup=stage
                habService=decision_processing/ai-garage-validator
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - TOML
              - ai_garage
              - Habitat
              - '#bizops'
            - name: "Sleep ${folder.metadata.time} seconds"
              type: xlrelease.ScriptTask
              team: SCSSPeatDeployment
              tags:
              - '#bizops'
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: Promote-AI-Garage
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              jobParameters: |-
                artifactAndPackage=ai-garage-validator decision_processing/ai-garage-validator
                promoteToChannel=peat
                platform=linux
                dryRun=false
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - ai_garage
              - Habitat
              - '#bizops'
            - name: Validate-AI-Garage
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
              jobParameters: |-
                habEnv=peat
                habService=decision_processing/ai-garage-validator
                habCommand=status
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - ai_garage
              - Habitat
              - '#bizops'
    color: '#0099CC'
  variables:
  - type: xlrelease.StringVariable
    key: FlexTPDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: etlDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPEnvNonProdBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPJSONBuildStatus
    requiresValue: false
    showOnReleaseStart: false
    description: FlexTP Global Seed Data JSON build status
  - type: xlrelease.StringVariable
    key: FlexTPDVTRunBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTDeployBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStopKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveDeployKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStartKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStopKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingDeployKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStartKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStopKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDeployKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStartKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPEnvNonKSCProdBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPJSONBuildStatusKSC
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTDeployBuildStatusRel2KSC
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPFSDOverride-Rel2-KSC-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTKSCRunBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonPR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: ai-garage-validatorPR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: AIGarageValidatorBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: AIGarageValidatorArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: artifact.flextp-oel6.version
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: artifact.flextp-oel7.version
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackSite
    requiresValue: false
    showOnReleaseStart: false
    description: "For STL, set to WNG, for KSC set to KC"
    value: KC
  - type: xlrelease.StringVariable
    key: release
    value: "${folder.metadata.release}"
  extensions:
  - name: Dashboard
    type: xlrelease.Dashboard
    owner: e025882
    tiles:
    - name: Release progress
      type: xlrelease.ReleaseProgressTile
    - name: Release summary
      type: xlrelease.ReleaseSummaryTile
    - name: Resource usage
      type: xlrelease.ResourceUsageTile
    - name: Release timeline
      type: xlrelease.TimelineTile
    - name: Release health
      type: xlrelease.ReleaseHealthTile
    - name: Grid
      type: xlrelease.TaskProgressTile
      row: 2
      col: 2
      tags:
      - grid
    - name: FlexTP
      type: xlrelease.TaskProgressTile
      row: 3
      col: 0
      tags:
      - flextp
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 3
      col: 1
  riskProfile: Default risk profile
- template: PEAT-MASTER-TX-PROCESSING-STL
  description: This Template mirrors the PEAT DIP
  scheduledStartDate: 2019-02-06T09:00:00-06:00
  phases:
  - phase: XLR Release
    tasks:
    - name: Add Release tag
      type: xlr.AddTag
      newTag: "${release}"
      team: SCSSStageDeployment
      tags:
      - '#bizops'
    color: '#0079BC'
  - phase: Tx Processing Deployment
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
    - name: All Transactions
      type: xlrelease.ParallelGroup
      tasks:
      - name: Transaction Sequential
        type: xlrelease.SequentialGroup
        tasks:
        - name: Stop Flextp Instances - STL
          type: xlrelease.SequentialGroup
          tags:
          - flextp
          tasks:
          - name: HM Stop Site
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Stop all instances associated with the site WNG
              stop site -s WNG

              7. Verify all instances stopped using the view status command.
        - name: Grid - STL
          type: xlrelease.SequentialGroup
          tags:
          - grid
          tasks:
          - name: Stop Grid
            type: xlrelease.SequentialGroup
            tags:
            - grid
            tasks:
            - name: Stop staging grid (manual)
              type: xlrelease.Task
              description: |-
                - Log into rsk0stl15
                - `sesudo fraud`
                - `cd grid_REL2/scripts`
                - `./gfsh.sh`
                - `connect --locator=localhost[15000]`
                - `shutdown`
                - `list members`. Only the locator process should be present.
                - `shutdown --include-locators=true`
                - GFSH will disconnect.
                - `exit`. You will leave gfsh.
            - name: Stop live grid (manual)
              type: xlrelease.Task
              description: |-
                - Log into rsk0stl61
                - `sesudo fraud`
                - `cd grid_REL2/scripts`
                - `./gfsh.sh`
                - `connect --locator=localhost[15000]`
                - `shutdown`
                - `list members`. Only the locator process should be present.
                - `shutdown --include-locators=true`
                - GFSH will disconnect.
                - `exit`. You will leave gfsh.
            - name: Validate no Grid processes running
              type: xlrelease.Task
              description: '`ps -ef | grep pivotal` should list no Java results.'
          - name: Promote Grid
            type: xlrelease.SequentialGroup
            tags:
            - grid
            tasks:
            - name: TOML Live and Staging
              type: xlrelease.SequentialGroup
              precondition: "False"
              tags:
              - TOML
              - live_grid
              - grid
              tasks:
              - name: Deploy Live Grid Locator TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_locator
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - '#bizops'
                - Habitat
                - grid
                - live_grid_locator
                - live_grid
              - name: Deploy Live Grid Server TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_server
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - '#bizops'
                - Habitat
                - grid
                - live_grid_server
                - live_grid
              - name: Deploy Live Grid Worker TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_worker
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - '#bizops'
                - Habitat
                - grid
                - live_grid_worker
                - live_grid
              - name: Deploy Staging Grid Locator TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/staging_grid_locator
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - staging_grid_locator
                - TOML
                - '#bizops'
                - Habitat
                - grid
                - staging_grid
              - name: Deploy Staging Grid Server TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_server
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - '#bizops'
                - Habitat
                - grid
                - staging_grid
                - staging_grid_server
              - name: Deploy Live Grid Worker TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/staging_grid_worker
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - '#bizops'
                - Habitat
                - grid
                - staging_grid_server2
                - staging_grid
            - name: Deploy grid (manual)
              type: xlrelease.Task
              description: |-
                - For each of the following servers:
                    - rsk0stl61, rsk0stl62, rsk0stl115, rsk0stl116, rsk0stl117, rsk0stl118, rsk0stl15
                - `sesudo fraud`
                - `cd staging`
                - `wget --no-check-certificate https://artifacts.mastercard.int:443/artifactory/releases/com/mastercard/risk/common/vmware-gemfire/9.15.2/vmware-gemfire-9.15.2.tgz`
                - `wget --no-check-certificate https://artifacts.mastercard.int/artifactory/releases/com/mastercard/risk/grid/GridConfig/${folder.GridConfig_version}/GridConfig-${folder.GridConfig_version}-package.zip`
                - `../bin/grid_deploy.sh ./GridConfig-${folder.GridConfig_version}-package.zip ./vmware-gemfire-9.15.2.tgz`
                - `../bin/grid_deploy.sh ./GridConfig-${folder.GridConfig_version}-package.zip ./vmware-gemfire-9.15.2.tgz -s`
            - name: Validate grid deployment (manual)
              type: xlrelease.GateTask
              description: |-
                - For each of the following servers:
                    - rsk0stl61, rsk0stl62, rsk0stl115, rsk0stl116, rsk0stl117, rsk0stl118, rsk0stl15
                - `sesudo fraud`
                - `readlink grid_REL2` should point to `/apps_01/fraud/grid_builds_REL2/GridConfig-${folder.GridConfig_version}`

                For rsk0stl61, rsk0stl62, rsk0stl115, rsk0stl116, rsk0stl117, rsk0stl118:

                - `cat grid_REL2/config/env.config | grep SERVERS_WNG` should show rsk0stl115 rsk0stl116 rsk0stl117 rsk0stl118
                - `cat grid_REL2/config/env.config | grep LOCATOR_WNG` should show rsk0stl61 rsk0stl62
                - `cat grid_REL2/config/env.config | grep WORKERS_WNG` should show rsk0stl117 rsk0stl118

                For rsk0stl15:

                - `cat grid_REL2/config/env.config | grep SERVERS_WNG` should show rsk0stl15
                - `cat grid_REL2/config/env.config | grep LOCATOR_WNG` should show rsk0stl15
                - `cat grid_REL2/config/env.config | grep LIVE_LOCATORS_WNG` should show rsk0stl61
          - name: Start Grid - STL
            type: xlrelease.SequentialGroup
            tags:
            - grid
            tasks:
            - name: Start live grid (manual)
              type: xlrelease.Task
              description: |-
                For each of the following servers: rsk0stl61, rsk0stl62
                - `grid_REL2/scripts/startLocator.sh`
                - Wait until you receive a startup complete message
                - `grid_REL2/scripts/gfsh.sh -e "connect --locator=localhost[15000]"` should show "Connected to localhost[15000]"

                For each of the following servers: rsk0stl61, rsk0stl62, rsk0stl115, rsk0stl116, rsk0stl117, rsk0stl118
                - `grid_REL2/scripts/startPhysicalMachine.sh`
                - Wait until you receive a startup complete message
            - name: Start staging grid (manual)
              type: xlrelease.Task
              description: |-
                For each of the following servers: rsk0stl15
                - `grid_REL2/scripts/startLocator.sh`
                - Wait until you receive a startup complete message
                - `grid_REL2/scripts/gfsh.sh -e "connect --locator=localhost[15000]"` should show "Connected to localhost[15000]"

                For each of the following servers: rsk0stl15
                - `grid_REL2/scripts/startPhysicalMachine.sh`
                - Wait until you receive a startup complete message
            - name: Validate grid is started
              type: xlrelease.GateTask
              description: |-
                For rsk0stl61
                - `grid_REL2/scripts/gfsh.sh -e "connect --locator=localhost[15000]" -e "list members"` should show rsk0stl61-locator1, rsk0stl62-locator1, rsk0stl115-server1, rsk0stl116-server1, rsk0stl117-server1, rsk0stl117-worker1, rsk0stl118-server1, rsk0stl118-worker1

                For rsk0stl15
                - `grid_REL2/scripts/gfsh.sh -e "connect --locator=localhost[15000]" -e "list members"` should show rsk0stl15-locator1, rsk0stl15-server1, rsk0stl15-server2
        - name: Habitat- Host Manager Deployment - STL
          type: xlrelease.SequentialGroup
          tags:
          - HM
          - Habitat
          tasks:
          - name: Habitat
            type: xlrelease.SequentialGroup
            tags:
            - Habitat
            tasks:
            - name: TOML
              type: xlrelease.SequentialGroup
              precondition: "False"
              tags:
              - TOML
              tasks:
              - name: TOML-FlexTP-STL
                type: jenkins.Build
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-STL/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-STL/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - TOML
                - flextp
                - HM
                - '#bizops'
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                tags:
                - '#bizops'
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
          - name: Promote - flextp_host_manager - STL - linux_kernel2
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
            jobParameters: |-
              packageIdent=${folder.flextp_oel6_version}
              channel=peat-stl
              platform=linux_kernel2
              contactList=Chandra.Nerella@mastercard.com
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - flextp
            - HM
            - '#bizops'
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            tags:
            - '#bizops'
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote - flextp_host_manager - STL - linux
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
            jobParameters: |-
              packageIdent=${folder.flextp+oel7_version}
              channel=peat-stl
              platform=linux
              contactList=Chandra.Nerella@mastercard.com
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - flextp
            - HM
            - '#bizops'
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            tags:
            - '#bizops'
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Status - Host Manager - STL
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-STL-peat/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-STL-peat/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - flextp
            - HM
            - Habitat
            - '#bizops'
          - name: Validate Hostmanager
            type: xlrelease.GateTask
            description: |-
              On the HOST LIST : ${folder.all_peat_stl_servers} perform the below steps

              1. Login to the box and Switch to fraud user
              2. cd /apps_01/fruad/hubernetes/bin
              3. run './h8s_version.sh'
              4. The Host Manager Configuration version must match - ${folder.artifact.host-manager-configuration.version}
              5. Host Manger CLI version must match ${folder.host_manager_cli_version}
              6. Host Manager version must match ${folder.artifact.host-manager.ver}
            tags:
            - '#bizops'
        - name: HM Deploy Flatpack - STL
          type: xlrelease.SequentialGroup
          tags:
          - HM
          tasks:
          - name: Deploy Flatpack for All Channels
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Run deploy flatpack command
              deploy flatpack -s WNG

              Before Selecting the "Y" option validate all flatpack version to match with apmate.
            tags:
            - Flatpack
            - HM
            - '#bizops'
        - name: HM Recreate Site - STL
          type: xlrelease.SequentialGroup
          tags:
          - HM
          tasks:
          - name: Recreate Site - STL
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Recreate host with Force option
              recreate site -s WNG -f

              7. Use view status with the request id to check the status of the command. The command should show COMPLETED.
            tags:
            - HM
            - '#bizops'
        - name: HM Start Hosts - STL
          type: xlrelease.SequentialGroup
          flagStatus: ATTENTION_NEEDED
          flagComment: PEAT team will start manually
          tags:
          - HM
          tasks:
          - name: Start All Instances
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Start hosts
              start site -s WNG

              7. Verify all instances started using the view status command.
            tags:
            - '#bizops'
        - name: grid-udt-daemon Deploy
          type: xlrelease.SequentialGroup
          precondition: "False"
          tags:
          - grid
          - udt-daemon
          tasks:
          - name: Habitat deployment
            type: xlrelease.SequentialGroup
            tags:
            - Habitat
            tasks:
            - name: TOML - udt-daemon
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              jobParameters: |-
                habChannel=peat
                habServiceGroup=stage
                habService=decision_processing/grid_udt_daemon
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - TOML
              - grid
              - udt-daemon
              - '#bizops'
            - name: "Sleep ${folder.metadata.time} seconds"
              type: xlrelease.ScriptTask
              tags:
              - '#bizops'
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: Promote - udt-daemon
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              jobParameters: |-
                artifactAndPackage=grid-udt-daemon decision_processing/grid_udt_daemon
                promoteToChannel=peat
                platform=linux_kernel2
                dryRun=false
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - grid
              - udt-daemon
              - '#bizops'
            - name: grid-udt-daemon start/stop
              type: xlrelease.SequentialGroup
              tags:
              - grid
              - udt-daemon
              tasks:
              - name: grid-udt-daemon stop
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - grid
                - udt-daemon
                - '#bizops'
              - name: validate stop
                type: xlrelease.Task
                description: |-
                  https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/stop/

                  build should be successful, and supervisor desired state should be down

                  package                                                   type        desired  state  elapsed (s)  pid     group
                  decision_processing/grid_udt_daemon  standalone  down     down   10           <none>  grid_udt_daemon.peat
                tags:
                - '#bizops'
              - name: grid-udt-daemon start
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - grid
                - udt-daemon
                - '#bizops'
              - name: validate start
                type: xlrelease.Task
                description: |-
                  https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/start/

                  build should be successful and supervisor desired state should be up

                  package type desired state elapsed (s) pid group
                  decision_processing/grid_udt_daemon standalone up up 10 <none> grid_udt_daemon.peat
                tags:
                - '#bizops'
            - name: grid-udt-daemon status
              type: xlrelease.SequentialGroup
              tags:
              - grid
              - udt-daemon
              tasks:
              - name: grid-udt-daemon status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - grid
                - udt-daemon
                - '#bizops'
              - name: validate status
                type: xlrelease.Task
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/status/
                tags:
                - '#bizops'
        - name: ai-garage-validator Deploy
          type: xlrelease.SequentialGroup
          precondition: "False"
          tags:
          - ai_garage
          tasks:
          - name: Habitat deployment
            type: xlrelease.SequentialGroup
            tasks:
            - name: TOML - ai-garage
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              jobParameters: |-
                habChannel=peat
                habServiceGroup=stage
                habService=decision_processing/ai-garage-validator
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - TOML
              - ai_garage
              - Habitat
              - '#bizops'
            - name: "Sleep ${folder.metadata.time} seconds (copy)"
              type: xlrelease.ScriptTask
              tags:
              - '#bizops'
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: Promote - ai-garage
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              jobParameters: |-
                artifactAndPackage=decision_processing/ai_garage_validator
                promoteToChannel=peat
                platform=linux_kernel2
                dryRun=false
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - ai_garage
              - Habitat
              - '#bizops'
            - name: ai-garage-validator start/stop
              type: xlrelease.SequentialGroup
              tasks:
              - name: ai-garage-validator stop
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - ai_garage
                - Habitat
                - '#bizops'
              - name: validate stop
                type: xlrelease.Task
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/stop/
                tags:
                - '#bizops'
              - name: ai-garage-validator start
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - ai_garage
                - Habitat
                - '#bizops'
              - name: validate start
                type: xlrelease.Task
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/start/
                team: SCSSPeatDeployment
                tags:
                - '#bizops'
            - name: ai-garage-validator status
              type: xlrelease.SequentialGroup
              tasks:
              - name: ai-garage-validator status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - ai_garage
                - Habitat
                - '#bizops'
              - name: validate status
                type: xlrelease.Task
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/status/
                team: SCSSPeatDeployment
                tags:
                - '#bizops'
    color: '#0099CC'
  realFlagStatus: ATTENTION_NEEDED
  variables:
  - type: xlrelease.StringVariable
    key: FlexTPDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: etlDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPEnvNonProdBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPJSONBuildStatus
    requiresValue: false
    showOnReleaseStart: false
    description: FlexTP Global Seed Data JSON build status
  - type: xlrelease.StringVariable
    key: FlexTPDVTRunBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTDeployBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPFSDOverride-Rel2-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: ETLDeploy-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: DEPLOYMENT_DIR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: TMP_BKUP_DIR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonPR
    requiresValue: false
    showOnReleaseStart: false
    value: https://fusion.mastercard.int/stash/projects/DECISION_MANAGEMENT/repos/mc_dmp_chef_objects_nonprod/pull-requests/126/overview
  - type: xlrelease.StringVariable
    key: GridUDTDaemonBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
    value: 1.6.0
  - type: xlrelease.StringVariable
    key: ai-garage-validatorPR
    requiresValue: false
    showOnReleaseStart: false
    value: https://fusion.mastercard.int/stash/projects/DECISION_MANAGEMENT/repos/mc_dmp_chef_objects_nonprod/pull-requests/126/overview
  - type: xlrelease.StringVariable
    key: AIGarageValidatorBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: AIGarageValidatorArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
    value: 0.1.2
  - type: xlrelease.StringVariable
    key: FlextpFlatpackSite
    requiresValue: false
    showOnReleaseStart: false
    description: "For STL, set to WNG,  For KSC, set to KC"
    value: WNG
  - type: xlrelease.StringVariable
    key: release
  extensions:
  - name: Dashboard
    type: xlrelease.Dashboard
    owner: e025882
    tiles:
    - name: Release progress
      type: xlrelease.ReleaseProgressTile
    - name: Release summary
      type: xlrelease.ReleaseSummaryTile
    - name: Resource usage
      type: xlrelease.ResourceUsageTile
    - name: Release timeline
      type: xlrelease.TimelineTile
    - name: Release health
      type: xlrelease.ReleaseHealthTile
    - name: Grid
      type: xlrelease.TaskProgressTile
      row: 2
      col: 2
      tags:
      - grid
    - name: FlexTP
      type: xlrelease.TaskProgressTile
      row: 3
      col: 0
      tags:
      - flextp
  riskProfile: Default risk profile
- template: PEAT-MASTER-TX-PROCESSING-rewrite
  description: This Template mirrors the PEAT DIP
  scheduledStartDate: 2019-02-06T09:00:00-06:00
  phases:
  - phase: XLR Release
    tasks:
    - name: Add Release tag
      type: xlr.AddTag
      newTag: "${release}"
      team: SCSSStageDeployment
      tags:
      - '#bizops'
    color: '#0079BC'
  - phase: Tx Processing Deployment
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
    - name: All Transactions
      type: xlrelease.ParallelGroup
      tasks:
      - name: Transaction Sequential
        type: xlrelease.SequentialGroup
        tasks:
        - name: "Stop Flextp Instances - ${SITE}"
          type: xlrelease.SequentialGroup
          tags:
          - flextp
          tasks:
          - name: "HM Stop ${SITE}"
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hmcli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Stop all instances associated with the site ${hostmanager-site}
              stop site -s ${hostmanager-site}


              7. Verify all instances stopped using the view status command.
        - name: Parallel deploy
          type: xlrelease.ParallelGroup
          tasks:
          - name: Grid
            type: xlrelease.SequentialGroup
            tasks:
            - name: Set Grid variables
              type: xlrelease.ScriptTask
              team: SCSSStageDeployment
              tags:
              - '#bizops'
              script: |-
                releaseVariables['habitat_promotion_channel'] = ('${folder.env}' + '-' + '${SITE}').lower()

                releaseVariables['live_grid_locator_any'] = ${folder.live_grid_locator_any}['${folder.env}' + '-' + '${SITE}']
                releaseVariables['staging_grid_locator_any'] = ${folder.staging_grid_locator_any}['${folder.env}' + '-' + '${SITE}']

                releaseVariables['live_grid_locator_any_host'] = (releaseVariables['live_grid_locator_any']).split('[')[0]
                releaseVariables['staging_grid_locator_any_host'] = (releaseVariables['staging_grid_locator_any']).split('[')[0]

                releaseVariables['live_grid_members_all'] = ${folder.live_grid_members_all}['${folder.env}' + '-' + '${SITE}']
                releaseVariables['staging_grid_members_all'] = ${folder.staging_grid_members_all}['${folder.env}' + '-' + '${SITE}']

                releaseVariables['live_grid_members_all_hosts'] = ', '.join(list(set(map(lambda x: x.strip().split('-')[0], releaseVariables['live_grid_members_all'].split(',')))))
                releaseVariables['staging_grid_members_all_hosts'] = ', '.join(list(set(map(lambda x: x.strip().split('-')[0], releaseVariables['staging_grid_members_all'].split(',')))))
            - name: Grid (manual)
              type: xlrelease.SequentialGroup
              precondition: "releaseVariables['SITE'] != 'PNQ' and folderVariables['folder.grid_deploy_manual']\
                \ == True"
              tags:
              - grid
              tasks:
              - name: Stop Grid
                type: xlrelease.SequentialGroup
                tags:
                - grid
                tasks:
                - name: Stop Grid (in case it was running via habitat)
                  type: jenkins.Build
                  jenkinsServer: dmp_cd5
                  jobName: "ChefHabitat/job/decision_processing/job/live_grid/job/${folder.env}/job/${SITE}/job/stop/"
                  team: SCSSStageDeployment
                  tags:
                  - '#bizops'
                - name: Stop staging grid (manual)
                  type: xlrelease.Task
                  description: |-
                    - Log into ${staging_grid_locator_any_host}
                    - `sesudo fraud`
                    - `/apps_01/fraud/gridstaging/scripts/gfsh.sh -e "connect --locator=${staging_grid_locator_any}" -e "shutdown --include-locators=true"`
                    - If there is a "connection refused" error, you can ignore it
                - name: Stop live grid (manual)
                  type: xlrelease.Task
                  description: |-
                    - Log into ${live_grid_locator_any_host}
                    - `sesudo fraud`
                    - `/apps_01/fraud/grid/scripts/gfsh.sh -e "connect --locator=${live_grid_locator_any}" -e "shutdown --include-locators=true"`
                    - If there is a "connection refused" error, you can ignore it
                - name: "Validate no Grid processes running on ${live_grid_servers},\
                    \ !!!!!!!!!!!!!!!! TESTING !!!!!!!!!!!!!!!!!!!!!!!!!"
                  type: xlrelease.GateTask
                  description: |-
                    - Log into each of ${live_grid_members_all_hosts}, ${staging_grid_members_all_hosts}
                    - Run `ps -ef | grep pivotal`
                    - In each case, there should be no Java results
              - name: Promote Grid
                type: xlrelease.SequentialGroup
                tags:
                - grid
                tasks:
                - name: Deploy grid (manual)
                  type: xlrelease.Task
                  description: |-
                    - For each of the following servers:
                        - ${live_grid_members_all_hosts}, ${staging_grid_members_all_hosts}
                    - `sesudo fraud`
                    - `cd staging`
                    - `wget --no-check-certificate https://artifacts.mastercard.int/artifactory/releases/com/mastercard/risk/grid/GridConfig/${folder.GridConfig_version}/GridConfig-${folder.GridConfig_version}-package.zip`
                    - For ${live_grid_members_all_hosts}: `../bin/grid_deploy.sh ./GridConfig-${folder.GridConfig_version}-package.zip `
                    - For ${staging_grid_members_all_hosts}: `../bin/grid_deploy.sh ./GridConfig-${folder.GridConfig_version}-package.zip -s`
                - name: Validate grid deployment
                  type: xlrelease.GateTask
                  description: |-
                    For each of the following servers: ${live_grid_members_all_hosts}
                    - `sesudo fraud`
                    - `readlink /apps_01/fraud/grid` should point to `/apps_01/fraud/grid_builds/GridConfig-${folder.GridConfig_version}`

                    For each of the following servers: ${staging_grid_members_all_hosts}
                    - `sesudo fraud`
                    - `readlink /apps_01/fraud/grid` should point to `/apps_01/fraud/grid_builds/staging/GridConfig-${folder.GridConfig_version}`
                    - Note: you can ignore `/apps_01/fraud/gridstaging` for PEAT and Production
                  tags:
                  - '#bizops'
              - name: Start Grid
                type: xlrelease.SequentialGroup
                tags:
                - grid
                tasks:
                - name: Start live grid (manual)
                  type: xlrelease.Task
                  description: |-
                    For each of the following servers **in parallel**: ${live_grid_members_all_hosts}
                    - Run `/apps_01/fraud/grid/scripts/startPhysicalMachine.sh -p`
                    - Wait until you are returned to the prompt

                    **FOR KSC GRID RESTARTS REACH OUT TO PEAT TEAM**
                    **michael ruest, joao rocha, sri harsha chidipothu**
                  flagStatus: AT_RISK
                  flagComment: "Precondition should be \"releaseVariables['SITE']\
                    \ == 'STL'\""
                  precondition: "releaseVariables['SITE'] == 'KSC'"
                - name: Start staging grid (manual)
                  type: xlrelease.Task
                  description: |-
                    For each of the following servers **in parallel**: ${staging_grid_members_all_hosts}
                    - Run `/apps_01/fraud/grid/scripts/startPhysicalMachine.sh -p`
                    - Wait until you are returned to the prompt

                    **FOR KSC GRID RESTARTS REACH OUT TO PEAT TEAM**
                    **michael ruest, joao rocha, sri harsha chidipothu**
                  flagStatus: AT_RISK
                  flagComment: "Precondition should be \"releaseVariables['SITE']\
                    \ == 'STL'\""
                  precondition: "releaseVariables['SITE'] == 'KSC'"
                - name: Validate grid is started
                  type: xlrelease.GateTask
                  description: |-
                    - Log into ${live_grid_locator_any_host}
                    - `sesudo fraud`
                    - `/apps_01/fraud/grid/scripts/gfsh.sh -e "connect --locator=${live_grid_locator_any}" -e "list members"` should show: ${live_grid_members_all}
                    - Log into ${staging_grid_locator_any_host}
                    - `sesudo fraud`
                    - `/apps_01/fraud/gridstaging/scripts/gfsh.sh -e "connect --locator=${live_grid_locator_any}" -e "list members"` should show: ${staging_grid_members_all}
                  precondition: "releaseVariables['SITE'] == 'STL'"
                  tags:
                  - '#bizops'
            - name: Grid (habitat)
              type: xlrelease.SequentialGroup
              precondition: "releaseVariables['SITE'] != 'PNQ' and folderVariables['folder.grid_deploy']\
                \ == True"
              tags:
              - grid
              tasks:
              - name: Stop Grid
                type: xlrelease.SequentialGroup
                tags:
                - grid
                tasks:
                - name: Stop Grid
                  type: jenkins.Build
                  jenkinsServer: dmp_cd5
                  jobName: "ChefHabitat/job/decision_processing/job/live_grid/job/${folder.env}/job/${SITE}/job/stop/"
                - name: Stop staging grid (in case it was running manually)
                  type: xlrelease.Task
                  description: |-
                    - Log into ${staging_grid_locator_any_host}
                    - `sesudo fraud`
                    - `/apps_01/fraud/gridstaging/scripts/gfsh.sh -e "connect --locator=${staging_grid_locator_any}" -e "shutdown --include-locators=true"`
                    - If there is a "connection refused" error, you can ignore it
                - name: Stop live grid (in case it was running manually)
                  type: xlrelease.Task
                  description: |-
                    - Log into ${live_grid_locator_any_host}
                    - `sesudo fraud`
                    - `/apps_01/fraud/grid/scripts/gfsh.sh -e "connect --locator=${live_grid_locator_any}" -e "shutdown --include-locators=true"`
                    - If there is a "connection refused" error, you can ignore it
                - name: Validate no Grid processes running
                  type: xlrelease.GateTask
                  description: |-
                    - Log into each of ${live_grid_members_all_hosts}, ${staging_grid_members_all_hosts}
                    - Run `ps -ef | grep pivotal`
                    - In each case, there should be no Java results
              - name: Promote Grid
                type: xlrelease.SequentialGroup
                tags:
                - grid
                tasks:
                - name: Promote Grid
                  type: jenkins.Build
                  jenkinsServer: dmp_cd5
                  jobName: ChefHabitat/job/decision_processing/job/live_grid/job/live_grid-promote-specific-param/
                  jobParameters: |-
                    packageIdent=${folder.live_grid_version}
                    channel=${habitat_promotion_channel}
                    platform=linux
                - name: Validate grid deployment
                  type: xlrelease.GateTask
                  description: |-
                    For each of the following servers: ${live_grid_members_all_hosts}
                    - `sesudo fraud`
                    - `readlink /apps_01/fraud/grid` should point to `/apps_01/fraud/grid_builds/GridConfig-${folder.GridConfig_version}`

                    For each of the following servers: ${staging_grid_members_all_hosts}
                    - `sesudo fraud`
                    - `readlink /apps_01/fraud/gridstaging` should point to `/apps_01/fraud/grid_builds/staging/GridConfig-${folder.GridConfig_version}`
                  tags:
                  - '#bizops'
              - name: Start Grid
                type: xlrelease.SequentialGroup
                tags:
                - grid
                tasks:
                - name: Start Grid
                  type: jenkins.Build
                  jenkinsServer: dmp_cd5
                  jobName: "ChefHabitat/job/decision_processing/job/live_grid/job/${folder.env}/job/${SITE}/job/start/"
                  flagStatus: AT_RISK
                  flagComment: "Precondition should be \"releaseVariables['SITE']\
                    \ == 'STL'\""
                - name: Validate grid is started
                  type: xlrelease.GateTask
                  description: |-
                    - Log into ${live_grid_locator_any_host}
                    - `sesudo fraud`
                    - `/apps_01/fraud/grid/scripts/gfsh.sh -e "connect --locator=${live_grid_locator_any}" -e "list members"` should show: ${live_grid_members_all}
                    - Log into ${staging_grid_locator_any_host}
                    - `sesudo fraud`
                    - `/apps_01/fraud/gridstaging/scripts/gfsh.sh -e "connect --locator=${staging_grid_locator_any}" -e "list members"` should show: ${staging_grid_members_all}
                  precondition: "releaseVariables['SITE'] == 'STL'"
                  tags:
                  - '#bizops'
          - name: "Habitat- Host Manager Deployment - ${SITE}"
            type: xlrelease.SequentialGroup
            precondition: "releaseVariables['hostmanager-deploy'] == 'True'"
            tags:
            - HM
            - Habitat
            tasks:
            - name: Habitat
              type: xlrelease.SequentialGroup
              tags:
              - Habitat
              tasks:
              - name: TOML
                type: xlrelease.SequentialGroup
                precondition: "releaseVariables['hostmanager-toml-deploy'] == 'True'"
                tags:
                - TOML
                tasks:
                - name: "TOML-FlexTP-${SITE}"
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: "ChefHabitat/job/decision_processing/job/flextp/job/flextp_host_manager/job/peat/job/deploy-toml-${SITE}/"
                  description: "https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/flextp_host_manager/job/peat/job/deploy-toml-${SITE}/"
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - TOML
                  - flextp
                  - HM
                  - '#bizops'
                - name: "Sleep ${folder.metadata.time} seconds"
                  type: xlrelease.ScriptTask
                  tags:
                  - '#bizops'
                  script: |-
                    import time
                    time.sleep(${folder.metadata.time})
                    print "Done Sleeping"
            - name: Promote to stable
              type: xlrelease.SequentialGroup
              tasks:
              - name: "Promote - flextp_host_manager - ${SITE} - linux_kernel2 Promote\
                  \ to stable"
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/flextp_host_manager/job/flextp_host_manager-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.flextp_oel6_version}
                  channel=stable
                  platform=linux_kernel2
                  contactList=Chandra.Nerella@mastercard.com
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/flextp_host_manager/job/flextp_host_manager-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - flextp
                - HM
                - '#bizops'
              - name: "Promote - flextp_host_manager - ${SITE} - linux promote to\
                  \ stable"
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.flextp+oel7_version}
                  channel=stable
                  platform=linux
                  contactList=Chandra.Nerella@mastercard.com
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - flextp
                - HM
                - '#bizops'
            - name: "Promote - flextp_host_manager - ${SITE} - linux_kernel2"
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
              jobParameters: |-
                packageIdent=${folder.flextp_oel6_version}
                channel=${peat-habitat-channel}
                platform=linux_kernel2
                contactList=Chandra.Nerella@mastercard.com
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - flextp
              - HM
              - '#bizops'
            - name: "Sleep ${folder.metadata.time} seconds"
              type: xlrelease.ScriptTask
              tags:
              - '#bizops'
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: "Promote - flextp_host_manager - ${SITE} - linux"
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
              jobParameters: |-
                packageIdent=${folder.flextp+oel7_version}
                channel=${peat-habitat-channel}
                platform=linux
                contactList=Chandra.Nerella@mastercard.com
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - flextp
              - HM
              - '#bizops'
            - name: "Sleep ${folder.metadata.time} seconds"
              type: xlrelease.ScriptTask
              tags:
              - '#bizops'
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: "Status - Host Manager - ${SITE}"
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: "ChefHabitat/job/decision_processing/job/flextp/job/flextp_host_manager/job/peat/job/status-${SITE}-peat/"
              description: "https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/flextp_host_manager/job/peat/job/status-${SITE}-peat/"
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - flextp
              - HM
              - Habitat
              - '#bizops'
            - name: Validate Hostmanager
              type: xlrelease.GateTask
              description: |-
                On the HOST LIST : ${folder.all_peat_stl_servers} perform the below steps

                1. Login to the box and Switch to fraud user
                2. cd /apps_01/fruad/hubernetes/bin
                3. run './h8s_version.sh'
                4. The Host Manager Configuration version must match - ${folder.artifact.host-manager-configuration.version}
                5. Host Manger CLI version must match ${folder.host_manager_cli_version}
                6. Host Manager version must match ${folder.host_manager_version}
              tags:
              - '#bizops'
        - name: "HM Deploy Flatpack - ${SITE}"
          type: xlrelease.SequentialGroup
          precondition: "releaseVariables['flat-pack-deploy'] == 'True'"
          tags:
          - HM
          tasks:
          - name: Deploy Flatpack for All Channels
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hmcli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Run deploy flatpack command
              deploy flatpack -s ${hostmanager-site}

              Before Selecting the "Y" option validate all flatpack version to match with apmate.
            tags:
            - Flatpack
            - HM
            - '#bizops'
        - name: "HM Deploy legacyflex - ${SITE}"
          type: xlrelease.SequentialGroup
          precondition: "folderVariables['folder.flatpack_legacy_deploy'] == True"
          tasks:
          - name: "Deploy legacyflex on ${flextp-hosts}"
            type: xlrelease.Task
            description: |-
              HOSTS : ${flextp-hosts}

              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hmcli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Run deploy legacyflex command
              deploy legacyflex -h ${folder.flatpack_legacy_hosts} -s ${flextp-flatpack-site}
              Before Selecting the "Y" option  validate all flatpack version to match with apmate.
            tags:
            - '#bizops'
        - name: "HM Recreate Site - ${SITE}"
          type: xlrelease.SequentialGroup
          precondition: "releaseVariables['hostmanager-deploy'] == 'True'"
          tags:
          - HM
          tasks:
          - name: "Recreate Site - ${SITE}"
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hmcli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Recreate host with Force option
              recreate site -s ${hostmanager-site} -f

              7. Use view status with the request id to check the status of the command. The command should show COMPLETED.
            tags:
            - HM
            - '#bizops'
        - name: "HM Start Hosts - ${SITE}"
          type: xlrelease.SequentialGroup
          precondition: "False"
          tags:
          - HM
          tasks:
          - name: Start All Instances
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hmcli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Start hosts
              start site -s ${hostmanager-site}

              7. Verify all instances started using the view status command.
            precondition: "False"
            tags:
            - '#bizops'
        - name: grid-udt-daemon Deploy
          type: xlrelease.SequentialGroup
          precondition: "False"
          tags:
          - grid
          - udt-daemon
          tasks:
          - name: Habitat deployment
            type: xlrelease.SequentialGroup
            tags:
            - Habitat
            tasks:
            - name: TOML - udt-daemon
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              jobParameters: |-
                habChannel=peat
                habServiceGroup=stage
                habService=decision_processing/grid_udt_daemon
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - TOML
              - grid
              - udt-daemon
              - '#bizops'
            - name: "Sleep ${folder.metadata.time} seconds"
              type: xlrelease.ScriptTask
              tags:
              - '#bizops'
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: Promote - udt-daemon
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              jobParameters: |-
                artifactAndPackage=grid-udt-daemon decision_processing/grid_udt_daemon
                promoteToChannel=peat
                platform=linux_kernel2
                dryRun=false
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - grid
              - udt-daemon
              - '#bizops'
            - name: grid-udt-daemon start/stop
              type: xlrelease.SequentialGroup
              tags:
              - grid
              - udt-daemon
              tasks:
              - name: grid-udt-daemon stop
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - grid
                - udt-daemon
                - '#bizops'
              - name: validate stop
                type: xlrelease.Task
                description: |-
                  https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/stop/

                  build should be successful, and supervisor desired state should be down

                  package                                                   type        desired  state  elapsed (s)  pid     group
                  decision_processing/grid_udt_daemon  standalone  down     down   10           <none>  grid_udt_daemon.peat
                tags:
                - '#bizops'
              - name: grid-udt-daemon start
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - grid
                - udt-daemon
                - '#bizops'
              - name: validate start
                type: xlrelease.Task
                description: |-
                  https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/start/

                  build should be successful and supervisor desired state should be up

                  package type desired state elapsed (s) pid group
                  decision_processing/grid_udt_daemon standalone up up 10 <none> grid_udt_daemon.peat
                tags:
                - '#bizops'
            - name: grid-udt-daemon status
              type: xlrelease.SequentialGroup
              tags:
              - grid
              - udt-daemon
              tasks:
              - name: grid-udt-daemon status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - grid
                - udt-daemon
                - '#bizops'
              - name: validate status
                type: xlrelease.Task
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/status/
                tags:
                - '#bizops'
        - name: ai-garage-validator Deploy
          type: xlrelease.SequentialGroup
          precondition: "False"
          tags:
          - ai_garage
          tasks:
          - name: Habitat deployment
            type: xlrelease.SequentialGroup
            tasks:
            - name: TOML - ai-garage
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              jobParameters: |-
                habChannel=peat
                habServiceGroup=stage
                habService=decision_processing/ai-garage-validator
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - TOML
              - ai_garage
              - Habitat
              - '#bizops'
            - name: "Sleep ${folder.metadata.time} seconds (copy)"
              type: xlrelease.ScriptTask
              tags:
              - '#bizops'
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: Promote - ai-garage
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              jobParameters: |-
                artifactAndPackage=decision_processing/ai_garage_validator
                promoteToChannel=peat
                platform=linux_kernel2
                dryRun=false
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - ai_garage
              - Habitat
              - '#bizops'
            - name: ai-garage-validator start/stop
              type: xlrelease.SequentialGroup
              tasks:
              - name: ai-garage-validator stop
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - ai_garage
                - Habitat
                - '#bizops'
              - name: validate stop
                type: xlrelease.Task
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/stop/
                tags:
                - '#bizops'
              - name: ai-garage-validator start
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - ai_garage
                - Habitat
                - '#bizops'
              - name: validate start
                type: xlrelease.Task
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/start/
                team: SCSSPeatDeployment
                tags:
                - '#bizops'
            - name: ai-garage-validator status
              type: xlrelease.SequentialGroup
              tasks:
              - name: ai-garage-validator status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - ai_garage
                - Habitat
                - '#bizops'
              - name: validate status
                type: xlrelease.Task
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/status/
                team: SCSSPeatDeployment
                tags:
                - '#bizops'
    color: '#0099CC'
  realFlagStatus: AT_RISK
  tags:
  - rewrite
  - master
  - "22.8"
  variables:
  - type: xlrelease.StringVariable
    key: FlexTPDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: etlDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPEnvNonProdBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPJSONBuildStatus
    requiresValue: false
    showOnReleaseStart: false
    description: FlexTP Global Seed Data JSON build status
  - type: xlrelease.StringVariable
    key: FlexTPDVTRunBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTDeployBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPFSDOverride-Rel2-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: ETLDeploy-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: DEPLOYMENT_DIR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: TMP_BKUP_DIR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonPR
    requiresValue: false
    showOnReleaseStart: false
    value: https://fusion.mastercard.int/stash/projects/DECISION_MANAGEMENT/repos/mc_dmp_chef_objects_nonprod/pull-requests/126/overview
  - type: xlrelease.StringVariable
    key: GridUDTDaemonArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
    value: 1.6.0
  - type: xlrelease.StringVariable
    key: ai-garage-validatorPR
    requiresValue: false
    showOnReleaseStart: false
    value: https://fusion.mastercard.int/stash/projects/DECISION_MANAGEMENT/repos/mc_dmp_chef_objects_nonprod/pull-requests/126/overview
  - type: xlrelease.StringVariable
    key: AIGarageValidatorBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: AIGarageValidatorArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
    value: 0.1.2
  - type: xlrelease.StringVariable
    key: FlextpFlatpackSite
    requiresValue: false
    showOnReleaseStart: false
    description: "For STL, set to WNG,  For KSC, set to KC"
    value: WNG
  - type: xlrelease.StringVariable
    key: FlextpFlatpackRealTimeServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackUDTManagementServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: release
  - type: xlrelease.StringVariable
    key: SITE
    description: "STL, KSC, PNQ"
    value: STL
  - type: xlrelease.StringVariable
    key: hostmanager-site
    value: WNG
  - type: xlrelease.StringVariable
    key: peat-habitat-channel
    value: peat-stl
  - type: xlrelease.StringVariable
    key: hostmanager-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: grid-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: live_grid_servers
    value: "rsk0stl61, rsk0stl62, rsk0stl115, rsk0stl116, rsk0stl117, rsk0stl118"
  - type: xlrelease.StringVariable
    key: live_grid_servers_all
    value: "rsk0stl115, rsk0stl116, rsk0stl117, rsk0stl118"
  - type: xlrelease.StringVariable
    key: staging_grid_servers_all
    value: rsk0stl15
  - type: xlrelease.StringVariable
    key: hostmanager-toml-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: grid_all
    value: "${folder.stl_live_grid_servers}"
  - type: xlrelease.StringVariable
    key: flat-pack-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: live_grid_members_all
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: staging_grid_members_all
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: habitat_promotion_channel
    requiresValue: false
    showOnReleaseStart: false
    value: "NULL"
  - type: xlrelease.StringVariable
    key: staging_grid_locator_any_host
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: live_grid_locator_any_host
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: live_grid_members_all_hosts
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: staging_grid_members_all_hosts
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: live_grid_locator_any
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: staging_grid_locator_any
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: flextp-hosts
  - type: xlrelease.StringVariable
    key: flextp-flatpack-site
  extensions:
  - name: Dashboard
    type: xlrelease.Dashboard
    owner: e025882
    tiles:
    - name: Release progress
      type: xlrelease.ReleaseProgressTile
    - name: Release summary
      type: xlrelease.ReleaseSummaryTile
    - name: Resource usage
      type: xlrelease.ResourceUsageTile
    - name: Release timeline
      type: xlrelease.TimelineTile
    - name: Release health
      type: xlrelease.ReleaseHealthTile
    - name: Grid
      type: xlrelease.TaskProgressTile
      row: 2
      col: 2
      tags:
      - grid
    - name: FlexTP
      type: xlrelease.TaskProgressTile
      row: 3
      col: 0
      tags:
      - flextp
  riskProfile: Default risk profile
- template: PEAT-MASTER-WEBAPPS
  description: This Template mirrors the PEAT DIP
  scheduledStartDate: 2019-02-06T09:00:00-06:00
  phases:
  - phase: XLR Release
    tasks:
    - name: Add Release Tag
      type: xlr.AddTag
      tags:
      - '#bizops'
    color: '#0079BC'
  - phase: WEBAPPS
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      tags:
      - WebApps
      - '#bizops'
    - name: Parallel Deployment
      type: xlrelease.ParallelGroup
      tasks:
      - name: ODM applications
        type: xlrelease.SequentialGroup
        tags:
        - ODM
        tasks:
        - name: Merge PR to remove netteza DS
          type: stash.MergePullRequest
          server: Bitbucket Server
          username: dmp_xlr_merging
          project: DECISION_MANAGEMENT
          repository: mc_dmp_chef_objects_nonprod
          prid: "1118"
          description: Merge PR https://fusion.mastercard.int/stash/projects/DECISION_MANAGEMENT/repos/mc_dmp_chef_objects_nonprod/pull-requests/1118/overview
          owner: riskps
          variableMapping:
            pythonScript.password: "${folder.metadata.bitbucket.dmp_xlr_merging}"
          tags:
          - '#bizops'
        - name: DMPRuleWebService PCF
          type: xlrelease.SequentialGroup
          owner: riskps
          tasks:
          - name: Merge PR
            type: stash.MergePullRequest
            username: dmp_xlr_merging
            project: ESSDMP-CORE
            repository: dmprulewebservices-jenkins
            description: "Merge PR https://fusion.mastercard.int/stash/projects/ESSDMP-CORE/repos/dmprulewebservices-jenkins/pull-requests/{new\
              \ PR number}/overview"
            owner: riskps
            variableMapping:
              pythonScript.password: "${folder.metadata.bitbucket.dmp_xlr_merging}"
            tags:
            - '#bizops'
          - name: Run Jenkins Job
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: DMPRuleWebService/job/stl-peat/job/Step1.DeployDMPRuleWebServiceApp/
            description: |-
              Run Jenkins job for deployment -
              https://cd5.mastercard.int/jenkins/job/DMPRuleWebService/job/stl-peat/job/Step1.DeployDMPRuleWebServiceApp/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - ODM
            - '#bizops'
          - name: Check DMPRuleWS is running in PCF
            type: xlrelease.Task
            description: |-
              Check dmp-rule-ws-peat appears in PCF dashboard

              link: https://apps.system.stl.pcfstage00.mastercard.int/

              Go to DMPRuleWebService PEAT STL section and check service is running
            tags:
            - ODM
            - '#bizops'
          - name: Validation - Run health check
            type: xlrelease.Task
            description: |-
              Run following URL in browser:
              https://dmp-rule-ws-peat.apps.stl.pcfstage00.mastercard.int/dmprule/healthCheck

              Expected result: {"status": true}
            team: SCSSPeatDeployment
            tags:
            - '#bizops'
        - name: Habitat
          type: xlrelease.SequentialGroup
          tags:
          - Habitat
          tasks:
          - name: Promote-dmpdecisionserver_dvs_ext_0
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.dmp_decision_server_dvs_ext_0_version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - Habitat
            - dmpdecisionserver_dvs_ext_0_peat
            - '#bizops'
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            tags:
            - '#bizops'
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmpdecisionserver_dvs_ext_1_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.dmpdecisionserver_dvs_ext_1_peat.version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmpdecisionserver_dvs_ext_1_peat
            - Habitat
            - '#bizops'
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            tags:
            - '#bizops'
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmpdecisionserver_dvs_int_0_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.dmpdecisionserver_dvs_int_0_peat.version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmpdecisionserver_dvs_int_0_peat
            - Habitat
            - '#bizops'
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            tags:
            - '#bizops'
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmpdecisionserver_dvs_int_1_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.dmpdecisionserver_dvs_int_1_peat.version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmpdecisionserver_dvs_int_1_peat
            - Habitat
            - '#bizops'
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            tags:
            - '#bizops'
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmpdecisionserver_res_0_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.dmpdecisionserver_res_0_peat.version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmpdecisionserver_res_0_peat
            - Habitat
            - '#bizops'
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            tags:
            - '#bizops'
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmpdecisionserver_res_1_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.dmpdecisionserver_res_1_peat.version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmpdecisionserver_res_1_peat
            - Habitat
            - '#bizops'
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            tags:
            - '#bizops'
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-decisioncenter_bc_service_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.decisioncenter_bc_service_peat_version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - decisioncenter_bc_service_peat
            - Habitat
            - '#bizops'
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            tags:
            - '#bizops'
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-decision_center_ec_components_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.decision_center_ec_components_peat.version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - decision_center_ec_components_peat
            - Habitat
            - '#bizops'
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            tags:
            - '#bizops'
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-decision_center_ec_webservices_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.decision_center_ec_webservices_peat.version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - decision_center_ec_webervices_peat
            - Habitat
            - '#bizops'
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmp_udt_ws_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.dmp_udt_ws_peat_version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmp_udt_ws_peat
            - Habitat
            - '#bizops'
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            tags:
            - '#bizops'
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Validation
            type: xlrelease.SequentialGroup
            tasks:
            - name: decisionserver_res_service
              type: xlrelease.SequentialGroup
              tags:
              - decisionserver_res_service
              - Habitat
              tasks:
              - name: DMPDecisionServer_dvs_ext_0 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_ext_0/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_ext_0/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_dvs_ext_0
                - Habitat
                - '#bizops'
              - name: DMPDecisionServer_dvs_ext_1 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_ext_1/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_ext_1/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_dvs_ext_1
                - Habitat
                - '#bizops'
              - name: DMPDecisionServer_dvs_int_0 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_int_0/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_int_0/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_dvs_int_0_peat
                - Habitat
                - '#bizops'
              - name: DMPDecisionServer_dvs_int_1 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_int_1/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_int_1/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_dvs_int_1
                - Habitat
                - '#bizops'
              - name: DMPDecisionServer_res_0 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_res_0/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_res_0/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_res_0
                - Habitat
                - '#bizops'
              - name: DMPDecisionServer_res_1 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_res_1/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_res_1/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_res_1
                - Habitat
                - '#bizops'
              - name: decisioncenter_bc_service status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisioncenter_bc_service/job/status/job/peat/job/Status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisioncenter_bc_service/job/status/job/peat/job/Status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - decisioncenter_bc_service
                - Habitat
                - '#bizops'
              - name: dmp_decision_center_ec_components
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_components/job/status/job/peat/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_components/job/status/job/peat/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmp_decision_center_ec_components
                - Habitat
                - '#bizops'
              - name: dmp_decision_center_ec_webservices
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_webservices/job/status/job/peat/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_webservices/job/status/job/peat/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmp_decision_center_ec_components
                - Habitat
                - '#bizops'
              - name: dmp_udt_ws
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/dmp_udt_ws/job/status/job/peat/job/Status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/dmp_udt_ws/job/status/job/peat/job/Status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmp_udt_ws_peat
                - Habitat
                - '#bizops'
              - name: Validate
                type: xlrelease.GateTask
                tags:
                - '#bizops'
      - name: TFC Tomcat Apps HABITAT & PCF
        type: xlrelease.SequentialGroup
        tags:
        - Tomcat Apps
        - Habitat
        tasks:
        - name: Lift this gate to begin deployment
          type: xlrelease.GateTask
          tags:
          - '#bizops'
        - name: Deploy tfcgateway
          type: xlrelease.SequentialGroup
          tasks:
          - name: PUBLISH TOMLS
            type: xlrelease.SequentialGroup
            flagStatus: ATTENTION_NEEDED
            flagComment: Only Continue if needed
            precondition: "False"
            tags:
            - TOML
            tasks:
            - name: Merge PR for TOML changes
              type: bitbucket.MergePullRequest
              server: NewConfigBitbucket
              username: dmp_xlr_merging
              variableMapping:
                pythonScript.password: "${folder.metadata.bitbucket.dmp_xlr_merging}"
              tags:
              - '#bizops'
            - name: Publish TOML's
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param
              jobParameters: |-
                appEnv=peat
                app=tfc_tfcgateway
              description: |-
                Publish TOML's on PEAT TFCGateway nodes

                https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - '#bizops'
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=tfcgateway dmp_user_interface_frameworks/tfc_tfcgateway
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for Gateway to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Gateway is not registered with synapse. Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/
            tags:
            - '#bizops'
        - name: Deploy DI
          type: xlrelease.SequentialGroup
          tasks:
          - name: PUBLISH TOMLS
            type: xlrelease.SequentialGroup
            flagStatus: ATTENTION_NEEDED
            flagComment: Only Continue if needed
            precondition: "False"
            tasks:
            - name: Merge PR for TOML changes
              type: bitbucket.MergePullRequest
              server: NewConfigBitbucket
              tags:
              - '#bizops'
            - name: Publish TOML's
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param
              jobParameters: |-
                appEnv=peat
                app=tfc_di
              description: |-
                Publish TOML's on PEAT DI nodes

                https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - '#bizops'
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=di dmp_user_interface_frameworks/tfc_di
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for DI to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: Status tfc_di
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_di/job/PEAT/job/status/
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_di/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
            tags:
            - '#bizops'
        - name: Deploy TFCConfig
          type: xlrelease.SequentialGroup
          tasks:
          - name: PUBLISH TOMLS
            type: xlrelease.SequentialGroup
            flagStatus: ATTENTION_NEEDED
            flagComment: Only Continue if needed
            precondition: "False"
            tasks:
            - name: Merge PR for TOML changes
              type: bitbucket.MergePullRequest
              server: NewConfigBitbucket
              tags:
              - '#bizops'
            - name: Publish TOML's
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param
              jobParameters: |-
                appEnv=peat
                app=tfc_tfcconfig
              description: |-
                Publish TOML's on PEAT tfcconfig nodes

                https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - '#bizops'
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=tfcconfig dmp_user_interface_frameworks/tfc_tfcconfig
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for tfcconfig to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: status tfc_tfcconfig
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcconfig/job/PEAT/job/status/
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcconfig/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
            tags:
            - '#bizops'
        - name: Deploy Rulemanager
          type: xlrelease.SequentialGroup
          tasks:
          - name: PUBLISH TOMLS
            type: xlrelease.SequentialGroup
            flagStatus: ATTENTION_NEEDED
            flagComment: Only Continue if needed
            precondition: "False"
            tasks:
            - name: Merge PR for TOML changes
              type: bitbucket.MergePullRequest
              server: NewConfigBitbucket
              tags:
              - '#bizops'
            - name: Publish TOML's
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param
              jobParameters: |-
                appEnv=peat
                app=tfc_rulemanager
              description: |-
                Publish TOML's on PEAT rulemanager nodes

                https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - '#bizops'
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=rulemanager dmp_user_interface_frameworks/tfc_rulemanager
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for tfcconfig to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: status tfc_rulemanager
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_rulemanager/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_rulemanager/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_rulemanager/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
            tags:
            - '#bizops'
        - name: Deploy Transactionviewer
          type: xlrelease.SequentialGroup
          tasks:
          - name: PUBLISH TOMLS
            type: xlrelease.SequentialGroup
            flagStatus: ATTENTION_NEEDED
            flagComment: Only Continue if needed
            precondition: "False"
            tasks:
            - name: Merge PR for TOML changes
              type: bitbucket.MergePullRequest
              server: NewConfigBitbucket
              tags:
              - '#bizops'
            - name: Publish TOML's
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param
              jobParameters: |-
                appEnv=peat
                app=tfc_transactionviewer
              description: |-
                Publish TOML's on PEAT transactionviewer nodes

                https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - '#bizops'
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=transactionviewer dmp_user_interface_frameworks/tfc_transactionviewer
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for transactionviewer to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: status tfc_transactionviewer
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_transactionviewer/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_transactionviewer/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_transactionviewer/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
            tags:
            - '#bizops'
        - name: ISSReports - PCF deployment
          type: xlrelease.SequentialGroup
          tasks:
          - name: PCF app deployment jenkins job
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: TFCPCF/job/PCF/job/stl-stage/job/Deploy-ISS-Reports-Services-PEAT
            description: |-
              Run this jenkins job to deploy ISSReportsservices on PCF (pcf_org: ESS-TFC and pcf_space: stage-peat)

              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-ISS-Reports-Services-PEAT/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: PCF app deployment validation
            type: xlrelease.GateTask
            description: |-
              Validate ISS Report Deployment in PCF.

              Checks for Jenkins Job execution Is successful for IssReport TFC apps
              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-ISS-Reports-Services-PEAT/

              Verify if the deployment is successful in PCF for iss-reports-services application
              - Login into PEAT PCF Space: https://apps.system.stl.pcfstage00.mastercard.int/
              - Traverse to the ESS-TFC Org and go to stage-peat space.
              - iss-reports-services-peat

              Login to Dynatrace and verify the new application instance Is available
              - iss-reports-services-peat

              Login to Splunk and verify the logs are available for iss-reports-services

              Splunk URL
              https://dtl.splunk.mastercard.int

              Query String:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="iss-reports-services-peat"

              Query to verify app Is started:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="iss-reports-services-peat" "Started Application in * seconds (JVM running for *)"

              Verify the iss-reports-services service is registered in PEAT Krang
               - Login to Stage Krang - https://stage.eportal.mastercard.com/apie-stage-krang
               - Search for tfc
               - iss-reports-services should be registered with 4 instances and the pcf routes must be displayed and each instance is associated with PEAT tag
            tags:
            - '#bizops'
        - name: Deploy LIstmanager
          type: xlrelease.SequentialGroup
          tasks:
          - name: PUBLISH TOMLS
            type: xlrelease.SequentialGroup
            flagStatus: ATTENTION_NEEDED
            flagComment: Only Continue if needed
            precondition: "False"
            tasks:
            - name: Merge PR for TOML changes
              type: bitbucket.MergePullRequest
              server: NewConfigBitbucket
              tags:
              - '#bizops'
            - name: Publish TOML's
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param
              jobParameters: |-
                appEnv=peat
                app=tfc_listmanager
              description: |-
                Publish TOML's on PEAT listmanager nodes

                https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - '#bizops'
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=listmanager dmp_user_interface_frameworks/tfc_listmanager
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for listmanager to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: status tfc_listmanager
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_listmanager/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_listmanager/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_listmanager/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
            tags:
            - '#bizops'
        - name: Rule Testing Service - PCF deployment
          type: xlrelease.SequentialGroup
          tasks:
          - name: PCF app deployment jenkins job
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: TFCPCF/PCF/stl-stage/Deploy-Rule-Testing-Service-PEAT
            description: |-
              Run this jenkins job to deploy Rule Testing Service on PCF (pcf_org: ESS-TFC and pcf_space: stage-peat)

              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-Rule-Testing-Service-PEAT/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: PCF app deployment validation
            type: xlrelease.GateTask
            description: |-
              Validate Rule Testing Service Deployment in PCF.

              Checks for Jenkins Job execution Is successful for Rule Testing Service TFC apps
              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-Rule-Testing-Service-PEAT/

              Verify if the deployment is successful in PCF for Rule Testing Service application
              - Login into PEAT PCF Space: https://apps.system.stl.pcfstage00.mastercard.int/
              - Traverse to the ESS-TFC Org and go to stage-peat space.
              - rule-testing-service-peat

              Login into Dynatrace ,
              -Log credentials for Dynatrace is your email and standard LDAP password: https://zak33936.live.dynatrace.com/ui/services?gtf=-2h&gf=all&sorting=name;asc
              - verify the new application instance is available by filtering by name of app under Services e.g.  rule-testing-service-peat
              - rule-testing-service-peat

              Login to Splunk, Log credentials for Splunk is your email and MCTest  password
              - verify the logs are available for  rule-testing-service-peat

              Splunk URL
              https://dtl.splunk.mastercard.int

              Query String:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="rule-testing-*"

              Query to verify app Is started:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="rule-testing-*" "Started Application in * seconds (JVM running for *)"

              Verify the rule-testing-service service is registered in PEAT Krang
               - Login to Stage Krang - https://stage.eportal.mastercard.com/apie-stage-krang
               - Search for tfc
               - rule-testing-service should be registered with 4 instances and the pcf routes must be displayed and each instance is associated with PEAT tag
            tags:
            - '#bizops'
        - name: Rule Metrics Service - PCF deployment
          type: xlrelease.SequentialGroup
          tasks:
          - name: PCF app deployment jenkins job
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: TFCPCF/PCF/stl-stage/Deploy-Rule-Metrics-Service-PEAT
            description: |-
              Run this jenkins job to deploy Rule Metrics Service on PCF (pcf_org: ESS-TFC and pcf_space: stage-peat)

              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-Rule-Metrics-Service-PEAT/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: PCF app deployment validation
            type: xlrelease.GateTask
            description: |-
              Validate Rule Metrics Service Deployment in PCF.

              Checks for Jenkins Job execution Is successful for Rule Metrics Service TFC apps
              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-Rule-Metrics-Service-PEAT/

              Verify if the deployment is successful in PCF for Rule Metrics Service application
              - Login into PEAT PCF Space: https://apps.system.stl.pcfstage00.mastercard.int/
              - Traverse to the ESS-TFC Org and go to stage-peat space.
              - rule-metrics-service-peat

              Login to Dynatrace and verify the new application instance Is available
              - rule-metrics-service-peat

              Login to Splunk and verify the logs are available for rule-metrics-service

              Splunk URL
              https://dtl.splunk.mastercard.int

              Query String:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="rule-metrics-service-peat"

              Query to verify app Is started:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="rule-metrics-service-peat" "Started Application in * seconds (JVM running for *)"

              Verify the rule-metrics-service is registered in PEAT Krang
               - Login to Stage Krang - https://stage.eportal.mastercard.com/apie-stage-krang
               - Search for tfc
               - rule-metrics-service should be registered with 4 instances and the pcf routes must be displayed and each instance is associated with PEAT tag
            tags:
            - '#bizops'
      - name: Fraud Center Apache Updates
        type: xlrelease.SequentialGroup
        scheduledStartDate: 2019-02-06T10:00:00-06:00
        tasks:
        - name: Lift this gate to begin with this Webapp
          type: xlrelease.GateTask
          description: |-
            To avoid Jenkins concurrency issues and job failures, this gate was added to all Webapp deployment sections.

            **_Note that the Webapps can still be deployed in parallel_**, but the deployment for each section will only start when this gate is lifted. If you are blocked waiting for investigation or for a deployment job to run, move on to the next app by lifting its gate.

            Note that some of these gates have preconditions (it will be a checkbox below this text box, if there is a precondition). For instance, some apps require Grid to be up before they are deployed.
          team: SCSSPeatDeployment
          tags:
          - Fraud Center Apache
          - '#bizops'
        - name: Habitat-app_bootstrapper
          type: xlrelease.SequentialGroup
          tasks:
          - name: Habitat-app_bootstrapper
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=app-bootstrapper dmp_user_interface_frameworks/app_bootstrapper
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: Status-app_bootstrapper
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
            jobParameters: |-
              habEnv=peat
              habService=dmp_user_interface_frameworks/app_bootstrapper
              habCommand=status
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/peat/job/status/
            tags:
            - '#bizops'
        - name: Habitat-app_platform
          type: xlrelease.SequentialGroup
          tasks:
          - name: Habitat-app_platform
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=app-platform dmp_user_interface_frameworks/app_platform
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: Status-app_platform
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
            jobParameters: |-
              habEnv=peat
              habService=dmp_user_interface_frameworks/app_platform
              habCommand=status
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/peat/job/status/
            tags:
            - '#bizops'
        - name: Habitat-tfc_help
          type: xlrelease.SequentialGroup
          tasks:
          - name: Habitat-tfc_help
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=tfc-help dmp_user_interface_frameworks/tfc_help
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: Status-tfc_help
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
            jobParameters: |-
              habEnv=peat
              habService=dmp_user_interface_frameworks/tfc_help
              habCommand=status
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/peat/job/status/
            tags:
            - '#bizops'
        - name: Apache restart
          type: xlrelease.SequentialGroup
          tasks:
          - name: Apache config PR Merge
            type: stash.MergePullRequest
            server: Bitbucket Server
            username: dmp_xlr_merging
            project: DECISION_MANAGEMENT
            repository: mc_dmp_chef_objects_nonprod
            prid: "624"
            description: |-
              PR link as reference: https://fusion.mastercard.int/stash/projects/DECISION_MANAGEMENT/repos/mc_dmp_chef_objects_nonprod/pull-requests/624/overview

              Apache configs are done as part of every release
            variableMapping:
              pythonScript.password: "${folder.metadata.bitbucket.dmp_xlr_merging}"
            tags:
            - '#bizops'
          - name: Apache Config Jenkins build
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd
            username: dmp_xlr
            jobName: ChefObjectPipeline/job/ESS/job/mc_dmp_chef_objects_nonprod
            description: |-
              Trigger Chef Converge Jenkins with updated node config

              https://cd.mastercard.int/jenkins/job/ChefObjectPipeline/job/ESS/job/mc_dmp_chef_objects_nonprod/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd1}"
            tags:
            - '#bizops'
          - name: Node validation in chef Automate
            type: xlrelease.GateTask
            description: |-
              Confirm in Chef automate that the host is converged
              Hosts:
              wjb4stl172.mastercard.int
              https://automate.chef.mastercard.int/infrastructure/client-runs?name=wjb4stl172

              wjb4stl173.mastercard.int
              https://automate.chef.mastercard.int/infrastructure/client-runs?name=wjb4stl173
            tags:
            - '#bizops'
        - name: Validate if Fraud Center Apache Updates has been deployed
          type: xlrelease.GateTask
          description: |-
            app_bootstrapper status:
            https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/peat/job/status/

            platform status:
            https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/peat/job/status/

            tfc-help status:
            https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/peat/job/status/



            Make sure Apache updates have been successfully deployed:

            Check correct versions are deployed on wjb4stl172 && wjb4stl173  :

            * Check app-bootstrapper version in

            /apps_01/webcontent/Consumer.securitysolution/htdocs/fraudcenter/version.txt matches expected deployed version: ${folder.app_bootstrapper_version}

            * Check app-platform version in

            /apps_01/webcontent/Consumer.securitysolution/htdocs/fraudcenter/apps/platform/version.txt matches expected deployed version: ${folder.artifact.app-platform.version}

            Make sure TFC Help has been deployed correctly:

            Log into TFC Validator
            Select a customer with access to ISS product
            Click on help icon (?)
            Click on Issuer Security Solutions Utilities Guide and ensure it opens

            Finally check by logging into TFC-UI
            https://dtl.mastercardconnect.com/mccpblcui/#/public/signin
            for username and password check with team
            login into fraudcenter-peat container
            In search bar select Banco Citi card S.A
            check all the UI-TABS (reports, transactions, Lists, Rules, Cases)
          team: SCSSPeatDeployment
          tags:
          - Fraud Center Apache
          - '#bizops'
      - name: Fraud Center Apache via Habitat
        type: xlrelease.SequentialGroup
        scheduledStartDate: 2019-02-06T10:00:00-06:00
        flagStatus: ATTENTION_NEEDED
        flagComment: This isn't expected to be used until 22.5 release
        team: SCSSPeatDeployment
        tasks:
        - name: Lift this gate to begin with this Webapp
          type: xlrelease.GateTask
          description: |-
            To avoid Jenkins concurrency issues and job failures, this gate was added to all Webapp deployment sections.

            **_Note that the Webapps can still be deployed in parallel_**, but the deployment for each section will only start when this gate is lifted. If you are blocked waiting for investigation or for a deployment job to run, move on to the next app by lifting its gate.

            Note that some of these gates have preconditions (it will be a checkbox below this text box, if there is a precondition). For instance, some apps require Grid to be up before they are deployed.
          team: SCSSPeatDeployment
          tags:
          - Fraud Center Apache
          - '#bizops'
        - name: First time release steps
          type: xlrelease.SequentialGroup
          team: SCSSPeatDeployment
          tasks:
          - name: Stop apache instance
            type: xlrelease.Task
            description: |-
              Request Internet Operations to stop the Consumer.securitysolutions apache instance on the following servers

              wjb4stl172
              wjb4stl173
            team: INTERNETOPS
            tags:
            - '#techops-web'
          - name: Promote-the_fraud_center_apache24
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/promote-specific-param/
            jobParameters: |-
              packageIdent=${folder.the_fraud_center_apache24_version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/promote-specific-param/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
          - name: Onboard new apache habitat packages
            type: stash.MergePullRequest
            server: Bitbucket Server
            username: dmp_xlr
            project: DECISION_MANAGEMENT
            repository: mc_dmp_chef_objects_nonprod
            team: SCSSPeatDeployment
            tags:
            - '#bizops'
          - name: Build Chef Object pipeline
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd
            username: dmp_xlr
            jobName: ChefObjectPipeline/job/ESS/job/mc_dmp_chef_objects_nonprod
            description: |-
              Trigger Chef Converge Jenkins with updated node config

              https://cd.mastercard.int/jenkins/job/ChefObjectPipeline/job/ESS/job/mc_dmp_chef_objects_nonprod/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd1}"
            tags:
            - '#bizops'
          - name: Node validation in chef Automate
            type: xlrelease.GateTask
            description: |-
              Confirm in Chef automate that the host is converged
              Hosts:
              wjb4stl172.mastercard.int
              https://automate.chef.mastercard.int/infrastructure/client-runs?name=wjb4stl172

              wjb4stl173.mastercard.int
              https://automate.chef.mastercard.int/infrastructure/client-runs?name=wjb4stl173
            tags:
            - '#bizops'
        - name: Deploy the_fraud_center_apache24
          type: xlrelease.SequentialGroup
          description: This is the actual apache instance that needs to be the deployed
            first before any of the webcontent packages
          flagComment: This needs to be the first webcontent package that's deployed
          tasks:
          - name: Promote-the_fraud_center_apache24
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/promote-specific-param/
            jobParameters: |-
              packageIdent=${folder.the_fraud_center_apache24_version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/promote-specific-param/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
          - name: Merge any TOML changes if needed
            type: stash.MergePullRequest
            server: Bitbucket Server
            username: dmp_xlr
            team: SCSSPeatDeployment
            precondition: "False"
            tags:
            - '#bizops'
          - name: Publish TOML's wjb4stl172
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/publish-wjb4stl172/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/publish-wjb4stl172/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
          - name: Publish TOML's wjb4stl173
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/publish-wjb4stl173/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/publish-wjb4stl172/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
          - name: Sleep for 30 seconds
            type: xlrelease.ScriptTask
            team: SCSSPeatDeployment
            tags:
            - '#bizops'
            script: |-
              import time
              # Sleep for 30 seconds before validation
              time.sleep(30)
          - name: Status-the_fraud_center_apache24
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/status/
            team: SCSSPeatDeployment
            watchers:
            - E111441
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status by checking the last build from the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/status
            tags:
            - '#bizops'
        - name: Deploy app_bootstrapper
          type: xlrelease.SequentialGroup
          description: Bootstrapper needs to be run first since it set's up the fraud
            center directory
          flagComment: This needs to be the first webcontent package that's deployed
          tasks:
          - name: Promote-app_bootstrapper
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/app_bootstrapper-promote-specific-param/
            jobParameters: |-
              packageIdent=${folder.app_bootstrapper_version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/app_bootstrapper-promote-specific-param/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
          - name: Sleep for 30 seconds
            type: xlrelease.ScriptTask
            team: SCSSPeatDeployment
            tags:
            - '#bizops'
            script: |-
              import time
              # Sleep for 30 seconds before validation
              time.sleep(30)
          - name: Status-app_bootstrapper
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/peat/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/peat/job/status/
            team: SCSSPeatDeployment
            watchers:
            - E111441
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/peat/job/status/
            tags:
            - '#bizops'
        - name: Deploy apps under htdocs/fraudcenter
          type: xlrelease.ParallelGroup
          tasks:
          - name: Deploy app_platform
            type: xlrelease.SequentialGroup
            tasks:
            - name: Promote-app_platform
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/app_platform-promote-specific-param/
              jobParameters: |-
                packageIdent=${folder.app_platform_version}
                channel=peat
                dryRun=false
                platform=linux
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/app_platform-promote-specific-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
            - name: Sleep for 30 seconds
              type: xlrelease.ScriptTask
              team: SCSSPeatDeployment
              tags:
              - '#bizops'
              script: |-
                import time
                # Sleep for 30 seconds before validation
                time.sleep(30)
            - name: Status-app_platform
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/peat/job/status/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/peat/job/status/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
            - name: Verify Status
              type: xlrelease.GateTask
              description: |-
                Verify habitat app status using the following job

                https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/peat/job/status/
              tags:
              - '#bizops'
          - name: Deploy tfc_help
            type: xlrelease.SequentialGroup
            tasks:
            - name: Promote-tfc_help
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/tfc_help-promote-specific-param/
              jobParameters: |-
                packageIdent=${folder.tfc_help_version}
                channel=stage
                dryRun=false
                platform=linux
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/tfc_help-promote-specific-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
            - name: Sleep for 30 seconds
              type: xlrelease.ScriptTask
              team: SCSSPeatDeployment
              tags:
              - '#bizops'
              script: |-
                import time
                # Sleep for 30 seconds before validation
                time.sleep(30)
            - name: Status-tfc_help
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/peat/job/status/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/peat/job/status/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
            - name: Verify Status
              type: xlrelease.GateTask
              description: |-
                Verify habitat app status using the following job

                https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/peat/job/status/
              tags:
              - '#bizops'
          - name: Deploy app_customer_support
            type: xlrelease.SequentialGroup
            team: SCSSPeatDeployment
            tasks:
            - name: Promote-app_customer_support
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_customer_support/job/promote-specific-param/
              jobParameters: |-
                packageIdent=${folder.habitat.app_customer_support.version}
                channel=peat
                dryRun=false
                platform=linux
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_customer_support/job/promote-specific-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
            - name: Sleep for 30 seconds
              type: xlrelease.ScriptTask
              team: SCSSPeatDeployment
              tags:
              - '#bizops'
              script: |-
                import time
                # Sleep for 30 seconds before validation
                time.sleep(30)
            - name: Status-app_customer_support
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_customer_support/job/peat/job/status/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_customer_support/job/peat/job/status/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
            - name: Verify Status
              type: xlrelease.GateTask
              description: |-
                Verify habitat app status using the following job

                https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_customer_support/job/peat/job/status/
              tags:
              - '#bizops'
      - name: RBD apps
        type: xlrelease.SequentialGroup
        precondition: "False"
        tasks:
        - name: RBD Web Service
          type: xlrelease.SequentialGroup
          tasks:
          - name: Lift this gate to begin with this Webapp
            type: xlrelease.GateTask
            description: |-
              To avoid Jenkins concurrency issues and job failures, this gate was added to all Webapp deployment sections.

              **_Note that the Webapps can still be deployed in parallel_**, but the deployment for each section will only start when this gate is lifted. If you are blocked waiting for investigation or for a deployment job to run, move on to the next app by lifting its gate.

              Note that some of these gates have preconditions (it will be a checkbox below this text box, if there is a precondition). For instance, some apps require Grid to be up before they are deployed.
            team: SCSSPeatDeployment
            tags:
            - '#bizops'
          - name: Publish Updated TOML's
            type: xlrelease.SequentialGroup
            team: SCSSPeatDeployment
            precondition: "False"
            tasks:
            - name: Merge TOML changes
              type: stash.MergePullRequest
              server: Bitbucket Server
              project: DMPHAB
              repository: dmp-service-config-nonprod
              description: PR link for reference -
              tags:
              - '#bizops'
            - name: Publish - rsk4stl4
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: dmp_xlr
              jobName: ChefHabitat/dmp_api_frameworks/rbd_web_service/PEAT/publish-rsk4stl4
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/rbd_web_service/job/PEAT/job/publish-rsk4stl4/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
            - name: Publish - rsk4stl5
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: dmp_xlr
              jobName: ChefHabitat/job/dmp_api_frameworks/job/rbd_web_service/job/PEAT/job/publish-rsk4stl5/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/rbd_web_service/job/PEAT/job/publish-rsk4stl5/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
          - name: Deploy
            type: xlrelease.SequentialGroup
            tasks:
            - name: Promote RBD Web Service for peat OEL7
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param
              jobParameters: |-
                packageIdent=${folder.habitat.rbd-web-service.linux1.version}
                channel=peat
                dryRun=false
                platform=linux
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
            - name: Promote RBD Web Service for peat OEL6
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: dmp_xlr
              jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param
              jobParameters: |-
                packageIdent=${folder.rbd_web_service_linux2_version}
                channel=peat
                dryRun=false
                platform=linux_kernel2
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
          - name: Validation
            type: xlrelease.SequentialGroup
            tasks:
            - name: Sleep for 30 seconds before validating
              type: xlrelease.ScriptTask
              tags:
              - '#bizops'
              script: |-
                import time
                # Sleep for 30 seconds before validation
                time.sleep(30)
            - name: Validate rbd-web-service for peat
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              jobName: ChefHabitat/job/dmp_api_frameworks/job/rbd_web_service/job/PEAT/job/status/
              description: |-
                Check rbd-web-service is up on peat nodes

                https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/rbd_web_service/job/PEAT/job/status/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
            - name: Verify application status
              type: xlrelease.Task
              description: "Check the application status, it should be up for more\
                \ than 30 seconds"
              team: SCSSPeatDeployment
              tags:
              - '#bizops'
        - name: RBD NuData Provider via Habitat
          type: xlrelease.SequentialGroup
          tasks:
          - name: Lift this gate to begin deployment
            type: xlrelease.GateTask
            tags:
            - '#bizops'
          - name: Deploy
            type: xlrelease.SequentialGroup
            tasks:
            - name: Promote RBD NuData Provider OEL7
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              jobParameters: |-
                artifactAndPackage=rbd-nudata-provider dmp_api_frameworks/rbd_nudata_provider
                promoteToChannel=peat
                platform=linux
                dryRun=false
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - '#bizops'
            - name: Promote RBD NuData Provider for OEL6
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: dmp_xlr
              jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param
              jobParameters: |-
                packageIdent=${folder.habitat.rbd-nudata-provider.linux2.version}
                channel=peat
                dryRun=false
                platform=linux_kernel2
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
          - name: Publish TOML's
            type: xlrelease.SequentialGroup
            precondition: "False"
            tasks:
            - name: Merge TOML changes
              type: stash.MergePullRequest
              server: Bitbucket Server
              project: DMPHAB
              repository: dmp-service-config-nonprod
              prid: "174"
              variableMapping:
                pythonScript.password: "${folder.metadata.bitbucket.token}"
              tags:
              - '#bizops'
            - name: Publish - rsk0stl215
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: dmp_xlr
              jobName: ChefHabitat/dmp_api_frameworks/rbd_nudata_provider/PEAT/publish-rsk0stl215
              jobParameters: |-
                appEnv=peat
                app=rbd_nudata_provider
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/rbd_nudata_provider/job/PEAT/job/publish-rsk0stl215/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
            - name: Publish - rsk4stl5
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: dmp_xlr
              jobName: ChefHabitat/dmp_api_frameworks/rbd_nudata_provider/PEAT/publish-rsk4stl5
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/rbd_nudata_provider/job/PEAT/job/publish-rsk4stl5/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
          - name: Validation
            type: xlrelease.SequentialGroup
            tasks:
            - name: Sleep for 30 seconds
              type: xlrelease.ScriptTask
              tags:
              - '#bizops'
            - name: Validate RBD Nudata Provider for PEAT
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: dmp_xlr
              jobName: ChefHabitat/dmp_api_frameworks/rbd_nudata_provider/PEAT/status
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/rbd_nudata_provider/job/PEAT/job/status/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
            - name: Validate application status
              type: xlrelease.Task
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/rbd_nudata_provider/job/PEAT/job/status/
              tags:
              - '#bizops'
      - name: ABU Maws SpringBoot Deployment
        type: xlrelease.SequentialGroup
        owner: e090189
        precondition: "False"
        tasks:
        - name: Lift this gate to begin with this Webapp
          type: xlrelease.GateTask
          description: |-
            To avoid Jenkins concurrency issues and job failures, this gate was added to all Webapp deployment sections.

            **_Note that the Webapps can still be deployed in parallel_**, but the deployment for each section will only start when this gate is lifted. If you are blocked waiting for investigation or for a deployment job to run, move on to the next app by lifting its gate.

            Note that some of these gates have preconditions (it will be a checkbox below this text box, if there is a precondition). For instance, some apps require Grid to be up before they are deployed.
          scheduledStartDate: 2019-02-06T10:00:00-06:00
          team: SCSSPeatDeployment
          waitForScheduledStartDate: false
          tags:
          - '#bizops'
        - name: Habitat
          type: xlrelease.SequentialGroup
          tasks:
          - name: TOML - ABU MAWS
            type: xlrelease.SequentialGroup
            precondition: "False"
            tasks:
            - name: TOML - ABU MAWS
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/automated_billing_updater/job/abu_maws_api/job/PEAT/job/publish_peat_toml/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/automated_billing_updater/job/abu_maws_api/job/PEAT/job/publish_peat_toml/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            tags:
            - '#bizops'
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote - ABU MAWS
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/automated_billing_updater/job/abu_maws_api/job/PEAT/job/promote-param/
            jobParameters: |-
              packageIdent= ${folder.abu_maws_version}
              channel=peat
              PLATFORM_FILTER=OEL7
              contactList=sashi.kanth@mastercard.com
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/automated_billing_updater/job/abu_maws_api/job/PEAT/job/promote-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            tags:
            - '#bizops'
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Status - ABU MAWS
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/automated_billing_updater/job/abu_maws_api/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/automated_billing_updater/job/abu_maws_api/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
          - name: Validate
            type: xlrelease.GateTask
            team: SCSSPeatDeployment
            tags:
            - '#bizops'
        - name: SKIP
          type: xlrelease.SequentialGroup
          precondition: "False"
          tasks:
          - name: Stop ABU Maws
            type: xlrelease.SequentialGroup
            tasks:
            - name: "Stop ABU Maws on servers: cjb4stl834 and cjb4stl835"
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/Application_Release_Automation/job/peat/job/abu-push-peat/job/maws
                springboot jobs/job/abu-push-maws-stop-cjb-servers/
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/Application_Release_Automation/job/peat/job/abu-push-peat/job/maws%20springboot%20jobs/job/abu-push-maws-stop-cjb-servers/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.password}"
                pythonScript.buildStatus: "${mawsStopBuildStatus}"
              tags:
              - Kryptonite
              - Capivaras
              - ABU MAWS
            - name: "Stop ABU Maws on servers: lstl4wjb8889 and lstl4wjb8964"
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/Application_Release_Automation/job/peat/job/abu-push-peat/job/maws
                springboot jobs/job/abu-push-maws-stop-rest-of-servers/
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/Application_Release_Automation/job/peat/job/abu-push-peat/job/maws%20springboot%20jobs/job/abu-push-maws-stop-rest-of-servers/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.password}"
                pythonScript.buildStatus: "${mawsStopBuildStatus}"
              tags:
              - Kryptonite
              - Capivaras
              - ABU MAWS
            - name: Stop ABU Maws - Manual
              type: xlrelease.Task
              description: |-
                Servers: **cjb4stl834** and **cjb4stl835** and **lstl4wjb8889** and **lstl4wjb8964**

                - Log in server as fraud user and run below command to stop the application:

                - /apps_01/fraud/maws/AbuMawsApiWeb.jar -a stop
              team: SCSSPeatDeployment
              precondition: "not releaseVariables['mawsStopBuildStatus']"
              tags:
              - kryptonite
              - capivaras
              - peat
              - ABU MAWS
            - name: Validate ABU Maws SpringBoot is stopped
              type: xlrelease.GateTask
              description: |-
                Servers: cjb4stl834 and cjb4stl835 and lstl4wjb8889 and lstl4wjb8964

                Log in server as fraud user execute the following command to check if Maws is running:

                ps -ef | grep AbuMawsApiWeb

                If AbuMawsApiWeb is stopped successfully, above command would not show any running instances. If not stopped successfully, please use either automated or manual step to stop AbuMawsApiWeb
              team: SCSSPeatDeployment
              tags:
              - ABU MAWS
          - name: Deploy ABU Maws
            type: xlrelease.SequentialGroup
            tasks:
            - name: Deploy ABU Maws in all servers
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/Application_Release_Automation/job/peat/job/abu-push-peat/job/maws
                springboot jobs/job/abu-push-maws-deploy/
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/Application_Release_Automation/job/peat/job/abu-push-peat/job/maws%20springboot%20jobs/job/abu-push-maws-deploy/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.buildStatus: "${mawsDeployBuildStatus}"
                pythonScript.password: "${folder.metadata.jenkins.password}"
              tags:
              - Kryptonite
              - Capivaras
              - ABU MAWS
            - name: Deploy ABU Maws - Manual
              type: xlrelease.Task
              description: |-
                Servers: **cjb4stl834** and **cjb4stl835** and **lstl4wjb8889** and **lstl4wjb8964**

                - Log in server as fraud user execute the following command

                - cd /apps_01/fraud/maws/

                - wget --no-check-certificate https://artifacts.mastercard.int/artifactory/releases/com/mastercard/risk/ems/maws/AbuMawsApiWeb/${folder.abu_maws_version}/AbuMawsApiWeb-${folder.abu_maws_version}.jar

                - chmod +x AbuMawsApiWeb-${folder.abu_maws_version}.jar

                - cp -p AbuMawsApiWeb-${folder.abu_maws_version}.jar AbuMawsApiWeb.jar
              team: SCSSPeatDeployment
              precondition: "not releaseVariables['mawsDeployBuildStatus']"
              tags:
              - Capivaras
              - Kryptonite
              - ABU MAWS
            - name: Validate ABU Maws is deployed
              type: xlrelease.GateTask
              description: |-
                Servers: cjb4stl834 and cjb4stl835 and lstl4wjb8889 and lstl4wjb8964

                Log in server as fraud user execute the following command to make sure that the jar modified time aligned with the execution time of either automate/manual deploy step

                ls -lrt /apps_01/fraud/maws/AbuMawsApiWeb.jar

                Follow this page for further validation recommended by release team: https://fusion.mastercard.int/confluence/display/RiskBizOps/Verify+that+an+artifact+was+deployed+correctly
              team: SCSSPeatDeployment
              tags:
              - ABU MAWS
          - name: Start ABU Maws
            type: xlrelease.SequentialGroup
            tasks:
            - name: "Start ABU Maws on servers: cjb4stl834 and cjb4stl835"
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/Application_Release_Automation/job/peat/job/abu-push-peat/job/maws
                springboot jobs/job/abu-push-maws-stop-cjb-servers/
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/Application_Release_Automation/job/peat/job/abu-push-peat/job/maws%20springboot%20jobs/job/abu-push-maws-start-cjb-servers/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.buildStatus: "${mawsStartBuildStatus}"
                pythonScript.password: "${folder.metadata.jenkins.password}"
              tags:
              - Kryptonite
              - Capivaras
              - ABU MAWS
            - name: "Start ABU Maws on servers: lstl4wjb8889 and lstl4wjb8964"
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/Application_Release_Automation/job/peat/job/abu-push-peat/job/maws
                springboot jobs/job/abu-push-maws-start-rest-of-servers/
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/Application_Release_Automation/job/peat/job/abu-push-peat/job/maws%20springboot%20jobs/job/abu-push-maws-start-rest-of-servers/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.buildStatus: "${mawsStartBuildStatus}"
                pythonScript.password: "${folder.metadata.jenkins.password}"
              tags:
              - Kryptonite
              - Capivaras
              - ABU MAWS
            - name: Start ABU Maws - Manual
              type: xlrelease.Task
              description: |-
                Servers: **cjb4stl833** and **cjb4stl834** and **lstl4wjb8889** and **lstl4wjb8964**

                - Log in server as fraud user and check the current version being executed. Run below command to stop the current version:

                - /apps_01/fraud/maws/AbuMawsApiWeb.jar -a start -p peat
              team: SCSSPeatDeployment
              precondition: "not releaseVariables['mawsStartBuildStatus']"
              tags:
              - Capivaras
              - Kryptonite
              - ABU MAWS
            - name: Validate ABU Maws is started
              type: xlrelease.GateTask
              description: |-
                Servers: cjb4stl834 and cjb4stl835 and lstl4wjb8889 and lstl4wjb8964

                Log in server as fraud user execute the following command to check Maws application is started

                ps -ef | grep AbuMawsApiWeb

                If AbuMawsApiWeb started successfully, above command would show abu running instances. If not started successfully, please use either automated or manual step to start AbuMawsApiWeb
              team: SCSSPeatDeployment
              tags:
              - ABU MAWS
      - name: ABU Push Deployments
        type: xlrelease.SequentialGroup
        precondition: "False"
        tasks:
        - name: Lift this gate to begin with this Webapp
          type: xlrelease.GateTask
          description: |-
            To avoid Jenkins concurrency issues and job failures, this gate was added to all Webapp deployment sections.

            **_Note that the Webapps can still be deployed in parallel_**, but the deployment for each section will only start when this gate is lifted. If you are blocked waiting for investigation or for a deployment job to run, move on to the next app by lifting its gate.

            Note that some of these gates have preconditions (it will be a checkbox below this text box, if there is a precondition). For instance, some apps require Grid to be up before they are deployed.
          team: SCSSPeatDeployment
          tags:
          - '#bizops'
        - name: Habitat
          type: xlrelease.SequentialGroup
          tasks:
          - name: TOML - ABU Push Notify Adapter
            type: xlrelease.SequentialGroup
            precondition: "False"
            tasks:
            - name: TOML - ABU Push Notify Adapter
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/automated_billing_updater/job/abu_push_notifyadapter/job/PEAT/job/publish_peat_toml/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/automated_billing_updater/job/abu_push_notifyadapter/job/PEAT/job/publish_peat_toml/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            tags:
            - '#bizops'
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote - ABU Push Notify Adapter
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/automated_billing_updater/job/abu_push_notifyadapter/job/PEAT/job/promote_param/
            jobParameters: |-
              packageIdent= ${folder.abu_push_notifyadapter_version}
              channel=peat
              PLATFORM_FILTER=OEL7
              contactList=sashi.kanth@mastercard.com
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/automated_billing_updater/job/abu_push_notifyadapter/job/PEAT/job/promote_param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            tags:
            - '#bizops'
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Status - ABU Push Notify Adapter
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/automated_billing_updater/job/abu_push_notifyadapter/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/automated_billing_updater/job/abu_push_notifyadapter/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
          - name: Validate
            type: xlrelease.GateTask
            tags:
            - '#bizops'
        - name: SKIP
          type: xlrelease.SequentialGroup
          precondition: "False"
          tasks:
          - name: Stop ABU Push
            type: xlrelease.SequentialGroup
            tasks:
            - name: Stop Abu Push batch A
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/Application_Release_Automation/job/peat/job/abu-push-peat/job/abu-push-stop-batch-a/
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/Application_Release_Automation/job/peat/job/abu-push-peat/job/abu-push-stop-batch-a/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.password}"
                pythonScript.buildStatus: "${abupushStopAllBuildStatus}"
              tags:
              - Kryptonite
              - Capivaras
              - ABU Push
            - name: Stop Abu Push batch B
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/Application_Release_Automation/job/peat/job/abu-push-peat/job/abu-push-stop-batch-b/
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/Application_Release_Automation/job/peat/job/abu-push-peat/job/abu-push-start-batch-b/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.password}"
                pythonScript.buildStatus: "${abupushStopAllBuildStatus}"
              tags:
              - Kryptonite
              - Capivaras
              - ABU Push
            - name: Stop ABU Push Manual
              type: xlrelease.ParallelGroup
              precondition: "not releaseVariables['abupushStopAllBuildStatus']"
              tasks:
              - name: cjb4stl834
                type: xlrelease.SequentialGroup
                tasks:
                - name: STL-Web-51 abu-push consumer
                  type: xlrelease.Task
                  description: |-
                    Log into cjb4stl834 as fraud user

                    * Run below command to stop the application

                    /apps_01/fraud/abu-push/abu_push_axon_consumer/abu-push-consumer.jar -a stop -p peat
                  team: SCSSPeatDeployment
                  tags:
                  - Capivaras
                  - Kryptonite
                  - ABU Push
                - name: STL-Web-52 abu-push notifyadapter
                  type: xlrelease.Task
                  description: |-
                    Log into cjb4stl834 as fraud user

                    * Run below command to stop the application

                    /apps_01/fraud/abu-push/notification_adapter/abu-push-notifyadapter.jar -a stop -p peat
                  team: SCSSPeatDeployment
                  tags:
                  - Capivaras
                  - Kryptonite
                  - ABU Push
                - name: STL-Web-53 abu-push panmanager
                  type: xlrelease.Task
                  description: |-
                    Log into cjb4stl834 as fraud user

                    * Run below command to stop the application

                    /apps_01/fraud/abu-push/pan_manager/abu-push-panmanager.jar -a stop -p peat
                  team: SCSSPeatDeployment
                  tags:
                  - Capivaras
                  - Kryptonite
                  - ABU Push
                - name: STL-Web-54 abu-push watchlist-rest
                  type: xlrelease.Task
                  description: |-
                    Log into cjb4stl834 as fraud user

                    * Run below command to stop the application

                    /apps_01/fraud/abu-push/watchlist/abu-push-watchlist-rest.jar -a stop -p peat
                  team: SCSSPeatDeployment
                  tags:
                  - Capivaras
                  - Kryptonite
                  - ABU Push
                - name: STL-Web-54 abu-push notify-issuers
                  type: xlrelease.Task
                  description: |-
                    Log into cjb4stl834 as fraud user

                    * Run below command to stop the application

                    /apps_01/fraud/abu-push/app_notify-issuer-job/abu-push-notify-issuers.jar -a stop -p peat
                  team: SCSSPeatDeployment
                  tags:
                  - Capivaras
                  - Kryptonite
                  - ABU Push
              - name: cjb4stl835
                type: xlrelease.SequentialGroup
                tasks:
                - name: STL-Web-55 abu-push consumer
                  type: xlrelease.Task
                  description: |-
                    Log into cjb4stl835 as fraud user

                    * Run below command to stop the application

                    /apps_01/fraud/abu-push/abu_push_axon_consumer/abu-push-consumer.jar -a stop -p peat
                  team: SCSSPeatDeployment
                  tags:
                  - Kryptonite
                  - Capivaras
                  - ABU Push
                - name: STL-Web-56 abu-push notifyadapter
                  type: xlrelease.Task
                  description: |-
                    Log into cjb4stl835 as fraud user

                    * Run below command to stop the application

                    /apps_01/fraud/abu-push/notification_adapter/abu-push-notifyadapter.jar -a stop -p peat
                  team: SCSSPeatDeployment
                  tags:
                  - Kryptonite
                  - Capivaras
                  - ABU Push
                - name: STL-Web-57 abu-push panmanager
                  type: xlrelease.Task
                  description: |-
                    Log into cjb4stl835 as fraud user

                    * Run below command to stop the application

                    /apps_01/fraud/abu-push/pan_manager/abu-push-panmanager.jar -a stop -p peat
                  team: SCSSPeatDeployment
                  tags:
                  - Kryptonite
                  - Capivaras
                  - ABU Push
                - name: STL-Web-58 abu-push watchlist-rest
                  type: xlrelease.Task
                  description: |-
                    Log into cjb4stl835 as fraud user

                    * Run below command to stop the application

                    /apps_01/fraud/abu-push/watchlist/abu-push-watchlist-rest.jar -a stop -p peat
                  team: SCSSPeatDeployment
                  tags:
                  - Kryptonite
                  - Capivaras
                  - ABU Push
                - name: STL-Web-54 abu-push notify-issuers
                  type: xlrelease.Task
                  description: |-
                    Log into cjb4stl835 as fraud user

                    * Run below command to stop the application

                    /apps_01/fraud/abu-push/app_notify-issuer-job/abu-push-notify-issuers.jar -a stop -p peat
                  team: SCSSPeatDeployment
                  tags:
                  - Capivaras
                  - Kryptonite
                  - ABU Push
            - name: Validate ABU Push is stopped
              type: xlrelease.GateTask
              description: |-
                Server: cjb4stl834 and cjb4stl835

                Log into server as fraud user and use  below command to check whether service is stopped

                ps -ef | grep abu

                If all abu applications are stopped successfully, above command would not show any running instances. If not stopped successfully, please use either automated or manual step to stop abu applications
              team: SCSSPeatDeployment
              tags:
              - ABU Push
          - name: Deploy ABU Push
            type: xlrelease.SequentialGroup
            tasks:
            - name: Deploy ABU Push
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/Application_Release_Automation/job/peat/job/abu-push-peat/job/abu-push-deploy/
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/Application_Release_Automation/job/peat/job/abu-push-peat/job/abu-push-deploy/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.buildStatus: "${abupushDeployAllBuildStatus}"
                pythonScript.password: "${folder.metadata.jenkins.password}"
              tags:
              - ABU Push
            - name: Deploy ABU Push Manual
              type: xlrelease.ParallelGroup
              precondition: "not releaseVariables['abupushDeployAllBuildStatus']"
              tasks:
              - name: cjb4stl834
                type: xlrelease.SequentialGroup
                tasks:
                - name: STL-Web-63 abu-push panmanager
                  type: xlrelease.Task
                  description: |-
                    Log into cjb4stl834 as fraud user

                    Run below command to deploy application
                    ```
                    mkdir /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/

                    cd /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/

                    wget --no-check-certificate https://artifacts.mastercard.int/artifactory/releases/com/mastercard/risk/ems/abu-push-panmanager/${folder.abu_push_panmanager_version}/abu-push-panmanager-${folder.abu_push_panmanager_version}.jar

                    cp -p /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/abu-push-panmanager-${folder.abu_push_panmanager_version}.jar /apps_01/fraud/abu-push/pan_manager/abu-push-panmanager.jar

                    chmod +x /apps_01/fraud/abu-push/pan_manager/abu-push-panmanager.jar

                    ```
                  team: SCSSPeatDeployment
                  tags:
                  - Kryptonite
                  - Capivaras
                  - ABU Push
                - name: STL-Web-64 abu-push watchlist-rest
                  type: xlrelease.Task
                  description: |-
                    Log into cjb4stl834 as fraud user

                    Run below command to deploy application
                    ```
                    mkdir /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/

                    cd /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/

                    wget --no-check-certificate https://artifacts.mastercard.int/artifactory/releases/com/mastercard/abu/push/watchlist/abu-push-watchlist-rest/${folder.abu_push_watchlist_rest_version}/abu-push-watchlist-rest-${folder.abu_push_watchlist_rest_version}.jar

                    cp -p /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/abu-push-watchlist-rest-${folder.abu_push_watchlist_rest_version}.jar /apps_01/fraud/abu-push/watchlist/abu-push-watchlist-rest.jar

                    chmod +x /apps_01/fraud/abu-push/watchlist/abu-push-watchlist-rest.jar;

                    ```
                  team: SCSSPeatDeployment
                  tags:
                  - Kryptonite
                  - Capivaras
                  - ABU Push
                - name: STL-Web-65 abu-push notify-adapter
                  type: xlrelease.Task
                  description: |-
                    Log into cjb4stl834 as fraud user

                    Run below command to deploy application
                    ```
                    mkdir /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/

                    cd /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/

                    wget --no-check-certificate https://artifacts.mastercard.int/artifactory/releases/com/mastercard/abu/push/notifyadapter/abu-push-notifyadapter/${folder.abu_push_notifyadapter_version}/abu-push-notifyadapter-${folder.abu_push_notifyadapter_version}.jar

                    cp -p /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/abu-push-notifyadapter-${folder.abu_push_notifyadapter_version}.jar /apps_01/fraud/abu-push/notification_adapter/abu-push-notifyadapter.jar

                    chmod +x /apps_01/fraud/abu-push/notification_adapter/abu-push-notifyadapter.jar

                    ```
                  team: SCSSPeatDeployment
                  tags:
                  - Kryptonite
                  - Capivaras
                  - ABU Push
                - name: STL-Web-65 abu-push axon-consumer
                  type: xlrelease.Task
                  description: |-
                    Log into cjb4stl834 as fraud user

                    Run below command to deploy application
                    ```
                    mkdir /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/

                    cd /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/

                    wget --no-check-certificate https://artifacts.mastercard.int/artifactory/releases/com/mastercard/risk/ems/abu-push-consumer/${folder.abu_push_consumer_version}/abu-push-consumer-${folder.abu_push_consumer_version}.jar

                    cp -p /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/abu-push-consumer-${folder.abu_push_consumer_version}.jar /apps_01/fraud/abu-push/abu_push_axon_consumer/abu-push-consumer.jar

                    chmod +x /apps_01/fraud/abu-push/abu_push_axon_consumer/abu-push-consumer.jar

                    ```
                  team: SCSSPeatDeployment
                  tags:
                  - Kryptonite
                  - Capivaras
                  - ABU Push
                - name: STL-Web-65 abu-push-notify-issuers
                  type: xlrelease.Task
                  description: |-
                    Log into cjb4stl834 as fraud user

                    Run below command to deploy application
                    ```
                    mkdir /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/

                    cd /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/

                    wget --no-check-certificate https://artifacts.mastercard.int/artifactory/releases/com/mastercard/abu/push/abu-push-notify-issuers/
                    ${folder.abu_push_notify_issuers_version}/abu-push-notify-issuers-${folder.abu_push_notify_issuers_version}.jar


                    cp -p /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/abu-push-notify-issuers-${folder.abu_push_notify_issuers_version}.jar /apps_01/fraud/abu-push/app_notify-issuer-job/abu-push-notify-issuers.jar

                    chmod +x /apps_01/fraud/abu-push/app_notify-issuer-job/abu-push-notify-issuers.jar

                    ```
                  team: SCSSPeatDeployment
                  tags:
                  - Kryptonite
                  - Capivaras
                  - ABU Push
              - name: cjb4stl835
                type: xlrelease.SequentialGroup
                tasks:
                - name: STL-Web-68 abu-push panmanager
                  type: xlrelease.Task
                  description: |-
                    Log into cjb4stl835 as fraud user

                    Run below command to deploy application
                    ```
                    mkdir /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/

                    cd /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/

                    wget --no-check-certificate https://artifacts.mastercard.int/artifactory/releases/com/mastercard/risk/ems/abu-push-panmanager/${folder.abu_push_panmanager_version}/abu-push-panmanager-${folder.abu_push_panmanager_version}.jar

                    cp -p /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/abu-push-panmanager-${folder.abu_push_panmanager_version}.jar /apps_01/fraud/abu-push/pan_manager/abu-push-panmanager.jar

                    chmod +x /apps_01/fraud/abu-push/pan_manager/abu-push-panmanager.jar

                    ```
                  team: SCSSPeatDeployment
                  tags:
                  - unsigned_dev
                  - Kryptonite
                  - Capivaras
                  - ABU Push
                - name: STL-Web-69 abu-push watchlist-rest
                  type: xlrelease.Task
                  description: |-
                    Log into cjb4stl835 as fraud user

                    Run below command to deploy application
                    ```
                    mkdir /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/

                    cd /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/

                    wget --no-check-certificate https://artifacts.mastercard.int/artifactory/releases/com/mastercard/abu/push/watchlist/abu-push-watchlist-rest/${folder.abu_push_watchlist_rest_version}/abu-push-watchlist-rest-${folder.abu_push_watchlist_rest_version}.jar

                    cp -p /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/abu-push-watchlist-rest-${folder.abu_push_watchlist_rest_version}.jar /apps_01/fraud/abu-push/watchlist/abu-push-watchlist-rest.jar

                    chmod +x /apps_01/fraud/abu-push/watchlist/abu-push-watchlist-rest.jar;

                    ```
                  team: SCSSPeatDeployment
                  tags:
                  - Kryptonite
                  - Capivaras
                  - ABU Push
                - name: STL-Web-65 abu-push notify-adapter
                  type: xlrelease.Task
                  description: |-
                    Log into cjb4stl835 as fraud user

                    Run below command to deploy application
                    ```
                    mkdir /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/

                    cd /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/

                    wget --no-check-certificate https://artifacts.mastercard.int/artifactory/releases/com/mastercard/abu/push/notifyadapter/abu-push-notifyadapter/${folder.abu_push_notifyadapter_version}/abu-push-notifyadapter-${folder.abu_push_notifyadapter_version}.jar

                    cp -p /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/abu-push-notifyadapter-${folder.abu_push_notifyadapter_version}.jar /apps_01/fraud/abu-push/notification_adapter/abu-push-notifyadapter.jar

                    chmod +x /apps_01/fraud/abu-push/notification_adapter/abu-push-notifyadapter.jar

                    ```
                  team: SCSSPeatDeployment
                  tags:
                  - Kryptonite
                  - Capivaras
                  - ABU Push
                - name: STL-Web-65 abu-push axon-consumer
                  type: xlrelease.Task
                  description: |-
                    Log into cjb4stl835 as fraud user

                    Run below command to deploy application
                    ```
                    mkdir /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/

                    cd /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/

                    wget --no-check-certificate https://artifacts.mastercard.int/artifactory/releases/com/mastercard/risk/ems/abu-push-consumer/${folder.abu_push_consumer_version}/abu-push-consumer-${folder.abu_push_consumer_version}.jar

                    cp -p /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/abu-push-consumer-${folder.abu_push_consumer_version}.jar /apps_01/fraud/abu-push/abu_push_axon_consumer/abu-push-consumer.jar

                    chmod +x /apps_01/fraud/abu-push/abu_push_axon_consumer/abu-push-consumer.jar

                    ```
                  team: SCSSPeatDeployment
                  tags:
                  - Kryptonite
                  - Capivaras
                  - ABU Push
                - name: STL-Web-65 abu-push-notify-issuers
                  type: xlrelease.Task
                  description: |-
                    Log into cjb4stl835 as fraud user

                    Run below command to deploy application
                    ```
                    mkdir /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/

                    cd /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/

                    wget --no-check-certificate https://artifacts.mastercard.int/artifactory/releases/com/mastercard/abu/push/abu-push-notify-issuers/
                    ${folder.abu_push_notify_issuers_version}/abu-push-notify-issuers-${folder.abu_push_notify_issuers_version}.jar


                    cp -p /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/abu-push-notify-issuers-${folder.abu_push_notify_issuers_version}.jar /apps_01/fraud/abu-push/app_notify-issuer-job/abu-push-notify-issuers.jar

                    chmod +x /apps_01/fraud/abu-push/app_notify-issuer-job/abu-push-notify-issuers.jar

                    ```
                  team: SCSSPeatDeployment
                  tags:
                  - Kryptonite
                  - Capivaras
                  - ABU Push
            - name: Validate ABU Push is deployed
              type: xlrelease.GateTask
              description: |-
                Server: cjb4stl834 and cjb4stl835

                Log in server as fraud user and execute ls -lrt for below path to make sure that the jar the modified time aligned with the the execution time of either automate/manual deploy step

                /apps_01/fraud/abu-push/pan_manager/abu-push-panmanager.jar

                /apps_01/fraud/abu-push/watchlist/abu-push-watchlist-rest.jar

                /apps_01/fraud/abu-push/notification_adapter/abu-push-notifyadapter.jar

                /apps_01/fraud/abu-push/abu_push_axon_consumer/abu-push-consumer.jar

                /apps_01/fraud/abu-push/app_notify-issuer-job/abu-push-notify-issuers.jar

                Follow this page for further validation recommended by release team: https://fusion.mastercard.int/confluence/display/RiskBizOps/Verify+that+an+artifact+was+deployed+correctly
              team: SCSSPeatDeployment
              tags:
              - ABU Push
          - name: Start ABU Push
            type: xlrelease.SequentialGroup
            tasks:
            - name: Start Abu Push batch A
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/Application_Release_Automation/job/peat/job/abu-push-peat/job/abu-push-start-batch-a/
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/Application_Release_Automation/job/peat/job/abu-push-peat/job/abu-push-start-batch-a/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.password}"
                pythonScript.buildStatus: "${abupushStartAllBuildStatus}"
              tags:
              - Kryptonite
              - Capivaras
              - ABU Push
            - name: Start Abu Push batch B
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/Application_Release_Automation/job/peat/job/abu-push-peat/job/abu-push-stop-batch-b/
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/Application_Release_Automation/job/peat/job/abu-push-peat/job/abu-push-start-batch-b/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.password}"
                pythonScript.buildStatus: "${abupushStartAllBuildStatus}"
              tags:
              - Kryptonite
              - Capivaras
              - ABU Push
            - name: Start ABU Push Manual
              type: xlrelease.ParallelGroup
              precondition: "not releaseVariables['abupushStartAllBuildStatus']"
              tasks:
              - name: cjb4stl834
                type: xlrelease.SequentialGroup
                tasks:
                - name: STL-Web-74 abu-push-notify-issuers
                  type: xlrelease.Task
                  description: |-
                    On server **cjb4stl834**

                    Log in server as fraud user and execute below command:

                    /apps_01/fraud/abu-push/app_notify-issuer-job/abu-push-notify-issuers.jar -a start -p peat
                  team: SCSSPeatDeployment
                  tags:
                  - Kryptonite
                  - Capivaras
                  - ABU Push
                - name: STL-Web-71 abu-push consumer
                  type: xlrelease.Task
                  description: |-
                    On server **cjb4stl834**

                    Log in server as fraud user and execute below command:

                    /apps_01/fraud/abu-push/abu_push_axon_consumer/abu-push-consumer.jar -a start -p peat
                  team: SCSSPeatDeployment
                  tags:
                  - Kryptonite
                  - Capivaras
                  - ABU Push
                - name: STL-Web-72 abu-push notifyadapter
                  type: xlrelease.Task
                  description: |-
                    On server **cjb4stl834**

                    Log in server as fraud user and execute below command:

                    /apps_01/fraud/abu-push/notification_adapter/abu-push-notifyadapter.jar -a start -p peat
                  team: SCSSPeatDeployment
                  tags:
                  - Kryptonite
                  - Capivaras
                  - ABU Push
                - name: STL-Web-73 abu-push panmanager
                  type: xlrelease.Task
                  description: |-
                    On server **cjb4stl834**

                    Log in server as fraud user and execute below command:

                    /apps_01/fraud/abu-push/pan_manager/abu-push-panmanager.jar -a start -p peat
                  team: SCSSPeatDeployment
                  tags:
                  - Kryptonite
                  - Capivaras
                  - ABU Push
                - name: STL-Web-74 abu-push watchlist-rest
                  type: xlrelease.Task
                  description: |-
                    On server **cjb4stl834**

                    Log in server as fraud user and execute below command:

                    export APIE_PLATFORM=STAGE && export APIE_REGION=US && export APIE_ZONE=STL && export JAVA_OPTS=-Dsynapse.properties=/apps_01/fraud/abu-push/watchlist/synapse.properties && /apps_01/fraud/abu-push/watchlist/abu-push-watchlist-rest.jar -a start -p peat
                  team: SCSSPeatDeployment
                  tags:
                  - Kryptonite
                  - Capivaras
                  - ABU Push
              - name: cjb4stl835
                type: xlrelease.SequentialGroup
                tasks:
                - name: STL-Web-78 abu-push-notify-issuers
                  type: xlrelease.Task
                  description: |-
                    On server **cjb4stl835**

                    Log in server as fraud user and execute below command:

                    /apps_01/fraud/abu-push/app_notify-issuer-job/abu-push-notify-issuers.jar -a start -p peat
                  team: SCSSPeatDeployment
                  tags:
                  - Kryptonite
                  - Capivaras
                  - ABU Push
                - name: STL-Web-75 abu-push consumer
                  type: xlrelease.Task
                  description: |-
                    On Server **cjb4stl835**

                    Log in server as fraud user and execute below command:

                    /apps_01/fraud/abu-push/abu_push_axon_consumer/abu-push-consumer.jar -a start -p peat
                  team: SCSSPeatDeployment
                  tags:
                  - Kryptonite
                  - Capivaras
                  - ABU Push
                - name: STL-Web-76 abu-push notifyadapter
                  type: xlrelease.Task
                  description: |-
                    On server **cjb4stl835**

                    Log in server as fraud user and execute below command:

                    /apps_01/fraud/abu-push/notification_adapter/abu-push-notifyadapter.jar -a start -p peat
                  team: SCSSPeatDeployment
                  tags:
                  - Kryptonite
                  - Capivaras
                  - ABU Push
                - name: STL-Web-77 abu-push panmanager
                  type: xlrelease.Task
                  description: |-
                    On server **cjb4stl835**

                    Log in server as fraud user and execute below command:

                    /apps_01/fraud/abu-push/pan_manager/abu-push-panmanager.jar -a start -p peat
                  team: SCSSPeatDeployment
                  tags:
                  - Kryptonite
                  - Capivaras
                  - ABU Push
                - name: STL-Web-78 abu-push watchlist-rest
                  type: xlrelease.Task
                  description: |-
                    On server **cjb4stl835**

                    Log in server as fraud user and execute below command:

                    export APIE_PLATFORM=STAGE && export APIE_REGION=US && export APIE_ZONE=STL && export JAVA_OPTS=-Dsynapse.properties=/apps_01/fraud/abu-push/watchlist/synapse.properties && /apps_01/fraud/abu-push/watchlist/abu-push-watchlist-rest.jar -a start -p peat
                  team: SCSSPeatDeployment
                  tags:
                  - Kryptonite
                  - Capivaras
                  - ABU Push
            - name: Validate ABU Push is started
              type: xlrelease.GateTask
              description: |-
                Server: cjb4stl834 and cjb4stl835

                Log in server as fraud user execute the following command to check abu application started

                ps -ef | grep abu

                If all abu applications are started successfully, above command would show 5 abu running instances. If not started successfully, please use either automated or manual step to start abu applications
              team: SCSSPeatDeployment
              tags:
              - ABU Push
      - name: ABU Updates Deployment
        type: xlrelease.SequentialGroup
        flagStatus: ATTENTION_NEEDED
        flagComment: PCF
        precondition: "False"
        tasks:
        - name: Lift this gate to begin with this Webapp
          type: xlrelease.GateTask
          description: |-
            To avoid Jenkins concurrency issues and job failures, this gate was added to all Webapp deployment sections.

            **_Note that the Webapps can still be deployed in parallel_**, but the deployment for each section will only start when this gate is lifted. If you are blocked waiting for investigation or for a deployment job to run, move on to the next app by lifting its gate.

            Note that some of these gates have preconditions (it will be a checkbox below this text box, if there is a precondition). For instance, some apps require Grid to be up before they are deployed.
          team: SCSSPeatDeployment
          tags:
          - '#bizops'
        - name: Stop ABU Updates
          type: xlrelease.SequentialGroup
          tasks:
          - name: Stop ABU Updates - Manual
            type: xlrelease.Task
            description: |-
              On server **rsk4stl4**

              Log in server as fraud user

              Check if app is running: ps -ef | grep AbuUpdates

              If AbuUpdates is not running can skip below command,  If app is running execute below command to stop app:

              /apps_01/fraud/ABU_Updates/AbuUpdates.jar -a stop -p peat
            team: SCSSPeatDeployment
            tags:
            - kryptonite
            - capivaras
            - ABU Updates
            - '#bizops'
          - name: Validate ABU Updates is stopped
            type: xlrelease.GateTask
            description: |-
              On server rsk4stl4

              Log in server as fraud user

              Check if app is running: ps -ef | grep AbuUpdates

              If AbuUpdates stopped successfully, above command would not show any running instances. If not stopped successfully, please use manual stop step to stop AbuUpdates
            team: SCSSPeatDeployment
            tags:
            - ABU Updates
            - '#bizops'
        - name: Deploy ABU Updates
          type: xlrelease.SequentialGroup
          tasks:
          - name: Deploy ABU Updates
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/Application_Release_Automation/job/peat/job/ABU-peat/job/abu-deploy/
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/Application_Release_Automation/job/peat/job/ABU-peat/job/abu-deploy/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.buildStatus: "${abuUpdatesDeployBuildStatus}"
              pythonScript.password: "${folder.metadata.jenkins.password}"
            tags:
            - Kryptonite
            - Capivaras
            - ABU Updates
            - '#bizops'
          - name: Deploy ABU Updates - Manual
            type: xlrelease.Task
            description: |-
              On server **rsk4stl4**:

              - Log in server as fraud user
              - cd /apps_01/fraud/ABU_Updates;

              - cp -p AbuUpdates.jar AbuUpdates.jar_backup_`date +%Y-%m-%d`

              - cd /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/

              - wget --no-check-certificate https://artifacts.mastercard.int/artifactory/releases/com/mastercard/risk/ems/AbuUpdates/${folder.abu_updates_version}/AbuUpdates-${folder.abu_updates_version}.jar

              - cp -p /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/AbuUpdates-${folder.abu_updates_version}.jar /apps_01/fraud/ABU_Updates/AbuUpdates.jar;

              - chmod +x /apps_01/fraud/ABU_Updates/AbuUpdates.jar;
            team: SCSSPeatDeployment
            precondition: "not releaseVariables['abuUpdatesDeployBuildStatus']"
            tags:
            - ABU Updates
            - '#bizops'
          - name: Validate ABU Updates is deployed
            type: xlrelease.GateTask
            description: |-
              On server rsk4stl4:

              Log in server as fraud user and execute below command to make sure that the jar modified time aligned with the execution time of either automate/manual deploy step

              ls -lrt /apps_01/fraud/ABU_Updates/AbuUpdates.jar

              Follow this page for further validation recommended by release team: https://fusion.mastercard.int/confluence/display/RiskBizOps/Verify+that+an+artifact+was+deployed+correctly
            team: SCSSPeatDeployment
            tags:
            - ABU Updates
            - '#bizops'
      - name: After GRID and BRMSWS are up
        type: xlrelease.SequentialGroup
        precondition: "False"
        tasks:
        - name: Grid is up
          type: xlrelease.GateTask
          team: SCSSPeatDeployment
          tags:
          - '#bizops'
          conditions:
          - name: Grid is up
            type: xlrelease.GateCondition
        - name: Consumer Controls
          type: xlrelease.SequentialGroup
          description: consumer controls tomcat version deployment is based on mc_standalone_java
            chef cook book
          tasks:
          - name: SKIP
            type: xlrelease.SequentialGroup
            precondition: "False"
            tasks:
            - name: Deploy Consumer Controls
              type: xlrelease.SequentialGroup
              tasks:
              - name: Chef Deployment (Pull Request)
                type: stash.MergePullRequest
                server: Bitbucket Server
                username: e084356
                password: !value "stash_MergePullRequest_Chef_Deployment__Pull_Request__password"
                project: DECISION_MANAGEMENT
                repository: mc_dmp_chef_objects_nonprod
                prid: "84"
                description: |-
                  PR link as reference:
                  https://fusion.mastercard.int/stash/projects/DECISION_MANAGEMENT/repos/mc_dmp_chef_objects_nonprod/pull-requests/84/overview
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.output: "${consumer-controls-ws-PR-merge-status}"
                tags:
                - Consumer Controls
              - name: Validate PR is merged
                type: xlrelease.GateTask
                team: SCSSPeatDeployment
                tags:
                - Consumer Controls
                conditions:
                - name: PR in previous step is merged without issues
                  type: xlrelease.GateCondition
              - name: Publish Chef Objects
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: ChefObjectPipeline/job/ESS/job/mc_dmp_chef_objects_nonprod/
                description: https://cd3.mastercard.int/jenkins/job/ChefObjectPipeline/job/ESS/job/mc_dmp_chef_objects_nonprod/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.password}"
                tags:
                - Consumer Controls
              - name: Validate Chef has converged
                type: xlrelease.GateTask
                description: |-
                  Server: rsk4stl4

                    * Log into the non-prod chef-manage UI: https://stl.nonprod.chef.mastercard.int/login
                    * Verify rsk4stl4 server has checked-in since the jenkins job in the previous step finished building. If they both haven't checked-in yet, wait until they do. They should check in every 30 minutes.
                team: SCSSPeatDeployment
                tags:
                - Consumer Controls
                conditions:
                - name: Validated as specified above
                  type: xlrelease.GateCondition
            - name: Stop Consumer Controls
              type: xlrelease.SequentialGroup
              tasks:
              - name: Stop Consumer Controls - Jenkins
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/Application_Release_Automation/job/ARA-2.0/job/peat/job/CC/job/cc-ws-stop/
                jobParameters: artifactName=consumer-controls-ws
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/Application_Release_Automation/job/ARA-2.0/job/peat/job/CC/job/cc-ws-stop/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.buildStatus: "${consumer-controls-ws-stop-status}"
                  pythonScript.password: "${folder.metadata.jenkins.password}"
                tags:
                - Consumer Controls
              - name: Stop Consumer Controls - Manual
                type: xlrelease.Task
                description: |-
                  *Server*: rsk4stl4

                  Log in server as mc user. Run below command to start the current version:

                   /apps_01/webapps/standalone/consumer-controls-ws/bin/consumer-controls-ws.sh -a stop
                team: SCSSPeatDeployment
                precondition: "not releaseVariables['consumer-controls-ws-stop-status']"
                tags:
                - Consumer Controls
              - name: Validate Consumer Controls stopped
                type: xlrelease.GateTask
                description: |-
                  - Login into rsk4stl4 server.
                  - Run below command. No process should be returned.

                  ps -ef | grep consumer-controls-ws | grep -v grep
                tags:
                - Consumer Controls
                conditions:
                - name: consumer-controls-ws is NOT running in rsk4stl4
                  type: xlrelease.GateCondition
            - name: Start Consumer Controls
              type: xlrelease.SequentialGroup
              tasks:
              - name: Start Consumer Controls - Jenkins
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/Application_Release_Automation/job/ARA-2.0/job/peat/job/CC/job/cc-ws-start/
                jobParameters: artifactName=consumer-controls-ws
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/Application_Release_Automation/job/ARA-2.0/job/peat/job/CC/job/cc-ws-start/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.password}"
                  pythonScript.buildStatus: "${consumer-controls-ws-start-status}"
                tags:
                - Consumer Controls
              - name: Start Consumer Controls - Manual
                type: xlrelease.Task
                description: |-
                  *Server*: rsk4stl4

                  Log in server as mc user. Run below command to start the current version:

                   /apps_01/webapps/standalone/consumer-controls-ws/bin/consumer-controls-ws.sh -a start
                team: SCSSPeatDeployment
                precondition: "not releaseVariables['consumer-controls-ws-start-status']"
                tags:
                - Consumer Controls
              - name: Validate Consumer Controls started
                type: xlrelease.GateTask
                description: |-
                  - Wait for a minute after running the start-up job/command.
                  - Login into rsk4stl4 server.
                  - Run below command. The 'consumer-controls-ws' process should be returned.

                  ps -ef | grep consumer-controls-ws | grep -v grep
                tags:
                - Consumer Controls
                conditions:
                - name: consumer-controls-ws is started in rsk4stl4
                  type: xlrelease.GateCondition
          - name: Habitat
            type: xlrelease.SequentialGroup
            tasks:
            - name: TOML
              type: xlrelease.SequentialGroup
              precondition: "False"
              tasks:
              - name: TOML - Consumer Controls
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/fraud_and_security_products/job/consumer_controls_ws/job/peat/job/deploy-toml/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/fraud_and_security_products/job/consumer_controls_ws/job/peat/job/deploy-toml/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - '#bizops'
            - name: "Sleep ${folder.metadata.time} seconds"
              type: xlrelease.ScriptTask
              tags:
              - '#bizops'
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: Promote - Consumer Controls
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/fraud_and_security_products/job/consumer_controls_ws/job/cosumer_controls_ws-promote-specific-param/
              jobParameters: |-
                packageIdent= ${folder.consumer_controls_version}
                channel=peat
                PLATFORM_FILTER=OEL6
                contactList=Nicolas.Sun@mastercard.com
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/fraud_and_security_products/job/consumer_controls_ws/job/cosumer_controls_ws-promote-specific-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
            - name: "Sleep ${folder.metadata.time} seconds (copy)"
              type: xlrelease.ScriptTask
              tags:
              - '#bizops'
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: Status - Consumer Controls
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/fraud_and_security_products/job/consumer_controls_ws/job/peat/job/status-peat/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/fraud_and_security_products/job/consumer_controls_ws/job/peat/job/status-peat/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
            - name: Validate
              type: xlrelease.GateTask
              tags:
              - '#bizops'
      - name: Grid Profile Loader Deployments
        type: xlrelease.SequentialGroup
        flagStatus: ATTENTION_NEEDED
        precondition: "False"
        tasks:
        - name: Lift Gate to being Grid Profile Loader Deployment
          type: xlrelease.GateTask
          tags:
          - '#bizops'
        - name: Habitat promote grid_profile_loader pkg
          type: xlrelease.SequentialGroup
          tasks:
          - name: Promote grid-profile-loader
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=grid-profile-loader dmp_api_frameworks/grid_profile_loader
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: Validate pkg promotion to peat channel
            type: xlrelease.GateTask
            description: "Check the version in Apmate and verify the correct version\
              \ has been promoted in the Habitat blr : https://bldr.chef.mastercard.int/#/pkgs/dmp_api_frameworks/grid_profile_loader/"
            tags:
            - '#bizops'
        - name: Merge PR & Publish TOML
          type: xlrelease.SequentialGroup
          precondition: "False"
          tasks:
          - name: MERGE TOML
            type: stash.MergePullRequest
            server: Bitbucket Server
            username: dmp_xlr_merging
            project: DMPHAB
            repository: dmp-service-config-nonprod
            prid: "29"
            description: https://fusion.mastercard.int/stash/projects/DMPHAB/repos/dmp-service-config-nonprod/pull-requests/29/overview
            variableMapping:
              pythonScript.password: "${folder.metadata.bitbucket.dmp_xlr_merging}"
            tags:
            - '#bizops'
          - name: Successful merge on preceding PR
            type: xlrelease.GateTask
            tags:
            - '#bizops'
          - name: Publish toml
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/grid-profile-loader/job/PEAT/job/grid_profile_loader-publish-peat-rsk0stl53-toml/
            tags:
            - '#bizops'
          - name: Successful build on preceding publish toml job
            type: xlrelease.GateTask
            tags:
            - '#bizops'
          - name: Publish toml
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/grid-profile-loader/job/PEAT/job/grid_profile_loader-publish-peat-rsk0stl54-toml/
            tags:
            - '#bizops'
          - name: Successful build on preceding publish toml job
            type: xlrelease.GateTask
            tags:
            - '#bizops'
        - name: Validation
          type: xlrelease.SequentialGroup
          tasks:
          - name: Validate grid_profile_loader service Peat Nodes
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd
            description: check console log of job for to ensure app is up for both
              rsk0stl53 and rsk0stl54 https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/grid-profile-loader/job/PEAT/job/status/
            tags:
            - '#bizops'
      - name: Account Intelligence Batch Processor Deployment
        type: xlrelease.SequentialGroup
        flagStatus: ATTENTION_NEEDED
        precondition: "False"
        tasks:
        - name: Lift gate to start deployments
          type: xlrelease.GateTask
          tags:
          - '#bizops'
        - name: Promote Package
          type: xlrelease.SequentialGroup
          tasks:
          - name: Promote OEL6
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=account-intelligence-batch-processor dmp_api_frameworks/account_intelligence_batch_processor
              promoteToChannel=peat
              platform=linux_kernel2
              dryRun=false
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: Promote OEL7
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=account-intelligence-batch-processor dmp_api_frameworks/account_intelligence_batch_processor
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
        - name: Publish Updated TOML's
          type: xlrelease.SequentialGroup
          tasks:
          - name: Merge new configs
            type: stash.MergePullRequest
            server: Bitbucket Server
            username: dmp_xlr_merging
            variableMapping:
              pythonScript.password: "${folder.metadata.bitbucket.dmp_xlr_merging}"
            tags:
            - '#bizops'
          - name: Publish TOML's
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
            jobParameters: |-
              appEnv=peat
              app=account_intelligence_batch_processor
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
      - name: Pan Profile Lifecycle Event Transformer
        type: xlrelease.SequentialGroup
        tasks:
        - name: Lift gate to start deployment
          type: xlrelease.GateTask
          tags:
          - '#bizops'
        - name: Promote Application
          type: xlrelease.SequentialGroup
          tasks:
          - name: Promote PPLE Transformer package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=pan-profile-lifecycle-event-transformer dmp_api_frameworks/pan_profile_lifecycle_event_transformer
              promoteToChannel=${folder.pple_transformer_channel}
              platform=linux
              dryRun=false
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: Habitat Version Validation
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/habitat-version-checker/
            jobParameters: |-
              scriptAction=askHabitat
              passedName=dmp_api_frameworks/pan_profile_lifecycle_event_transformer
              passedEnv=${folder.release_environment_lowercase}
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/habitat-version-checker/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
        - name: Publish Updated TOMLs
          type: xlrelease.SequentialGroup
          tasks:
          - name: Merge config changes
            type: stash.MergePullRequest
            server: Bitbucket Server
            username: dmp_xlr_merging
            project: DMPHAB
            prid: ADD PR ID HERE
            description: ADD PR LINK HERE
            variableMapping:
              pythonScript.password: "${folder.metadata.bitbucket.dmp_xlr_merging}"
          - name: Publish TOMLs
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
            jobParameters: |-
              appEnv=${folder.release_environment_lowercase}
              app=pan_profile_lifecycle_event_transformer
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
    color: '#0099CC'
  realFlagStatus: ATTENTION_NEEDED
  tags:
  - habitat
  variables:
  - type: xlrelease.StringVariable
    key: smJenkinsBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: smStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsDeployStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: StandinDeployStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: StandinDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: griLiveStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: platformServicesDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl832DeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl833DeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpbillingDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: mawsDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpBatchDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminUIDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: transactionDispositionDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: StandinStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: StandinStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsDIStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsDIDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsDIStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: platformServicesStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: platformServicesStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl833StopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl832StopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl832StartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl833StartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: mawsStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: mawsStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuUpdatesDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: transactionDispositionStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: transactionDispositionStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpKmsBatchJobBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: mpsEventBatchBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: lifeCycleWebServiceBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: etlDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsStopBuildStatus-1
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsDeployBuildStatus-1
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsStartBuildStatus-1
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsWebBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpmpseventBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdmockserviceDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdmockserviceStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdmockserviceStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpbillingStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpbillingStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuUpdatesStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuUpdatesStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStopAllBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStopNotifyIssuersBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStopNotifyIssuerscjb4stl832BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStopNotifyIssuerscjb4stl833BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushDeployAllBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStartAllBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStartNotifyIssuerscjb4stl832BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStartNotifyIssuerscjb4stl833BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: bintableStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: bintableDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: bintableStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: standINStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: standINDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: standINStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: sireportBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-riskbaseddecisioning-ws-cis4stl3BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl834StartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl835StartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl835DeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl834DeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl835StopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl834StopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStartNotifyIssuerscjb4stl835BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: DMPDeploymentManager2
    requiresValue: false
    showOnReleaseStart: false
    label: "deploymentmanager2 (Originally bundled in DeploymentManager2_EA-*.ear,\
      \ now deployed individually after Tomcat migration)"
    value: 4.8.3
  - type: xlrelease.StringVariable
    key: DMPRTSRestWebService
    requiresValue: false
    showOnReleaseStart: false
    label: "rtsrestwebservice (Originally bundled in RTSWebService_EA-*.ear, now deployed\
      \ individually after Tomcat migration)"
    value: 3.4.3
  - type: xlrelease.StringVariable
    key: DMPDecisionCenter_EC
    requiresValue: false
    showOnReleaseStart: false
    label: "emsruleteamserver  (Originally an EMSRuleTeamServer-*.ear, now updated\
      \ to war file)"
    value: 3.6.0
  - type: xlrelease.StringVariable
    key: DMPDecisionCenter_BC
    requiresValue: false
    showOnReleaseStart: false
    label: Newly added for Business console part of OdmUpgrade
    value: 2.1.0
  - type: xlrelease.StringVariable
    key: DMPDecisionServerConsole
    requiresValue: false
    showOnReleaseStart: false
    label: "DecisionServerConsole  (Originally an DecisionServerConsole -*.ear, now\
      \ updated to war file)"
    value: 3.1.0
  - type: xlrelease.StringVariable
    key: DMPDecisionValidationServerIntegration
    requiresValue: false
    showOnReleaseStart: false
    label: "DecisionValidationServerIntegration  (Originally an DecisionValidationServerIntegration-*.ear,\
      \ now updated to war file)"
    value: 3.12.0
  - type: xlrelease.StringVariable
    key: tfc-help-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminConfigcjb4stl332BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminConfigcjb4stl333BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-decisionadmin-cjb4stl332
    requiresValue: false
    showOnReleaseStart: false
    value: 5.0.0
  - type: xlrelease.StringVariable
    key: jboss-config-decisionadmin-cjb4stl333
    requiresValue: false
    showOnReleaseStart: false
    value: 5.0.0
  - type: xlrelease.StringVariable
    key: jboss-config-bintable-rsk4stl4-deployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-securitysolutions-cjb4stl332-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-securitysolutions-cjb4stl333-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-securitysolutions-cjb4stl996-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-securitysolutions-cjb4stl997-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: fc-platform-services-cjb4stl332-jboss-config-deploy-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: fc-platform-services-cjb4stl333-jboss-config-deploy-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: JBOSS-CONFIG-APACHE-wjb4stl172
    requiresValue: false
    showOnReleaseStart: false
    label: JBOSS-CONFIG-APACHE-wjb4stl172
    value: 4.2.0
  - type: xlrelease.StringVariable
    key: JBOSS-CONFIG-APACHE-wjb4stl173
    requiresValue: false
    showOnReleaseStart: false
    label: JBOSS-CONFIG-APACHE-wjb4stl173
    value: 4.2.0
  - type: xlrelease.StringVariable
    key: rbd-nudata-provider-PR-MergeStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbd-web-service-PR-MergeStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-RBD-rsk4stl4-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-RBD-rsk4stl5-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: consumer-controls-ws-PR-merge-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-riskbaseddecisioning-ws-rsk4stl4.version
    requiresValue: false
    showOnReleaseStart: false
    label: jboss-config-riskbaseddecisioning-ws-rsk4stl4.version
    value: 4.5.0
  - type: xlrelease.StringVariable
    key: jboss-config-riskbaseddecisioning-ws-rsk4stl5.version
    requiresValue: false
    showOnReleaseStart: false
    label: jboss-config-riskbaseddecisioning-ws-rsk4stl5.version
    value: 4.5.0
  - type: xlrelease.StringVariable
    key: consumer-controls-ws-stop-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: consumer-controls-ws-start-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: release
  - type: xlrelease.StringVariable
    key: pple-transformer-channel
    value: peat
  extensions:
  - name: Dashboard
    type: xlrelease.Dashboard
    owner: e025882
    tiles:
    - name: Release progress
      type: xlrelease.ReleaseProgressTile
    - name: Release summary
      type: xlrelease.ReleaseSummaryTile
    - name: Resource usage
      type: xlrelease.ResourceUsageTile
    - name: Release timeline
      type: xlrelease.TimelineTile
    - name: Release health
      type: xlrelease.ReleaseHealthTile
    - name: ODM
      type: xlrelease.TaskProgressTile
      row: 2
      col: 2
      tags:
      - odm
    - name: Decision Admin
      type: xlrelease.TaskProgressTile
      row: 3
      col: 0
      tags:
      - decision admin
    - name: BRMSWS
      type: xlrelease.TaskProgressTile
      row: 3
      col: 1
      tags:
      - brmsws
    - name: Fraud Center
      type: xlrelease.TaskProgressTile
      row: 3
      col: 2
      tags:
      - fraud center apache
      - fraud center tomcat
    - name: PanProfile
      type: xlrelease.TaskProgressTile
      row: 4
      col: 0
      tags:
      - panprofile
    - name: RBD
      type: xlrelease.TaskProgressTile
      row: 4
      col: 1
      tags:
      - rbd ws
      - rbd nudata
    - name: ABU
      type: xlrelease.TaskProgressTile
      row: 4
      col: 2
      tags:
      - abu push
      - abu updates
      - abu maws
    - name: Consumer Controls
      type: xlrelease.TaskProgressTile
      row: 5
      col: 0
      tags:
      - consumer controls
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 5
      col: 1
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 5
      col: 2
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 6
      col: 0
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 6
      col: 1
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 6
      col: 2
  riskProfile: Default risk profile
- template: PEAT-MASTER-WEBAPPS-rewrite
  description: This Template mirrors the PEAT DIP
  scheduledStartDate: 2019-02-06T09:00:00-06:00
  phases:
  - phase: XLR Release
    tasks:
    - name: Add Release Tag
      type: xlr.AddTag
      tags:
      - '#bizops'
    color: '#0079BC'
  - phase: WEBAPPS
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      tags:
      - WebApps
      - '#bizops'
    - name: Parallel Deployment
      type: xlrelease.ParallelGroup
      tasks:
      - name: ODM applications
        type: xlrelease.SequentialGroup
        tags:
        - ODM
        tasks:
        - name: DMPRuleWebService PCF
          type: xlrelease.SequentialGroup
          owner: riskps
          precondition: "releaseVariables['dmprulewebservice_pcf-deploy'] == 'True'"
          tasks:
          - name: Merge PR
            type: stash.MergePullRequest
            username: dmp_xlr_merging
            project: ESSDMP-CORE
            repository: dmprulewebservices-jenkins
            prid: "110"
            description: Merge PR https://fusion.mastercard.int/stash/projects/ESSDMP-CORE/repos/dmprulewebservices-jenkins/pull-requests/110/overview
            owner: riskps
            variableMapping:
              pythonScript.password: "${folder.metadata.bitbucket.dmp_xlr_merging}"
            tags:
            - '#bizops'
          - name: Run Jenkins Job
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: DMPRuleWebService/job/stl-peat/job/Step1.DeployDMPRuleWebServiceApp/
            description: |-
              Run Jenkins job for deployment -
              https://cd5.mastercard.int/jenkins/job/DMPRuleWebService/job/stl-peat/job/Step1.DeployDMPRuleWebServiceApp/
            flagStatus: ATTENTION_NEEDED
            flagComment: "Hondo: Branch is required variable but not needed as required"
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - ODM
            - '#bizops'
          - name: Check DMPRuleWS is running in PCF
            type: xlrelease.Task
            description: |-
              Check dmp-rule-ws-peat appears in PCF dashboard

              link: https://apps.system.stl.pcfstage00.mastercard.int/

              Go to DMPRuleWebService PEAT STL section and check service is running
            team: SCSSStageDeployment
            tags:
            - ODM
            - '#bizops'
          - name: Validate healthcheck
            type: webhook.JsonWebhook
            URL: https://dmp-rule-ws-peat.apps.stl.pcfstage00.mastercard.int/dmprule/healthCheck
            jsonPathExpression: status
            team: SCSSStageDeployment
            variableMapping:
              pythonScript.result: "${healthcheck_status}"
            tags:
            - '#bizops'
          - name: Verify healthcheck
            type: xlrelease.ScriptTask
            team: SCSSStageDeployment
            tags:
            - '#bizops'
            script: "releaseVariables['healthcheck_status'] == True or releaseVariables['healthcheck_status']\
              \ == \"UP\""
        - name: Habitat-decisionserver
          type: xlrelease.SequentialGroup
          tasks:
          - name: Habitat-decisionserver_res_service-Promote
            type: xlrelease.SequentialGroup
            precondition: "releaseVariables['decisionserver_res_service-deploy'] ==\
              \ 'True'"
            tasks:
            - name: dmpdecisionserver_res_1
              type: xlrelease.SequentialGroup
              tasks:
              - name: Promote-dmpdecisionserver_res_1
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
                jobParameters: |-
                  packageIdent=${folder.dmpdecisionserver_res_1_version}
                  channel=${folder.decisionserver_res_service_channel}
                  dryRun=false
                  platform=linux
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_res_1_peat
                - Habitat
                - '#bizops'
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                tags:
                - '#bizops'
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
              - name: Publish TOMLs
                type: xlrelease.SequentialGroup
                tasks:
                - name: STL
                  type: xlrelease.SequentialGroup
                  tasks:
                  - name: Publish TOML dmpdecisionserver_res_1
                    type: jenkins.Build
                    jenkinsServer: dmp_cd5
                    jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/publish_tomls/job/peat/job/stl/job/res/job/publish_toml-dmpdecisionserver_res_1/
                - name: KSC
                  type: xlrelease.SequentialGroup
                  tasks:
                  - name: Publish TOML dmpdecisionserver_res_1
                    type: jenkins.Build
                    jenkinsServer: dmp_cd5
                    jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/publish_tomls/job/peat/job/ksc/job/res/job/publish_toml-dmpdecisionserver_res_1/
            - name: dmpdesicionserver_res_0
              type: xlrelease.SequentialGroup
              tasks:
              - name: Promote-dmpdecisionserver_res_0
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
                jobParameters: |-
                  packageIdent=${folder.dmpdecisionserver_res_0_version}
                  channel=${decisionserver_res_service-channel}
                  dryRun=false
                  platform=linux
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_res_0_peat
                - Habitat
                - '#bizops'
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                tags:
                - '#bizops'
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
              - name: Publish TOMLs
                type: xlrelease.SequentialGroup
                tasks:
                - name: STL
                  type: xlrelease.SequentialGroup
                  tasks:
                  - name: Publish TOML dmpdecisionserver_res_0
                    type: jenkins.Build
                    jenkinsServer: dmp_cd5
                    jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/publish_tomls/job/peat/job/stl/job/res/job/publish_toml-dmpdecisionserver_res_0/
                - name: KSC
                  type: xlrelease.SequentialGroup
                  tasks:
                  - name: Publish TOML dmpdecisionserver_res_1
                    type: jenkins.Build
                    jenkinsServer: dmp_cd5
                    jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/publish_tomls/job/peat/job/ksc/job/res/job/publish_toml-dmpdecisionserver_res_0/
            - name: dmpdecisionserver_dvs_int_1
              type: xlrelease.SequentialGroup
              tasks:
              - name: Promote-dmpdecisionserver_dvs_int_1
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
                jobParameters: |-
                  packageIdent=${folder.dmpdecisionserver_dvs_int_1_version}
                  channel=${decisionserver_res_service-channel}
                  dryRun=false
                  platform=linux
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_dvs_int_1_peat
                - Habitat
                - '#bizops'
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                tags:
                - '#bizops'
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
              - name: Publish TOMLs
                type: xlrelease.SequentialGroup
                tasks:
                - name: STL
                  type: xlrelease.SequentialGroup
                  tasks:
                  - name: Publish TOML dmpdecisionserver_dvs_int_1_wtc0stl28
                    type: jenkins.Build
                    jenkinsServer: dmp_cd5
                    jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/publish_tomls/job/peat/job/stl/job/dvs/job/wtc0stl28.mastercard.int/job/publish_toml-dmpdecisionserver_dvs_int_1/
                  - name: Publish TOML dmpdecisionserver_dvs_int_1_wtc0stl27
                    type: jenkins.Build
                    jenkinsServer: dmp_cd5
                    jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/publish_tomls/job/peat/job/stl/job/dvs/job/wtc0stl27.mastercard.int/job/publish_toml-dmpdecisionserver_dvs_int_1/
                - name: KSC
                  type: xlrelease.SequentialGroup
                  tasks:
                  - name: Publish TOML dmpdecisionserver_dvs_int_1_wtc0stl36
                    type: jenkins.Build
                    jenkinsServer: dmp_cd5
                    jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/publish_tomls/job/peat/job/ksc/job/dvs/job/wtc0stl36.mastercard.int/job/publish_toml-dmpdecisionserver_dvs_int_1/
                  - name: Publish TOML dmpdecisionserver_dvs_int_1_wtc0stl35
                    type: jenkins.Build
                    jenkinsServer: dmp_cd5
                    jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/publish_tomls/job/peat/job/ksc/job/dvs/job/wtc0stl35.mastercard.int/job/publish_toml-dmpdecisionserver_dvs_int_1/
            - name: dmpdecisionserver_dvs_int_0
              type: xlrelease.SequentialGroup
              tasks:
              - name: Promote-dmpdecisionserver_dvs_int_0
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
                jobParameters: |-
                  packageIdent=${folder.dmpdecisionserver_dvs_int_0_version}
                  channel=${decisionserver_res_service-channel}
                  dryRun=false
                  platform=linux
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_dvs_int_0_peat
                - Habitat
                - '#bizops'
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                tags:
                - '#bizops'
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
              - name: Publish TOMLs
                type: xlrelease.SequentialGroup
                tasks:
                - name: STL
                  type: xlrelease.SequentialGroup
                  tasks:
                  - name: Publish TOML dmpdecisionserver_dvs_int_0_wtc0stl28
                    type: jenkins.Build
                    jenkinsServer: dmp_cd5
                    jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/publish_tomls/job/peat/job/stl/job/dvs/job/wtc0stl28.mastercard.int/job/publish_toml-dmpdecisionserver_dvs_int_0/
                  - name: Publish TOML dmpdecisionserver_dvs_int_0_wtc0stl27
                    type: jenkins.Build
                    jenkinsServer: dmp_cd5
                    jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/publish_tomls/job/peat/job/stl/job/dvs/job/wtc0stl27.mastercard.int/job/publish_toml-dmpdecisionserver_dvs_int_0/
                - name: KSC
                  type: xlrelease.SequentialGroup
                  tasks:
                  - name: Publish TOML dmpdecisionserver_dvs_int_0_wtc0stl36
                    type: jenkins.Build
                    jenkinsServer: dmp_cd5
                    jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/publish_tomls/job/peat/job/ksc/job/dvs/job/wtc0stl36.mastercard.int/job/publish_toml-dmpdecisionserver_dvs_int_0/
                  - name: Publish TOML dmpdecisionserver_dvs_int_0_wtc0stl35
                    type: jenkins.Build
                    jenkinsServer: dmp_cd5
                    jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/publish_tomls/job/peat/job/ksc/job/dvs/job/wtc0stl35.mastercard.int/job/publish_toml-dmpdecisionserver_dvs_int_0/
            - name: dmpdecisionserver_dvs_ext_1
              type: xlrelease.SequentialGroup
              tasks:
              - name: Promote-dmpdecisionserver_dvs_ext_1
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.dmpdecisionserver_dvs_ext_1_peat.version}
                  channel=${decisionserver_res_service-channel}
                  dryRun=false
                  platform=linux
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_dvs_ext_1_peat
                - Habitat
                - '#bizops'
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                tags:
                - '#bizops'
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
              - name: Publish TOMLs DVS_EXT_1
                type: xlrelease.SequentialGroup
                tasks:
                - name: STL
                  type: xlrelease.SequentialGroup
                  tasks:
                  - name: Publish TOML dmpdecisionserver_dvs_ext_1_wtc0stl28
                    type: jenkins.Build
                    jenkinsServer: dmp_cd5
                    jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/publish_tomls/job/peat/job/stl/job/dvs/job/wtc0stl28.mastercard.int/job/publish_toml-dmpdecisionserver_dvs_ext_1/
                  - name: Publish TOML dmpdecisionserver_dvs_ext_1_wtc0stl27
                    type: jenkins.Build
                    jenkinsServer: dmp_cd5
                    jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/publish_tomls/job/peat/job/stl/job/dvs/job/wtc0stl27.mastercard.int/job/publish_toml-dmpdecisionserver_dvs_ext_1/
                - name: KSC
                  type: xlrelease.SequentialGroup
                  tasks:
                  - name: Publish TOML dmpdecisionserver_dvs_ext_1_wtc0stl36
                    type: jenkins.Build
                    jenkinsServer: dmp_cd5
                    jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/publish_tomls/job/peat/job/ksc/job/dvs/job/wtc0stl36.mastercard.int/job/publish_toml-dmpdecisionserver_dvs_ext_1/
                  - name: Publish TOML dmpdecisionserver_dvs_ext_1_wtc0stl35
                    type: jenkins.Build
                    jenkinsServer: dmp_cd5
                    jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/publish_tomls/job/peat/job/ksc/job/dvs/job/wtc0stl35.mastercard.int/job/publish_toml-dmpdecisionserver_dvs_ext_1/
            - name: dmpdecisionserver_dvs_ext_0
              type: xlrelease.SequentialGroup
              tasks:
              - name: Promote-dmpdecisionserver_dvs_ext_0
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
                jobParameters: |-
                  packageIdent=${folder.dmp_decision_server_dvs_ext_0_version}
                  channel=${decisionserver_res_service-channel}
                  dryRun=false
                  platform=linux
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - Habitat
                - dmpdecisionserver_dvs_ext_0_peat
                - '#bizops'
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                tags:
                - '#bizops'
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
              - name: Publish TOMLs DVS_EXT_0
                type: xlrelease.SequentialGroup
                tasks:
                - name: STL
                  type: xlrelease.SequentialGroup
                  tasks:
                  - name: Publish TOML dmpdecisionserver_dvs_ext_0_wtc0stl28
                    type: jenkins.Build
                    jenkinsServer: dmp_cd5
                    jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/publish_tomls/job/peat/job/stl/job/dvs/job/wtc0stl28.mastercard.int/job/publish_toml-dmpdecisionserver_dvs_ext_0/
                  - name: Publish TOML dmpdecisionserver_dvs_ext_0_wtc0stl27
                    type: jenkins.Build
                    jenkinsServer: dmp_cd5
                    jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/publish_tomls/job/peat/job/stl/job/dvs/job/wtc0stl27.mastercard.int/job/publish_toml-dmpdecisionserver_dvs_ext_0/
                - name: KSC
                  type: xlrelease.SequentialGroup
                  tasks:
                  - name: Publish TOML dmpdecisionserver_dvs_ext_0_wtc0stl36
                    type: jenkins.Build
                    jenkinsServer: dmp_cd5
                    jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/publish_tomls/job/peat/job/ksc/job/dvs/job/wtc0stl36.mastercard.int/job/publish_toml-dmpdecisionserver_dvs_ext_0/
                  - name: Publish TOML dmpdecisionserver_dvs_ext_0_wtc0stl35
                    type: jenkins.Build
                    jenkinsServer: dmp_cd5
                    jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/publish_tomls/job/peat/job/ksc/job/dvs/job/wtc0stl35.mastercard.int/job/publish_toml-dmpdecisionserver_dvs_ext_0/
          - name: Habitat-decisioncenter_bc_service
            type: xlrelease.SequentialGroup
            precondition: "releaseVariables['decisioncenter_bc_service-deploy'] ==\
              \ 'True'"
            tasks:
            - name: Promote-decisioncenter_bc_service
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
              jobParameters: |-
                packageIdent=${folder.decisioncenter_bc_service_peat_version}
                channel=${decisioncenter_bc_service-channel}
                dryRun=false
                platform=linux
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - decisioncenter_bc_service_peat
              - Habitat
              - '#bizops'
            - name: "Sleep ${folder.metadata.time} seconds"
              type: xlrelease.ScriptTask
              tags:
              - '#bizops'
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: Publish TOML
              type: xlrelease.SequentialGroup
              tasks:
              - name: STL
                type: xlrelease.SequentialGroup
                tasks:
                - name: Publish TOML decisioncenter_bc_service
                  type: jenkins.Build
                  jenkinsServer: dmp_cd5
                  jobName: ChefHabitat/job/decision_processing/job/decisioncenter_bc_service/job/publish_tomls/job/peat/job/stl/job/publish_tomls_stl/
              - name: KSC
                type: xlrelease.SequentialGroup
                tasks:
                - name: Publish TOML decisioncenter_bc_service
                  type: jenkins.Build
                  jenkinsServer: dmp_cd5
                  jobName: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisioncenter_bc_service/job/publish_tomls/job/peat/job/ksc/job/publish_tomls_ksc/
          - name: Habitat-decision_center_ec_components
            type: xlrelease.SequentialGroup
            precondition: "releaseVariables['decision_center_ec_components-deploy']\
              \ == 'True'"
            tasks:
            - name: Promote-decision_center_ec_components
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
              jobParameters: |-
                packageIdent=${folder.decision_center_ec_components_version}
                channel=${decision_center_ec_components-channel}
                dryRun=false
                platform=linux
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - decision_center_ec_components_peat
              - Habitat
              - '#bizops'
            - name: "Sleep ${folder.metadata.time} seconds"
              type: xlrelease.ScriptTask
              tags:
              - '#bizops'
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: Publish TOMLs decision_center_ec_components
              type: xlrelease.SequentialGroup
              tasks:
              - name: STL
                type: xlrelease.SequentialGroup
                tasks:
                - name: Publish TOML decision_center_ec_components_wtc0stl23
                  type: jenkins.Build
                  jenkinsServer: dmp_cd5
                - name: Publish TOML decision_center_ec_components_wtc0stl24
                  type: jenkins.Build
                  jenkinsServer: dmp_cd5
                  jobName: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_components/job/publish_tomls/job/peat/job/stl/job/decision_center_ec_components/job/publish_toml-wtc0stl24/
              - name: KSC
                type: xlrelease.SequentialGroup
                tasks:
                - name: Publish TOML decision_center_ec_components_wtc0ksc31
                  type: jenkins.Build
                  jenkinsServer: dmp_cd5
                  jobName: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_components/job/publish_tomls/job/peat/job/ksc/job/decision_center_ec_components/job/publish_toml-wtc0stl31/
                - name: Publish TOML decision_center_ec_components_wtc0ksc32
                  type: jenkins.Build
                  jenkinsServer: dmp_cd5
                  jobName: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_components/job/publish_tomls/job/peat/job/ksc/job/decision_center_ec_components/job/publish_toml-wtc0stl32/
          - name: Habitat-decision_center_ec_webservices_peat
            type: xlrelease.SequentialGroup
            precondition: "releaseVariables['decision_center_ec_webservices-deploy']\
              \ == 'True'"
            tasks:
            - name: Promote-decision_center_ec_webservices
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
              jobParameters: |-
                packageIdent=${folder.decision_center_ec_webservices_version}
                channel= ${decision_center_ec_webservices-channel}
                dryRun=false
                platform=linux
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - decision_center_ec_webervices_peat
              - Habitat
              - '#bizops'
            - name: "Sleep ${folder.metadata.time} seconds"
              type: xlrelease.ScriptTask
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: Publish TOMLs decision_center_ec_webservices
              type: xlrelease.SequentialGroup
              tasks:
              - name: STL
                type: xlrelease.SequentialGroup
                tasks:
                - name: EC_Webservices - PEAT_lstl4wtc8786
                  type: jenkins.Build
                  jenkinsServer: dmp_cd5
                  jobName: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_webservices/job/publish_tomls/job/stl/job/decision_center_ec_webservices/job/publish_toml-lstl4wtc8786/
                - name: EC_Webservices - PEAT_lstl4wtc8822
                  type: jenkins.Build
                  jenkinsServer: dmp_cd5
                  jobName: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_webservices/job/publish_tomls/job/stl/job/decision_center_ec_webservices/job/publish_toml-lstl4wtc8822/
              - name: KSC
                type: xlrelease.SequentialGroup
                tasks:
                - name: EC_Webservices - PEAT_lstl4wtc8114
                  type: jenkins.Build
                  jenkinsServer: dmp_cd5
                  jobName: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_webservices/job/publish_tomls/job/ksc/job/decision_center_ec_webservices/job/publish_toml-lstl4wtc8114/
                - name: EC_Webservices - PEAT_lstl4wtc8655
                  type: jenkins.Build
                  jenkinsServer: dmp_cd5
                  jobName: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_webservices/job/publish_tomls/job/ksc/job/decision_center_ec_webservices/job/publish_toml-lstl4wtc8655/
          - name: Habitat-dmp_udt_ws
            type: xlrelease.SequentialGroup
            precondition: "releaseVariables['dmp_udt_ws-deploy'] == 'True'"
            tasks:
            - name: Promote-dmp_udt_ws_peat
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
              jobParameters: |-
                packageIdent=${folder.dmp_udt_ws_peat_version}
                channel=${dmp_udt_ws-channel}
                dryRun=false
                platform=linux
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - dmp_udt_ws_peat
              - Habitat
              - '#bizops'
            - name: "Sleep ${folder.metadata.time} seconds"
              type: xlrelease.ScriptTask
              tags:
              - '#bizops'
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: Publish TOMLs UDT_WS
              type: xlrelease.SequentialGroup
              tasks:
              - name: STL
                type: xlrelease.SequentialGroup
                tasks:
                - name: udt_ws_wtc0stl25
                  type: jenkins.Build
                  jenkinsServer: dmp_cd5
                  jobName: ChefHabitat/job/decision_processing/job/dmp_udt_ws/job/publish_tomls/job/peat/job/stl/job/wtc0stl25-publish_toml/
                - name: udt_ws_wtc0stl26
                  type: jenkins.Build
                  jenkinsServer: dmp_cd5
                  jobName: ChefHabitat/job/decision_processing/job/dmp_udt_ws/job/publish_tomls/job/peat/job/stl/job/wtc0stl26-publish_toml/
              - name: KSC
                type: xlrelease.SequentialGroup
                tasks:
                - name: udt_ws_wtc0stl33
                  type: jenkins.Build
                  jenkinsServer: dmp_cd5
                  jobName: ChefHabitat/job/decision_processing/job/dmp_udt_ws/job/publish_tomls/job/peat/job/ksc/job/wtc0stl33-publish_toml/
                - name: ust_ws_wtd0stl34
                  type: jenkins.Build
                  jenkinsServer: dmp_cd5
                  jobName: ChefHabitat/job/decision_processing/job/dmp_udt_ws/job/publish_tomls/job/peat/job/ksc/job/wtc0stl34-publish_toml/
          - name: Validate Promotion
            type: xlrelease.GateTask
            team: SCSSPeatDeployment
            precondition: "False"
          - name: Validation
            type: xlrelease.SequentialGroup
            precondition: "False"
            tasks:
            - name: decisionserver_res_service
              type: xlrelease.SequentialGroup
              tags:
              - decisionserver_res_service
              - Habitat
              tasks:
              - name: DMPDecisionServer_dvs_ext_0 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_ext_0/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_ext_0/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_dvs_ext_0
                - Habitat
                - '#bizops'
              - name: DMPDecisionServer_dvs_ext_1 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_ext_1/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_ext_1/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_dvs_ext_1
                - Habitat
                - '#bizops'
              - name: DMPDecisionServer_dvs_int_0 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_int_0/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_int_0/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_dvs_int_0_peat
                - Habitat
                - '#bizops'
              - name: DMPDecisionServer_dvs_int_1 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_int_1/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_int_1/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_dvs_int_1
                - Habitat
                - '#bizops'
              - name: DMPDecisionServer_res_0 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_res_0/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_res_0/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_res_0
                - Habitat
                - '#bizops'
              - name: DMPDecisionServer_res_1 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_res_1/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_res_1/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_res_1
                - Habitat
                - '#bizops'
            - name: decisionserver_bc_service
              type: xlrelease.SequentialGroup
              owner: E123251
              tags:
              - decisionserver_res_service
              - Habitat
              tasks:
              - name: decisioncenter_bc_service status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisioncenter_bc_service/job/status/job/peat/job/Status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisioncenter_bc_service/job/status/job/peat/job/Status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - decisioncenter_bc_service
                - Habitat
                - '#bizops'
            - name: decisionserver__ec
              type: xlrelease.SequentialGroup
              owner: E123251
              tags:
              - decisionserver_res_service
              - Habitat
              tasks:
              - name: dmp_decision_center_ec_components
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_components/job/status/job/peat/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_components/job/status/job/peat/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmp_decision_center_ec_components
                - Habitat
                - '#bizops'
              - name: dmp_decision_center_ec_webservices
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_webservices/job/status/job/peat/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_webservices/job/status/job/peat/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmp_decision_center_ec_components
                - Habitat
                - '#bizops'
            - name: decisionserver__udt_ws
              type: xlrelease.SequentialGroup
              owner: E123251
              tags:
              - decisionserver_res_service
              - Habitat
              tasks:
              - name: dmp_udt_ws
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/dmp_udt_ws/job/status/job/peat/job/Status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/dmp_udt_ws/job/status/job/peat/job/Status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmp_udt_ws_peat
                - Habitat
          - name: Complete Validation
            type: xlrelease.GateTask
            precondition: "False"
      - name: TFC Tomcat Apps HABITAT & PCF
        type: xlrelease.SequentialGroup
        precondition: "False"
        tags:
        - Tomcat Apps
        - Habitat
        tasks:
        - name: Lift this gate to begin deployment
          type: xlrelease.GateTask
          tags:
          - '#bizops'
        - name: Deploy tfcgateway
          type: xlrelease.SequentialGroup
          precondition: "releaseVariables['tfc-tfcgateway-deploy'] == 'True'"
          tasks:
          - name: PUBLISH TOMLS
            type: xlrelease.SequentialGroup
            precondition: "releaseVariables['tfc-tfcgateway-toml-deploy'] == 'True'"
            tags:
            - TOML
            tasks:
            - name: Merge PR for TOML changes
              type: bitbucket.MergePullRequest
              server: NewConfigBitbucket
              username: dmp_xlr_merging
              variableMapping:
                pythonScript.password: "${folder.metadata.bitbucket.dmp_xlr_merging}"
              tags:
              - '#bizops'
            - name: Publish TOML's
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param
              jobParameters: |-
                appEnv=peat
                app=tfc_tfcgateway
              description: |-
                Publish TOML's on PEAT TFCGateway nodes

                https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - '#bizops'
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=tfcgateway dmp_user_interface_frameworks/tfc_tfcgateway
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for Gateway to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Gateway is not registered with synapse. Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/
            tags:
            - '#bizops'
        - name: Deploy DI
          type: xlrelease.SequentialGroup
          precondition: "releaseVariables['tfc-di-deploy'] == 'True'"
          tasks:
          - name: PUBLISH TOMLS
            type: xlrelease.SequentialGroup
            precondition: "releaseVariables['tfc-di-toml-deploy'] == 'True'"
            tasks:
            - name: Merge PR for TOML changes
              type: bitbucket.MergePullRequest
              server: NewConfigBitbucket
              tags:
              - '#bizops'
            - name: Publish TOML's
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param
              jobParameters: |-
                appEnv=peat
                app=tfc_di
              description: |-
                Publish TOML's on PEAT DI nodes

                https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=di dmp_user_interface_frameworks/tfc_di
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for DI to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Status tfc_di
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_di/job/PEAT/job/status/
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_di/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
        - name: Deploy TFCConfig
          type: xlrelease.SequentialGroup
          precondition: "releaseVariables['tfc-tfcconfig-deploy'] == 'True'"
          tasks:
          - name: PUBLISH TOMLS
            type: xlrelease.SequentialGroup
            precondition: "releaseVariables['tfc-tfcconfig-toml-deploy'] == 'True'"
            tasks:
            - name: Merge PR for TOML changes
              type: bitbucket.MergePullRequest
              server: NewConfigBitbucket
            - name: Publish TOML's
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param
              jobParameters: |-
                appEnv=peat
                app=tfc_tfcconfig
              description: |-
                Publish TOML's on PEAT tfcconfig nodes

                https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=tfcconfig dmp_user_interface_frameworks/tfc_tfcconfig
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for tfcconfig to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: status tfc_tfcconfig
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcconfig/job/PEAT/job/status/
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcconfig/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
        - name: Deploy Rulemanager
          type: xlrelease.SequentialGroup
          precondition: "releaseVariables['tfc-rulemanager-deploy'] == 'True'"
          tasks:
          - name: PUBLISH TOMLS
            type: xlrelease.SequentialGroup
            precondition: "releaseVariables['tfc-rulemanager-toml-deploy'] == 'True'"
            tasks:
            - name: Merge PR for TOML changes
              type: bitbucket.MergePullRequest
              server: NewConfigBitbucket
            - name: Publish TOML's
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param
              jobParameters: |-
                appEnv=peat
                app=tfc_rulemanager
              description: |-
                Publish TOML's on PEAT rulemanager nodes

                https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=rulemanager dmp_user_interface_frameworks/tfc_rulemanager
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for tfcconfig to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: status tfc_rulemanager
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_rulemanager/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_rulemanager/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_rulemanager/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
        - name: Deploy Transactionviewer
          type: xlrelease.SequentialGroup
          precondition: "releaseVariables['tfc_transactionviewer_deploy'] == 'True'"
          tasks:
          - name: PUBLISH TOMLS
            type: xlrelease.SequentialGroup
            precondition: "releaseVariables['tfc-transactionviewer-toml-deploy'] ==\
              \ 'True'"
            tasks:
            - name: Merge PR for TOML changes
              type: bitbucket.MergePullRequest
              server: NewConfigBitbucket
            - name: Publish TOML's
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param
              jobParameters: |-
                appEnv=peat
                app=tfc_transactionviewer
              description: |-
                Publish TOML's on PEAT transactionviewer nodes

                https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=transactionviewer dmp_user_interface_frameworks/tfc_transactionviewer
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for transactionviewer to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: status tfc_transactionviewer
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_transactionviewer/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_transactionviewer/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_transactionviewer/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
        - name: ISSReports - PCF deployment
          type: xlrelease.SequentialGroup
          precondition: "releaseVariables['iisreports-pfc-deploy'] == 'True"
          tasks:
          - name: PCF app deployment jenkins job
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: TFCPCF/job/PCF/job/stl-stage/job/Deploy-ISS-Reports-Services-PEAT
            description: |-
              Run this jenkins job to deploy ISSReportsservices on PCF (pcf_org: ESS-TFC and pcf_space: stage-peat)

              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-ISS-Reports-Services-PEAT/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: PCF app deployment validation
            type: xlrelease.GateTask
            description: |-
              Validate ISS Report Deployment in PCF.

              Checks for Jenkins Job execution Is successful for IssReport TFC apps
              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-ISS-Reports-Services-PEAT/

              Verify if the deployment is successful in PCF for iss-reports-services application
              - Login into PEAT PCF Space: https://apps.system.stl.pcfstage00.mastercard.int/
              - Traverse to the ESS-TFC Org and go to stage-peat space.
              - iss-reports-services-peat

              Login to Dynatrace and verify the new application instance Is available
              - iss-reports-services-peat

              Login to Splunk and verify the logs are available for iss-reports-services

              Splunk URL
              https://dtl.splunk.mastercard.int

              Query String:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="iss-reports-services-peat"

              Query to verify app Is started:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="iss-reports-services-peat" "Started Application in * seconds (JVM running for *)"

              Verify the iss-reports-services service is registered in PEAT Krang
               - Login to Stage Krang - https://stage.eportal.mastercard.com/apie-stage-krang
               - Search for tfc
               - iss-reports-services should be registered with 4 instances and the pcf routes must be displayed and each instance is associated with PEAT tag
        - name: Deploy Listmanager
          type: xlrelease.SequentialGroup
          precondition: "releaseVariables['tfc-listmanager-deploy'] == 'True'"
          tasks:
          - name: PUBLISH TOMLS
            type: xlrelease.SequentialGroup
            precondition: "releaseVariables['tfc-listmanager-toml-deploy'] == 'True'"
            tasks:
            - name: Merge PR for TOML changes
              type: bitbucket.MergePullRequest
              server: NewConfigBitbucket
            - name: Publish TOML's
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param
              jobParameters: |-
                appEnv=peat
                app=tfc_listmanager
              description: |-
                Publish TOML's on PEAT listmanager nodes

                https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=listmanager dmp_user_interface_frameworks/tfc_listmanager
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for listmanager to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: status tfc_listmanager
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_listmanager/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_listmanager/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_listmanager/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
        - name: Rule Testing Service - PCF deployment
          type: xlrelease.SequentialGroup
          precondition: "releaseVariables['rule-test-service-pcf-deploy'] == 'True'"
          tasks:
          - name: PCF app deployment jenkins job
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: TFCPCF/PCF/stl-stage/Deploy-Rule-Testing-Service-PEAT
            description: |-
              Run this jenkins job to deploy Rule Testing Service on PCF (pcf_org: ESS-TFC and pcf_space: stage-peat)

              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-Rule-Testing-Service-PEAT/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: PCF app deployment validation
            type: xlrelease.GateTask
            description: |-
              Validate Rule Testing Service Deployment in PCF.

              Checks for Jenkins Job execution Is successful for Rule Testing Service TFC apps
              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-Rule-Testing-Service-PEAT/

              Verify if the deployment is successful in PCF for Rule Testing Service application
              - Login into PEAT PCF Space: https://apps.system.stl.pcfstage00.mastercard.int/
              - Traverse to the ESS-TFC Org and go to stage-peat space.
              - rule-testing-service-peat

              Login to Dynatrace and verify the new application instance Is available
              - rule-testing-service-peat

              Login to Splunk and verify the logs are available for rule-testing-service

              Splunk URL
              https://dtl.splunk.mastercard.int

              Query String:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="rule-testing-*"

              Query to verify app Is started:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="rule-testing-*" "Started Application in * seconds (JVM running for *)"

              Verify the rule-testing-service service is registered in PEAT Krang
               - Login to Stage Krang - https://stage.eportal.mastercard.com/apie-stage-krang
               - Search for tfc
               - rule-testing-service should be registered with 4 instances and the pcf routes must be displayed and each instance is associated with PEAT tag
        - name: Rule Metrics Service - PCF deployment
          type: xlrelease.SequentialGroup
          precondition: "releaseVariables['rule-metric-service-pcf-deploy'] == 'True'"
          tasks:
          - name: PCF app deployment jenkins job
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: TFCPCF/PCF/stl-stage/Deploy-Rule-Metrics-Service-PEAT
            description: |-
              Run this jenkins job to deploy Rule Metrics Service on PCF (pcf_org: ESS-TFC and pcf_space: stage-peat)

              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-Rule-Metrics-Service-PEAT/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: PCF app deployment validation
            type: xlrelease.GateTask
            description: |-
              Validate Rule Metrics Service Deployment in PCF.

              Checks for Jenkins Job execution Is successful for Rule Metrics Service TFC apps
              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-Rule-Metrics-Service-PEAT/

              Verify if the deployment is successful in PCF for Rule Metrics Service application
              - Login into PEAT PCF Space: https://apps.system.stl.pcfstage00.mastercard.int/
              - Traverse to the ESS-TFC Org and go to stage-peat space.
              - rule-metrics-service-peat

              Login to Dynatrace and verify the new application instance Is available
              - rule-metrics-service-peat

              Login to Splunk and verify the logs are available for rule-metrics-service

              Splunk URL
              https://dtl.splunk.mastercard.int

              Query String:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="rule-metrics-service-peat"

              Query to verify app Is started:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="rule-metrics-service-peat" "Started Application in * seconds (JVM running for *)"

              Verify the rule-metrics-service is registered in PEAT Krang
               - Login to Stage Krang - https://stage.eportal.mastercard.com/apie-stage-krang
               - Search for tfc
               - rule-metrics-service should be registered with 4 instances and the pcf routes must be displayed and each instance is associated with PEAT tag
        - name: Validation of all Fraud Center Tomcat Apps
          type: xlrelease.GateTask
      - name: Fraud Center Apache via Habitat
        type: xlrelease.SequentialGroup
        scheduledStartDate: 2019-02-06T10:00:00-06:00
        team: SCSSPeatDeployment
        precondition: "False"
        tasks:
        - name: Lift this gate to begin with this Webapp
          type: xlrelease.GateTask
          description: |-
            To avoid Jenkins concurrency issues and job failures, this gate was added to all Webapp deployment sections.

            **_Note that the Webapps can still be deployed in parallel_**, but the deployment for each section will only start when this gate is lifted. If you are blocked waiting for investigation or for a deployment job to run, move on to the next app by lifting its gate.

            Note that some of these gates have preconditions (it will be a checkbox below this text box, if there is a precondition). For instance, some apps require Grid to be up before they are deployed.
          team: SCSSPeatDeployment
          tags:
          - Fraud Center Apache
        - name: Deploy the_fraud_center_apache24
          type: xlrelease.SequentialGroup
          description: This is the actual apache instance that needs to be the deployed
            first before any of the webcontent packages
          flagComment: This needs to be the first webcontent package that's deployed
          precondition: "releaseVariables['the_fraud_center_apache24-deploy'] == 'True'"
          tasks:
          - name: Promote-the_fraud_center_apache24
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/promote-specific-param/
            jobParameters: |-
              packageIdent=${folder.the_fraud_center_apache24_version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/promote-specific-param/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Merge any TOML changes if needed
            type: stash.MergePullRequest
            server: Bitbucket Server
            username: dmp_xlr
            team: SCSSPeatDeployment
            precondition: "releaseVariables['the_fraud_center_apache24-toml-deploy']\
              \ == 'True'"
          - name: Publish TOML's wjb4stl172
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/publish-wjb4stl172/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/publish-wjb4stl172/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Publish TOML's wjb4stl173
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/publish-wjb4stl173/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/publish-wjb4stl172/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Sleep for 30 seconds
            type: xlrelease.ScriptTask
            team: SCSSPeatDeployment
            script: |-
              import time
              # Sleep for 30 seconds before validation
              time.sleep(30)
          - name: Status-the_fraud_center_apache24
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/status/
            team: SCSSPeatDeployment
            watchers:
            - E111441
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd2}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status by checking the last build from the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/status
        - name: Deploy app_bootstrapper
          type: xlrelease.SequentialGroup
          description: Bootstrapper needs to be run first since it set's up the fraud
            center directory
          flagComment: This needs to be the first webcontent package that's deployed
          precondition: "releaseVariables['app-bootstrapper-deploy'] == 'True'"
          tasks:
          - name: Promote-app_bootstrapper
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/app_bootstrapper-promote-specific-param/
            jobParameters: |-
              packageIdent=${folder.app_bootstrapper_version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/app_bootstrapper-promote-specific-param/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Sleep for 30 seconds
            type: xlrelease.ScriptTask
            team: SCSSPeatDeployment
            script: |-
              import time
              # Sleep for 30 seconds before validation
              time.sleep(30)
          - name: Status-app_bootstrapper
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/peat/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/peat/job/status/
            team: SCSSPeatDeployment
            watchers:
            - E111441
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd2}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/peat/job/status/
        - name: Deploy apps under htdocs/fraudcenter
          type: xlrelease.ParallelGroup
          tasks:
          - name: Deploy app_platform
            type: xlrelease.SequentialGroup
            precondition: "releaseVariables['app-platform-deploy'] == 'True'"
            tasks:
            - name: Promote-app_platform
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/app_platform-promote-specific-param/
              jobParameters: |-
                packageIdent=${folder.app_platform_version}
                channel=peat
                dryRun=false
                platform=linux
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/app_platform-promote-specific-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Sleep for 30 seconds
              type: xlrelease.ScriptTask
              team: SCSSPeatDeployment
              script: |-
                import time
                # Sleep for 30 seconds before validation
                time.sleep(30)
            - name: Status-app_platform
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/peat/job/status/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/peat/job/status/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Verify Status
              type: xlrelease.GateTask
              description: |-
                Verify habitat app status using the following job

                https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/peat/job/status/
          - name: Deploy tfc_help
            type: xlrelease.SequentialGroup
            precondition: "releaseVariables['tfc-help-deploy'] == 'True'"
            tasks:
            - name: Promote-tfc_help
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/tfc_help-promote-specific-param/
              jobParameters: |-
                packageIdent=${folder.tfc_help_version}
                channel=stage
                dryRun=false
                platform=linux
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/tfc_help-promote-specific-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Sleep for 30 seconds
              type: xlrelease.ScriptTask
              team: SCSSPeatDeployment
              script: |-
                import time
                # Sleep for 30 seconds before validation
                time.sleep(30)
            - name: Status-tfc_help
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/peat/job/status/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/peat/job/status/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Verify Status
              type: xlrelease.GateTask
              description: |-
                Verify habitat app status using the following job

                https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/peat/job/status/
          - name: Deploy app_customer_support
            type: xlrelease.SequentialGroup
            team: SCSSPeatDeployment
            precondition: "releaseVariables['app_customer_support-deploy'] == 'True'"
            tasks:
            - name: Promote-app_customer_support
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_customer_support/job/promote-specific-param/
              jobParameters: |-
                packageIdent=${folder.habitat.app_customer_support.version}
                channel=peat
                dryRun=false
                platform=linux
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_customer_support/job/promote-specific-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Sleep for 30 seconds
              type: xlrelease.ScriptTask
              team: SCSSPeatDeployment
              script: |-
                import time
                # Sleep for 30 seconds before validation
                time.sleep(30)
            - name: Status-app_customer_support
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_customer_support/job/peat/job/status/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_customer_support/job/peat/job/status/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Verify Status
              type: xlrelease.GateTask
              description: |-
                Verify habitat app status using the following job

                https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_customer_support/job/peat/job/status/
      - name: Decision Admin
        type: xlrelease.SequentialGroup
        precondition: "False"
        tasks:
        - name: Decision Admin
          type: xlrelease.SequentialGroup
          precondition: "releaseVariables['decisionadmin_apache-deploy'] == 'True'"
          tasks:
          - name: PROMOTE
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/decision_processing/job/decision_admin_apache24/job/Peat-STL/job/publish-wjb4stl172-wjb4stl173/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decision_admin_apache24/job/Peat-STL/job/publish-wjb4stl172-wjb4stl173/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
          - name: STOP
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/decision_processing/job/decision_admin_apache24/job/Peat-STL/job/stop/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decision_admin_apache24/job/Peat-STL/job/stop/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
          - name: START
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/decision_processing/job/decision_admin_apache24/job/Peat-STL/job/start/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decision_admin_apache24/job/Peat-STL/job/start/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
          - name: STATUS
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/decision_processing/job/decision_admin_apache24/job/Peat-STL/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decision_admin_apache24/job/Peat-STL/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
        - name: Decision Admin Content
          type: xlrelease.SequentialGroup
          precondition: "releaseVariables['decisionadmin_content_apache-deploy'] ==\
            \ 'True'"
          tasks:
          - name: STOP
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/decision_processing/job/decision_admin_apache24_content/job/Peat-STL/job/stop/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decision_admin_apache24_content/job/Peat-STL/job/stop/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: START
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/decision_processing/job/decision_admin_apache24_content/job/Peat-STL/job/start/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decision_admin_apache24_content/job/Peat-STL/job/start/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
          - name: STATUS
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/decision_processing/job/decision_admin_apache24_content/job/Peat-STL/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decision_admin_apache24_content/job/Peat-STL/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
      - name: RBD apps
        type: xlrelease.SequentialGroup
        tasks:
        - name: RBD Web Service
          type: xlrelease.SequentialGroup
          precondition: "releaseVariables['rbd-webservices-deploy'] == 'True'"
          tasks:
          - name: Lift this gate to begin with this Webapp
            type: xlrelease.GateTask
            description: |-
              To avoid Jenkins concurrency issues and job failures, this gate was added to all Webapp deployment sections.

              **_Note that the Webapps can still be deployed in parallel_**, but the deployment for each section will only start when this gate is lifted. If you are blocked waiting for investigation or for a deployment job to run, move on to the next app by lifting its gate.

              Note that some of these gates have preconditions (it will be a checkbox below this text box, if there is a precondition). For instance, some apps require Grid to be up before they are deployed.
            team: SCSSPeatDeployment
          - name: Publish Updated TOML's
            type: xlrelease.SequentialGroup
            team: SCSSPeatDeployment
            precondition: "releaseVariables['rbd-webservices-toml-deploy'] == 'True'"
            tasks:
            - name: Merge TOML changes
              type: stash.MergePullRequest
              server: Bitbucket Server
              project: DMPHAB
              repository: dmp-service-config-nonprod
              description: PR link for reference -
            - name: Publish - rsk0stl215
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: dmp_xlr
              jobName: ChefHabitat/dmp_api_frameworks/rbd_web_service/PEAT/publish-rsk0stl215
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/rbd_web_service/job/PEAT/job/publish-rsk0stl215/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Publish - rsk4stl5
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: dmp_xlr
              jobName: ChefHabitat/job/dmp_api_frameworks/job/rbd_web_service/job/PEAT/job/publish-rsk4stl5/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/rbd_web_service/job/PEAT/job/publish-rsk4stl5/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Deploy
            type: xlrelease.SequentialGroup
            tasks:
            - name: Promote RBD Web Service for peat OEL7
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param
              jobParameters: |-
                packageIdent=${folder.rbd_web_service_linux_version}
                channel=peat
                dryRun=false
                platform=linux
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Promote RBD Web Service for peat OEL6
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: dmp_xlr
              jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param
              jobParameters: |-
                packageIdent=${folder.rbd_web_service_linux2_version}
                channel=peat
                dryRun=false
                platform=linux_kernel2
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Validation
            type: xlrelease.SequentialGroup
            tasks:
            - name: Sleep for 30 seconds before validating
              type: xlrelease.ScriptTask
              script: |-
                import time
                # Sleep for 30 seconds before validation
                time.sleep(30)
            - name: Validate rbd-web-service for peat
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              jobName: ChefHabitat/job/dmp_api_frameworks/job/rbd_web_service/job/PEAT/job/status/
              description: |-
                Check rbd-web-service is up on peat nodes

                https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/rbd_web_service/job/PEAT/job/status/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Verify application status
              type: xlrelease.Task
              description: "Check the application status, it should be up for more\
                \ than 30 seconds"
              team: SCSSPeatDeployment
        - name: RBD NuData Provider via Habitat
          type: xlrelease.SequentialGroup
          precondition: "releaseVariables['rbd-nudata-deploy'] == 'True'"
          tasks:
          - name: Lift this gate to begin deployment
            type: xlrelease.GateTask
          - name: Deploy
            type: xlrelease.SequentialGroup
            tasks:
            - name: Promote RBD NuData Provider OEL7
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: dmp_xlr
              jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param
              jobParameters: |-
                packageIdent=${folder.rbd_nudata_provider_linux_version}
                channel=peat
                dryRun=false
                platform=linux
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
            - name: Promote RBD NuData Provider for OEL6
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: dmp_xlr
              jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param
              jobParameters: |-
                packageIdent=${folder.habitat.rbd-nudata-provider.linux2.version}
                channel=peat
                dryRun=false
                platform=linux_kernel2
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Publish TOML's
            type: xlrelease.SequentialGroup
            precondition: "releaseVariables['rbd-nudata-toml-deploy'] == 'True'"
            tasks:
            - name: Merge TOML changes
              type: stash.MergePullRequest
              server: Bitbucket Server
              project: DMPHAB
              repository: dmp-service-config-nonprod
              prid: "174"
              variableMapping:
                pythonScript.password: "${folder.metadata.bitbucket.token}"
            - name: Publish - rsk0stl215
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: dmp_xlr
              jobName: ChefHabitat/dmp_api_frameworks/rbd_nudata_provider/PEAT/publish-rsk0stl215
              jobParameters: |-
                appEnv=peat
                app=rbd_nudata_provider
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/rbd_nudata_provider/job/PEAT/job/publish-rsk0stl215/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Publish - rsk4stl5
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: dmp_xlr
              jobName: ChefHabitat/dmp_api_frameworks/rbd_nudata_provider/PEAT/publish-rsk4stl5
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/rbd_nudata_provider/job/PEAT/job/publish-rsk4stl5/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Validation
            type: xlrelease.SequentialGroup
            tasks:
            - name: Sleep for 30 seconds
              type: xlrelease.ScriptTask
            - name: Validate RBD Nudata Provider for PEAT
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: dmp_xlr
              jobName: ChefHabitat/dmp_api_frameworks/rbd_nudata_provider/PEAT/status
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/rbd_nudata_provider/job/PEAT/job/status/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Validate application status
              type: xlrelease.Task
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/rbd_nudata_provider/job/PEAT/job/status/
      - name: ABU Maws SpringBoot Deployment
        type: xlrelease.SequentialGroup
        owner: e090189
        precondition: "releaseVariables['abu-maws-springboot-deploy'] == 'True'"
        tasks:
        - name: Lift this gate to begin with this Webapp
          type: xlrelease.GateTask
          description: |-
            To avoid Jenkins concurrency issues and job failures, this gate was added to all Webapp deployment sections.

            **_Note that the Webapps can still be deployed in parallel_**, but the deployment for each section will only start when this gate is lifted. If you are blocked waiting for investigation or for a deployment job to run, move on to the next app by lifting its gate.

            Note that some of these gates have preconditions (it will be a checkbox below this text box, if there is a precondition). For instance, some apps require Grid to be up before they are deployed.
          owner: e090189
          scheduledStartDate: 2019-02-06T10:00:00-06:00
          team: SCSSPeatDeployment
          waitForScheduledStartDate: false
        - name: Habitat
          type: xlrelease.SequentialGroup
          tasks:
          - name: TOML - ABU MAWS
            type: xlrelease.SequentialGroup
            precondition: "False"
            tasks:
            - name: TOML - ABU MAWS
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/automated_billing_updater/job/abu_maws_api/job/PEAT/job/publish_peat_toml/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/automated_billing_updater/job/abu_maws_api/job/PEAT/job/publish_peat_toml/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote - ABU MAWS
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/automated_billing_updater/job/abu_maws_api/job/PEAT/job/promote-param/
            jobParameters: |-
              packageIdent= ${folder.abu_maws_version}
              channel=peat
              PLATFORM_FILTER=OEL7
              contactList=sashi.kanth@mastercard.com
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/automated_billing_updater/job/abu_maws_api/job/PEAT/job/promote-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Status - ABU MAWS
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/automated_billing_updater/job/abu_maws_api/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/automated_billing_updater/job/abu_maws_api/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Validate
            type: xlrelease.GateTask
      - name: ABU Push Deployments
        type: xlrelease.SequentialGroup
        precondition: "releaseVariables['abu-push-deploy'] == 'True'"
        tasks:
        - name: Lift this gate to begin with this Webapp
          type: xlrelease.GateTask
          description: |-
            To avoid Jenkins concurrency issues and job failures, this gate was added to all Webapp deployment sections.

            **_Note that the Webapps can still be deployed in parallel_**, but the deployment for each section will only start when this gate is lifted. If you are blocked waiting for investigation or for a deployment job to run, move on to the next app by lifting its gate.

            Note that some of these gates have preconditions (it will be a checkbox below this text box, if there is a precondition). For instance, some apps require Grid to be up before they are deployed.
          team: SCSSPeatDeployment
        - name: Habitat
          type: xlrelease.SequentialGroup
          tasks:
          - name: TOML - ABU Push Notify Adapter
            type: xlrelease.SequentialGroup
            precondition: "releaseVariables['abu_push_notify_adapter_toml-deploy']\
              \ =='True'"
            tasks:
            - name: TOML - ABU Push Notify Adapter
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/automated_billing_updater/job/abu_push_notifyadapter/job/PEAT/job/publish_peat_toml/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/automated_billing_updater/job/abu_push_notifyadapter/job/PEAT/job/publish_peat_toml/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote - ABU Push Notify Adapter
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/automated_billing_updater/job/abu_push_notifyadapter/job/PEAT/job/promote_param/
            jobParameters: |-
              packageIdent= ${folder.abu_push_notifyadapter_version}
              channel=peat
              PLATFORM_FILTER=OEL7
              contactList=sashi.kanth@mastercard.com
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/automated_billing_updater/job/abu_push_notifyadapter/job/PEAT/job/promote_param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Status - ABU Push Notify Adapter
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/automated_billing_updater/job/abu_push_notifyadapter/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/automated_billing_updater/job/abu_push_notifyadapter/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Validate
            type: xlrelease.GateTask
      - name: ABU Updates Deployment
        type: xlrelease.SequentialGroup
        precondition: "releaseVariables['abu-updates-deploy'] == 'True'"
        tasks:
        - name: Lift this gate to begin with this Webapp
          type: xlrelease.GateTask
          description: |-
            To avoid Jenkins concurrency issues and job failures, this gate was added to all Webapp deployment sections.

            **_Note that the Webapps can still be deployed in parallel_**, but the deployment for each section will only start when this gate is lifted. If you are blocked waiting for investigation or for a deployment job to run, move on to the next app by lifting its gate.

            Note that some of these gates have preconditions (it will be a checkbox below this text box, if there is a precondition). For instance, some apps require Grid to be up before they are deployed.
          team: SCSSPeatDeployment
        - name: Stop ABU Updates
          type: xlrelease.SequentialGroup
          tasks:
          - name: Stop ABU Updates - Manual
            type: xlrelease.Task
            description: |-
              On server **rsk4stl4**

              Log in server as fraud user

              Check if app is running: ps -ef | grep AbuUpdates

              If AbuUpdates is not running can skip below command,  If app is running execute below command to stop app:

              /apps_01/fraud/ABU_Updates/AbuUpdates.jar -a stop -p peat
            team: SCSSPeatDeployment
            tags:
            - kryptonite
            - capivaras
            - peat
            - ABU Updates
          - name: Validate ABU Updates is stopped
            type: xlrelease.GateTask
            description: |-
              On server rsk4stl4

              Log in server as fraud user

              Check if app is running: ps -ef | grep AbuUpdates

              If AbuUpdates stopped successfully, above command would not show any running instances. If not stopped successfully, please use manual stop step to stop AbuUpdates
            team: SCSSPeatDeployment
            tags:
            - ABU Updates
        - name: Deploy ABU Updates
          type: xlrelease.SequentialGroup
          tasks:
          - name: Deploy ABU Updates
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/Application_Release_Automation/job/peat/job/ABU-peat/job/abu-deploy/
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/Application_Release_Automation/job/peat/job/ABU-peat/job/abu-deploy/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.password}"
            tags:
            - Kryptonite
            - Capivaras
            - ABU Updates
          - name: Deploy ABU Updates - Manual
            type: xlrelease.Task
            description: |-
              On server **rsk4stl4**:

              - Log in server as fraud user
              - cd /apps_01/fraud/ABU_Updates;

              - cp -p AbuUpdates.jar AbuUpdates.jar_backup_`date +%Y-%m-%d`

              - cd /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/

              - wget --no-check-certificate https://artifacts.mastercard.int/artifactory/releases/com/mastercard/risk/ems/AbuUpdates/${folder.abu_updates_version}/AbuUpdates-${folder.abu_updates_version}.jar

              - cp -p /var/tmp/${folder.release_year}.${folder.release_quarter}/${folder.release_environment}/ABU/AbuUpdates-${folder.abu_updates_version}.jar /apps_01/fraud/ABU_Updates/AbuUpdates.jar;

              - chmod +x /apps_01/fraud/ABU_Updates/AbuUpdates.jar;
            team: SCSSPeatDeployment
            precondition: "not releaseVariables['']"
            tags:
            - ABU Updates
          - name: Validate ABU Updates is deployed
            type: xlrelease.GateTask
            description: |-
              On server rsk4stl4:

              Log in server as fraud user and execute below command to make sure that the jar modified time aligned with the execution time of either automate/manual deploy step

              ls -lrt /apps_01/fraud/ABU_Updates/AbuUpdates.jar

              Follow this page for further validation recommended by release team: https://fusion.mastercard.int/confluence/display/RiskBizOps/Verify+that+an+artifact+was+deployed+correctly
            team: SCSSPeatDeployment
            tags:
            - ABU Updates
      - name: After GRID and BRMSWS are up
        type: xlrelease.SequentialGroup
        precondition: "releaseVariables['consumer-controls-deploy'] == 'True'"
        tasks:
        - name: Grid is up
          type: xlrelease.GateTask
          team: SCSSPeatDeployment
          conditions:
          - name: Grid is up
            type: xlrelease.GateCondition
        - name: Consumer Controls
          type: xlrelease.SequentialGroup
          description: consumer controls tomcat version deployment is based on mc_standalone_java
            chef cook book
          precondition: "releaseVariables['consumer-controls-deploy'] == 'True'"
          tasks:
          - name: Habitat
            type: xlrelease.SequentialGroup
            tasks:
            - name: TOML
              type: xlrelease.SequentialGroup
              precondition: "releaseVariables['consumer-controls-toml-deploy'] ==\
                \ 'True'"
              tasks:
              - name: TOML - Consumer Controls
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/fraud_and_security_products/job/consumer_controls_ws/job/peat/job/deploy-toml/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/fraud_and_security_products/job/consumer_controls_ws/job/peat/job/deploy-toml/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: "Sleep ${folder.metadata.time} seconds"
              type: xlrelease.ScriptTask
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: Promote - Consumer Controls
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/fraud_and_security_products/job/consumer_controls_ws/job/cosumer_controls_ws-promote-specific-param/
              jobParameters: |-
                packageIdent= ${folder.consumer_controls_version}
                channel=peat
                PLATFORM_FILTER=OEL6
                contactList=Nicolas.Sun@mastercard.com
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/fraud_and_security_products/job/consumer_controls_ws/job/cosumer_controls_ws-promote-specific-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: "Sleep ${folder.metadata.time} seconds (copy)"
              type: xlrelease.ScriptTask
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: Status - Consumer Controls
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/fraud_and_security_products/job/consumer_controls_ws/job/peat/job/status-peat/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/fraud_and_security_products/job/consumer_controls_ws/job/peat/job/status-peat/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Validate
              type: xlrelease.GateTask
      - name: Grid Profile Loader Deployments
        type: xlrelease.SequentialGroup
        precondition: "releaseVariables['grid-profile-loader-deploy'] == 'True'"
        tasks:
        - name: Lift Gate to being Grid Profile Loader Deployment
          type: xlrelease.GateTask
        - name: Habitat promote grid_profile_loader pkg
          type: xlrelease.SequentialGroup
          tasks:
          - name: Promote grid-profile-loader
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=grid-profile-loader dmp_api_frameworks/grid_profile_loader
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Validate pkg promotion to peat channel
            type: xlrelease.GateTask
            description: "Check the version in Apmate and verify the correct version\
              \ has been promoted in the Habitat blr : https://bldr.chef.mastercard.int/#/pkgs/dmp_api_frameworks/grid_profile_loader/"
        - name: Merge PR & Publish TOML
          type: xlrelease.SequentialGroup
          precondition: "releaseVariables['grid-profile-loader-toml-deploy'] == 'True'"
          tasks:
          - name: MERGE TOML
            type: stash.MergePullRequest
            server: Bitbucket Server
            username: dmp_xlr_merging
            project: DMPHAB
            repository: dmp-service-config-nonprod
            prid: "29"
            description: https://fusion.mastercard.int/stash/projects/DMPHAB/repos/dmp-service-config-nonprod/pull-requests/29/overview
            variableMapping:
              pythonScript.password: "${folder.metadata.bitbucket.dmp_xlr_merging}"
          - name: Successful merge on preceding PR
            type: xlrelease.GateTask
          - name: Publish toml
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/grid-profile-loader/job/PEAT/job/grid_profile_loader-publish-peat-rsk0stl53-toml/
          - name: Successful build on preceding publish toml job
            type: xlrelease.GateTask
          - name: Publish toml
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/grid-profile-loader/job/PEAT/job/grid_profile_loader-publish-peat-rsk0stl54-toml/
          - name: Successful build on preceding publish toml job
            type: xlrelease.GateTask
        - name: Validation
          type: xlrelease.SequentialGroup
          tasks:
          - name: Validate grid_profile_loader service Peat Nodes
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/dmp_api_frameworks/job/grid-profile-loader/job/PEAT/job/status/
            description: check console log of job for to ensure app is up for both
              rsk0stl53 and rsk0stl54 https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/grid-profile-loader/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
      - name: Account Intelligence Batch Processor Deployment
        type: xlrelease.SequentialGroup
        precondition: "releaseVariables['account-intelligence-batch-process-deploy']\
          \ == 'True'"
        tasks:
        - name: Lift gate to start deployments
          type: xlrelease.GateTask
        - name: Promote Package
          type: xlrelease.SequentialGroup
          tasks:
          - name: Promote OEL6
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=account-intelligence-batch-processor dmp_api_frameworks/account_intelligence_batch_processor
              promoteToChannel=peat
              platform=linux_kernel2
              dryRun=false
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Promote OEL7
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=account-intelligence-batch-processor dmp_api_frameworks/account_intelligence_batch_processor
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: Publish Updated TOML's
          type: xlrelease.SequentialGroup
          precondition: "$releaseVariables['account-intelligence-batch-process-toml-deploy']\
            \ == 'True'"
          tasks:
          - name: Merge new configs
            type: stash.MergePullRequest
            server: Bitbucket Server
            username: dmp_xlr_merging
            variableMapping:
              pythonScript.password: "${folder.metadata.bitbucket.dmp_xlr_merging}"
          - name: Publish TOML's
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
            jobParameters: |-
              appEnv=peat
              app=account_intelligence_batch_processor
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
      - name: Pan Profile Lifecycle Event Transformer
        type: xlrelease.SequentialGroup
        precondition: "releaseVariables['pan-profile-lifecycle-event-transformer-deploy']\
          \ == 'True'"
        tasks:
        - name: Lift gate to start deployment
          type: xlrelease.GateTask
          tags:
          - '#bizops'
        - name: Promote Application
          type: xlrelease.SequentialGroup
          tasks:
          - name: Promote PPLE Transformer package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=pan-profile-lifecycle-event-transformer dmp_api_frameworks/pan_profile_lifecycle_event_transformer
              promoteToChannel=${folder.pple_transformer_channel}
              platform=linux
              dryRun=false
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Habitat Version Validation
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/habitat-version-checker/
            jobParameters: |-
              scriptAction=askHabitat
              passedName=dmp_api_frameworks/pan_profile_lifecycle_event_transformer
              passedEnv=${folder.release_environment_lowercase}
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/habitat-version-checker/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: Publish Updated TOMLs
          type: xlrelease.SequentialGroup
          precondition: "$releaseVariables['pan-profile-lifecycle-event-transformer-toml-deploy']\
            \ == 'True'"
          tasks:
          - name: Merge config changes
            type: stash.MergePullRequest
            server: Bitbucket Server
            username: dmp_xlr_merging
            project: DMPHAB
            prid: ADD PR ID HERE
            description: ADD PR LINK HERE
            variableMapping:
              pythonScript.password: "${folder.metadata.bitbucket.dmp_xlr_merging}"
          - name: Publish TOMLs
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
            jobParameters: |-
              appEnv=${folder.release_environment_lowercase}
              app=pan_profile_lifecycle_event_transformer
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
    color: '#0099CC'
  realFlagStatus: ATTENTION_NEEDED
  tags:
  - rewrite
  - master
  - "22.8"
  variables:
  - type: xlrelease.StringVariable
    key: DMPDeploymentManager2
    requiresValue: false
    showOnReleaseStart: false
    label: "deploymentmanager2 (Originally bundled in DeploymentManager2_EA-*.ear,\
      \ now deployed individually after Tomcat migration)"
    value: 4.8.3
  - type: xlrelease.StringVariable
    key: DMPRTSRestWebService
    requiresValue: false
    showOnReleaseStart: false
    label: "rtsrestwebservice (Originally bundled in RTSWebService_EA-*.ear, now deployed\
      \ individually after Tomcat migration)"
    value: 3.4.3
  - type: xlrelease.StringVariable
    key: rbd-nudata-provider-PR-MergeStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: DMPDecisionValidationServerIntegration
    requiresValue: false
    showOnReleaseStart: false
    label: "DecisionValidationServerIntegration  (Originally an DecisionValidationServerIntegration-*.ear,\
      \ now updated to war file)"
    value: 3.12.0
  - type: xlrelease.StringVariable
    key: DMPDecisionCenter_BC
    requiresValue: false
    showOnReleaseStart: false
    label: Newly added for Business console part of OdmUpgrade
    value: 2.1.0
  - type: xlrelease.StringVariable
    key: DMPDecisionCenter_EC
    requiresValue: false
    showOnReleaseStart: false
    label: "emsruleteamserver  (Originally an EMSRuleTeamServer-*.ear, now updated\
      \ to war file)"
    value: 3.6.0
  - type: xlrelease.StringVariable
    key: DMPDecisionServerConsole
    requiresValue: false
    showOnReleaseStart: false
    label: "DecisionServerConsole  (Originally an DecisionServerConsole -*.ear, now\
      \ updated to war file)"
    value: 3.1.0
  - type: xlrelease.StringVariable
    key: rbd-web-service-PR-MergeStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: release
  - type: xlrelease.StringVariable
    key: pple-transformer-channel
    value: peat
  - type: xlrelease.StringVariable
    key: dmp_udt_ws-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: decision_center_ec_components-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: decision_center_ec_webservices-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: decisioncenter_bc_service-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: decisionserver_res_service-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: app-bootstrapper-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: tfc_transactionviewer_deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: tfc-tfcconfig-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: tfc-listmanager-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: tfc-tfcgateway-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: tfc-di-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: tfc-rulemanager-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: iisreports-pfc-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: rule-test-service-pcf-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: rule-metric-service-pcf-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: app-platform-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: rbd-webservices-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: rbd-nudata-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: ai-batch-processor-toml-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: abu-maws-springboot-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: abu-push-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: abu-updates-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: consumer-controls-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: consumer-controls-toml-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: grid-profile-loader-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: grid-profile-loader-toml-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: account-intelligence-batch-process-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: account-intelligence-batch-process-toml-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: pan-profile-lifecycle-event-transformer-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: pan-profile-lifecycle-event-transformer-toml-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: decisionserver_res_service-channel
    value: peat
  - type: xlrelease.StringVariable
    key: decisioncenter_bc_service-channel
    value: peat
  - type: xlrelease.StringVariable
    key: decision_center_ec_components-channel
    value: peat
  - type: xlrelease.StringVariable
    key: decision_center_ec_webservices-channel
    value: peat
  - type: xlrelease.StringVariable
    key: dmp_udt_ws-channel
    value: peat
  - type: xlrelease.StringVariable
    key: dmprulewebservice_pcf-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: healthcheck_status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: the_fraud_center_apache24-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: the_fraud_center_apache24-toml-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: rbd-webservices-toml-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: rbd-nudata-toml-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: tfc-tfcgateway-toml-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: tfc-di-toml-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: tfc-rulemanager-toml-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: tfc-transactionviewer-toml-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: tfc-listmanager-toml-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: app_customer_support-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: abu_push_notify_adapter_toml-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: decisionadmin_apache-deploy
    value: "False"
  - type: xlrelease.StringVariable
    key: decisionadmin_content_apache-deploy
    value: "False"
  extensions:
  - name: Dashboard
    type: xlrelease.Dashboard
    owner: e025882
    tiles:
    - name: Release progress
      type: xlrelease.ReleaseProgressTile
    - name: Release summary
      type: xlrelease.ReleaseSummaryTile
    - name: Resource usage
      type: xlrelease.ResourceUsageTile
    - name: Release timeline
      type: xlrelease.TimelineTile
    - name: Release health
      type: xlrelease.ReleaseHealthTile
    - name: ODM
      type: xlrelease.TaskProgressTile
      row: 2
      col: 2
      tags:
      - odm
    - name: Decision Admin
      type: xlrelease.TaskProgressTile
      row: 3
      col: 0
      tags:
      - decision admin
    - name: BRMSWS
      type: xlrelease.TaskProgressTile
      row: 3
      col: 1
      tags:
      - brmsws
    - name: Fraud Center
      type: xlrelease.TaskProgressTile
      row: 3
      col: 2
      tags:
      - fraud center apache
      - fraud center tomcat
    - name: PanProfile
      type: xlrelease.TaskProgressTile
      row: 4
      col: 0
      tags:
      - panprofile
    - name: RBD
      type: xlrelease.TaskProgressTile
      row: 4
      col: 1
      tags:
      - rbd ws
      - rbd nudata
    - name: ABU
      type: xlrelease.TaskProgressTile
      row: 4
      col: 2
      tags:
      - abu push
      - abu updates
      - abu maws
    - name: Consumer Controls
      type: xlrelease.TaskProgressTile
      row: 5
      col: 0
      tags:
      - consumer controls
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 5
      col: 1
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 5
      col: 2
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 6
      col: 0
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 6
      col: 1
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 6
      col: 2
  riskProfile: Default risk profile
- template: PEAT-PARENT-22.3
  description: This Template mirrors the PEAT DIP
  scheduledStartDate: 2019-02-06T09:00:00-06:00
  phases:
  - phase: XLR Release
    tasks:
    - name: Add Release tag
      type: xlr.AddTag
      newTag: "${release}"
      tags:
      - '#bizops'
    color: '#0079BC'
  - phase: Pre-Implementation
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      team: SCSSPeatDeployment
      tags:
      - PEAT
      - '#bizops'
    - name: BOM/Rule Project
      type: xlrelease.Task
      description: |-
        | *Artifact Name(s)*:       | rulestudio.projects-${folder.rulestudio_projects_version}.zip |
        | ----- | ------ |
        | *BOM projects to deploy*  | ${folder..metadata.BOMProjects.toVerify} |
        | *Servers to STAGE ON*:    | local |
        | *STAGE PATH*:             | D:/${folder.release_year}.${folder.release_quarter}/${folder.release_environment} |
        ||https://artifacts.mastercard.int/artifactory/releases/com/mastercard/risk/brms/rulestudio.projects/ |
      team: SCSSPeatDeployment
      tags:
      - BOM
      - Shamrocks
      - Celtics
      - '#bizops'
    color: '#0099CC'
  - phase: Database Steps
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      team: SCSSPeatDeployment
      tags:
      - PEAT
    - name: DDL Steps
      type: xlrelease.Task
      description: |-
        Check the deploy instructions and script using below link:

        ${folder.metadata_release_specific_dml_ddl}/DDL/
      flagStatus: ATTENTION_NEEDED
      flagComment: NO DDL
      team: DBA
      precondition: "False"
      tags:
      - database
      - DDL
      - All Teams
      - DBA
    - name: DML Steps
      type: xlrelease.Task
      description: |-
        Check the deploy instructions and script using below link:

        ${folder.metadata_release_specific_dml_ddl}/DML/
      team: SCSSPeatDeployment
      tags:
      - database
      - dml
      - All Teams
      - DBA
    color: '#0099CC'
  - phase: Parallel Deployment
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      team: SCSSPeatDeployment
      tags:
      - PEAT
    - name: Deployment
      type: xlrelease.ParallelGroup
      tasks:
      - name: Transaction Deployment - STL
        type: xlrelease.CreateReleaseTask
        team: SCSSPeatDeployment
        tags:
        - '#bizops'
        newReleaseTitle: "${folder.release_year}.${folder.release_quarter}\
          \ PEAT Tx Processing - OFFICIAL RELEASE"
        templateVariables:
        - type: xlrelease.StringVariable
          key: FlextpFlatpackNearRealTimeServersInvolved
          inherited: true
          value: "rsk0stl101, rsk0stl125, rsk0stl52"
        - type: xlrelease.StringVariable
          key: FlextpFlatpackNotificationServersInvolved
          inherited: true
        - type: xlrelease.StringVariable
          key: FlextpFlatpackAEM2DWServersInvolved
          inherited: true
        - type: xlrelease.StringVariable
          key: release
          inherited: true
        riskProfile: Default risk profile
        template: ./PEAT-TX-PROCESSING-STL-22.3
        folder: ./
      - name: Webapps Deployment
        type: xlrelease.CreateReleaseTask
        team: SCSSPeatDeployment
        tags:
        - '#bizops'
        newReleaseTitle: "${folder.release_year}.${folder.release_quarter}\
          \ PEAT - Webapps Deployment - OFFICIAL RELEASE"
        templateVariables:
        - type: xlrelease.StringVariable
          key: release
          inherited: true
        riskProfile: Default risk profile
        template: ./PEAT-WEBAPPS-22.3
        folder: ./
      - name: KSC Release
        type: xlrelease.SequentialGroup
        tags:
        - KSC
        tasks:
        - name: Lift gate to start Tx Processing KSC site deployment
          type: xlrelease.GateTask
          description: Gate to avoid unintentionally start of Tx Processing - KSC
            site deployment
          team: SCSSPeatDeployment
          tags:
          - KSC
          - '#bizops'
        - name: Transaction Deployment - KSC site
          type: xlrelease.CreateReleaseTask
          team: SCSSPeatDeployment
          tags:
          - KSC
          - '#bizops'
          newReleaseTitle: "${folder.release_year}.${folder.release_quarter}\
            \ - PEAT - Tx Processing - KSC site - OFFICIAL RELEASE"
          templateVariables:
          - type: xlrelease.StringVariable
            key: FlextpFlatpackNearRealTimeServersInvolved
            inherited: true
            value: "rsk0stl101, rsk0stl125, rsk0stl52"
          - type: xlrelease.StringVariable
            key: FlextpFlatpackAEM2DWServersInvolved
            inherited: true
          - type: xlrelease.StringVariable
            key: FlextpFlatpackNotificationServersInvolved
            inherited: true
          - type: xlrelease.StringVariable
            key: release
            inherited: true
          riskProfile: Default risk profile
          template: ./PEAT-TX-PROCESSING-KSC-22.3
          folder: ./
      - name: IOS Release
        type: xlrelease.SequentialGroup
        tags:
        - KSC
        tasks:
        - name: Lift gate to start Tx Processing IOS site deployment
          type: xlrelease.GateTask
          description: Gate to avoid unintentionally start of Tx Processing - IOS
            site deployment
          team: SCSSPeatDeployment
          tags:
          - KSC
          - '#bizops'
        - name: Transaction Deployment - IOS site
          type: xlrelease.CreateReleaseTask
          team: SCSSPeatDeployment
          tags:
          - IOS
          - '#bizops'
          newReleaseTitle: "${folder.release_year}.${folder.release_quarter}\
            \ - PEAT - Tx Processing - IOS site - OFFICIAL RELEASE"
          templateVariables:
          - type: xlrelease.StringVariable
            key: FlextpFlatpackNearRealTimeServersInvolved
            inherited: true
            value: "rsk0stl101, rsk0stl125, rsk0stl52"
          - type: xlrelease.StringVariable
            key: FlextpFlatpackAEM2DWServersInvolved
            inherited: true
          - type: xlrelease.StringVariable
            key: FlextpFlatpackNotificationServersInvolved
            inherited: true
          - type: xlrelease.StringVariable
            key: release
            inherited: true
          riskProfile: Default risk profile
          template: ./PEAT-TX-PROCESSING-IOS-22.3
          folder: ./
    color: '#0099CC'
  - phase: Publish BOM(s) and Rule Project(s)
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      team: SCSSPeatDeployment
      tags:
      - PEAT
      - '#bizops'
    - name: Publish BOM(s) and Rule Project(s)
      type: xlrelease.Task
      description: |-
        | *Server(s)*:              | local |
        | ---- | ---- |

          * Please use below URL to publish BOMs/Rule Projects to RTS.  (If Synchronization shows errors, right click on EMSBOM project and select 'Override and Publish')
            * https://fusion.mastercard.int/confluence/display/DM/Publish+BOM+Changes+in+ODM8922
          * PEAT URLs: https://peat.stl.rts1.brms.mastercard.int:25004/teamserver
        https://peat.stl.rts2.brms.mastercard.int:25004/teamserver
          * Login to RTS and verify if new BOMs broke any existing rules in the customer rule project by running 'Check Project Consistency' from the Analysis tab.
          * Recommend verifying  one rule project from each service:
            * [CardNotPesent for Merchant , MasterCard France rule project for issuer)]
          * BOM Projects to deploy:
            * ${folder..metadata.BOMProjects.toVerify}
      team: SCSSPeatDeployment
      tags:
      - Transaction Security
      - Celtics
      - '#bizops'
      - BOM
      - Shamrocks
    - name: Validate BOM deployment and Stage release
      type: xlrelease.GateTask
      description: |-
        1. Select a project that uses the bom that was deployed.

        2. go to project > analyze  > check project consistency
      team: SCSSPeatDeployment
      tags:
      - Transaction Security
      - Celtics
      - '#bizops'
      - BOM
      - Shamrocks
    color: '#0099CC'
  realFlagStatus: ATTENTION_NEEDED
  tags:
  - "22.3"
  variables:
  - type: xlrelease.StringVariable
    key: release
    value: "${folder.release_year}.${folder.release_quarter}"
  extensions:
  - name: Dashboard
    type: xlrelease.Dashboard
    owner: e025882
    tiles:
    - name: Release progress
      type: xlrelease.ReleaseProgressTile
    - name: Release summary
      type: xlrelease.ReleaseSummaryTile
    - name: Resource usage
      type: xlrelease.ResourceUsageTile
    - name: Release timeline
      type: xlrelease.TimelineTile
    - name: Release health
      type: xlrelease.ReleaseHealthTile
    - name: Database
      type: xlrelease.TaskProgressTile
      row: 2
      col: 2
      tags:
      - dba
    - name: BOM
      type: xlrelease.TaskProgressTile
      row: 3
      col: 0
      tags:
      - bom
    - name: KSC
      type: xlrelease.TaskProgressTile
      row: 3
      col: 1
      tags:
      - ksc
  riskProfile: Default risk profile
- template: PEAT-PARENT-22.4
  description: This Template mirrors the PEAT DIP
  scheduledStartDate: 2019-02-06T09:00:00-06:00
  phases:
  - phase: XLR Release
    tasks:
    - name: Add Release tag
      type: xlr.AddTag
      newTag: "${release}"
    color: '#0079BC'
  - phase: Pre-Implementation
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      team: SCSSPeatDeployment
      tags:
      - PEAT
    - name: BOM/Rule Project
      type: xlrelease.Task
      description: |-
        | *Artifact Name(s)*:       | rulestudio.projects-${folder.rulestudio_projects_version}.zip |
        | ----- | ------ |
        | *BOM projects to deploy*  | ${folder..metadata.BOMProjects.toVerify} |
        | *Servers to STAGE ON*:    | local |
        | *STAGE PATH*:             | D:/${folder.release_year}.${folder.release_quarter}/${folder.release_environment} |
        ||https://artifacts.mastercard.int/artifactory/releases/com/mastercard/risk/brms/rulestudio.projects/ |
      team: SCSSPeatDeployment
      tags:
      - BOM
      - Shamrocks
      - Celtics
      - '#bizops'
    color: '#0099CC'
  - phase: Database Steps
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      team: SCSSPeatDeployment
      tags:
      - PEAT
    - name: DDL Steps
      type: xlrelease.Task
      description: |-
        Check the deploy instructions and script using below link:

        ${folder.metadata_release_specific_dml_ddl}/DDL/
      team: DBA
      tags:
      - database
      - DDL
      - All Teams
      - DBA
    - name: DML Steps
      type: xlrelease.Task
      description: |-
        Check the deploy instructions and script using below link:

        ${folder.metadata_release_specific_dml_ddl}/DML/
      team: SCSSPeatDeployment
      tags:
      - database
      - dml
      - All Teams
      - DBA
    color: '#0099CC'
  - phase: Parallel Deployment
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      team: SCSSPeatDeployment
      tags:
      - PEAT
    - name: Deployment
      type: xlrelease.ParallelGroup
      tasks:
      - name: Transaction Deployment - STL
        type: xlrelease.CreateReleaseTask
        team: SCSSPeatDeployment
        tags:
        - '#bizops'
        newReleaseTitle: "${folder.release_year}.${folder.release_quarter}\
          \ PEAT Tx Processing - OFFICIAL RELEASE"
        templateVariables:
        - type: xlrelease.StringVariable
          key: FlextpFlatpackNearRealTimeServersInvolved
          inherited: true
          value: "rsk0stl101, rsk0stl125, rsk0stl52"
        - type: xlrelease.StringVariable
          key: FlextpFlatpackNotificationServersInvolved
          value: "rsk0stl101, rsk0stl125, rsk0stl52"
        - type: xlrelease.StringVariable
          key: FlextpFlatpackAEM2DWServersInvolved
          value: "rsk0stl101, rsk0stl125, rsk0stl52"
        - type: xlrelease.StringVariable
          key: release
          value: "${release}"
        riskProfile: Default risk profile
        template: ./PEAT-MASTER-TX-PROCESSING-STL
        folder: ./
      - name: Webapps Deployment
        type: xlrelease.CreateReleaseTask
        team: SCSSPeatDeployment
        tags:
        - '#bizops'
        newReleaseTitle: "${folder.release_year}.${folder.release_quarter}\
          \ PEAT - Webapps Deployment - OFFICIAL RELEASE"
        templateVariables:
        - type: xlrelease.StringVariable
          key: release
          value: "${release}"
        riskProfile: Default risk profile
        template: ./PEAT-MASTER-WEBAPPS
        folder: ./
      - name: KSC Release
        type: xlrelease.SequentialGroup
        tags:
        - KSC
        tasks:
        - name: Lift gate to start Tx Processing KSC site deployment
          type: xlrelease.GateTask
          description: Gate to avoid unintentionally start of Tx Processing - KSC
            site deployment
          team: SCSSPeatDeployment
          tags:
          - KSC
          - '#bizops'
        - name: Transaction Deployment - KSC site
          type: xlrelease.CreateReleaseTask
          team: SCSSPeatDeployment
          tags:
          - KSC
          - '#bizops'
          newReleaseTitle: "${folder.release_year}.${folder.release_quarter}\
            \ - PEAT - Tx Processing - KSC site - OFFICIAL RELEASE"
          templateVariables:
          - type: xlrelease.StringVariable
            key: FlextpFlatpackNearRealTimeServersInvolved
            inherited: true
            value: "rsk0stl101, rsk0stl125, rsk0stl52"
          - type: xlrelease.StringVariable
            key: FlextpFlatpackAEM2DWServersInvolved
            value: "rsk0stl101, rsk0stl125, rsk0stl52"
          - type: xlrelease.StringVariable
            key: FlextpFlatpackNotificationServersInvolved
            value: "rsk0stl101, rsk0stl125, rsk0stl52"
          - type: xlrelease.StringVariable
            key: release
            value: "${release}"
          riskProfile: Default risk profile
          template: ./PEAT-MASTER-TX-PROCESSING-KSC
          folder: ./
      - name: IOS Release
        type: xlrelease.SequentialGroup
        tags:
        - KSC
        tasks:
        - name: Lift gate to start Tx Processing IOS site deployment
          type: xlrelease.GateTask
          description: Gate to avoid unintentionally start of Tx Processing - IOS
            site deployment
          team: SCSSPeatDeployment
          tags:
          - KSC
          - '#bizops'
        - name: Transaction Deployment - IOS site
          type: xlrelease.CreateReleaseTask
          team: SCSSPeatDeployment
          tags:
          - IOS
          - '#bizops'
          newReleaseTitle: "${folder.release_year}.${folder.release_quarter}\
            \ - PEAT - Tx Processing - IOS site - OFFICIAL RELEASE"
          templateVariables:
          - type: xlrelease.StringVariable
            key: FlextpFlatpackNearRealTimeServersInvolved
            inherited: true
            value: "rsk0stl101, rsk0stl125, rsk0stl52"
          - type: xlrelease.StringVariable
            key: FlextpFlatpackAEM2DWServersInvolved
            inherited: true
          - type: xlrelease.StringVariable
            key: FlextpFlatpackNotificationServersInvolved
            inherited: true
          - type: xlrelease.StringVariable
            key: release
            value: "${release}"
          riskProfile: Default risk profile
          template: Applications/Folder31ae7ec8be224b469f7278b467677f82/Folder443e7d18e8094e19a5ffea67abc64048/Folder1f07491d92dd443b93d27e58818ebcc5/Foldercd468ef870be4f3095952ea33e9e8538/Release9a4fd1ff46fb42bea30c54674db41c61
          folder: ./
    color: '#0099CC'
  - phase: Publish BOM(s) and Rule Project(s)
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      team: SCSSPeatDeployment
      tags:
      - PEAT
    - name: Publish BOM(s) and Rule Project(s)
      type: xlrelease.Task
      description: |-
        | *Server(s)*:              | local |
        | ---- | ---- |

          * Please use below URL to publish BOMs/Rule Projects to RTS.  (If Synchronization shows errors, right click on EMSBOM project and select 'Override and Publish')
            * https://fusion.mastercard.int/confluence/display/DM/Publish+BOM+Changes+in+ODM8922
          * PEAT URLs: https://peat.stl.rts1.brms.mastercard.int:25004/teamserver
        https://peat.stl.rts2.brms.mastercard.int:25004/teamserver
          * Login to RTS and verify if new BOMs broke any existing rules in the customer rule project by running 'Check Project Consistency' from the Analysis tab.
          * Recommend verifying  one rule project from each service:
            * [CardNotPesent for Merchant , MasterCard France rule project for issuer)]
          * BOM Projects to deploy:
            * ${folder..metadata.BOMProjects.toVerify}
      team: SCSSPeatDeployment
      tags:
      - Transaction Security
      - Celtics
      - '#bizops'
      - BOM
      - Shamrocks
    - name: Validate BOM deployment and Stage release
      type: xlrelease.GateTask
      description: |-
        1. Select a project that uses the bom that was deployed.

        2. go to project > analyze  > check project consistency
      team: SCSSPeatDeployment
      tags:
      - Transaction Security
      - Celtics
      - '#bizops'
      - BOM
      - Shamrocks
    color: '#0099CC'
  tags:
  - habitat
  - "22.4"
  variables:
  - type: xlrelease.StringVariable
    key: release
    value: "${folder.release_year}.${folder.release_quarter}"
  extensions:
  - name: Dashboard
    type: xlrelease.Dashboard
    owner: e025882
    tiles:
    - name: Release progress
      type: xlrelease.ReleaseProgressTile
    - name: Release summary
      type: xlrelease.ReleaseSummaryTile
    - name: Resource usage
      type: xlrelease.ResourceUsageTile
    - name: Release timeline
      type: xlrelease.TimelineTile
    - name: Release health
      type: xlrelease.ReleaseHealthTile
    - name: Database
      type: xlrelease.TaskProgressTile
      row: 2
      col: 2
      tags:
      - dba
    - name: BOM
      type: xlrelease.TaskProgressTile
      row: 3
      col: 0
      tags:
      - bom
    - name: KSC
      type: xlrelease.TaskProgressTile
      row: 3
      col: 1
      tags:
      - ksc
  riskProfile: Default risk profile
- template: PEAT-PARENT-22.5
  description: Version 22.5 for PEAT DIP
  scheduledStartDate: 2019-02-06T09:00:00-06:00
  phases:
  - phase: XLR Release
    tasks:
    - name: Add Release tag
      type: xlr.AddTag
      newTag: "${release}"
    color: '#0079BC'
  - phase: Pre-Implementation
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      team: SCSSPeatDeployment
      tags:
      - PEAT
    - name: BOM/Rule Project
      type: xlrelease.Task
      description: |-
        | *Artifact Name(s)*:       | rulestudio.projects-${folder.rulestudio_projects_version}.zip |
        | ----- | ------ |
        | *BOM projects to deploy*  | ${folder..metadata.BOMProjects.toVerify} |
        | *Servers to STAGE ON*:    | local |
        | *STAGE PATH*:             | D:/${folder.release_year}.${folder.release_quarter}/${folder.release_environment} |
        ||https://artifacts.mastercard.int/artifactory/releases/com/mastercard/risk/brms/rulestudio.projects/ |
      team: SCSSPeatDeployment
      tags:
      - BOM
      - Shamrocks
      - Celtics
      - '#bizops'
    color: '#0099CC'
  - phase: Database Steps
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      team: SCSSPeatDeployment
      tags:
      - PEAT
    - name: DDL Steps
      type: xlrelease.Task
      description: |-
        Check the deploy instructions and script using below link:

        ${folder.metadata_release_specific_dml_ddl}/DDL/
      team: DBA
      tags:
      - database
      - DDL
      - All Teams
      - DBA
    - name: DML Steps
      type: xlrelease.Task
      description: |-
        Check the deploy instructions and script using below link:

        ${folder.metadata_release_specific_dml_ddl}/DML/
      team: SCSSPeatDeployment
      tags:
      - database
      - dml
      - All Teams
      - DBA
    color: '#0099CC'
  - phase: Parallel Deployment
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      team: SCSSPeatDeployment
      tags:
      - PEAT
    - name: Deployment
      type: xlrelease.ParallelGroup
      tasks:
      - name: Transaction Deployment - STL
        type: xlrelease.CreateReleaseTask
        team: SCSSPeatDeployment
        tags:
        - '#bizops'
        newReleaseTitle: "${release} PEAT Tx Processing - OFFICIAL RELEASE"
        templateVariables:
        - type: xlrelease.StringVariable
          key: FlextpFlatpackNearRealTimeServersInvolved
          inherited: true
          value: "rsk0stl101, rsk0stl125, rsk0stl52"
        - type: xlrelease.StringVariable
          key: FlextpFlatpackNotificationServersInvolved
          inherited: true
        - type: xlrelease.StringVariable
          key: FlextpFlatpackAEM2DWServersInvolved
          inherited: true
        - type: xlrelease.StringVariable
          key: release
          value: "${release}"
        createdReleaseId: "${STL-transaction-deployment-status}"
        riskProfile: Default risk profile
        template: ./PEAT-TX-PROCESSING-STL-22.5
        folder: ./
      - name: Webapps Deployment
        type: xlrelease.CreateReleaseTask
        team: SCSSPeatDeployment
        tags:
        - '#bizops'
        newReleaseTitle: "${release} PEAT - Webapps Deployment - OFFICIAL RELEASE"
        templateVariables:
        - type: xlrelease.StringVariable
          key: release
          value: "${release}"
        - type: xlrelease.StringVariable
          key: pple-transformer-channel
          value: peat
        createdReleaseId: "${webapp-deployment-status}"
        riskProfile: Default risk profile
        template: ./PEAT-WEBAPPS-22.5
        folder: ./
      - name: KSC Release
        type: xlrelease.SequentialGroup
        tags:
        - KSC
        tasks:
        - name: Lift gate to start Tx Processing KSC site deployment
          type: xlrelease.GateTask
          description: Gate to avoid unintentionally start of Tx Processing - KSC
            site deployment
          team: SCSSPeatDeployment
          tags:
          - KSC
        - name: Transaction Deployment - KSC site
          type: xlrelease.CreateReleaseTask
          team: SCSSPeatDeployment
          tags:
          - KSC
          - '#bizops'
          newReleaseTitle: "${release} - PEAT - Tx Processing - KSC site - OFFICIAL\
            \ RELEASE"
          templateVariables:
          - type: xlrelease.StringVariable
            key: FlextpFlatpackNearRealTimeServersInvolved
            inherited: true
            value: "rsk0stl101, rsk0stl125, rsk0stl52"
          - type: xlrelease.StringVariable
            key: FlextpFlatpackAEM2DWServersInvolved
            inherited: true
          - type: xlrelease.StringVariable
            key: FlextpFlatpackNotificationServersInvolved
            inherited: true
          - type: xlrelease.StringVariable
            key: release
            value: "${release}"
          createdReleaseId: "${KSC-transaction-release-status}"
          riskProfile: Default risk profile
          template: ./PEAT-TX-PROCESSING-KSC-22.5
          folder: ./
        - name: KSC Transaction Release Status
          type: xlr.WaitForReleaseStatus
          targetId: "${KSC-transaction-release-status}"
          untilCompleted: true
          tags:
          - '#bizops'
      - name: IOS Release
        type: xlrelease.SequentialGroup
        tags:
        - KSC
        tasks:
        - name: Lift gate to start Tx Processing IOS site deployment
          type: xlrelease.GateTask
          description: Gate to avoid unintentionally start of Tx Processing - IOS
            site deployment
          owner: e124194
          team: SCSSPeatDeployment
          tags:
          - KSC
        - name: Transaction Deployment - IOS site
          type: xlrelease.CreateReleaseTask
          team: SCSSPeatDeployment
          tags:
          - IOS
          - '#bizops'
          newReleaseTitle: "${release} - PEAT - Tx Processing - IOS site - OFFICIAL\
            \ RELEASE"
          templateVariables:
          - type: xlrelease.StringVariable
            key: FlextpFlatpackNearRealTimeServersInvolved
            inherited: true
            value: "rsk0stl101, rsk0stl125, rsk0stl52"
          - type: xlrelease.StringVariable
            key: FlextpFlatpackAEM2DWServersInvolved
            inherited: true
          - type: xlrelease.StringVariable
            key: FlextpFlatpackNotificationServersInvolved
            inherited: true
          - type: xlrelease.StringVariable
            key: release
            value: "${release}"
          createdReleaseId: "${IOS-transaction-release-status}"
          riskProfile: Default risk profile
          template: ./PEAT-TX-PROCESSING-IOS-22.5
          folder: ./
        - name: IOS Transaction Release Status
          type: xlr.WaitForReleaseStatus
          targetId: "${IOS-transaction-release-status}"
          untilCompleted: true
          tags:
          - '#bizops'
      - name: Webapp Deployment status
        type: xlr.WaitForReleaseStatus
        targetId: "${webapp-deployment-status}"
        tags:
        - '#bizops'
      - name: STL Transaction Deployment Status
        type: xlr.WaitForReleaseStatus
        targetId: "${STL-transaction-deployment-status}"
        untilCompleted: true
        tags:
        - '#bizops'
    color: '#0099CC'
  - phase: Publish BOM(s) and Rule Project(s)
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      team: SCSSPeatDeployment
      tags:
      - PEAT
    - name: Publish BOM(s) and Rule Project(s)
      type: xlrelease.Task
      description: |-
        | *Server(s)*:              | local |
        | ---- | ---- |

          * Please use below URL to publish BOMs/Rule Projects to RTS.  (If Synchronization shows errors, right click on EMSBOM project and select 'Override and Publish')
            * https://fusion.mastercard.int/confluence/display/DM/Publish+BOM+Changes+in+ODM8922
          * PEAT URLs: https://peat.stl.rts1.brms.mastercard.int:25004/teamserver
        https://peat.stl.rts2.brms.mastercard.int:25004/teamserver
          * Login to RTS and verify if new BOMs broke any existing rules in the customer rule project by running 'Check Project Consistency' from the Analysis tab.
          * Recommend verifying  one rule project from each service:
            * [CardNotPesent for Merchant , MasterCard France rule project for issuer)]
          * BOM Projects to deploy:
            * ${folder..metadata.BOMProjects.toVerify}
      team: SCSSPeatDeployment
      tags:
      - Transaction Security
      - Celtics
      - '#bizops'
      - BOM
      - Shamrocks
    - name: Validate BOM deployment and Stage release
      type: xlrelease.GateTask
      description: |-
        1. Select a project that uses the bom that was deployed.

        2. go to project > analyze  > check project consistency
      team: SCSSPeatDeployment
      tags:
      - BOM
      - Shamrocks
      - Celtics
      - Transaction Security
    color: '#0099CC'
  tags:
  - habitat
  - "22.5"
  variables:
  - type: xlrelease.StringVariable
    key: release
    value: "22.5"
  - type: xlrelease.StringVariable
    key: KSC-transaction-release-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: IOS-transaction-release-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: webapp-deployment-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: STL-transaction-deployment-status
    requiresValue: false
    showOnReleaseStart: false
  extensions:
  - name: Dashboard
    type: xlrelease.Dashboard
    owner: e025882
    tiles:
    - name: Release progress
      type: xlrelease.ReleaseProgressTile
    - name: Release summary
      type: xlrelease.ReleaseSummaryTile
    - name: Resource usage
      type: xlrelease.ResourceUsageTile
    - name: Release timeline
      type: xlrelease.TimelineTile
    - name: Release health
      type: xlrelease.ReleaseHealthTile
    - name: Database
      type: xlrelease.TaskProgressTile
      row: 2
      col: 2
      tags:
      - dba
    - name: BOM
      type: xlrelease.TaskProgressTile
      row: 3
      col: 0
      tags:
      - bom
    - name: KSC
      type: xlrelease.TaskProgressTile
      row: 3
      col: 1
      tags:
      - ksc
  riskProfile: Default risk profile
- template: PEAT-PARENT-22.6
  description: This Template mirrors the PEAT DIP
  scheduledStartDate: 2019-02-06T09:00:00-06:00
  phases:
  - phase: XLR Release
    tasks:
    - name: Add Release tag
      type: xlr.AddTag
      newTag: "${release}"
      owner: e124197
      team: SCSSPeatDeployment
      tags:
      - '#bizops'
    color: '#0079BC'
  - phase: Pre-Implementation
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      owner: e124197
      team: SCSSPeatDeployment
      tags:
      - PEAT
      - '#bizops'
    - name: BOM/Rule Project
      type: xlrelease.Task
      description: |-
        | *Artifact Name(s)*:       | rulestudio.projects-${folder.rulestudio_projects_version}.zip |
        | ----- | ------ |
        | *BOM projects to deploy*  | ${folder..metadata.BOMProjects.toVerify} |
        | *Servers to STAGE ON*:    | local |
        | *STAGE PATH*:             | D:/${folder.release_year}.${folder.release_quarter}/${folder.release_environment} |
        ||https://artifacts.mastercard.int/artifactory/releases/com/mastercard/risk/brms/rulestudio.projects/ |
      owner: e124197
      team: SCSSPeatDeployment
      precondition: "False"
      tags:
      - BOM
      - Shamrocks
      - Celtics
      - '#bizops'
    color: '#0099CC'
  - phase: Database Steps
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      owner: e124197
      team: SCSSPeatDeployment
      tags:
      - PEAT
      - '#bizops'
    - name: DDL Steps
      type: xlrelease.Task
      description: |-
        Check the deploy instructions and script using below link:

        ${folder.metadata_release_specific_dml_ddl}/DDL/
      team: DBA
      tags:
      - database
      - DDL
      - All Teams
      - '#dba'
      - DBA
    - name: DML Steps
      type: xlrelease.Task
      description: |-
        Check the deploy instructions and script using below link:

        ${folder.metadata_release_specific_dml_ddl}/DML/
      team: SCSSPeatDeployment
      tags:
      - database
      - '#bizops'
      - All Teams
      - dml
      - DBA
    color: '#0099CC'
  - phase: Parallel Deployment
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      team: SCSSPeatDeployment
      tags:
      - PEAT
      - '#bizops'
    - name: Deployment
      type: xlrelease.ParallelGroup
      tasks:
      - name: Transaction Deployment - STL
        type: xlrelease.CreateReleaseTask
        team: SCSSPeatDeployment
        tags:
        - '#bizops'
        newReleaseTitle: "${release} PEAT Tx Processing - OFFICIAL RELEASE"
        templateVariables:
        - type: xlrelease.StringVariable
          key: FlextpFlatpackNearRealTimeServersInvolved
          inherited: true
          value: "rsk0stl101, rsk0stl125, rsk0stl52"
        - type: xlrelease.StringVariable
          key: FlextpFlatpackNotificationServersInvolved
          inherited: true
        - type: xlrelease.StringVariable
          key: FlextpFlatpackAEM2DWServersInvolved
          inherited: true
        - type: xlrelease.StringVariable
          key: release
          inherited: true
        createdReleaseId: "${STL-transaction-deployment-status}"
        riskProfile: Default risk profile
        template: ./PEAT-TX-PROCESSING-STL-22.6
        folder: ./
      - name: Webapps Deployment
        type: xlrelease.CreateReleaseTask
        owner: e124197
        team: SCSSPeatDeployment
        tags:
        - '#bizops'
        newReleaseTitle: "${release} PEAT - Webapps Deployment - OFFICIAL RELEASE"
        templateVariables:
        - type: xlrelease.StringVariable
          key: release
          inherited: true
        - type: xlrelease.StringVariable
          key: pple-transformer-channel
          inherited: true
          value: peat
        createdReleaseId: "${webapp-deployment-status}"
        riskProfile: Default risk profile
        template: ./PEAT-WEBAPPS-22.6
        folder: ./
      - name: KSC Release
        type: xlrelease.SequentialGroup
        tags:
        - KSC
        tasks:
        - name: Lift gate to start Tx Processing KSC site deployment
          type: xlrelease.GateTask
          description: Gate to avoid unintentionally start of Tx Processing - KSC
            site deployment
          team: SCSSPeatDeployment
          tags:
          - KSC
          - '#bizops'
        - name: Transaction Deployment - KSC site
          type: xlrelease.CreateReleaseTask
          team: SCSSPeatDeployment
          tags:
          - KSC
          - '#bizops'
          newReleaseTitle: "${release} - PEAT - Tx Processing - KSC site - OFFICIAL\
            \ RELEASE"
          templateVariables:
          - type: xlrelease.StringVariable
            key: FlextpFlatpackNearRealTimeServersInvolved
            inherited: true
            value: "rsk0stl101, rsk0stl125, rsk0stl52"
          - type: xlrelease.StringVariable
            key: FlextpFlatpackAEM2DWServersInvolved
            inherited: true
          - type: xlrelease.StringVariable
            key: FlextpFlatpackNotificationServersInvolved
            inherited: true
          - type: xlrelease.StringVariable
            key: release
            inherited: true
          createdReleaseId: "${KSC-transaction-release-status}"
          riskProfile: Default risk profile
          template: ./PEAT-TX-PROCESSING-KSC-22.6
          folder: ./
        - name: KSC Transaction Release Status
          type: xlr.WaitForReleaseStatus
          targetId: "${KSC-transaction-release-status}"
          untilCompleted: true
          tags:
          - '#bizops'
      - name: IOS Release
        type: xlrelease.SequentialGroup
        tags:
        - KSC
        tasks:
        - name: Lift gate to start Tx Processing IOS site deployment
          type: xlrelease.GateTask
          description: Gate to avoid unintentionally start of Tx Processing - IOS
            site deployment
          team: SCSSPeatDeployment
          tags:
          - KSC
          - '#bizops'
        - name: Transaction Deployment - IOS site
          type: xlrelease.CreateReleaseTask
          team: SCSSPeatDeployment
          tags:
          - IOS
          - '#bizops'
          newReleaseTitle: "${release} - PEAT - Tx Processing - IOS site - OFFICIAL\
            \ RELEASE"
          templateVariables:
          - type: xlrelease.StringVariable
            key: FlextpFlatpackNearRealTimeServersInvolved
            inherited: true
            value: "rsk0stl101, rsk0stl125, rsk0stl52"
          - type: xlrelease.StringVariable
            key: FlextpFlatpackAEM2DWServersInvolved
            inherited: true
          - type: xlrelease.StringVariable
            key: FlextpFlatpackNotificationServersInvolved
            inherited: true
          - type: xlrelease.StringVariable
            key: release
            inherited: true
          createdReleaseId: "${IOS-transaction-release-status}"
          riskProfile: Default risk profile
          template: ./PEAT-TX-PROCESSING-IOS-22.6
          folder: ./
        - name: IOS Transaction Release Status
          type: xlr.WaitForReleaseStatus
          targetId: "${IOS-transaction-release-status}"
          untilCompleted: true
          tags:
          - '#bizops'
      - name: Webapp Deployment status
        type: xlr.WaitForReleaseStatus
        targetId: "${webapp-deployment-status}"
        untilCompleted: true
        owner: e124197
        tags:
        - '#bizops'
      - name: STL Transaction Deployment Status
        type: xlr.WaitForReleaseStatus
        targetId: "${STL-transaction-deployment-status}"
        untilCompleted: true
        tags:
        - '#bizops'
    color: '#0099CC'
  - phase: Publish BOM(s) and Rule Project(s)
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      team: SCSSPeatDeployment
      tags:
      - PEAT
      - '#bizops'
    - name: Publish BOM(s) and Rule Project(s)
      type: xlrelease.Task
      description: |-
        | *Server(s)*:              | local |
        | ---- | ---- |

          * Please use below URL to publish BOMs/Rule Projects to RTS.  (If Synchronization shows errors, right click on EMSBOM project and select 'Override and Publish')
            * https://fusion.mastercard.int/confluence/display/DM/Publish+BOM+Changes+in+ODM8922
          * PEAT URLs: https://peat.stl.rts1.brms.mastercard.int:25004/teamserver
        https://peat.stl.rts2.brms.mastercard.int:25004/teamserver
          * Login to RTS and verify if new BOMs broke any existing rules in the customer rule project by running 'Check Project Consistency' from the Analysis tab.
          * Recommend verifying  one rule project from each service:
            * [CardNotPesent for Merchant , MasterCard France rule project for issuer)]
          * BOM Projects to deploy:
            * ${folder..metadata.BOMProjects.toVerify}
      team: SCSSPeatDeployment
      precondition: "False"
      tags:
      - Transaction Security
      - Celtics
      - '#bizops'
      - BOM
      - Shamrocks
    - name: Validate BOM deployment and PEAT release
      type: xlrelease.GateTask
      description: |-
        1. Select a project that uses the bom that was deployed.

        2. go to project > analyze  > check project consistency
      team: SCSSPeatDeployment
      precondition: "False"
      tags:
      - Transaction Security
      - Celtics
      - '#bizops'
      - BOM
      - Shamrocks
    color: '#0099CC'
  tags:
  - habitat
  - "22.6"
  variables:
  - type: xlrelease.StringVariable
    key: release
    value: "22.6"
  - type: xlrelease.StringVariable
    key: KSC-transaction-release-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: IOS-transaction-release-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: webapp-deployment-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: STL-transaction-deployment-status
    requiresValue: false
    showOnReleaseStart: false
  extensions:
  - name: Dashboard
    type: xlrelease.Dashboard
    owner: e025882
    tiles:
    - name: Release progress
      type: xlrelease.ReleaseProgressTile
    - name: Release summary
      type: xlrelease.ReleaseSummaryTile
    - name: Resource usage
      type: xlrelease.ResourceUsageTile
    - name: Release timeline
      type: xlrelease.TimelineTile
    - name: Release health
      type: xlrelease.ReleaseHealthTile
    - name: Database
      type: xlrelease.TaskProgressTile
      row: 2
      col: 2
      tags:
      - dba
    - name: BOM
      type: xlrelease.TaskProgressTile
      row: 3
      col: 0
      tags:
      - bom
    - name: KSC
      type: xlrelease.TaskProgressTile
      row: 3
      col: 1
      tags:
      - ksc
  riskProfile: Default risk profile
- template: PEAT-TX-PROCESSING-IOS-22.3
  description: This Template mirrors the PEAT DIP
  scheduledStartDate: 2019-02-06T09:00:00-06:00
  phases:
  - phase: XLR Release
    tasks:
    - name: Add Release tag
      type: xlr.AddTag
      newTag: "${release}"
    color: '#0079BC'
  - phase: Tx Processing Deployment
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      owner: e081728
      team: SCSSPeatDeployment
    - name: All Transactions
      type: xlrelease.ParallelGroup
      tasks:
      - name: Transaction Sequential
        type: xlrelease.SequentialGroup
        tasks:
        - name: Stop FlexTP Instances
          type: xlrelease.SequentialGroup
          tasks:
          - name: Host Manager Stop Site
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Stop all instances associated with the site PNQ
              stop site -s PNQ

              7. Verify all instances stopped using the view status command.
        - name: Habitat- Host Manager Deployment - IOS
          type: xlrelease.SequentialGroup
          tags:
          - HM
          - Habitat
          tasks:
          - name: Habitat
            type: xlrelease.SequentialGroup
            tags:
            - Habitat
            tasks:
            - name: IOS
              type: xlrelease.SequentialGroup
              tags:
              - IOS
              tasks:
              - name: TOML
                type: xlrelease.SequentialGroup
                precondition: "False"
                tags:
                - TOML
                tasks:
                - name: TOML-FlexTP-IOS
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-pnq/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-pnq/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - HM
                  - flextp
                  - TOML
                  - '#bizops'
                - name: "Sleep ${folder.metadata.time} seconds"
                  type: xlrelease.ScriptTask
                  script: |-
                    import time
                    time.sleep(${folder.metadata.time})
                    print "Done Sleeping"
                - name: Validate TOML
                  type: xlrelease.GateTask
                  tags:
                  - TOML
              - name: Promote - FlexTP -IOS - linux_kernel2
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.flextp_oel6_version}
                  channel=peat-pnq
                  platform=linux_kernel2
                  contactList=Chandra.Nerella@mastercard.com
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - HM
                - flextp
                - Habitat
                - '#bizops'
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
              - name: Promote - FlexTP - IOS - linux
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.flextp+oel7_version}
                  channel=peat-pnq
                  platform=linux
                  contactList=Chandra.Nerella@mastercard.com
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - HM
                - flextp
                - Habitat
                - '#bizops'
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
              - name: Status - FlexTP - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-pnq-peat/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-pnq-peat/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - HM
                - flextp
                - Habitat
                - '#bizops'
              - name: Validation host manager
                type: xlrelease.GateTask
                description: |-
                  On the Hosts ${folder.all_peat_ios_servers} perform the below steps

                  1. Login to the box and Switch to fraud user
                  2. cd /apps_01/fruad/hubernetes/bin
                  3. run './h8s_version.sh'
                  4. The Host Manager Configuration version must match - ${folder.artifact.host-manager-configuration.version}
                  5. Host Manger CLI version must match ${folder.host_manager_cli_version}
                  6. Host Manager version must match ${folder.host_manager_version}
                tags:
                - HM
        - name: Host Manager Commands - IOS
          type: xlrelease.SequentialGroup
          tasks:
          - name: Deploy Flatpack
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Run deploy flatpack command
              deploy flatpack -s PNQ

              Before Selecting the "Y" option  validate all flatpack version to match with apmate.
            tags:
            - '#bizops'
          - name: Recreate Site
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Recreate host with Force option
              recreate site -s PNQ -f

              7. use view status with the request id to check the status of the command. The command should complete to success.
            tags:
            - '#bizops'
          - name: Start Site
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Start hosts
              start site -s PNQ

              7. Verify all instances started using the view status command.
            flagStatus: ATTENTION_NEEDED
            flagComment: will be started manually as appropriate
            precondition: "False"
            tags:
            - '#bizops'
    color: '#0099CC'
  realFlagStatus: ATTENTION_NEEDED
  tags:
  - "22.3"
  variables:
  - type: xlrelease.StringVariable
    key: FlexTPDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: etlDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPEnvNonProdBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPJSONBuildStatus
    requiresValue: false
    showOnReleaseStart: false
    description: FlexTP Global Seed Data JSON build status
  - type: xlrelease.StringVariable
    key: FlexTPDVTRunBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTDeployBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStopIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveDeployIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStartIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStopIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingDeployIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStartIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStopIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDeployIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStartIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPEnvNonIOSProdBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPJSONBuildStatusIOS
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTDeployBuildStatusRel2IOS
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPFSDOverride-Rel2-IOS-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTIOSRunBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonPR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: ai-garage-validatorPR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: AIGarageValidatorBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: AIGarageValidatorArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: artifact.flextp-oel6.version
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: artifact.flextp-oel7.version
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackSite
    requiresValue: false
    showOnReleaseStart: false
    description: "For STL, set to WNG, for KSC set to KC"
    value: KC
  - type: xlrelease.StringVariable
    key: FlextpFlatpackRealTimeServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackUDTManagementServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackNearRealTimeServersInvolved
    value: "rsk0stl101, rsk0stl125, rsk0stl52"
  - type: xlrelease.StringVariable
    key: FlextpFlatpackAEM2DWServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackNotificationServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: release
  extensions:
  - name: Dashboard
    type: xlrelease.Dashboard
    owner: e025882
    tiles:
    - name: Release progress
      type: xlrelease.ReleaseProgressTile
    - name: Release summary
      type: xlrelease.ReleaseSummaryTile
    - name: Resource usage
      type: xlrelease.ResourceUsageTile
    - name: Release timeline
      type: bitbucket.TimelineTile
    - name: Release health
      type: xlrelease.ReleaseHealthTile
    - name: Grid
      type: xlrelease.TaskProgressTile
      row: 2
      col: 2
      tags:
      - grid
    - name: FlexTP
      type: xlrelease.TaskProgressTile
      row: 3
      col: 0
      tags:
      - flextp
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 3
      col: 1
  riskProfile: Default risk profile
- template: PEAT-TX-PROCESSING-IOS-22.4
  description: This Template mirrors the PEAT DIP
  scheduledStartDate: 2019-02-06T09:00:00-06:00
  phases:
  - phase: XLR Release
    tasks:
    - name: Add Release tag
      type: xlr.AddTag
      newTag: "${release}"
    color: '#0079BC'
  - phase: Tx Processing Deployment
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      owner: e081728
      team: SCSSPeatDeployment
    - name: All Transactions
      type: xlrelease.ParallelGroup
      tasks:
      - name: Transaction Sequential
        type: xlrelease.SequentialGroup
        tasks:
        - name: Stop FlexTP Instances - IOS
          type: xlrelease.SequentialGroup
          tags:
          - HM
          - Habitat
          tasks:
          - name: HM Stop Site
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Stop all instances associated with the site PNQ
              stop site -s PNQ

              7. Verify all instances stopped using the view status command.
        - name: Habitat- Host Manager Deployment - IOS
          type: xlrelease.SequentialGroup
          tags:
          - HM
          - Habitat
          tasks:
          - name: Habitat
            type: xlrelease.SequentialGroup
            tags:
            - Habitat
            tasks:
            - name: IOS
              type: xlrelease.SequentialGroup
              tags:
              - IOS
              tasks:
              - name: TOML
                type: xlrelease.SequentialGroup
                precondition: "False"
                tags:
                - TOML
                tasks:
                - name: TOML-FlexTP-IOS
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-pnq/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-pnq/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - HM
                  - flextp
                  - TOML
                - name: "Sleep ${folder.metadata.time} seconds"
                  type: xlrelease.ScriptTask
                  script: |-
                    import time
                    time.sleep(${folder.metadata.time})
                    print "Done Sleeping"
                - name: Validate TOML
                  type: xlrelease.GateTask
                  tags:
                  - TOML
              - name: Promote - FlexTP - IOS - linux_kernel2
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.flextp_oel6_version}
                  channel=peat-pnq
                  platform=linux_kernel2
                  contactList=Chandra.Nerella@mastercard.com
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - HM
                - flextp
                - Habitat
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
              - name: Promote - FlexTP - IOS - linux
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.flextp+oel7_version}
                  channel=peat-pnq
                  platform=linux
                  contactList=Chandra.Nerella@mastercard.com
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - HM
                - flextp
                - Habitat
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
              - name: Status - FlexTP - IOS
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-pnq-peat/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-pnq-peat/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - HM
                - flextp
                - Habitat
              - name: Validation host manager
                type: xlrelease.GateTask
                description: |-
                  On the Hosts ${folder.all_peat_ios_servers} perform the below steps

                  1. Login to the box and Switch to fraud user
                  2. cd /apps_01/fruad/hubernetes/bin
                  3. run './h8s_version.sh'
                  4. The Host Manager Configuration version must match - ${folder.artifact.host-manager-configuration.version}
                  5. Host Manger CLI version must match ${folder.host_manager_cli_version}
                  6. Host Manager version must match ${folder.host_manager_version}
                tags:
                - HM
        - name: Host Manager Commands
          type: xlrelease.SequentialGroup
          tasks:
          - name: Deploy Flatpack
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Run deploy flatpack command
              deploy flatpack -s PNQ

              Before Selecting the "Y" option  validate all flatpack version to match with apmate.
          - name: Recreate Site
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Recreate host with Force option
              recreate site -s PNQ -f

              7. use view status with the request id to check the status of the command. The command should complete to success.
          - name: Create new flex Cluster 51
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Command to create instance:
              create instance -cc 50 -fc 51 -h rsk0stl500

              7. use view status with the request id to check the status of the command. The command should complete to success.
          - name: Start Site
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Start hosts
              start site -s PNQ

              7. Verify all instances started using the view status command.
            flagStatus: ATTENTION_NEEDED
            flagComment: PEAT Team will start manually
            precondition: "False"
    color: '#0099CC'
  realFlagStatus: ATTENTION_NEEDED
  tags:
  - "22.4"
  variables:
  - type: xlrelease.StringVariable
    key: FlexTPDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: etlDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPEnvNonProdBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPJSONBuildStatus
    requiresValue: false
    showOnReleaseStart: false
    description: FlexTP Global Seed Data JSON build status
  - type: xlrelease.StringVariable
    key: FlexTPDVTRunBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTDeployBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStopIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveDeployIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStartIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStopIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingDeployIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStartIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStopIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDeployIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStartIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPEnvNonIOSProdBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPJSONBuildStatusIOS
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTDeployBuildStatusRel2IOS
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPFSDOverride-Rel2-IOS-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTIOSRunBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonPR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: ai-garage-validatorPR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: AIGarageValidatorBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: AIGarageValidatorArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: artifact.flextp-oel6.version
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: artifact.flextp-oel7.version
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackSite
    requiresValue: false
    showOnReleaseStart: false
    description: "For STL, set to WNG, for KSC set to KC"
    value: KC
  - type: xlrelease.StringVariable
    key: FlextpFlatpackRealTimeServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackUDTManagementServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackNearRealTimeServersInvolved
    value: "rsk0stl101, rsk0stl125, rsk0stl52"
  - type: xlrelease.StringVariable
    key: FlextpFlatpackAEM2DWServersInvolved
  - type: xlrelease.StringVariable
    key: FlextpFlatpackNotificationServersInvolved
  - type: xlrelease.StringVariable
    key: release
  extensions:
  - name: Dashboard
    type: xlrelease.Dashboard
    owner: e025882
    tiles:
    - name: Release progress
      type: xlrelease.ReleaseProgressTile
    - name: Release summary
      type: xlrelease.ReleaseSummaryTile
    - name: Resource usage
      type: xlrelease.ResourceUsageTile
    - name: Release timeline
      type: bitbucket.TimelineTile
    - name: Release health
      type: xlrelease.ReleaseHealthTile
    - name: Grid
      type: xlrelease.TaskProgressTile
      row: 2
      col: 2
      tags:
      - grid
    - name: FlexTP
      type: xlrelease.TaskProgressTile
      row: 3
      col: 0
      tags:
      - flextp
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 3
      col: 1
  riskProfile: Default risk profile
- template: PEAT-TX-PROCESSING-IOS-22.5
  description: Version 22.5 for PEAT DIP
  scheduledStartDate: 2019-02-06T09:00:00-06:00
  phases:
  - phase: XLR Release
    tasks:
    - name: Add Release tag
      type: xlr.AddTag
      newTag: "${release}"
    color: '#0079BC'
  - phase: Tx Processing Deployment
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      owner: e124194
      team: SCSSPeatDeployment
    - name: All Transactions
      type: xlrelease.ParallelGroup
      tasks:
      - name: Transaction Sequential
        type: xlrelease.SequentialGroup
        tasks:
        - name: Stop FlexTP Instances - IOS
          type: xlrelease.SequentialGroup
          tags:
          - HM
          - Habitat
          tasks:
          - name: HM Stop Site
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Stop all instances associated with the site PNQ
              stop site -s PNQ

              7. Verify all instances stopped using the view status command.
            tags:
            - '#bizops'
        - name: Habitat- Host Manager Deployment - IOS
          type: xlrelease.SequentialGroup
          tags:
          - HM
          - Habitat
          tasks:
          - name: Habitat
            type: xlrelease.SequentialGroup
            tags:
            - Habitat
            tasks:
            - name: IOS
              type: xlrelease.SequentialGroup
              tags:
              - IOS
              tasks:
              - name: TOML
                type: xlrelease.SequentialGroup
                precondition: "False"
                tags:
                - TOML
                tasks:
                - name: TOML-FlexTP-IOS
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-pnq/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-pnq/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - HM
                  - flextp
                  - TOML
                  - '#bizops'
                - name: "Sleep ${folder.metadata.time} seconds"
                  type: xlrelease.ScriptTask
                  script: |-
                    import time
                    time.sleep(${folder.metadata.time})
                    print "Done Sleeping"
                - name: Validate TOML
                  type: xlrelease.GateTask
                  tags:
                  - TOML
              - name: Promote - FlexTP - IOS - linux_kernel2
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.flextp_oel6_version}
                  channel=peat-pnq
                  platform=linux_kernel2
                  contactList=Chandra.Nerella@mastercard.com
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - HM
                - flextp
                - Habitat
                - '#bizops'
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
              - name: Promote - FlexTP - IOS - linux
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.flextp+oel7_version}
                  channel=peat-pnq
                  platform=linux
                  contactList=Chandra.Nerella@mastercard.com
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - HM
                - flextp
                - Habitat
                - '#bizops'
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
              - name: Status - FlexTP - IOS
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-pnq-peat/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-pnq-peat/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - HM
                - flextp
                - Habitat
                - '#bizops'
              - name: Validation host manager
                type: xlrelease.GateTask
                description: |-
                  On the Hosts ${folder.all_peat_ios_servers} perform the below steps

                  1. Login to the box and Switch to fraud user
                  2. cd /apps_01/fruad/hubernetes/bin
                  3. run './h8s_version.sh'
                  4. The Host Manager Configuration version must match - ${folder.artifact.host-manager-configuration.version}
                  5. Host Manger CLI version must match ${folder.host_manager_cli_version}
                  6. Host Manager version must match ${folder.host_manager_version}
                tags:
                - HM
        - name: Host Manager Commands
          type: xlrelease.SequentialGroup
          tasks:
          - name: Deploy Flatpack
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Run deploy flatpack command
              deploy flatpack -s PNQ

              Before Selecting the "Y" option  validate all flatpack version to match with apmate.
            tags:
            - '#bizops'
          - name: Recreate Site
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Recreate host with Force option
              recreate site -s PNQ -f

              7. use view status with the request id to check the status of the command. The command should complete to success.
            tags:
            - '#bizops'
          - name: Start Site
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Start hosts
              start site -s PNQ

              7. Verify all instances started using the view status command.
            flagStatus: ATTENTION_NEEDED
            flagComment: PEAT Team will start manually
            precondition: "False"
            tags:
            - '#bizops'
        - name: grid-udt-daemon Deploy
          type: xlrelease.SequentialGroup
          precondition: "False"
          tasks:
          - name: Skip
            type: xlrelease.SequentialGroup
            precondition: "False"
            tasks:
            - name: Deploy grid-udt-daemon - Automation
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd
              username: dmp_xlr
              jobName: ChefObjectPipeline/ESS/mc_dmp_chef_objects_nonprod
              description: |-
                Deploy grid-udt-daemon
                       1.  Deployment using Chef model
                             i. Merge the PR ${GridUDTDaemonPR}
                            ii. Ensure master build is successful- https://cd3.mastercard.int/jenkins/job/ChefObjectPipeline/job/ESS/job/mc_dmp_chef_objects_nonprod/
              variableMapping:
                pythonScript.buildStatus: "${GridUDTDaemonBuildStatus}"
              tags:
              - Flextp
              - AIGarage
              - '#bizops'
            - name: Deploy grid-udt-daemon - Manual
              type: xlrelease.Task
              description: |-
                | *Artifact Name(s)*:       | grid-udt-daemon-${GridUDTDaemonArtifactVersion}.jar |
                | *Servers to STAGE ON*:       | rsk0stl53, rsk0stl54 |
                | *Dev Contact*:                         | Sharks Team |

                1. Create directories
                ```
                       1.  Login to the server; sesudo fraud;
                       2.  Create grid-udt-daemon Folder
                          mkdir -p /apps_01/webapps/standalone/grid-udt-daemon
                       3.  Create conf, lib, bin, logs directories
                           a.     mkdir /apps_01/webapps/standalone/grid-udt-daemon/logs
                           b.    mkdir /apps_01/webapps/standalone/grid-udt-daemon/bin
                           c.    mkdir /apps_01/webapps/standalone/grid-udt-daemon/conf
                           d.    mkdir /apps_01/webapps/standalone/grid-udt-daemon/lib ```
                2. Download files
                ```
                    1. cd /apps_01/webapps/standalone/grid-udt-daemon/lib
                    2.    wget https://artifacts.mastercard.int/artifactory/releases/com/mastercard/risk/dmp/grid/grid-udt-daemon/${GridUDTDaemonArtifactVersion}/grid-udt-daemon-${GridUDTDaemonArtifactVersion}.jar -o grid-udt-daemon.jar
                   3.    cd /apps_01/webapps/standalone/grid-udt-daemon/conf
                   4.    wget https://globalrepository.mclocal.int/stash/projects/ESSDMP-BATCH/repos/grid-udt-loader-daemon/raw/src/main/resources/config/udt-job-template.json```
              precondition: "not releasevariable['GridUDTDaemonBuildStatus']"
              tags:
              - Flextp
              - AIGarage
              - '#bizops'
            - name: Start grid-udt-daemon - Manual
              type: xlrelease.Task
              description: |-
                1. Start application
                ```
                   1.    cd /apps_01/webapps/standalone/grid-udt-daemon/
                   2.    /apps_01/fraud/java1.8/bin/java  -verbose:gc -Xloggc:/apps_01/webapps/standalone/grid-udt-daemon/logs/gc.log -XX:+PrintGCDateStamps -XX:+PrintGCDetails -Xms512m -Xmx1024m -jar /apps_01/webapps/standalone/grid-udt-daemon/lib/grid-udt-daemon.jar ```
              precondition: "${GridUDTDaemonBuildStatus}"
              tags:
              - Flextp
              - AIGarage
              - '#bizops'
            - name: Deployment verification
              type: xlrelease.Task
              description: |-
                Deployment verification
                ```
                       1.    cd /apps_01/webapps/standalone/
                       2.    ls -asl
                       3.    check if grid-udt-daemon application is available under fraud/rsksys user and group
                       4.    ps -ef | grep grid-udt-daemon
                       5.    If the application has started, Look up logs: cd
                                      /apps_01/webapps/standalone/grid-udt-daemon/logs
                       6.    Tail -f grid-udt-daemon.log```
              tags:
              - Flextp
              - AIGarage
              - '#bizops'
          - name: Habitat
            type: xlrelease.SequentialGroup
            tasks:
            - name: TOML - grid-udt-daemon
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              jobParameters: |-
                habChannel=peat
                habServiceGroup=stage
                habService=decision_processing/grid_udt_daemon
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - '#bizops'
            - name: "Sleep ${folder.metadata.time} seconds"
              type: xlrelease.ScriptTask
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: Promotion - grid-udt-daemon
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              jobParameters: |-
                artifactAndPackage=grid-udt-daemon decision_processing/grid_udt_daemon
                promoteToChannel=peat
                platform=linux
                dryRun=false
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - grid udt deamon
              - '#bizops'
            - name: status - grid-udt-daemon
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
              jobParameters: |-
                habEnv=peat
                habService=decision_processing/grid_udt_daemon
                habCommand=status
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - '#bizops'
            - name: Validation
              type: xlrelease.GateTask
        - name: ai-garage-validator Deploy
          type: xlrelease.SequentialGroup
          precondition: "False"
          tasks:
          - name: SKIP
            type: xlrelease.SequentialGroup
            precondition: "False"
            tasks:
            - name: Deploy ai-garage-validator  - Automation
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd
              username: dmp_xlr
              jobName: ChefObjectPipeline/ESS/mc_dmp_chef_objects_nonprod
              description: |-
                Deploy ai-garage-validator
                       1.  Deployment using Chef model
                             i. Merge the PR ${ai-garage-validatorPR}
                            ii. Ensure master build is successful- https://cd3.mastercard.int/jenkins/job/ChefObjectPipeline/job/ESS/job/mc_dmp_chef_objects_nonprod/
              variableMapping:
                pythonScript.buildStatus: "${AIGarageValidatorBuildStatus}"
              tags:
              - Flextp
              - AIGarage
              - '#bizops'
            - name: Deploy ai-garage-validator - Manual
              type: xlrelease.Task
              description: |-
                | *Artifact Name(s)*:       | ai-garage-validator-${AIGarageValidatorArtifactVersion}.jar |
                | *Servers to STAGE ON*:       | rsk0stl53, rsk0stl54 |
                | *Dev Contact*:                         | Sharks Team |

                1. Create directories
                ```
                       1.  Login to the server; sesudo fraud;
                       2.  Create ai-garage-validator  Folder
                          mkdir -p /apps_01/webapps/standalone/ai-garage-validator
                       3.  Create conf, lib, bin, logs directories
                           a.     mkdir /apps_01/webapps/standalone/ai-garage-validator/logs
                           b.    mkdir /apps_01/webapps/standalone/ai-garage-validator/bin
                           c.    mkdir /apps_01/webapps/standalone/ai-garage-validator/conf
                           d.    mkdir /apps_01/webapps/standalone/ai-garage-validator/lib ```
                2. Download files
                ```
                        1. cd /apps_01/webapps/standalone/ai-garage-validator/lib
                        2.    wget https://artifacts.mastercard.int/artifactory/releases/com/mastercard/rst/ai-garage-validator/${AIGarageValidatorArtifactVersion}/ai-garage-validator-${AIGarageValidatorArtifactVersion}.jar -o ai-garage-validator.jar
                ```
              precondition: "not releasevariable['AIGarageValidatorBuildStatus']"
              tags:
              - Flextp
              - AIGarage
              - '#bizops'
            - name: Start ai-garage-validator - Manual
              type: xlrelease.Task
              description: |-
                1. Start application
                ```
                   1.    cd /apps_01/webapps/standalone/ai-garage-validator/
                   2.  Execute Below test:
                           a.    If Java Exists:
                                    i.    /apps_01/fraud/java1.8/bin/java  -verbose:gc -
                 Xloggc:/apps_01/webapps/standalone/ai-garage-validator/logs/gc.log -XX:+PrintGCDateStamps -XX:+PrintGCDetails -Xms512m -Xmx1024m -jar /apps_01/webapps/standalone/ai-garage-validator/lib/ai-garage-validator.jar suites/endToEnd.xml
                         b.    If Zing exists:
                                   i.    /apps_01/fraud/zing/bin/java  -verbose:gc -Xloggc:/apps_01/webapps/standalone/ai-garage-validator/logs/gc.log -XX:+PrintGCDateStamps -XX:+PrintGCDetails -Xms512m -Xmx1024m -jar /apps_01/webapps/standalone/ai-garage-validator/lib/ai-garage-validator.jar suites/endToEnd.xml
                ```
              precondition: "not releasevariable['AIGarageValidatorBuildStatus']"
              tags:
              - Flextp
              - AIGarage
              - '#bizops'
            - name: Deployment verification ai-garage-validator - Manual
              type: xlrelease.Task
              description: |-
                Deployment verification
                ```
                       1.    cd /apps_01/webapps/standalone/
                       2.    ls -asl
                       3.      check if ai-garage-validator application is available under fraud/rsksys user and group```
              tags:
              - Flextp
              - AIGarage
              - '#bizops'
          - name: Habitat
            type: xlrelease.SequentialGroup
            tasks:
            - name: TOML-ai-garage
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              jobParameters: |-
                habChannel=peat
                habServiceGroup=stage
                habService=decision_processing/ai-garage-validator
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - ai_garage
              - Habitat
              - TOML
              - '#bizops'
            - name: "Sleep ${folder.metadata.time} seconds"
              type: xlrelease.ScriptTask
              tags:
              - '#bizops'
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: Promote-AI-Garage
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              jobParameters: |-
                artifactAndPackage=ai-garage-validator decision_processing/ai-garage-validator
                promoteToChannel=peat
                platform=OEL7
                dryRun=false
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - ai_garage
              - Habitat
              - '#bizops'
            - name: Validate-AI-Garage
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
              jobParameters: |-
                habEnv=peat
                habService=decision_processing/ai-garage-validator
                habCommand=status
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - ai_garage
              - Habitat
              - '#bizops'
    color: '#0099CC'
  realFlagStatus: ATTENTION_NEEDED
  tags:
  - "22.5"
  variables:
  - type: xlrelease.StringVariable
    key: FlexTPDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: etlDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPEnvNonProdBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPJSONBuildStatus
    requiresValue: false
    showOnReleaseStart: false
    description: FlexTP Global Seed Data JSON build status
  - type: xlrelease.StringVariable
    key: FlexTPDVTRunBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTDeployBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStopIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveDeployIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStartIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStopIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingDeployIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStartIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStopIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDeployIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStartIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPEnvNonIOSProdBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPJSONBuildStatusIOS
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTDeployBuildStatusRel2IOS
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPFSDOverride-Rel2-IOS-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTIOSRunBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonPR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: ai-garage-validatorPR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: AIGarageValidatorBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: AIGarageValidatorArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: artifact.flextp-oel6.version
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: artifact.flextp-oel7.version
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackSite
    requiresValue: false
    showOnReleaseStart: false
    description: "For STL, set to WNG, for KSC set to KC"
    value: KC
  - type: xlrelease.StringVariable
    key: FlextpFlatpackRealTimeServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackUDTManagementServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackNearRealTimeServersInvolved
    value: "rsk0stl101, rsk0stl125, rsk0stl52"
  - type: xlrelease.StringVariable
    key: FlextpFlatpackAEM2DWServersInvolved
  - type: xlrelease.StringVariable
    key: FlextpFlatpackNotificationServersInvolved
  - type: xlrelease.StringVariable
    key: release
  extensions:
  - name: Dashboard
    type: xlrelease.Dashboard
    owner: e025882
    tiles:
    - name: Release progress
      type: xlrelease.ReleaseProgressTile
    - name: Release summary
      type: xlrelease.ReleaseSummaryTile
    - name: Resource usage
      type: xlrelease.ResourceUsageTile
    - name: Release timeline
      type: bitbucket.TimelineTile
    - name: Release health
      type: xlrelease.ReleaseHealthTile
    - name: Grid
      type: xlrelease.TaskProgressTile
      row: 2
      col: 2
      tags:
      - grid
    - name: FlexTP
      type: xlrelease.TaskProgressTile
      row: 3
      col: 0
      tags:
      - flextp
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 3
      col: 1
  riskProfile: Default risk profile
- template: PEAT-TX-PROCESSING-IOS-22.6
  description: This Template mirrors the PEAT DIP
  scheduledStartDate: 2019-02-06T09:00:00-06:00
  phases:
  - phase: XLR Release
    tasks:
    - name: Add Release tag
      type: xlr.AddTag
      newTag: "${release}"
      tags:
      - '#bizops'
    color: '#0079BC'
  - phase: Tx Processing Deployment
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      team: SCSSPeatDeployment
      tags:
      - '#bizops'
    - name: Transaction Sequential
      type: xlrelease.SequentialGroup
      tags:
      - '#bizops'
      tasks:
      - name: Stop FlexTP Instances - IOS
        type: xlrelease.SequentialGroup
        tags:
        - HM
        - Habitat
        - '#bizops'
        tasks:
        - name: HM Stop Site
          type: xlrelease.Task
          description: |-
            If already logged into H8s, skip to step #6.
            1. Login to the host.
            2. sudo su - fraud
            3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
            4. Start HM CLI ./hm_and_cli_start.sh
            5. Provide RDS database login credentials for that given environment

            6. Stop all instances associated with the site PNQ
            stop site -s PNQ

            7. Verify all instances stopped using the view status command.
          team: SCSSPeatDeployment
          tags:
          - '#bizops'
      - name: Habitat- Host Manager Deployment - IOS
        type: xlrelease.SequentialGroup
        tags:
        - HM
        - Habitat
        tasks:
        - name: Habitat
          type: xlrelease.SequentialGroup
          tags:
          - Habitat
          tasks:
          - name: IOS
            type: xlrelease.SequentialGroup
            tags:
            - IOS
            tasks:
            - name: Hostmanager TOML
              type: xlrelease.SequentialGroup
              team: SCSSPeatDeployment
              precondition: "False"
              tags:
              - TOML
              - '#bizops'
              tasks:
              - name: TOML-FlexTP-IOS
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-pnq/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-pnq/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - HM
                - flextp
                - TOML
                - '#bizops'
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                team: SCSSPeatDeployment
                tags:
                - '#bizops'
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
              - name: Validate TOML
                type: xlrelease.GateTask
                team: SCSSPeatDeployment
                tags:
                - TOML
                - '#bizops'
            - name: Promote - FlexTP - IOS - linux_kernel2
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
              jobParameters: |-
                packageIdent=${folder.flextp_oel6_version}
                channel=peat-pnq
                platform=linux_kernel2
                contactList=Chandra.Nerella@mastercard.com
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - HM
              - flextp
              - Habitat
              - '#bizops'
            - name: "Sleep ${folder.metadata.time} seconds"
              type: xlrelease.ScriptTask
              team: SCSSPeatDeployment
              tags:
              - '#bizops'
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: Promote - FlexTP - IOS - linux
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
              jobParameters: |-
                packageIdent=${folder.flextp+oel7_version}
                channel=peat-pnq
                platform=linux
                contactList=Chandra.Nerella@mastercard.com
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - HM
              - flextp
              - Habitat
              - '#bizops'
            - name: "Sleep ${folder.metadata.time} seconds"
              type: xlrelease.ScriptTask
              team: SCSSPeatDeployment
              tags:
              - '#bizops'
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: Status - FlexTP - IOS
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-pnq-peat/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-pnq-peat/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - HM
              - flextp
              - Habitat
              - '#bizops'
            - name: Validation host manager
              type: xlrelease.GateTask
              description: |-
                On the Hosts ${folder.all_peat_ios_servers} perform the below steps

                1. Login to the box and Switch to fraud user
                2. cd /apps_01/fruad/hubernetes/bin
                3. run './h8s_version.sh'
                4. The Host Manager Configuration version must match - ${folder.artifact.host-manager-configuration.version}
                5. Host Manger CLI version must match ${folder.host_manager_cli_version}
                6. Host Manager version must match ${folder.host_manager_version}
              team: SCSSPeatDeployment
              tags:
              - HM
              - '#bizops'
      - name: Host Manager Commands
        type: xlrelease.SequentialGroup
        tasks:
        - name: Deploy Flatpack
          type: xlrelease.Task
          description: |-
            If already logged into H8s, skip to step #6.
            1. Login to the host.
            2. sudo su - fraud
            3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
            4. Start HM CLI ./hm_and_cli_start.sh
            5. Provide RDS database login credentials for that given environment

            6. Run deploy flatpack command
            deploy flatpack -s PNQ

            Before Selecting the "Y" option  validate all flatpack version to match with apmate.
          team: SCSSPeatDeployment
          tags:
          - '#bizops'
        - name: Recreate Site
          type: xlrelease.Task
          description: |-
            If already logged into H8s, skip to step #6.
            1. Login to the host.
            2. sudo su - fraud
            3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
            4. Start HM CLI ./hm_and_cli_start.sh
            5. Provide RDS database login credentials for that given environment

            6. Recreate host with Force option
            recreate site -s PNQ -f

            7. use view status with the request id to check the status of the command. The command should complete to success.
          team: SCSSPeatDeployment
          tags:
          - '#bizops'
        - name: Start Site
          type: xlrelease.Task
          description: |-
            If already logged into H8s, skip to step #6.
            1. Login to the host.
            2. sudo su - fraud
            3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
            4. Start HM CLI ./hm_and_cli_start.sh
            5. Provide RDS database login credentials for that given environment

            6. Start hosts
            start site -s PNQ

            7. Verify all instances started using the view status command.
          flagStatus: ATTENTION_NEEDED
          flagComment: PEAT Team will start manually
          team: SCSSPeatDeployment
          precondition: "False"
          tags:
          - '#bizops'
    color: '#0099CC'
  realFlagStatus: ATTENTION_NEEDED
  tags:
  - "22.6"
  variables:
  - type: xlrelease.StringVariable
    key: FlexTPDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: etlDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPEnvNonProdBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPJSONBuildStatus
    requiresValue: false
    showOnReleaseStart: false
    description: FlexTP Global Seed Data JSON build status
  - type: xlrelease.StringVariable
    key: FlexTPDVTRunBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTDeployBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStopIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveDeployIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStartIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStopIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingDeployIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStartIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStopIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDeployIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStartIOSBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPEnvNonIOSProdBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPJSONBuildStatusIOS
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTDeployBuildStatusRel2IOS
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPFSDOverride-Rel2-IOS-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTIOSRunBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonPR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: ai-garage-validatorPR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: AIGarageValidatorBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: AIGarageValidatorArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: artifact.flextp-oel6.version
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: artifact.flextp-oel7.version
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackSite
    requiresValue: false
    showOnReleaseStart: false
    description: "For STL, set to WNG, for KSC set to KC"
    value: KC
  - type: xlrelease.StringVariable
    key: FlextpFlatpackRealTimeServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackUDTManagementServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackNearRealTimeServersInvolved
    value: "rsk0stl101, rsk0stl125, rsk0stl52"
  - type: xlrelease.StringVariable
    key: FlextpFlatpackAEM2DWServersInvolved
  - type: xlrelease.StringVariable
    key: FlextpFlatpackNotificationServersInvolved
  - type: xlrelease.StringVariable
    key: release
  extensions:
  - name: Dashboard
    type: xlrelease.Dashboard
    owner: e025882
    tiles:
    - name: Release progress
      type: xlrelease.ReleaseProgressTile
    - name: Release summary
      type: xlrelease.ReleaseSummaryTile
    - name: Resource usage
      type: xlrelease.ResourceUsageTile
    - name: Release timeline
      type: bitbucket.TimelineTile
    - name: Release health
      type: xlrelease.ReleaseHealthTile
    - name: Grid
      type: xlrelease.TaskProgressTile
      row: 2
      col: 2
      tags:
      - grid
    - name: FlexTP
      type: xlrelease.TaskProgressTile
      row: 3
      col: 0
      tags:
      - flextp
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 3
      col: 1
  riskProfile: Default risk profile
- template: PEAT-TX-PROCESSING-KSC-22.3
  description: This Template mirrors the PEAT DIP
  scheduledStartDate: 2019-02-06T09:00:00-06:00
  phases:
  - phase: XLR Release
    tasks:
    - name: Add Release tag
      type: xlr.AddTag
      newTag: "${release}"
    color: '#0079BC'
  - phase: Tx Processing Deployment
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      owner: e124194
      team: SCSSPeatDeployment
    - name: All Transactions
      type: xlrelease.ParallelGroup
      tasks:
      - name: Transaction Sequential
        type: xlrelease.SequentialGroup
        tasks:
        - name: Stop FlexTP Instances - KSC
          type: xlrelease.SequentialGroup
          tags:
          - flextp
          - KSC
          tasks:
          - name: HM Stop Site
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Stop all instances associated with the site KC
              stop site -s KC

              7. Verify all instances stopped using the view status command.
        - name: Grid - KSC
          type: xlrelease.SequentialGroup
          tags:
          - grid
          - KSC
          tasks:
          - name: Stop Grid
            type: xlrelease.SequentialGroup
            tags:
            - grid
            - KSC
            tasks:
            - name: Stop Grid Staging - KSC
              type: xlrelease.SequentialGroup
              tags:
              - grid
              - KSC
              tasks:
              - name: Stop Grid Staging Server 2 - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - grid
                - staging_grid_server2
                - KSC
              - name: Stop Grid Staging Server - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server
                - grid
                - KSC
              - name: Stop Grid Staging Locator - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_locator
                - grid
                - KSC
              - name: Status
                type: xlrelease.SequentialGroup
                tags:
                - grid
                - KSC
                tasks:
                - name: Status Staging Grid Locator - KSC
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - grid
                  - staging_grid_server2
                  - KSC
                - name: Status Staging Grid Server - KSC
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/stop/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - staging_grid_server
                  - grid
                  - KSC
                - name: Status Staging Grid Server 2 - KSC
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - staging_grid_locator
                  - grid
                  - KSC
            - name: Stop Live Grid - KSC
              type: xlrelease.SequentialGroup
              tags:
              - live_grid
              - grid
              - KSC
              tasks:
              - name: Habitat Live Grid Worker Stop
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_worker
                - live_grid
                - grid
                - KSC
              - name: Habitat Live Grid Server Stop
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_server
                - live_grid
                - grid
                - KSC
              - name: Habitat Live Grid Locator Stop
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_locator
                - live_grid
                - grid
                - KSC
              - name: Status
                type: xlrelease.SequentialGroup
                tags:
                - live_grid
                - grid
                - KSC
                tasks:
                - name: Status Live Grid Locator - KSC
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - live_grid_worker
                  - live_grid
                  - grid
                  - KSC
                - name: Status Live Grid Server - KSC
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - live_grid_server
                  - live_grid
                  - grid
                  - KSC
                - name: Status Live Grid Worker - KSC
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - live_grid_locator
                  - live_grid
                  - grid
                  - KSC
                - name: Validate Grid Live - KSC has stopped
                  type: xlrelease.GateTask
                  description: Jenkin's jobs should show that "status" is "down"
                  tags:
                  - live_grid
                  - KSC
          - name: Promote Grid - KSC
            type: xlrelease.SequentialGroup
            tags:
            - grid
            - KSC
            tasks:
            - name: TOML Live
              type: xlrelease.SequentialGroup
              precondition: "False"
              tags:
              - TOML
              - live_grid
              tasks:
              - name: Deploy Live Grid Locator TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_locator
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - live_grid_locator
                - live_grid
              - name: Deploy Live Grid Server TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_server
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - live_grid_server
                - live_grid
              - name: Deploy Live Grid Worker TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_worker
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - live_grid_worker
                - live_grid
            - name: TOML Staging
              type: xlrelease.SequentialGroup
              precondition: "False"
              tags:
              - TOML
              - staging_grid
              - grid
              tasks:
              - name: Deploy Staging Grid Locator TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/staging_grid_locator
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - staging_grid_locator
                - TOML
                - Habitat
                - grid
                - staging_grid
              - name: Deploy Staging Grid Server TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/staging_grid_server
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - staging_grid
                - staging_grid_server
              - name: Deploy Live Grid Server 2 TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/staging_grid_server2
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - staging_grid_server2
                - staging_grid
            - name: Promote Live Grid
              type: xlrelease.SequentialGroup
              tags:
              - grid
              - live_grid
              tasks:
              - name: Promote Live Grid Locator- KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/live_grid_locator-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-live-locator.version}
                  channel=peat-ksc
                  dryRun=false
                  platform=linux_kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/live_grid_locator-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_locator
                - live_grid
                - grid
                - Habitat
              - name: Promote Live Grid Server - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/live_grid_server-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-live-server.version}
                  channel=peat-ksc
                  dryRun=false
                  platform=linux_kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/live_grid_server-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_server
                - live_grid
                - grid
                - Habitat
              - name: Promote Live Grid Worker - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/live_grid_worker-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-live-worker.version}
                  channel=peat-ksc
                  dryRun=false
                  platform=linux_kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/live_grid_worker-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_worker
                - live_grid
                - grid
                - Habitat
            - name: Promote Staging Grid
              type: xlrelease.SequentialGroup
              tags:
              - staging_grid
              - grid
              tasks:
              - name: Promote Staging Grid Locator- KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/staging_grid_locator-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-staging-locator.version}
                  channel=peat-ksc
                  dryRun=false
                  platform=linux_kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/staging_grid_locator-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_locator
                - staging_grid
                - grid
                - Habitat
              - name: Promote Staging Grid Server - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/staging_grid_server-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-staging-server.version}
                  channel=peat-ksc
                  dryRun=false
                  platform=linux_kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/staging_grid_server-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server
                - staging_grid
                - grid
                - Habitat
              - name: Promote Staging Grid Server 2 - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/staging_grid_server2-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-staging-server2.version}
                  channel=peat-ksc
                  dryRun=false
                  platform=linux_kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/staging_grid_server2-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server2
                - staging_grid
                - grid
                - Habitat
          - name: Start Grid - KSC
            type: xlrelease.SequentialGroup
            tags:
            - grid
            tasks:
            - name: Live Grid
              type: xlrelease.SequentialGroup
              tags:
              - live_grid
              - grid
              tasks:
              - name: Start Live Grid Locator - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_locator
                - live_grid
                - grid
                - Habitat
              - name: Start Live Grid Server - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_server
                - live_grid
                - grid
                - Habitat
              - name: Start Live Grid Worker - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_worker
                - live_grid
                - grid
                - Habitat
              - name: Status
                type: xlrelease.SequentialGroup
                tasks:
                - name: Status Live Grid Locator
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - live_grid_locator
                  - live_grid
                  - grid
                  - Habitat
                - name: Status Live Grid Server
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - live_grid_server
                  - live_grid
                  - grid
                  - Habitat
                - name: Status Live Grid Worker
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - live_grid_worker
                  - live_grid
                  - grid
                  - Habitat
                - name: Validate Status is Up
                  type: xlrelease.GateTask
                  description: Jenkin's jobs should show that "status" is "up"
                  tags:
                  - grid
            - name: Staging Grid
              type: xlrelease.SequentialGroup
              tags:
              - staging_grid
              - grid
              tasks:
              - name: Start Staging Grid Locator - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_locator
                - staging_grid
                - grid
                - Habitat
              - name: Start Staging Grid Server - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server
                - staging_grid
                - grid
                - Habitat
              - name: Start Staging Grid Server 2 - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server2
                - staging_grid
                - grid
                - Habitat
              - name: Status
                type: xlrelease.SequentialGroup
                tasks:
                - name: Status Staging Grid Locator
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - staging_grid_locator
                  - staging_grid
                  - grid
                  - Habitat
                - name: Status Staging Grid Server
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - staging_grid_server
                  - staging_grid
                  - grid
                  - Habitat
                - name: Status Staging Grid Server 2
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/status
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - staging_grid_server2
                  - staging_grid
                  - grid
                  - Habitat
                - name: Validate Status is Up
                  type: xlrelease.GateTask
                  description: |-
                    Jenkin's jobs should show that "status" is "up"

                    Login to rsk0stl65/66/67/68 and rsk0stl16

                    cd /apps_01/fraud

                    ls -ltr

                    The grid symbolic link should point to the version you had deployed.
        - name: Habitat- Host Manager Deployment - KSC
          type: xlrelease.SequentialGroup
          tags:
          - Habitat
          - HM
          tasks:
          - name: Habitat
            type: xlrelease.SequentialGroup
            tags:
            - Habitat
            tasks:
            - name: KSC
              type: xlrelease.SequentialGroup
              tags:
              - KSC
              tasks:
              - name: TOML
                type: xlrelease.SequentialGroup
                precondition: "False"
                tags:
                - TOML
                tasks:
                - name: TOML-FlexTP-KSC
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-KSC/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-KSC/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - TOML
                  - flextp
                  - HM
                - name: "Sleep ${folder.metadata.time} seconds"
                  type: xlrelease.ScriptTask
                  script: |-
                    import time
                    time.sleep(${folder.metadata.time})
                    print "Done Sleeping"
                - name: Validate TOML
                  type: xlrelease.GateTask
                  tags:
                  - TOML
              - name: Promote - flextp_host_manager  - KSC - linux_kernel2
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.flextp_oel6_version}
                  channel=peat-ksc
                  platform=linux_kernel2
                  contactList=Chandra.Nerella@mastercard.com
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - flextp
                - HM
                - Habitat
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
              - name: Promote - flextp_host_manager - KSC - linux
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.flextp+oel7_version}
                  channel=peat-ksc
                  platform=linux
                  contactList=Chandra.Nerella@mastercard.com
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - flextp
                - HM
                - Habitat
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
              - name: Status - Host Manager - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-ksc-peat/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-ksc-peat/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - flextp
                - Habitat
                - HM
              - name: Validate Host Manager
                type: xlrelease.GateTask
                description: |-
                  On the Hosts ${folder.all_peat_ksc_servers} perform the below steps

                  1. Login to the box and Switch to fraud user
                  2. cd /apps_01/fruad/hubernetes/bin
                  3. run './h8s_version.sh'
                  4. The Host Manager Configuration version must match - ${folder.artifact.host-manager-configuration.version}
                  5. Host Manger CLI version must match ${folder.host_manager_cli_version}
                  6. Host Manager version must match ${folder.host_manager_version}
                tags:
                - HM
        - name: HM Deploy Flatpack - KSC
          type: xlrelease.SequentialGroup
          tasks:
          - name: Deploy Flatpack for All Channels
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Run deploy flatpack command
              deploy flatpack -s KC

              Before Selecting the "Y" option  validate all flatpack version to match with apmate.
        - name: HM Recreate Site - KSC
          type: xlrelease.SequentialGroup
          tasks:
          - name: Recreate All Hosts in Site
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Recreate host with Force option
              recreate site -s KC -f

              7. use view status with the request id to check the status of the command. The command should complete to success.
        - name: HM Start Hosts - KSC
          type: xlrelease.SequentialGroup
          tasks:
          - name: Start All Instances
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Start hosts
              start site -s KC

              7. Verify all instances started using the view status command.
            flagStatus: ATTENTION_NEEDED
            flagComment: PEAT team will manually start
            precondition: "False"
    color: '#0099CC'
  realFlagStatus: ATTENTION_NEEDED
  tags:
  - "22.3"
  variables:
  - type: xlrelease.StringVariable
    key: FlexTPDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: etlDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPEnvNonProdBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPJSONBuildStatus
    requiresValue: false
    showOnReleaseStart: false
    description: FlexTP Global Seed Data JSON build status
  - type: xlrelease.StringVariable
    key: FlexTPDVTRunBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTDeployBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStopKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveDeployKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStartKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStopKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingDeployKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStartKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStopKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDeployKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStartKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPEnvNonKSCProdBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPJSONBuildStatusKSC
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTDeployBuildStatusRel2KSC
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPFSDOverride-Rel2-KSC-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTKSCRunBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonPR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: ai-garage-validatorPR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: AIGarageValidatorBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: AIGarageValidatorArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: artifact.flextp-oel6.version
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: artifact.flextp-oel7.version
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackSite
    requiresValue: false
    showOnReleaseStart: false
    description: "For STL, set to WNG, for KSC set to KC"
    value: KC
  - type: xlrelease.StringVariable
    key: FlextpFlatpackRealTimeServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackUDTManagementServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackNearRealTimeServersInvolved
    value: "rsk0stl101, rsk0stl125, rsk0stl52"
  - type: xlrelease.StringVariable
    key: FlextpFlatpackAEM2DWServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackNotificationServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: release
  extensions:
  - name: Dashboard
    type: xlrelease.Dashboard
    owner: e025882
    tiles:
    - name: Release progress
      type: xlrelease.ReleaseProgressTile
    - name: Release summary
      type: xlrelease.ReleaseSummaryTile
    - name: Resource usage
      type: xlrelease.ResourceUsageTile
    - name: Release timeline
      type: xlrelease.TimelineTile
    - name: Release health
      type: xlrelease.ReleaseHealthTile
    - name: Grid
      type: xlrelease.TaskProgressTile
      row: 2
      col: 2
      tags:
      - grid
    - name: FlexTP
      type: xlrelease.TaskProgressTile
      row: 3
      col: 0
      tags:
      - flextp
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 3
      col: 1
  riskProfile: Default risk profile
- template: PEAT-TX-PROCESSING-KSC-22.4
  description: This Template mirrors the PEAT DIP
  scheduledStartDate: 2019-02-06T09:00:00-06:00
  phases:
  - phase: XLR Release
    tasks:
    - name: Add Release tag
      type: xlr.AddTag
      newTag: "${release}"
    color: '#0079BC'
  - phase: Tx Processing Deployment
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      owner: e081728
      team: SCSSPeatDeployment
    - name: All Transactions
      type: xlrelease.ParallelGroup
      tasks:
      - name: Transaction Sequential
        type: xlrelease.SequentialGroup
        tasks:
        - name: Stop FlexTP Instances - KSC
          type: xlrelease.SequentialGroup
          tags:
          - flextp
          - KSC
          tasks:
          - name: HM Stop Site
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Stop all instances associated with the site KSC
              stop site -s KC

              7. Verify all instances stopped using the view status command.
        - name: Grid - KSC
          type: xlrelease.SequentialGroup
          tags:
          - grid
          - KSC
          tasks:
          - name: Stop Grid
            type: xlrelease.SequentialGroup
            tags:
            - grid
            - KSC
            tasks:
            - name: Stop all members
              type: xlrelease.SequentialGroup
              tags:
              - grid
              - KSC
              tasks:
              - name: Stop Grid Staging Server 2 - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - grid
                - staging_grid_server2
                - KSC
              - name: Stop Grid Staging Server - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server
                - grid
                - KSC
              - name: Stop Grid Staging Locator - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_locator
                - grid
                - KSC
              - name: Habitat Live Grid Worker Stop
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_worker
                - live_grid
                - grid
                - KSC
              - name: Habitat Live Grid Server Stop
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_server
                - live_grid
                - grid
                - KSC
              - name: Habitat Live Grid Locator Stop
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_locator
                - live_grid
                - grid
                - KSC
            - name: "Status: validate Grid is down"
              type: xlrelease.SequentialGroup
              tags:
              - live_grid
              - grid
              - KSC
              tasks:
              - name: Status Staging Grid Locator - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - grid
                - staging_grid_server2
                - KSC
              - name: Status Staging Grid Server - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server
                - grid
                - KSC
              - name: Status Staging Grid Server 2 - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_locator
                - grid
                - KSC
              - name: Status Live Grid Locator - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_worker
                - live_grid
                - grid
                - KSC
              - name: Status Live Grid Server - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_server
                - live_grid
                - grid
                - KSC
              - name: Status Live Grid Worker - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_locator
                - live_grid
                - grid
                - KSC
              - name: Validate Status is Down
                type: xlrelease.GateTask
                description: Jenkin's jobs should show that "status" is "down"
                tags:
                - grid
                - KSC
          - name: Promote Grid - KSC
            type: xlrelease.SequentialGroup
            tags:
            - grid
            - KSC
            tasks:
            - name: TOML Live and Staging
              type: xlrelease.SequentialGroup
              precondition: "False"
              tags:
              - TOML
              - live_grid
              tasks:
              - name: Deploy Live Grid Locator TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_locator
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - live_grid_locator
                - live_grid
              - name: Deploy Live Grid Server TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_server
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - live_grid_server
                - live_grid
              - name: Deploy Live Grid Worker TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_worker
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - live_grid_worker
                - live_grid
              - name: Deploy Staging Grid Locator TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/staging_grid_locator
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - staging_grid_locator
                - TOML
                - Habitat
                - grid
                - staging_grid
              - name: Deploy Staging Grid Server TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/staging_grid_server
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - staging_grid
                - staging_grid_server
              - name: Deploy Live Grid Server 2 TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/staging_grid_server2
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - staging_grid_server2
                - staging_grid
            - name: Promote Live Grid
              type: xlrelease.SequentialGroup
              tags:
              - grid
              - live_grid
              tasks:
              - name: Promote Live Grid Locator- KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/live_grid_locator-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-live-locator.version}
                  channel=peat-ksc
                  dryRun=false
                  platform=linux_kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/live_grid_locator-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_locator
                - live_grid
                - grid
                - Habitat
              - name: Promote Live Grid Server - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/live_grid_server-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-live-server.version}
                  channel=peat-ksc
                  dryRun=false
                  platform=linux_kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/live_grid_server-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_server
                - live_grid
                - grid
                - Habitat
              - name: Promote Live Grid Worker - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/live_grid_worker-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-live-worker.version}
                  channel=peat-ksc
                  dryRun=false
                  platform=linux_kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/live_grid_worker-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_worker
                - live_grid
                - grid
                - Habitat
            - name: Promote Staging Grid
              type: xlrelease.SequentialGroup
              tags:
              - staging_grid
              - grid
              tasks:
              - name: Promote Staging Grid Locator- KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/staging_grid_locator-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-staging-locator.version}
                  channel=peat-ksc
                  dryRun=false
                  platform=linux_kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/staging_grid_locator-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_locator
                - staging_grid
                - grid
                - Habitat
              - name: Promote Staging Grid Server - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/staging_grid_server-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-staging-server.version}
                  channel=peat-ksc
                  dryRun=false
                  platform=linux_kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/staging_grid_server-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server
                - staging_grid
                - grid
                - Habitat
              - name: Promote Staging Grid Server 2 - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/staging_grid_server2-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-staging-server2.version}
                  channel=peat-ksc
                  dryRun=false
                  platform=linux_kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/staging_grid_server2-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server2
                - staging_grid
                - grid
                - Habitat
          - name: Start Grid - KSC
            type: xlrelease.SequentialGroup
            tags:
            - grid
            tasks:
            - name: Live Grid
              type: xlrelease.SequentialGroup
              tags:
              - live_grid
              - grid
              tasks:
              - name: Start Live Grid Locator - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_locator
                - live_grid
                - grid
                - Habitat
              - name: Start Live Grid Server - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_server
                - live_grid
                - grid
                - Habitat
              - name: Start Live Grid Worker - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_worker
                - live_grid
                - grid
                - Habitat
              - name: Status
                type: xlrelease.SequentialGroup
                tasks:
                - name: Status Live Grid Locator
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - live_grid_locator
                  - live_grid
                  - grid
                  - Habitat
                - name: Status Live Grid Server
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - live_grid_server
                  - live_grid
                  - grid
                  - Habitat
                - name: Status Live Grid Worker
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - live_grid_worker
                  - live_grid
                  - grid
                  - Habitat
                - name: Validate Status is Up
                  type: xlrelease.GateTask
                  description: Jenkin's jobs should show that "status" is "up"
                  tags:
                  - grid
            - name: Staging Grid
              type: xlrelease.SequentialGroup
              tags:
              - staging_grid
              - grid
              tasks:
              - name: Start Staging Grid Locator - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_locator
                - staging_grid
                - grid
                - Habitat
              - name: Start Staging Grid Server - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server
                - staging_grid
                - grid
                - Habitat
              - name: Start Staging Grid Server 2 - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server2
                - staging_grid
                - grid
                - Habitat
              - name: Status
                type: xlrelease.SequentialGroup
                tasks:
                - name: Status Staging Grid Locator
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - staging_grid_locator
                  - staging_grid
                  - grid
                  - Habitat
                - name: Status Staging Grid Server
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - staging_grid_server
                  - staging_grid
                  - grid
                  - Habitat
                - name: Status Staging Grid Server 2
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/status
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - staging_grid_server2
                  - staging_grid
                  - grid
                  - Habitat
                - name: Validate Status is Up
                  type: xlrelease.GateTask
                  description: Jenkin's jobs should show that "status" is "up"
            - name: Validate Grid - KSC has been deployed
              type: xlrelease.GateTask
              description: |-
                Login to rsk0stl65/66/67/68 and rsk0stl16

                cd /apps_01/fraud

                ls -ltr

                The grid symbolic link should point to the version you had deployed.
              tags:
              - live_grid
              - grid
        - name: Habitat- Host Manager Deployment - KSC
          type: xlrelease.SequentialGroup
          tags:
          - Habitat
          - HM
          tasks:
          - name: Habitat
            type: xlrelease.SequentialGroup
            tags:
            - Habitat
            tasks:
            - name: KSC
              type: xlrelease.SequentialGroup
              tags:
              - KSC
              tasks:
              - name: TOML
                type: xlrelease.SequentialGroup
                precondition: "False"
                tags:
                - TOML
                tasks:
                - name: TOML-FlexTP-KSC
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-KSC/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-KSC/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - TOML
                  - flextp
                  - HM
                - name: "Sleep ${folder.metadata.time} seconds"
                  type: xlrelease.ScriptTask
                  script: |-
                    import time
                    time.sleep(${folder.metadata.time})
                    print "Done Sleeping"
                - name: Validate TOML
                  type: xlrelease.GateTask
                  tags:
                  - TOML
              - name: Promote - flextp_host_manager  - KSC - linux_kernel2
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.flextp_oel6_version}
                  channel=peat-ksc
                  platform=linux_kernel2
                  contactList=Chandra.Nerella@mastercard.com
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - flextp
                - HM
                - Habitat
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
              - name: Promote - flextp_host_manager - KSC - linux
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.flextp+oel7_version}
                  channel=peat-ksc
                  platform=linux
                  contactList=Chandra.Nerella@mastercard.com
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - flextp
                - HM
                - Habitat
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
              - name: Status - Host Manager - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-ksc-peat/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-ksc-peat/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - flextp
                - Habitat
                - HM
              - name: Validation host manager
                type: xlrelease.GateTask
                description: |-
                  On the Hosts ${folder.all_peat_ksc_servers} perform the below steps

                  1. Login to the box and Switch to fraud user
                  2. cd /apps_01/fruad/hubernetes/bin
                  3. run './h8s_version.sh'
                  4. The Host Manager Configuration version must match - ${folder.artifact.host-manager-configuration.version}
                  5. Host Manger CLI version must match ${folder.host_manager_cli_version}
                  6. Host Manager version must match ${folder.host_manager_version}
                tags:
                - HM
        - name: HM Deploy Flatpack - KSC
          type: xlrelease.SequentialGroup
        - name: Deploy Flatpack for All Channels
          type: xlrelease.Task
          description: |-
            If already logged into H8s, skip to step #6.
            1. Login to the host.
            2. sudo su - fraud
            3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
            4. Start HM CLI ./hm_and_cli_start.sh
            5. Provide RDS database login credentials for that given environment

            6. Run deploy flatpack command
            deploy flatpack -s KC

            Before Selecting the "Y" option  validate all flatpack version to match with apmate.
        - name: HM Recreate Site - KSC
          type: xlrelease.SequentialGroup
          tasks:
          - name: Recreate All Hosts in Site
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Recreate host with Force option
              recreate site -s KC -f

              7. use view status with the request id to check the status of the command. The command should complete to success.
        - name: HM Start Hosts - KSC
          type: xlrelease.SequentialGroup
          precondition: "False"
          tasks:
          - name: Start All Instances
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Start hosts
              start site -s KC

              7. Verify all instances started using the view status command.
        - name: grid-udt-daemon Deploy
          type: xlrelease.SequentialGroup
          precondition: "False"
          tasks:
          - name: Skip
            type: xlrelease.SequentialGroup
            precondition: "False"
            tasks:
            - name: Deploy grid-udt-daemon - Automation
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd
              username: dmp_xlr
              jobName: ChefObjectPipeline/ESS/mc_dmp_chef_objects_nonprod
              description: |-
                Deploy grid-udt-daemon
                       1.  Deployment using Chef model
                             i. Merge the PR ${GridUDTDaemonPR}
                            ii. Ensure master build is successful- https://cd3.mastercard.int/jenkins/job/ChefObjectPipeline/job/ESS/job/mc_dmp_chef_objects_nonprod/
              variableMapping:
                pythonScript.buildStatus: "${GridUDTDaemonBuildStatus}"
              tags:
              - Flextp
              - AIGarage
            - name: Deploy grid-udt-daemon - Manual
              type: xlrelease.Task
              description: |-
                | *Artifact Name(s)*:       | grid-udt-daemon-${GridUDTDaemonArtifactVersion}.jar |
                | *Servers to STAGE ON*:       | rsk0stl53, rsk0stl54 |
                | *Dev Contact*:                         | Sharks Team |

                1. Create directories
                ```
                       1.  Login to the server; sesudo fraud;
                       2.  Create grid-udt-daemon Folder
                          mkdir -p /apps_01/webapps/standalone/grid-udt-daemon
                       3.  Create conf, lib, bin, logs directories
                           a.     mkdir /apps_01/webapps/standalone/grid-udt-daemon/logs
                           b.    mkdir /apps_01/webapps/standalone/grid-udt-daemon/bin
                           c.    mkdir /apps_01/webapps/standalone/grid-udt-daemon/conf
                           d.    mkdir /apps_01/webapps/standalone/grid-udt-daemon/lib ```
                2. Download files
                ```
                    1. cd /apps_01/webapps/standalone/grid-udt-daemon/lib
                    2.    wget https://artifacts.mastercard.int/artifactory/releases/com/mastercard/risk/dmp/grid/grid-udt-daemon/${GridUDTDaemonArtifactVersion}/grid-udt-daemon-${GridUDTDaemonArtifactVersion}.jar -o grid-udt-daemon.jar
                   3.    cd /apps_01/webapps/standalone/grid-udt-daemon/conf
                   4.    wget https://globalrepository.mclocal.int/stash/projects/ESSDMP-BATCH/repos/grid-udt-loader-daemon/raw/src/main/resources/config/udt-job-template.json```
              precondition: "not releasevariable['GridUDTDaemonBuildStatus']"
              tags:
              - Flextp
              - AIGarage
            - name: Start grid-udt-daemon - Manual
              type: xlrelease.Task
              description: |-
                1. Start application
                ```
                   1.    cd /apps_01/webapps/standalone/grid-udt-daemon/
                   2.    /apps_01/fraud/java1.8/bin/java  -verbose:gc -Xloggc:/apps_01/webapps/standalone/grid-udt-daemon/logs/gc.log -XX:+PrintGCDateStamps -XX:+PrintGCDetails -Xms512m -Xmx1024m -jar /apps_01/webapps/standalone/grid-udt-daemon/lib/grid-udt-daemon.jar ```
              precondition: "${GridUDTDaemonBuildStatus}"
              tags:
              - Flextp
              - AIGarage
            - name: Deployment verification
              type: xlrelease.Task
              description: |-
                Deployment verification
                ```
                       1.    cd /apps_01/webapps/standalone/
                       2.    ls -asl
                       3.    check if grid-udt-daemon application is available under fraud/rsksys user and group
                       4.    ps -ef | grep grid-udt-daemon
                       5.    If the application has started, Look up logs: cd
                                      /apps_01/webapps/standalone/grid-udt-daemon/logs
                       6.    Tail -f grid-udt-daemon.log```
              tags:
              - Flextp
              - AIGarage
          - name: Habitat
            type: xlrelease.SequentialGroup
            tasks:
            - name: TOML - grid-udt-daemon
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              jobParameters: |-
                habChannel=peat
                habServiceGroup=stage
                habService=decision_processing/grid_udt_daemon
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            - name: "Sleep ${folder.metadata.time} seconds"
              type: xlrelease.ScriptTask
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: Promotion - grid-udt-daemon
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              jobParameters: |-
                artifactAndPackage=grid-udt-daemon decision_processing/grid_udt_daemon
                promoteToChannel=peat
                platform=linux
                dryRun=false
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            - name: status - grid-udt-daemon
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
              jobParameters: |-
                habEnv=peat
                habService=decision_processing/grid_udt_daemon
                habCommand=status
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            - name: Validation
              type: xlrelease.GateTask
        - name: ai-garage-validator Deploy
          type: xlrelease.SequentialGroup
          precondition: "False"
          tasks:
          - name: SKIP
            type: xlrelease.SequentialGroup
            precondition: "False"
            tasks:
            - name: Deploy ai-garage-validator  - Automation
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd
              username: dmp_xlr
              jobName: ChefObjectPipeline/ESS/mc_dmp_chef_objects_nonprod
              description: |-
                Deploy ai-garage-validator
                       1.  Deployment using Chef model
                             i. Merge the PR ${ai-garage-validatorPR}
                            ii. Ensure master build is successful- https://cd3.mastercard.int/jenkins/job/ChefObjectPipeline/job/ESS/job/mc_dmp_chef_objects_nonprod/
              variableMapping:
                pythonScript.buildStatus: "${AIGarageValidatorBuildStatus}"
              tags:
              - Flextp
              - AIGarage
            - name: Deploy ai-garage-validator - Manual
              type: xlrelease.Task
              description: |-
                | *Artifact Name(s)*:       | ai-garage-validator-${AIGarageValidatorArtifactVersion}.jar |
                | *Servers to STAGE ON*:       | rsk0stl53, rsk0stl54 |
                | *Dev Contact*:                         | Sharks Team |

                1. Create directories
                ```
                       1.  Login to the server; sesudo fraud;
                       2.  Create ai-garage-validator  Folder
                          mkdir -p /apps_01/webapps/standalone/ai-garage-validator
                       3.  Create conf, lib, bin, logs directories
                           a.     mkdir /apps_01/webapps/standalone/ai-garage-validator/logs
                           b.    mkdir /apps_01/webapps/standalone/ai-garage-validator/bin
                           c.    mkdir /apps_01/webapps/standalone/ai-garage-validator/conf
                           d.    mkdir /apps_01/webapps/standalone/ai-garage-validator/lib ```
                2. Download files
                ```
                        1. cd /apps_01/webapps/standalone/ai-garage-validator/lib
                        2.    wget https://artifacts.mastercard.int/artifactory/releases/com/mastercard/rst/ai-garage-validator/${AIGarageValidatorArtifactVersion}/ai-garage-validator-${AIGarageValidatorArtifactVersion}.jar -o ai-garage-validator.jar
                ```
              precondition: "not releasevariable['AIGarageValidatorBuildStatus']"
              tags:
              - Flextp
              - AIGarage
            - name: Start ai-garage-validator - Manual
              type: xlrelease.Task
              description: |-
                1. Start application
                ```
                   1.    cd /apps_01/webapps/standalone/ai-garage-validator/
                   2.  Execute Below test:
                           a.    If Java Exists:
                                    i.    /apps_01/fraud/java1.8/bin/java  -verbose:gc -
                 Xloggc:/apps_01/webapps/standalone/ai-garage-validator/logs/gc.log -XX:+PrintGCDateStamps -XX:+PrintGCDetails -Xms512m -Xmx1024m -jar /apps_01/webapps/standalone/ai-garage-validator/lib/ai-garage-validator.jar suites/endToEnd.xml
                         b.    If Zing exists:
                                   i.    /apps_01/fraud/zing/bin/java  -verbose:gc -Xloggc:/apps_01/webapps/standalone/ai-garage-validator/logs/gc.log -XX:+PrintGCDateStamps -XX:+PrintGCDetails -Xms512m -Xmx1024m -jar /apps_01/webapps/standalone/ai-garage-validator/lib/ai-garage-validator.jar suites/endToEnd.xml
                ```
              precondition: "not releasevariable['AIGarageValidatorBuildStatus']"
              tags:
              - Flextp
              - AIGarage
            - name: Deployment verification ai-garage-validator - Manual
              type: xlrelease.Task
              description: |-
                Deployment verification
                ```
                       1.    cd /apps_01/webapps/standalone/
                       2.    ls -asl
                       3.      check if ai-garage-validator application is available under fraud/rsksys user and group```
              tags:
              - Flextp
              - AIGarage
          - name: Habitat
            type: xlrelease.SequentialGroup
            tasks:
            - name: TOML-ai-garage
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              jobParameters: |-
                habChannel=peat
                habServiceGroup=stage
                habService=decision_processing/ai-garage-validator
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - TOML
              - ai_garage
              - Habitat
            - name: "Sleep ${folder.metadata.time} seconds"
              type: xlrelease.ScriptTask
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: Promote-AI-Garage
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              jobParameters: |-
                artifactAndPackage=ai-garage-validator decision_processing/ai-garage-validator
                promoteToChannel=peat
                platform=linux
                dryRun=false
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - ai_garage
              - Habitat
            - name: Validate-AI-Garage
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
              jobParameters: |-
                habEnv=peat
                habService=decision_processing/ai-garage-validator
                habCommand=status
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - ai_garage
              - Habitat
    color: '#0099CC'
  tags:
  - "22.4"
  variables:
  - type: xlrelease.StringVariable
    key: FlexTPDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: etlDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPEnvNonProdBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPJSONBuildStatus
    requiresValue: false
    showOnReleaseStart: false
    description: FlexTP Global Seed Data JSON build status
  - type: xlrelease.StringVariable
    key: FlexTPDVTRunBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTDeployBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStopKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveDeployKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStartKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStopKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingDeployKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStartKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStopKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDeployKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStartKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPEnvNonKSCProdBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPJSONBuildStatusKSC
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTDeployBuildStatusRel2KSC
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPFSDOverride-Rel2-KSC-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTKSCRunBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonPR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: ai-garage-validatorPR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: AIGarageValidatorBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: AIGarageValidatorArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: artifact.flextp-oel6.version
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: artifact.flextp-oel7.version
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackSite
    requiresValue: false
    showOnReleaseStart: false
    description: "For STL, set to WNG, for KSC set to KC"
    value: KC
  - type: xlrelease.StringVariable
    key: FlextpFlatpackRealTimeServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackUDTManagementServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackNearRealTimeServersInvolved
    value: "rsk0stl101, rsk0stl125, rsk0stl52"
  - type: xlrelease.StringVariable
    key: FlextpFlatpackAEM2DWServersInvolved
  - type: xlrelease.StringVariable
    key: FlextpFlatpackNotificationServersInvolved
  - type: xlrelease.StringVariable
    key: release
  extensions:
  - name: Dashboard
    type: xlrelease.Dashboard
    owner: e025882
    tiles:
    - name: Release progress
      type: xlrelease.ReleaseProgressTile
    - name: Release summary
      type: xlrelease.ReleaseSummaryTile
    - name: Resource usage
      type: xlrelease.ResourceUsageTile
    - name: Release timeline
      type: xlrelease.TimelineTile
    - name: Release health
      type: xlrelease.ReleaseHealthTile
    - name: Grid
      type: xlrelease.TaskProgressTile
      row: 2
      col: 2
      tags:
      - grid
    - name: FlexTP
      type: xlrelease.TaskProgressTile
      row: 3
      col: 0
      tags:
      - flextp
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 3
      col: 1
  riskProfile: Default risk profile
- template: PEAT-TX-PROCESSING-KSC-22.5
  description: Version 22.5 for PEAT DIP
  scheduledStartDate: 2019-02-06T09:00:00-06:00
  phases:
  - phase: XLR Release
    tasks:
    - name: Add Release tag
      type: xlr.AddTag
      newTag: "${release}"
    color: '#0079BC'
  - phase: Tx Processing Deployment
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      owner: e081728
      team: SCSSPeatDeployment
    - name: All Transactions
      type: xlrelease.ParallelGroup
      tasks:
      - name: Transaction Sequential
        type: xlrelease.SequentialGroup
        tasks:
        - name: Stop FlexTP Instances - KSC
          type: xlrelease.SequentialGroup
          tags:
          - flextp
          - KSC
          tasks:
          - name: HM Stop Site
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Stop all instances associated with the site WNG
              stop site -s KC

              7. Verify all instances stopped using the view status command.
        - name: Grid - KSC
          type: xlrelease.SequentialGroup
          tags:
          - grid
          - KSC
          tasks:
          - name: Stop Grid
            type: xlrelease.SequentialGroup
            tags:
            - grid
            - KSC
            tasks:
            - name: Stop all members
              type: xlrelease.SequentialGroup
              tags:
              - grid
              - KSC
              tasks:
              - name: Stop Grid Staging Server 2 - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - grid
                - staging_grid_server2
                - KSC
              - name: Stop Grid Staging Server - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server
                - grid
                - KSC
              - name: Stop Grid Staging Locator - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_locator
                - grid
                - KSC
              - name: Habitat Live Grid Worker Stop
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_worker
                - live_grid
                - grid
                - KSC
              - name: Habitat Live Grid Server Stop
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_server
                - live_grid
                - grid
                - KSC
              - name: Habitat Live Grid Locator Stop
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_locator
                - live_grid
                - grid
                - KSC
            - name: "Status: validate Grid is down"
              type: xlrelease.SequentialGroup
              tags:
              - live_grid
              - grid
              - KSC
              tasks:
              - name: Status Staging Grid Locator - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - grid
                - staging_grid_server2
                - KSC
              - name: Status Staging Grid Server - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server
                - grid
                - KSC
              - name: Status Staging Grid Server 2 - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_locator
                - grid
                - KSC
              - name: Status Live Grid Locator - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_worker
                - live_grid
                - grid
                - KSC
              - name: Status Live Grid Server - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_server
                - live_grid
                - grid
                - KSC
              - name: Status Live Grid Worker - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_locator
                - live_grid
                - grid
                - KSC
              - name: Validate Status is Down
                type: xlrelease.GateTask
                description: Jenkin's jobs should show that "status" is "down"
                tags:
                - grid
                - KSC
          - name: Promote Grid - KSC
            type: xlrelease.SequentialGroup
            tags:
            - grid
            - KSC
            tasks:
            - name: TOML Live and Staging
              type: xlrelease.SequentialGroup
              precondition: "False"
              tags:
              - TOML
              - live_grid
              tasks:
              - name: Deploy Live Grid Locator TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_locator
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - live_grid_locator
                - live_grid
              - name: Deploy Live Grid Server TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_server
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - live_grid_server
                - live_grid
              - name: Deploy Live Grid Worker TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_worker
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - live_grid_worker
                - live_grid
              - name: Deploy Staging Grid Locator TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/staging_grid_locator
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - staging_grid_locator
                - TOML
                - Habitat
                - grid
                - staging_grid
              - name: Deploy Staging Grid Server TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/staging_grid_server
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - staging_grid
                - staging_grid_server
              - name: Deploy Live Grid Server 2 TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/staging_grid_server2
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - staging_grid_server2
                - staging_grid
            - name: Promote Live Grid
              type: xlrelease.SequentialGroup
              tags:
              - grid
              - live_grid
              tasks:
              - name: Promote Live Grid Locator- KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/live_grid_locator-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-live-locator.version}
                  channel=peat-ksc
                  dryRun=false
                  platform=linux_kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/live_grid_locator-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_locator
                - live_grid
                - grid
                - Habitat
              - name: Promote Live Grid Server - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/live_grid_server-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-live-server.version}
                  channel=peat-ksc
                  dryRun=false
                  platform=linux_kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/live_grid_server-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_server
                - live_grid
                - grid
                - Habitat
              - name: Promote Live Grid Worker - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/live_grid_worker-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-live-worker.version}
                  channel=peat-ksc
                  dryRun=false
                  platform=linux_kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/live_grid_worker-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_worker
                - live_grid
                - grid
                - Habitat
            - name: Promote Staging Grid
              type: xlrelease.SequentialGroup
              tags:
              - staging_grid
              - grid
              tasks:
              - name: Promote Staging Grid Locator- KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/staging_grid_locator-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-staging-locator.version}
                  channel=peat-ksc
                  dryRun=false
                  platform=linux_kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/staging_grid_locator-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_locator
                - staging_grid
                - grid
                - Habitat
              - name: Promote Staging Grid Server - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/staging_grid_server-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-staging-server.version}
                  channel=peat-ksc
                  dryRun=false
                  platform=linux_kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/staging_grid_server-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server
                - staging_grid
                - grid
                - Habitat
              - name: Promote Staging Grid Server 2 - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/staging_grid_server2-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-staging-server2.version}
                  channel=peat-ksc
                  dryRun=false
                  platform=linux_kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/staging_grid_server2-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server2
                - staging_grid
                - grid
                - Habitat
          - name: Start Grid - KSC
            type: xlrelease.SequentialGroup
            tags:
            - grid
            tasks:
            - name: Live Grid
              type: xlrelease.SequentialGroup
              tags:
              - live_grid
              - grid
              tasks:
              - name: Start Live Grid Locator - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_locator
                - live_grid
                - grid
                - Habitat
              - name: Start Live Grid Server - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_server
                - live_grid
                - grid
                - Habitat
              - name: Start Live Grid Worker - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_worker
                - live_grid
                - grid
                - Habitat
              - name: Status
                type: xlrelease.SequentialGroup
                tasks:
                - name: Status Live Grid Locator
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/KSC/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - live_grid_locator
                  - live_grid
                  - grid
                  - Habitat
                - name: Status Live Grid Server
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/KSC/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - live_grid_server
                  - live_grid
                  - grid
                  - Habitat
                - name: Status Live Grid Worker
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/KSC/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - live_grid_worker
                  - live_grid
                  - grid
                  - Habitat
                - name: Validate Status is Up
                  type: xlrelease.GateTask
                  description: Jenkin's jobs should show that "status" is "up"
                  tags:
                  - grid
            - name: Staging Grid
              type: xlrelease.SequentialGroup
              tags:
              - staging_grid
              - grid
              tasks:
              - name: Start Staging Grid Locator - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_locator
                - staging_grid
                - grid
                - Habitat
              - name: Start Staging Grid Server - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server
                - staging_grid
                - grid
                - Habitat
              - name: Start Staging Grid Server 2 - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server2
                - staging_grid
                - grid
                - Habitat
              - name: Status
                type: xlrelease.SequentialGroup
                tasks:
                - name: Status Staging Grid Locator
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/KSC/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - staging_grid_locator
                  - staging_grid
                  - grid
                  - Habitat
                - name: Status Staging Grid Server
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/KSC/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - staging_grid_server
                  - staging_grid
                  - grid
                  - Habitat
                - name: Status Staging Grid Server 2
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/status
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/KSC/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - staging_grid_server2
                  - staging_grid
                  - grid
                  - Habitat
                - name: Validate Status is Up
                  type: xlrelease.GateTask
                  description: Jenkin's jobs should show that "status" is "up"
            - name: Validate Grid - KSC has been deployed
              type: xlrelease.GateTask
              description: |-
                Login to rsk0stl65/66/67/68 and rsk0stl16

                cd /apps_01/fraud

                ls -ltr

                The grid symbolic link should point to the version you had deployed.
              tags:
              - live_grid
              - grid
        - name: Habitat- Host Manager Deployment - KSC
          type: xlrelease.SequentialGroup
          tags:
          - Habitat
          - HM
          tasks:
          - name: Habitat
            type: xlrelease.SequentialGroup
            tags:
            - Habitat
            tasks:
            - name: KSC
              type: xlrelease.SequentialGroup
              tags:
              - KSC
              tasks:
              - name: TOML
                type: xlrelease.SequentialGroup
                precondition: "False"
                tags:
                - TOML
                tasks:
                - name: TOML-FlexTP-KSC
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-KSC/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-KSC/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - TOML
                  - flextp
                  - HM
                - name: "Sleep ${folder.metadata.time} seconds"
                  type: xlrelease.ScriptTask
                  script: |-
                    import time
                    time.sleep(${folder.metadata.time})
                    print "Done Sleeping"
                - name: Validate TOML
                  type: xlrelease.GateTask
                  tags:
                  - TOML
              - name: Promote - flextp_host_manager  - KSC - linux_kernel2
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.flextp_oel6_version}
                  channel=peat-ksc
                  platform=linux_kernel2
                  contactList=Chandra.Nerella@mastercard.com
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - flextp
                - HM
                - Habitat
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
              - name: Promote - flextp_host_manager - KSC - linux
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.flextp+oel7_version}
                  channel=peat-ksc
                  platform=linux
                  contactList=Chandra.Nerella@mastercard.com
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - flextp
                - HM
                - Habitat
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
              - name: Status - Host Manager - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-ksc-peat/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-ksc-peat/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - flextp
                - Habitat
                - HM
              - name: Validation host manager
                type: xlrelease.GateTask
                description: |-
                  On the Hosts ${folder.all_peat_ksc_servers} perform the below steps

                  1. Login to the box and Switch to fraud user
                  2. cd /apps_01/fruad/hubernetes/bin
                  3. run './h8s_version.sh'
                  4. The Host Manager Configuration version must match - ${folder.artifact.host-manager-configuration.version}
                  5. Host Manger CLI version must match ${folder.host_manager_cli_version}
                  6. Host Manager version must match ${folder.host_manager_version}
                tags:
                - HM
        - name: HM Deploy Flatpack - KSC
          type: xlrelease.SequentialGroup
          tasks:
          - name: Deploy Flatpack for All Channels
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Run deploy flatpack command
              deploy flatpack -s KC

              Before Selecting the "Y" option  validate all flatpack version to match with apmate.
        - name: HM Recreate Site - KSC
          type: xlrelease.SequentialGroup
          tasks:
          - name: Recreate All Hosts in Site
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Recreate host with Force option
              recreate site -s KC -f

              7. use view status with the request id to check the status of the command. The command should complete to success.
        - name: HM Start Hosts - KSC
          type: xlrelease.SequentialGroup
          precondition: "False"
          tasks:
          - name: Start All Instances
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Start hosts
              start site -s KC

              7. Verify all instances started using the view status command.
        - name: grid-udt-daemon Deploy
          type: xlrelease.SequentialGroup
          precondition: "False"
          tasks:
          - name: Skip
            type: xlrelease.SequentialGroup
            precondition: "False"
            tasks:
            - name: Deploy grid-udt-daemon - Automation
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd
              username: dmp_xlr
              jobName: ChefObjectPipeline/ESS/mc_dmp_chef_objects_nonprod
              description: |-
                Deploy grid-udt-daemon
                       1.  Deployment using Chef model
                             i. Merge the PR ${GridUDTDaemonPR}
                            ii. Ensure master build is successful- https://cd3.mastercard.int/jenkins/job/ChefObjectPipeline/job/ESS/job/mc_dmp_chef_objects_nonprod/
              variableMapping:
                pythonScript.buildStatus: "${GridUDTDaemonBuildStatus}"
              tags:
              - Flextp
              - AIGarage
            - name: Deploy grid-udt-daemon - Manual
              type: xlrelease.Task
              description: |-
                | *Artifact Name(s)*:       | grid-udt-daemon-${GridUDTDaemonArtifactVersion}.jar |
                | *Servers to STAGE ON*:       | rsk0stl53, rsk0stl54 |
                | *Dev Contact*:                         | Sharks Team |

                1. Create directories
                ```
                       1.  Login to the server; sesudo fraud;
                       2.  Create grid-udt-daemon Folder
                          mkdir -p /apps_01/webapps/standalone/grid-udt-daemon
                       3.  Create conf, lib, bin, logs directories
                           a.     mkdir /apps_01/webapps/standalone/grid-udt-daemon/logs
                           b.    mkdir /apps_01/webapps/standalone/grid-udt-daemon/bin
                           c.    mkdir /apps_01/webapps/standalone/grid-udt-daemon/conf
                           d.    mkdir /apps_01/webapps/standalone/grid-udt-daemon/lib ```
                2. Download files
                ```
                    1. cd /apps_01/webapps/standalone/grid-udt-daemon/lib
                    2.    wget https://artifacts.mastercard.int/artifactory/releases/com/mastercard/risk/dmp/grid/grid-udt-daemon/${GridUDTDaemonArtifactVersion}/grid-udt-daemon-${GridUDTDaemonArtifactVersion}.jar -o grid-udt-daemon.jar
                   3.    cd /apps_01/webapps/standalone/grid-udt-daemon/conf
                   4.    wget https://globalrepository.mclocal.int/stash/projects/ESSDMP-BATCH/repos/grid-udt-loader-daemon/raw/src/main/resources/config/udt-job-template.json```
              precondition: "not releasevariable['GridUDTDaemonBuildStatus']"
              tags:
              - Flextp
              - AIGarage
            - name: Start grid-udt-daemon - Manual
              type: xlrelease.Task
              description: |-
                1. Start application
                ```
                   1.    cd /apps_01/webapps/standalone/grid-udt-daemon/
                   2.    /apps_01/fraud/java1.8/bin/java  -verbose:gc -Xloggc:/apps_01/webapps/standalone/grid-udt-daemon/logs/gc.log -XX:+PrintGCDateStamps -XX:+PrintGCDetails -Xms512m -Xmx1024m -jar /apps_01/webapps/standalone/grid-udt-daemon/lib/grid-udt-daemon.jar ```
              precondition: "${GridUDTDaemonBuildStatus}"
              tags:
              - Flextp
              - AIGarage
            - name: Deployment verification
              type: xlrelease.Task
              description: |-
                Deployment verification
                ```
                       1.    cd /apps_01/webapps/standalone/
                       2.    ls -asl
                       3.    check if grid-udt-daemon application is available under fraud/rsksys user and group
                       4.    ps -ef | grep grid-udt-daemon
                       5.    If the application has started, Look up logs: cd
                                      /apps_01/webapps/standalone/grid-udt-daemon/logs
                       6.    Tail -f grid-udt-daemon.log```
              tags:
              - Flextp
              - AIGarage
          - name: Habitat
            type: xlrelease.SequentialGroup
            tasks:
            - name: TOML - grid-udt-daemon
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              jobParameters: |-
                habChannel=peat
                habServiceGroup=stage
                habService=decision_processing/grid_udt_daemon
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            - name: "Sleep ${folder.metadata.time} seconds"
              type: xlrelease.ScriptTask
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: Promotion - grid-udt-daemon
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              jobParameters: |-
                artifactAndPackage=grid-udt-daemon decision_processing/grid_udt_daemon
                promoteToChannel=peat
                platform=linux
                dryRun=false
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            - name: status - grid-udt-daemon
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
              jobParameters: |-
                habEnv=peat
                habService=decision_processing/grid_udt_daemon
                habCommand=status
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            - name: Validation
              type: xlrelease.GateTask
        - name: ai-garage-validator Deploy
          type: xlrelease.SequentialGroup
          precondition: "False"
          tasks:
          - name: SKIP
            type: xlrelease.SequentialGroup
            precondition: "False"
            tasks:
            - name: Deploy ai-garage-validator  - Automation
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd
              username: dmp_xlr
              jobName: ChefObjectPipeline/ESS/mc_dmp_chef_objects_nonprod
              description: |-
                Deploy ai-garage-validator
                       1.  Deployment using Chef model
                             i. Merge the PR ${ai-garage-validatorPR}
                            ii. Ensure master build is successful- https://cd3.mastercard.int/jenkins/job/ChefObjectPipeline/job/ESS/job/mc_dmp_chef_objects_nonprod/
              variableMapping:
                pythonScript.buildStatus: "${AIGarageValidatorBuildStatus}"
              tags:
              - Flextp
              - AIGarage
            - name: Deploy ai-garage-validator - Manual
              type: xlrelease.Task
              description: |-
                | *Artifact Name(s)*:       | ai-garage-validator-${AIGarageValidatorArtifactVersion}.jar |
                | *Servers to STAGE ON*:       | rsk0stl53, rsk0stl54 |
                | *Dev Contact*:                         | Sharks Team |

                1. Create directories
                ```
                       1.  Login to the server; sesudo fraud;
                       2.  Create ai-garage-validator  Folder
                          mkdir -p /apps_01/webapps/standalone/ai-garage-validator
                       3.  Create conf, lib, bin, logs directories
                           a.     mkdir /apps_01/webapps/standalone/ai-garage-validator/logs
                           b.    mkdir /apps_01/webapps/standalone/ai-garage-validator/bin
                           c.    mkdir /apps_01/webapps/standalone/ai-garage-validator/conf
                           d.    mkdir /apps_01/webapps/standalone/ai-garage-validator/lib ```
                2. Download files
                ```
                        1. cd /apps_01/webapps/standalone/ai-garage-validator/lib
                        2.    wget https://artifacts.mastercard.int/artifactory/releases/com/mastercard/rst/ai-garage-validator/${AIGarageValidatorArtifactVersion}/ai-garage-validator-${AIGarageValidatorArtifactVersion}.jar -o ai-garage-validator.jar
                ```
              precondition: "not releasevariable['AIGarageValidatorBuildStatus']"
              tags:
              - Flextp
              - AIGarage
            - name: Start ai-garage-validator - Manual
              type: xlrelease.Task
              description: |-
                1. Start application
                ```
                   1.    cd /apps_01/webapps/standalone/ai-garage-validator/
                   2.  Execute Below test:
                           a.    If Java Exists:
                                    i.    /apps_01/fraud/java1.8/bin/java  -verbose:gc -
                 Xloggc:/apps_01/webapps/standalone/ai-garage-validator/logs/gc.log -XX:+PrintGCDateStamps -XX:+PrintGCDetails -Xms512m -Xmx1024m -jar /apps_01/webapps/standalone/ai-garage-validator/lib/ai-garage-validator.jar suites/endToEnd.xml
                         b.    If Zing exists:
                                   i.    /apps_01/fraud/zing/bin/java  -verbose:gc -Xloggc:/apps_01/webapps/standalone/ai-garage-validator/logs/gc.log -XX:+PrintGCDateStamps -XX:+PrintGCDetails -Xms512m -Xmx1024m -jar /apps_01/webapps/standalone/ai-garage-validator/lib/ai-garage-validator.jar suites/endToEnd.xml
                ```
              precondition: "not releasevariable['AIGarageValidatorBuildStatus']"
              tags:
              - Flextp
              - AIGarage
            - name: Deployment verification ai-garage-validator - Manual
              type: xlrelease.Task
              description: |-
                Deployment verification
                ```
                       1.    cd /apps_01/webapps/standalone/
                       2.    ls -asl
                       3.      check if ai-garage-validator application is available under fraud/rsksys user and group```
              tags:
              - Flextp
              - AIGarage
          - name: Habitat
            type: xlrelease.SequentialGroup
            tasks:
            - name: TOML-ai-garage
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              jobParameters: |-
                habChannel=peat
                habServiceGroup=stage
                habService=decision_processing/ai-garage-validator
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - TOML
              - ai_garage
              - Habitat
            - name: "Sleep ${folder.metadata.time} seconds"
              type: xlrelease.ScriptTask
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: Promote-AI-Garage
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              jobParameters: |-
                artifactAndPackage=ai-garage-validator decision_processing/ai-garage-validator
                promoteToChannel=peat
                platform=linux
                dryRun=false
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - ai_garage
              - Habitat
            - name: Validate-AI-Garage
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
              jobParameters: |-
                habEnv=peat
                habService=decision_processing/ai-garage-validator
                habCommand=status
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - ai_garage
              - Habitat
    color: '#0099CC'
  tags:
  - "22.5"
  variables:
  - type: xlrelease.StringVariable
    key: FlexTPDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: etlDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPEnvNonProdBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPJSONBuildStatus
    requiresValue: false
    showOnReleaseStart: false
    description: FlexTP Global Seed Data JSON build status
  - type: xlrelease.StringVariable
    key: FlexTPDVTRunBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTDeployBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStopKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveDeployKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStartKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStopKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingDeployKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStartKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStopKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDeployKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStartKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPEnvNonKSCProdBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPJSONBuildStatusKSC
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTDeployBuildStatusRel2KSC
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPFSDOverride-Rel2-KSC-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTKSCRunBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonPR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: ai-garage-validatorPR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: AIGarageValidatorBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: AIGarageValidatorArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: artifact.flextp-oel6.version
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: artifact.flextp-oel7.version
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackSite
    requiresValue: false
    showOnReleaseStart: false
    description: "For STL, set to WNG, for KSC set to KC"
    value: KC
  - type: xlrelease.StringVariable
    key: FlextpFlatpackRealTimeServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackUDTManagementServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackNearRealTimeServersInvolved
    value: "rsk0stl101, rsk0stl125, rsk0stl52"
  - type: xlrelease.StringVariable
    key: FlextpFlatpackAEM2DWServersInvolved
  - type: xlrelease.StringVariable
    key: FlextpFlatpackNotificationServersInvolved
  - type: xlrelease.StringVariable
    key: release
  extensions:
  - name: Dashboard
    type: xlrelease.Dashboard
    owner: e025882
    tiles:
    - name: Release progress
      type: xlrelease.ReleaseProgressTile
    - name: Release summary
      type: xlrelease.ReleaseSummaryTile
    - name: Resource usage
      type: xlrelease.ResourceUsageTile
    - name: Release timeline
      type: xlrelease.TimelineTile
    - name: Release health
      type: xlrelease.ReleaseHealthTile
    - name: Grid
      type: xlrelease.TaskProgressTile
      row: 2
      col: 2
      tags:
      - grid
    - name: FlexTP
      type: xlrelease.TaskProgressTile
      row: 3
      col: 0
      tags:
      - flextp
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 3
      col: 1
  riskProfile: Default risk profile
- template: PEAT-TX-PROCESSING-KSC-22.6
  description: This Template mirrors the PEAT DIP
  scheduledStartDate: 2019-02-06T09:00:00-06:00
  phases:
  - phase: XLR Release
    tasks:
    - name: Add Release tag
      type: xlr.AddTag
      newTag: "${release}"
      team: SCSSPeatDeployment
      tags:
      - '#bizops'
    color: '#0079BC'
  - phase: Tx Processing Deployment
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      team: SCSSPeatDeployment
      tags:
      - '#bizops'
    - name: All Transactions
      type: xlrelease.ParallelGroup
      tasks:
      - name: Transaction Sequential
        type: xlrelease.SequentialGroup
        tasks:
        - name: Stop FlexTP Instances - KSC
          type: xlrelease.SequentialGroup
          tags:
          - flextp
          - KSC
          tasks:
          - name: HM Stop Site
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Stop all instances associated with the site WNG
              stop site -s KC

              7. Verify all instances stopped using the view status command.
            team: SCSSPeatDeployment
            tags:
            - '#bizops'
        - name: Grid - KSC
          type: xlrelease.SequentialGroup
          tags:
          - grid
          - KSC
          tasks:
          - name: Stop Grid
            type: xlrelease.SequentialGroup
            tags:
            - grid
            - KSC
            tasks:
            - name: Stop staging grid (manual)
              type: xlrelease.Task
              description: |-
                - Log into rsk0stl16
                - `sesudo fraud`
                - `cd grid_REL2/scripts`
                - `./gfsh.sh`
                - `connect --locator=localhost[15000]`
                - `shutdown`
                - `list members`. Only the locator process should be present.
                - `shutdown --include-locators=true`
                - GFSH will disconnect.
                - `exit`. You will leave gfsh.
            - name: Stop live grid (manual)
              type: xlrelease.Task
              description: |-
                - Log into rsk0stl65
                - `sesudo fraud`
                - `cd grid_REL2/scripts`
                - `./gfsh.sh`
                - `connect --locator=localhost[15000]`
                - `shutdown`
                - `list members`. Only the locator process should be present.
                - `shutdown --include-locators=true`
                - GFSH will disconnect.
                - `exit`. You will leave gfsh.
            - name: Validate no Grid processes running
              type: xlrelease.Task
              description: '`ps -ef | grep pivotal` should list no Java results.'
          - name: Promote Grid - KSC
            type: xlrelease.SequentialGroup
            tags:
            - grid
            - KSC
            tasks:
            - name: TOML Live and Staging
              type: xlrelease.SequentialGroup
              precondition: "False"
              tags:
              - TOML
              - live_grid
              tasks:
              - name: Deploy Live Grid Locator TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_locator
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - '#bizops'
                - Habitat
                - grid
                - live_grid_locator
                - live_grid
              - name: Deploy Live Grid Server TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_server
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - '#bizops'
                - Habitat
                - grid
                - live_grid_server
                - live_grid
              - name: Deploy Live Grid Worker TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_worker
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - '#bizops'
                - Habitat
                - grid
                - live_grid_worker
                - live_grid
              - name: Deploy Staging Grid Locator TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/staging_grid_locator
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - staging_grid_locator
                - TOML
                - '#bizops'
                - Habitat
                - grid
                - staging_grid
              - name: Deploy Staging Grid Server TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/staging_grid_server
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - '#bizops'
                - Habitat
                - grid
                - staging_grid
                - staging_grid_server
              - name: Deploy Live Grid Server 2 TOML - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-ksc
                  habServiceGroup=peat
                  habService=decision_processing/staging_grid_server2
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - '#bizops'
                - Habitat
                - grid
                - staging_grid_server2
                - staging_grid
            - name: Deploy grid (manual)
              type: xlrelease.Task
              description: |-
                - For each of the following servers:
                    - rsk0stl65, rsk0stl66, rsk0stl119, rsk0stl120, rsk0stl16
                - `sesudo fraud`
                - `cd staging`
                - `wget --no-check-certificate https://artifacts.mastercard.int/artifactory/releases/com/mastercard/risk/grid/GridConfig/${folder.GridConfig_version}/GridConfig-${folder.GridConfig_version}-package.zip`
                - `../bin/grid_deploy.sh ./GridConfig-${folder.GridConfig_version}-package.zip`
                - `../bin/grid_deploy.sh ./GridConfig-${folder.GridConfig_version}-package.zip -s`
            - name: Validate grid deployment (manual)
              type: xlrelease.GateTask
              description: |-
                For each of the following servers: rsk0stl65, rsk0stl66, rsk0stl119, rsk0stl120, rsk0stl16
                - `sesudo fraud`
                - `readlink grid_REL2` should point to `/apps_01/fraud/grid_builds_REL2/GridConfig-${folder.GridConfig_version}`

                For rsk0stl65, rsk0stl66, rsk0stl119, rsk0stl120

                - `cat grid_REL2/config/env.config | grep SERVERS_WNG` should show rsk0stl65 rsk0stl66 rsk0stl119 rsk0stl120
                - `cat grid_REL2/config/env.config | grep LOCATOR_WNG` should show rsk0stl65 rsk0stl66
                - `cat grid_REL2/config/env.config | grep WORKERS_WNG` should show rsk0stl65 rsk0stl66

                For rsk0stl16:

                - `cat grid_REL2/config/env.config | grep SERVERS_WNG` should show rsk0stl16
                - `cat grid_REL2/config/env.config | grep LOCATOR_WNG` should show rsk0stl16
                - `cat grid_REL2/config/env.config | grep LIVE_LOCATORS_WNG` should show rsk0stl65
          - name: Start Grid - KSC
            type: xlrelease.SequentialGroup
            tags:
            - grid
            tasks:
            - name: Start live grid (manual)
              type: xlrelease.Task
              description: |-
                For each of the following servers: rsk0stl65, rsk0stl66
                - `grid_REL2/scripts/startLocator.sh`
                - Wait until you receive a startup complete message
                - `grid_REL2/scripts/gfsh.sh -e "connect --locator=localhost[15000]"` should show "Connected to localhost[15000]"

                For each of the following servers: rsk0stl65, rsk0stl66, rsk0stl119, rsk0stl120
                - `grid_REL2/scripts/startPhysicalMachine.sh`
                - Wait until you receive a startup complete message
            - name: Start staging grid (manual)
              type: xlrelease.Task
              description: |-
                - For each of the following servers:
                  - rsk0stl16
                - `grid_REL2/scripts/startLocator.sh`
                - `grid_REL2/scripts/gfsh.sh -e "connect --locator=localhost[15000]"` should show "Connected to localhost[15000]"

                - For each of the following servers:
                  - rsk0stl16
                - `grid_REL2/scripts/startPhysicalMachine.sh`
                - Wait for a few minutes

                - For rsk0stl16
                - `grid_REL2/scripts/gfsh.sh -e "connect --locator=localhost[15000]"-e "list members"` should show rsk0stl16-locator1, rsk0stl16-server1, rsk0stl16-server2
            - name: Validate grid is started (manual)
              type: xlrelease.GateTask
              description: |-
                For rsk0stl65
                - `grid_REL2/scripts/gfsh.sh -e "connect --locator=localhost[15000]" -e "list members"` should show rsk0stl65-locator1, rsk0stl65-server1, rsk0stl65-worker1, rsk0stl66-locator1, rsk0stl66-server1, rsk0stl66-worker1, rsk0stl119-server1, rsk0stl120-server1

                For rsk0stl16
                - `grid_REL2/scripts/gfsh.sh -e "connect --locator=localhost[15000]" -e "list members"` should show rsk0stl16-locator1, rsk0stl16-server1, rsk0stl16-server2
        - name: Habitat- Host Manager Deployment - KSC
          type: xlrelease.SequentialGroup
          tags:
          - Habitat
          - HM
          tasks:
          - name: Habitat
            type: xlrelease.SequentialGroup
            tags:
            - Habitat
            tasks:
            - name: KSC
              type: xlrelease.SequentialGroup
              tags:
              - KSC
              tasks:
              - name: TOML
                type: xlrelease.SequentialGroup
                precondition: "False"
                tags:
                - TOML
                tasks:
                - name: TOML-FlexTP-KSC
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-KSC/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-KSC/
                  team: SCSSPeatDeployment
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - TOML
                  - flextp
                  - HM
                  - '#bizops'
                - name: "Sleep ${folder.metadata.time} seconds"
                  type: xlrelease.ScriptTask
                  team: SCSSPeatDeployment
                  tags:
                  - '#bizops'
                  script: |-
                    import time
                    time.sleep(${folder.metadata.time})
                    print "Done Sleeping"
                - name: Validate TOML
                  type: xlrelease.GateTask
                  team: SCSSPeatDeployment
                  tags:
                  - TOML
                  - '#bizops'
              - name: Promote - flextp_host_manager  - KSC - linux_kernel2
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.flextp_oel6_version}
                  channel=peat-ksc
                  platform=linux_kernel2
                  contactList=Chandra.Nerella@mastercard.com
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - flextp
                - HM
                - Habitat
                - '#bizops'
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                team: SCSSPeatDeployment
                tags:
                - '#bizops'
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
              - name: Promote - flextp_host_manager - KSC - linux
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.flextp+oel7_version}
                  channel=peat-ksc
                  platform=linux
                  contactList=Chandra.Nerella@mastercard.com
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - flextp
                - HM
                - Habitat
                - '#bizops'
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                team: SCSSPeatDeployment
                tags:
                - '#bizops'
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
              - name: Status - Host Manager - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-ksc-peat/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-ksc-peat/
                team: SCSSPeatDeployment
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - flextp
                - Habitat
                - HM
                - '#bizops'
              - name: Validation host manager
                type: xlrelease.GateTask
                description: |-
                  On the Hosts ${folder.all_peat_ksc_servers} perform the below steps

                  1. Login to the box and Switch to fraud user
                  2. cd /apps_01/fruad/hubernetes/bin
                  3. run './h8s_version.sh'
                  4. The Host Manager Configuration version must match - ${folder.artifact.host-manager-configuration.version}
                  5. Host Manger CLI version must match ${folder.host_manager_cli_version}
                  6. Host Manager version must match ${folder.host_manager_version}
                team: SCSSPeatDeployment
                tags:
                - HM
                - '#bizops'
        - name: HM Deploy Flatpack - KSC
          type: xlrelease.SequentialGroup
          tasks:
          - name: Deploy Flatpack for All Channels
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Run deploy flatpack command
              deploy flatpack -s KC

              Before Selecting the "Y" option  validate all flatpack version to match with apmate.
            team: SCSSPeatDeployment
            tags:
            - '#bizops'
        - name: HM Recreate Site - KSC
          type: xlrelease.SequentialGroup
          tasks:
          - name: Recreate All Hosts in Site
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Recreate host with Force option
              recreate site -s KC -f

              7. use view status with the request id to check the status of the command. The command should complete to success.
            team: SCSSPeatDeployment
            tags:
            - '#bizops'
        - name: HM Start Hosts - KSC
          type: xlrelease.SequentialGroup
          precondition: "False"
          tasks:
          - name: Start All Instances
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Start hosts
              start site -s KC

              7. Verify all instances started using the view status command.
            team: SCSSPeatDeployment
            tags:
            - '#bizops'
    color: '#0099CC'
  tags:
  - "22.6"
  variables:
  - type: xlrelease.StringVariable
    key: FlexTPDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: etlDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPEnvNonProdBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPJSONBuildStatus
    requiresValue: false
    showOnReleaseStart: false
    description: FlexTP Global Seed Data JSON build status
  - type: xlrelease.StringVariable
    key: FlexTPDVTRunBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTDeployBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStopKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveDeployKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStartKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStopKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingDeployKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStartKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStopKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDeployKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStartKSCBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPEnvNonKSCProdBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPJSONBuildStatusKSC
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTDeployBuildStatusRel2KSC
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPFSDOverride-Rel2-KSC-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTKSCRunBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonPR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: ai-garage-validatorPR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: AIGarageValidatorBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: AIGarageValidatorArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: artifact.flextp-oel6.version
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: artifact.flextp-oel7.version
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackSite
    requiresValue: false
    showOnReleaseStart: false
    description: "For STL, set to WNG, for KSC set to KC"
    value: KC
  - type: xlrelease.StringVariable
    key: FlextpFlatpackRealTimeServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackUDTManagementServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackNearRealTimeServersInvolved
    value: "rsk0stl101, rsk0stl125, rsk0stl52"
  - type: xlrelease.StringVariable
    key: FlextpFlatpackAEM2DWServersInvolved
  - type: xlrelease.StringVariable
    key: FlextpFlatpackNotificationServersInvolved
  - type: xlrelease.StringVariable
    key: release
  extensions:
  - name: Dashboard
    type: xlrelease.Dashboard
    owner: e025882
    tiles:
    - name: Release progress
      type: xlrelease.ReleaseProgressTile
    - name: Release summary
      type: xlrelease.ReleaseSummaryTile
    - name: Resource usage
      type: xlrelease.ResourceUsageTile
    - name: Release timeline
      type: xlrelease.TimelineTile
    - name: Release health
      type: xlrelease.ReleaseHealthTile
    - name: Grid
      type: xlrelease.TaskProgressTile
      row: 2
      col: 2
      tags:
      - grid
    - name: FlexTP
      type: xlrelease.TaskProgressTile
      row: 3
      col: 0
      tags:
      - flextp
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 3
      col: 1
  riskProfile: Default risk profile
- template: PEAT-TX-PROCESSING-STL-22.3
  description: This Template mirrors the PEAT DIP
  scheduledStartDate: 2019-02-06T09:00:00-06:00
  phases:
  - phase: XLR Release
    tasks:
    - name: Add Release tag
      type: xlr.AddTag
      newTag: "${release}"
    color: '#0079BC'
  - phase: Tx Processing Deployment
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
    - name: All Transactions
      type: xlrelease.ParallelGroup
      tasks:
      - name: Transaction Sequential
        type: xlrelease.SequentialGroup
        tasks:
        - name: Stop Flextp Instances - STL
          type: xlrelease.SequentialGroup
          tags:
          - flextp
          tasks:
          - name: HM Stop Site
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Stop all instances associated with the site WNG
              stop site -s WNG

              7. Verify all instances stopped using the view status command.
        - name: Grid - STL
          type: xlrelease.SequentialGroup
          tags:
          - grid
          tasks:
          - name: Stop Grid
            type: xlrelease.SequentialGroup
            tags:
            - grid
            tasks:
            - name: Grid Staging
              type: xlrelease.SequentialGroup
              tags:
              - staging_grid
              - grid
              tasks:
              - name: Stop Staging Grid Server 2 - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server2
                - staging_grid
                - grid
                - Habitat
              - name: Stop Staging Grid Server - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server
                - staging_grid
                - grid
                - Habitat
              - name: Stop Grid Staging Locator - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_locator
                - staging_grid
                - grid
                - Habitat
              - name: Status
                type: xlrelease.SequentialGroup
                tasks:
                - name: Status Staging Grid Locator - STL
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - staging_grid_locator
                  - staging_grid
                  - grid
                  - Habitat
                - name: Status Staging Grid Server - STL
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - staging_grid_server
                  - staging_grid
                  - grid
                  - Habitat
                - name: Status Staging Grid Server 2 - STL
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - staging_grid_server2
                  - staging_grid
                  - grid
                  - Habitat
            - name: Grid Live
              type: xlrelease.SequentialGroup
              tags:
              - live_grid
              - grid
              tasks:
              - name: Habitat Live Grid Worker Stop - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/STL/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/STL/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_worker
                - live_grid
                - grid
                - Habitat
              - name: Stop Live Grid Server - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/STL/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/STL/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_locator
                - live_grid
                - grid
                - Habitat
              - name: Habitat Live Grid Locator Stop - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/STL/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/STL/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_locator
                - staging_grid
                - grid
              - name: Status
                type: xlrelease.SequentialGroup
                tasks:
                - name: Status Live Grid Locator - STL
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/STL/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/STL/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - live_grid_locator
                  - live_grid
                  - grid
                  - Habitat
                - name: Status Live Grid Server - STL
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/STL/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/STL/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - live_grid_server
                  - live_grid
                  - grid
                  - Habitat
                - name: Status Live Grid Worker - STL
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/STL/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/STL/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - live_grid_worker
                  - live_grid
                  - grid
                  - Habitat
                - name: Validate Status is Down
                  type: xlrelease.GateTask
                  description: Jenkin's jobs should show that "status" is "down"
          - name: Promote Grid
            type: xlrelease.SequentialGroup
            tags:
            - grid
            tasks:
            - name: TOML Live
              type: xlrelease.SequentialGroup
              precondition: "False"
              tags:
              - TOML
              - live_grid
              - grid
              tasks:
              - name: Deploy Live Grid Locator TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_locator
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - live_grid_locator
                - live_grid
              - name: Deploy Live Grid Server TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_server
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - live_grid_server
                - live_grid
              - name: Deploy Live Grid Worker TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_worker
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - live_grid_worker
                - live_grid
            - name: TOML Staging
              type: xlrelease.SequentialGroup
              precondition: "False"
              tags:
              - TOML
              - staging_grid
              tasks:
              - name: Deploy Staging Grid Locator TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/staging_grid_locator
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - staging_grid_locator
                - TOML
                - Habitat
                - grid
                - staging_grid
              - name: Deploy Staging Grid Server TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_server
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - staging_grid
                - staging_grid_server
              - name: Deploy Live Grid Worker TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/staging_grid_worker
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - staging_grid_server2
                - staging_grid
            - name: Promote Live Grid
              type: xlrelease.SequentialGroup
              tags:
              - live_grid
              - grid
              tasks:
              - name: Promote Live Grid Locator- STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/live_grid_locator-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-live-locator.version}
                  channel=peat-stl
                  dryRun=false
                  platform=linux-kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/live_grid_locator-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_locator
                - live_grid
                - grid
                - Habitat
              - name: Promote Live Grid Server - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/live_grid_locator-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-live-server.version}
                  channel=peat-stl
                  dryRun=false
                  platform=linux-kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/live_grid_locator-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_server
                - live_grid
                - grid
                - Habitat
              - name: Promote Live Grid Worker - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/live_grid_locator-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-live-worker.version}
                  channel=peat-stl
                  dryRun=false
                  platform=linux-kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/live_grid_locator-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_worker
                - live_grid
                - grid
                - Habitat
            - name: Promote Staging Grid
              type: xlrelease.SequentialGroup
              tags:
              - staging_grid
              - grid
              tasks:
              - name: Promote Staging Grid Locator- STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/staging_grid_locator-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-staging-locator.version}
                  channel=peat-stl
                  dryRun=false
                  platform=linux-kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/staging_grid_locator-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_locator
                - staging_grid
                - grid
                - Habitat
              - name: Promote Staging Grid Server - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/staging_grid_server-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-staging-server.version}
                  channel=peat-stl
                  dryRun=false
                  platform=linux-kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/staging_grid_server-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server
                - staging_grid
                - grid
                - Habitat
              - name: Promote Staging Grid Server2 - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/promote-specific-STL-peat-param
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-staging-server2.version}
                  channel=peat-stl
                  dryRun=false
                  platform=linux-kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/promote-specific-STL-peat-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_worker
                - live_grid
                - grid
                - Habitat
          - name: Start Grid - STL
            type: xlrelease.SequentialGroup
            tags:
            - grid
            tasks:
            - name: Live Grid
              type: xlrelease.SequentialGroup
              tags:
              - live_grid
              - grid
              tasks:
              - name: Start Live Grid Locator - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/STL/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/STL/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_locator
                - live_grid
                - grid
                - Habitat
              - name: Start Live Grid Server - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/STL/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/STL/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_server
                - live_grid
                - grid
                - Habitat
              - name: Start Live Grid Worker - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/STL/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/STL/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_worker
                - live_grid
                - grid
                - Habitat
              - name: Status
                type: xlrelease.SequentialGroup
                tasks:
                - name: Status Live Grid Locator - STL
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/STL/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/STL/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - live_grid_locator
                  - live_grid
                  - grid
                  - Habitat
                - name: Status Live Grid Server - STL
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/STL/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/STL/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - live_grid_server
                  - live_grid
                  - grid
                  - Habitat
                - name: Status Live Grid Worker - STL
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/STL/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/STL/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - live_grid_worker
                  - live_grid
                  - grid
                  - Habitat
                - name: Validate Status
                  type: xlrelease.GateTask
                  description: Jenkin's jobs should show that "status" is "up"
            - name: Staging Grid
              type: xlrelease.SequentialGroup
              tasks:
              - name: Start Staging Grid Locator - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_locator
                - staging_grid
                - grid
                - Habitat
              - name: Start Staging Grid Server - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server
                - staging_grid
                - grid
                - Habitat
              - name: Start Staging Grid Server 2 - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server2
                - staging_grid
                - grid
                - Habitat
              - name: Status
                type: xlrelease.SequentialGroup
                tasks:
                - name: Status Staging Grid Locator - STL
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - staging_grid_locator
                  - staging_grid
                  - grid
                  - Habitat
                - name: Status Staging Grid Server - STL
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - staging_grid_server
                  - staging_grid
                  - grid
                  - Habitat
                - name: Status Staging Grid Server 2 - STL
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - staging_grid_server2
                  - staging_grid
                  - grid
                  - Habitat
                - name: Validate Status
                  type: xlrelease.GateTask
                  description: |-
                    Jenkin's jobs should show that "status" is "up"

                    Login to rsk0stl61/62/63/64 and rsk0stl15

                    cd /apps_01/fraud

                    ls -ltr

                    The grid symbolic link should point to the version you had deployed.
        - name: Habitat- Host Manager Deployment - STL
          type: xlrelease.SequentialGroup
          tags:
          - HM
          - Habitat
          tasks:
          - name: Habitat
            type: xlrelease.SequentialGroup
            tags:
            - Habitat
            tasks:
            - name: TOML
              type: xlrelease.SequentialGroup
              precondition: "False"
              tags:
              - TOML
              tasks:
              - name: TOML-FlexTP-STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-STL/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-STL/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - TOML
                - flextp
                - HM
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
          - name: Promote - flextp_host_manager - STL - linux_kernel2
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
            jobParameters: |-
              packageIdent=${folder.flextp_oel6_version}
              channel=peat-stl
              platform=linux_kernel2
              contactList=Chandra.Nerella@mastercard.com
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - flextp
            - HM
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote - flextp_host_manager - STL - linux
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
            jobParameters: |-
              packageIdent=${folder.flextp+oel7_version}
              channel=peat-stl
              platform=linux
              contactList=Chandra.Nerella@mastercard.com
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - flextp
            - HM
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Status - Host Manager - STL
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-stl-peat/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-stl-peat/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - flextp
            - HM
            - Habitat
          - name: Validate Host Manager
            type: xlrelease.GateTask
            description: |-
              On the HOST LIST : ${folder.all_peat_stl_servers} perform the below steps

              1. Login to the box and Switch to fraud user
              2. cd /apps_01/fruad/hubernetes/bin
              3. run './h8s_version.sh'
              4. The Host Manager Configuration version must match - ${folder.artifact.host-manager-configuration.version}
              5. Host Manger CLI version must match ${folder.host_manager_cli_version}
              6. Host Manager version must match ${folder.artifact.host-manager.ver}
        - name: HM Deploy Flatpack - STL
          type: xlrelease.SequentialGroup
          tags:
          - HM
          tasks:
          - name: Deploy Flatpack for All Channels
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Run deploy flatpack command
              deploy flatpack -s WNG

              Before Selecting the "Y" option validate all flatpack version to match with apmate.
            tags:
            - Flatpack
            - HM
        - name: HM Recreate Site - STL
          type: xlrelease.SequentialGroup
          tags:
          - HM
          tasks:
          - name: Recreate Site - STL
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Recreate host with Force option
              recreate site -s WNG -f

              7. Use view status with the request id to check the status of the command. The command should show COMPLETED.
            tags:
            - HM
        - name: HM Start Hosts - STL
          type: xlrelease.SequentialGroup
          tags:
          - HM
          tasks:
          - name: Start All Instances
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Start hosts
              start site -s WNG

              7. Verify all instances started using the view status command.
            flagStatus: ATTENTION_NEEDED
            flagComment: will be manually started by PEAT team
            precondition: "False"
    color: '#0099CC'
  realFlagStatus: ATTENTION_NEEDED
  tags:
  - "22.3"
  variables:
  - type: xlrelease.StringVariable
    key: FlexTPDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: etlDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPEnvNonProdBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPJSONBuildStatus
    requiresValue: false
    showOnReleaseStart: false
    description: FlexTP Global Seed Data JSON build status
  - type: xlrelease.StringVariable
    key: FlexTPDVTRunBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTDeployBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPFSDOverride-Rel2-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: ETLDeploy-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: DEPLOYMENT_DIR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: TMP_BKUP_DIR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonPR
    requiresValue: false
    showOnReleaseStart: false
    value: https://fusion.mastercard.int/stash/projects/DECISION_MANAGEMENT/repos/mc_dmp_chef_objects_nonprod/pull-requests/126/overview
  - type: xlrelease.StringVariable
    key: GridUDTDaemonBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
    value: 1.6.0
  - type: xlrelease.StringVariable
    key: ai-garage-validatorPR
    requiresValue: false
    showOnReleaseStart: false
    value: https://fusion.mastercard.int/stash/projects/DECISION_MANAGEMENT/repos/mc_dmp_chef_objects_nonprod/pull-requests/126/overview
  - type: xlrelease.StringVariable
    key: AIGarageValidatorBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: AIGarageValidatorArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
    value: 0.1.2
  - type: xlrelease.StringVariable
    key: FlextpFlatpackSite
    requiresValue: false
    showOnReleaseStart: false
    description: "For STL, set to WNG,  For KSC, set to KC"
    value: WNG
  - type: xlrelease.StringVariable
    key: FlextpFlatpackRealTimeServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackUDTManagementServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackNearRealTimeServersInvolved
    value: "rsk0stl101, rsk0stl125, rsk0stl52"
  - type: xlrelease.StringVariable
    key: FlextpFlatpackNotificationServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackAEM2DWServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: release
  extensions:
  - name: Dashboard
    type: xlrelease.Dashboard
    owner: e025882
    tiles:
    - name: Release progress
      type: xlrelease.ReleaseProgressTile
    - name: Release summary
      type: xlrelease.ReleaseSummaryTile
    - name: Resource usage
      type: xlrelease.ResourceUsageTile
    - name: Release timeline
      type: xlrelease.TimelineTile
    - name: Release health
      type: xlrelease.ReleaseHealthTile
    - name: Grid
      type: xlrelease.TaskProgressTile
      row: 2
      col: 2
      tags:
      - grid
    - name: FlexTP
      type: xlrelease.TaskProgressTile
      row: 3
      col: 0
      tags:
      - flextp
  riskProfile: Default risk profile
- template: PEAT-TX-PROCESSING-STL-22.4
  description: This Template mirrors the PEAT DIP
  scheduledStartDate: 2019-02-06T09:00:00-06:00
  phases:
  - phase: XLR Release
    tasks:
    - name: Add Release tag
      type: xlr.AddTag
      newTag: "${release}"
    color: '#0079BC'
  - phase: Tx Processing Deployment
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      owner: e124194
    - name: All Transactions
      type: xlrelease.ParallelGroup
      tasks:
      - name: Transaction Sequential
        type: xlrelease.SequentialGroup
        tasks:
        - name: Stop Flextp Instances - STL
          type: xlrelease.SequentialGroup
          tags:
          - flextp
          tasks:
          - name: HM Stop Site
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Stop all instances associated with the site WNG
              stop site -s WNG

              7. Verify all instances stopped using the view status command.
        - name: Grid - STL
          type: xlrelease.SequentialGroup
          tags:
          - grid
          tasks:
          - name: Stop Grid
            type: xlrelease.SequentialGroup
            tags:
            - grid
            tasks:
            - name: Stop all Grid Members
              type: xlrelease.SequentialGroup
              tags:
              - staging_grid
              - grid
              tasks:
              - name: Stop Staging Grid Server 2 - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server2
                - staging_grid
                - grid
                - Habitat
              - name: Stop Staging Grid Server - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server
                - staging_grid
                - grid
                - Habitat
              - name: Stop Grid Staging Locator - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_locator
                - staging_grid
                - grid
                - Habitat
              - name: Habitat Live Grid Worker Stop - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/STL/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/STL/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_worker
                - live_grid
                - grid
                - Habitat
              - name: Stop Live Grid Server - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/STL/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/STL/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_locator
                - live_grid
                - grid
                - Habitat
              - name: Habitat Live Grid Locator Stop - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/STL/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/STL/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_locator
                - staging_grid
                - grid
            - name: "Status: validate Grid is down"
              type: xlrelease.SequentialGroup
              tags:
              - live_grid
              - grid
              tasks:
              - name: Status Staging Grid Locator - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_locator
                - staging_grid
                - grid
                - Habitat
              - name: Status Staging Grid Server - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server
                - staging_grid
                - grid
                - Habitat
              - name: Status Staging Grid Server 2 - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server2
                - staging_grid
                - grid
                - Habitat
              - name: Status Live Grid Locator - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/STL/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/STL/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_locator
                - live_grid
                - grid
                - Habitat
              - name: Status Live Grid Server - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/STL/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/STL/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_server
                - live_grid
                - grid
                - Habitat
              - name: Status Live Grid Worker - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/STL/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/STL/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_worker
                - live_grid
                - grid
                - Habitat
              - name: Validate Status is Down
                type: xlrelease.GateTask
                description: Jenkin's jobs should show that "status" is "down"
          - name: Promote Grid
            type: xlrelease.SequentialGroup
            tags:
            - grid
            tasks:
            - name: TOML Live and Staging
              type: xlrelease.SequentialGroup
              precondition: "False"
              tags:
              - TOML
              - live_grid
              - grid
              tasks:
              - name: Deploy Live Grid Locator TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_locator
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - live_grid_locator
                - live_grid
              - name: Deploy Live Grid Server TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_server
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - live_grid_server
                - live_grid
              - name: Deploy Live Grid Worker TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_worker
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - live_grid_worker
                - live_grid
              - name: Deploy Staging Grid Locator TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/staging_grid_locator
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - staging_grid_locator
                - TOML
                - Habitat
                - grid
                - staging_grid
              - name: Deploy Staging Grid Server TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_server
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - staging_grid
                - staging_grid_server
              - name: Deploy Live Grid Worker TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/staging_grid_worker
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - staging_grid_server2
                - staging_grid
            - name: Promote Live Grid
              type: xlrelease.SequentialGroup
              tags:
              - live_grid
              - grid
              tasks:
              - name: Promote Live Grid Locator- STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/live_grid_locator-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-live-locator.version}
                  channel=peat-stl
                  dryRun=false
                  platform=linux-kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/live_grid_locator-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_locator
                - live_grid
                - grid
                - Habitat
              - name: Promote Live Grid Server - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/live_grid_locator-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-live-server.version}
                  channel=peat-stl
                  dryRun=false
                  platform=linux-kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/live_grid_locator-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_server
                - live_grid
                - grid
                - Habitat
              - name: Promote Live Grid Worker - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/live_grid_locator-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-live-worker.version}
                  channel=peat-stl
                  dryRun=false
                  platform=linux-kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/live_grid_locator-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_worker
                - live_grid
                - grid
                - Habitat
            - name: Promote Staging Grid
              type: xlrelease.SequentialGroup
              tags:
              - staging_grid
              - grid
              tasks:
              - name: Promote Staging Grid Locator- STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/staging_grid_locator-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-staging-locator.version}
                  channel=peat-stl
                  dryRun=false
                  platform=linux-kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/staging_grid_locator-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_locator
                - staging_grid
                - grid
                - Habitat
              - name: Promote Staging Grid Server - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/staging_grid_server-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-staging-server.version}
                  channel=peat-stl
                  dryRun=false
                  platform=linux-kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/staging_grid_server-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server
                - staging_grid
                - grid
                - Habitat
              - name: Promote Staging Grid Server2 - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/promote-specific-STL-peat-param
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-staging-server2.version}
                  channel=peat-stl
                  dryRun=false
                  platform=linux-kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/promote-specific-STL-peat-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_worker
                - live_grid
                - grid
                - Habitat
          - name: Start Grid - STL
            type: xlrelease.SequentialGroup
            tags:
            - grid
            tasks:
            - name: Live Grid
              type: xlrelease.SequentialGroup
              tags:
              - live_grid
              - grid
              tasks:
              - name: Start Live Grid Locator - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/STL/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/STL/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_locator
                - live_grid
                - grid
                - Habitat
              - name: Start Live Grid Server - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/STL/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/STL/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_server
                - live_grid
                - grid
                - Habitat
              - name: Start Live Grid Worker - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/STL/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/STL/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_worker
                - live_grid
                - grid
                - Habitat
              - name: Status
                type: xlrelease.SequentialGroup
                tasks:
                - name: Status Live Grid Locator - STL
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/STL/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/STL/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - live_grid_locator
                  - live_grid
                  - grid
                  - Habitat
                - name: Status Live Grid Server - STL
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/STL/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/STL/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - live_grid_server
                  - live_grid
                  - grid
                  - Habitat
                - name: Status Live Grid Worker - STL
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/STL/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/STL/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - live_grid_worker
                  - live_grid
                  - grid
                  - Habitat
                - name: Validate Status
                  type: xlrelease.GateTask
                  description: Jenkin's jobs should show that "status" is "up"
            - name: Staging Grid
              type: xlrelease.SequentialGroup
              tasks:
              - name: Start Staging Grid Locator - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_locator
                - staging_grid
                - grid
                - Habitat
              - name: Start Staging Grid Server - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server
                - staging_grid
                - grid
                - Habitat
              - name: Start Staging Grid Server 2 - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server2
                - staging_grid
                - grid
                - Habitat
              - name: Status
                type: xlrelease.SequentialGroup
                tasks:
                - name: Status Staging Grid Locator - STL
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - staging_grid_locator
                  - staging_grid
                  - grid
                  - Habitat
                - name: Status Staging Grid Server - STL
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - staging_grid_server
                  - staging_grid
                  - grid
                  - Habitat
                - name: Status Staging Grid Server 2 - STL
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - staging_grid_server2
                  - staging_grid
                  - grid
                  - Habitat
                - name: Validate Status
                  type: xlrelease.GateTask
                  description: Jenkin's jobs should show that "status" is "up"
            - name: Validate Grid - STL has been deployed
              type: xlrelease.GateTask
              description: |-
                Login to rsk0stl61/62/63/64 and rsk0stl15

                cd /apps_01/fraud

                ls -ltr

                The grid symbolic link should point to the version you had deployed.
        - name: Habitat- Host Manager Deployment - STL
          type: xlrelease.SequentialGroup
          tags:
          - HM
          - Habitat
          tasks:
          - name: Habitat
            type: xlrelease.SequentialGroup
            tags:
            - Habitat
            tasks:
            - name: TOML
              type: xlrelease.SequentialGroup
              precondition: "False"
              tags:
              - TOML
              tasks:
              - name: TOML-FlexTP-STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-STL/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-STL/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - TOML
                - flextp
                - HM
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
          - name: Promote - flextp_host_manager - STL - linux_kernel2
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
            jobParameters: |-
              packageIdent=${folder.flextp_oel6_version}
              channel=peat-stl
              platform=linux_kernel2
              contactList=Chandra.Nerella@mastercard.com
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - flextp
            - HM
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote - flextp_host_manager - STL - linux
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
            jobParameters: |-
              packageIdent=${folder.flextp+oel7_version}
              channel=peat-stl
              platform=linux
              contactList=Chandra.Nerella@mastercard.com
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - flextp
            - HM
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Status - Host Manager - STL
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-stl-peat/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-stl-peat/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - flextp
            - HM
            - Habitat
          - name: Validate Hostmanager
            type: xlrelease.GateTask
            description: |-
              On the HOST LIST : ${folder.all_peat_stl_servers} perform the below steps

              1. Login to the box and Switch to fraud user
              2. cd /apps_01/fruad/hubernetes/bin
              3. run './h8s_version.sh'
              4. The Host Manager Configuration version must match - ${folder.artifact.host-manager-configuration.version}
              5. Host Manger CLI version must match ${folder.host_manager_cli_version}
              6. Host Manager version must match ${folder.artifact.host-manager.ver}
        - name: HM Deploy Flatpack - STL
          type: xlrelease.SequentialGroup
          tags:
          - HM
          tasks:
          - name: Deploy Flatpack for All Channels
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Run deploy flatpack command
              deploy flatpack -s WNG

              Before Selecting the "Y" option validate all flatpack version to match with apmate.
            tags:
            - Flatpack
            - HM
        - name: HM Recreate Site - STL
          type: xlrelease.SequentialGroup
          tags:
          - HM
          tasks:
          - name: Recreate Site - STL
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Recreate host with Force option
              recreate site -s WNG -f

              7. Use view status with the request id to check the status of the command. The command should show COMPLETED.
            tags:
            - HM
        - name: HM Create New Instance - STL
          type: xlrelease.SequentialGroup
          tags:
          - HM
          tasks:
          - name: Create new flex Cluster 51 - STL
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Command to create instance:
              create instance -cc 50 -fc 51 -h rsk0stl56

              7. Use view status with the request id to check the status of the command. The command should show COMPLETED.
            tags:
            - HM
        - name: HM Start Hosts - STL
          type: xlrelease.SequentialGroup
          flagStatus: ATTENTION_NEEDED
          flagComment: PEAT team will start manually
          precondition: '`False'
          tags:
          - HM
          tasks:
          - name: Start All Instances
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Start hosts
              start site -s WNG

              7. Verify all instances started using the view status command.
        - name: grid-udt-daemon Deploy
          type: xlrelease.SequentialGroup
          precondition: "False"
          tags:
          - grid
          - udt-daemon
          tasks:
          - name: Habitat deployment
            type: xlrelease.SequentialGroup
            tags:
            - Habitat
            tasks:
            - name: TOML - udt-daemon
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              jobParameters: |-
                habChannel=peat
                habServiceGroup=stage
                habService=decision_processing/grid_udt_daemon
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - TOML
              - grid
              - udt-daemon
            - name: "Sleep ${folder.metadata.time} seconds"
              type: xlrelease.ScriptTask
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: Promote - udt-daemon
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              jobParameters: |-
                artifactAndPackage=grid-udt-daemon decision_processing/grid_udt_daemon
                promoteToChannel=peat
                platform=linux_kernel2
                dryRun=false
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - grid
              - udt-daemon
            - name: grid-udt-daemon start/stop
              type: xlrelease.SequentialGroup
              tags:
              - grid
              - udt-daemon
              tasks:
              - name: grid-udt-daemon stop
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - grid
                - udt-daemon
              - name: validate stop
                type: xlrelease.Task
                description: |-
                  https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/stop/

                  build should be successful, and supervisor desired state should be down

                  package                                                   type        desired  state  elapsed (s)  pid     group
                  decision_processing/grid_udt_daemon  standalone  down     down   10           <none>  grid_udt_daemon.peat
              - name: grid-udt-daemon start
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - grid
                - udt-daemon
              - name: validate start
                type: xlrelease.Task
                description: |-
                  https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/start/

                  build should be successful and supervisor desired state should be up

                  package type desired state elapsed (s) pid group
                  decision_processing/grid_udt_daemon standalone up up 10 <none> grid_udt_daemon.peat
            - name: grid-udt-daemon status
              type: xlrelease.SequentialGroup
              tags:
              - grid
              - udt-daemon
              tasks:
              - name: grid-udt-daemon status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - grid
                - udt-daemon
              - name: validate status
                type: xlrelease.Task
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/status/
        - name: ai-garage-validator Deploy
          type: xlrelease.SequentialGroup
          precondition: "False"
          tags:
          - ai_garage
          tasks:
          - name: Habitat deployment
            type: xlrelease.SequentialGroup
            tasks:
            - name: TOML - ai-garage
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              jobParameters: |-
                habChannel=peat
                habServiceGroup=stage
                habService=decision_processing/ai-garage-validator
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - TOML
              - ai_garage
              - Habitat
            - name: "Sleep ${folder.metadata.time} seconds (copy)"
              type: xlrelease.ScriptTask
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: Promote - ai-garage
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              jobParameters: |-
                artifactAndPackage=decision_processing/ai_garage_validator
                promoteToChannel=peat
                platform=linux_kernel2
                dryRun=false
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - ai_garage
              - Habitat
            - name: ai-garage-validator start/stop
              type: xlrelease.SequentialGroup
              tasks:
              - name: ai-garage-validator stop
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - ai_garage
                - Habitat
              - name: validate stop
                type: xlrelease.Task
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/stop/
              - name: ai-garage-validator start
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - ai_garage
                - Habitat
              - name: validate start
                type: xlrelease.Task
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/start/
            - name: ai-garage-validator status
              type: xlrelease.SequentialGroup
              tasks:
              - name: ai-garage-validator status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - ai_garage
                - Habitat
              - name: validate status
                type: xlrelease.Task
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/status/
    color: '#0099CC'
  realFlagStatus: ATTENTION_NEEDED
  tags:
  - "22.4"
  variables:
  - type: xlrelease.StringVariable
    key: FlexTPDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: etlDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPEnvNonProdBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPJSONBuildStatus
    requiresValue: false
    showOnReleaseStart: false
    description: FlexTP Global Seed Data JSON build status
  - type: xlrelease.StringVariable
    key: FlexTPDVTRunBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTDeployBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPFSDOverride-Rel2-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: ETLDeploy-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: DEPLOYMENT_DIR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: TMP_BKUP_DIR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonPR
    requiresValue: false
    showOnReleaseStart: false
    value: https://fusion.mastercard.int/stash/projects/DECISION_MANAGEMENT/repos/mc_dmp_chef_objects_nonprod/pull-requests/126/overview
  - type: xlrelease.StringVariable
    key: GridUDTDaemonBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
    value: 1.6.0
  - type: xlrelease.StringVariable
    key: ai-garage-validatorPR
    requiresValue: false
    showOnReleaseStart: false
    value: https://fusion.mastercard.int/stash/projects/DECISION_MANAGEMENT/repos/mc_dmp_chef_objects_nonprod/pull-requests/126/overview
  - type: xlrelease.StringVariable
    key: AIGarageValidatorBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: AIGarageValidatorArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
    value: 0.1.2
  - type: xlrelease.StringVariable
    key: FlextpFlatpackSite
    requiresValue: false
    showOnReleaseStart: false
    description: "For STL, set to WNG,  For KSC, set to KC"
    value: WNG
  - type: xlrelease.StringVariable
    key: FlextpFlatpackRealTimeServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackUDTManagementServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackNearRealTimeServersInvolved
    value: "rsk0stl101, rsk0stl125, rsk0stl52"
  - type: xlrelease.StringVariable
    key: FlextpFlatpackNotificationServersInvolved
  - type: xlrelease.StringVariable
    key: FlextpFlatpackAEM2DWServersInvolved
  - type: xlrelease.StringVariable
    key: release
  extensions:
  - name: Dashboard
    type: xlrelease.Dashboard
    owner: e025882
    tiles:
    - name: Release progress
      type: xlrelease.ReleaseProgressTile
    - name: Release summary
      type: xlrelease.ReleaseSummaryTile
    - name: Resource usage
      type: xlrelease.ResourceUsageTile
    - name: Release timeline
      type: xlrelease.TimelineTile
    - name: Release health
      type: xlrelease.ReleaseHealthTile
    - name: Grid
      type: xlrelease.TaskProgressTile
      row: 2
      col: 2
      tags:
      - grid
    - name: FlexTP
      type: xlrelease.TaskProgressTile
      row: 3
      col: 0
      tags:
      - flextp
  riskProfile: Default risk profile
- template: PEAT-TX-PROCESSING-STL-22.5
  description: Version 22.5 for PEAT DIP
  scheduledStartDate: 2019-02-06T09:00:00-06:00
  phases:
  - phase: XLR Release
    tasks:
    - name: Add Release tag
      type: xlr.AddTag
      newTag: "${release}"
    color: '#0079BC'
  - phase: Tx Processing Deployment
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
    - name: All Transactions
      type: xlrelease.ParallelGroup
      tasks:
      - name: Transaction Sequential
        type: xlrelease.SequentialGroup
        tasks:
        - name: Stop Flextp Instances - STL
          type: xlrelease.SequentialGroup
          tags:
          - flextp
          tasks:
          - name: HM Stop Site
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Stop all instances associated with the site WNG
              stop site -s WNG

              7. Verify all instances stopped using the view status command.
        - name: Grid - STL
          type: xlrelease.SequentialGroup
          tags:
          - grid
          tasks:
          - name: Stop Grid
            type: xlrelease.SequentialGroup
            tags:
            - grid
            tasks:
            - name: Stop all Grid Members
              type: xlrelease.SequentialGroup
              tags:
              - staging_grid
              - grid
              tasks:
              - name: Stop Staging Grid Server 2 - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server2
                - staging_grid
                - grid
                - Habitat
              - name: Stop Staging Grid Server - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server
                - staging_grid
                - grid
                - Habitat
              - name: Stop Grid Staging Locator - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_locator
                - staging_grid
                - grid
                - Habitat
              - name: Habitat Live Grid Worker Stop - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/STL/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/STL/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_worker
                - live_grid
                - grid
                - Habitat
              - name: Stop Live Grid Server - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/STL/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/STL/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_locator
                - live_grid
                - grid
                - Habitat
              - name: Habitat Live Grid Locator Stop - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/STL/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/STL/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_locator
                - staging_grid
                - grid
            - name: "Status: validate Grid is down"
              type: xlrelease.SequentialGroup
              tags:
              - live_grid
              - grid
              tasks:
              - name: Status Staging Grid Locator - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_locator
                - staging_grid
                - grid
                - Habitat
              - name: Status Staging Grid Server - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server
                - staging_grid
                - grid
                - Habitat
              - name: Status Staging Grid Server 2 - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server2
                - staging_grid
                - grid
                - Habitat
              - name: Status Live Grid Locator - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/STL/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/STL/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_locator
                - live_grid
                - grid
                - Habitat
              - name: Status Live Grid Server - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/STL/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/STL/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_server
                - live_grid
                - grid
                - Habitat
              - name: Status Live Grid Worker - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/STL/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/STL/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_worker
                - live_grid
                - grid
                - Habitat
              - name: Validate Status is Down
                type: xlrelease.GateTask
                description: Jenkin's jobs should show that "status" is "down"
          - name: Promote Grid
            type: xlrelease.SequentialGroup
            tags:
            - grid
            tasks:
            - name: TOML Live and Staging
              type: xlrelease.SequentialGroup
              precondition: "False"
              tags:
              - TOML
              - live_grid
              - grid
              tasks:
              - name: Deploy Live Grid Locator TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_locator
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - live_grid_locator
                - live_grid
              - name: Deploy Live Grid Server TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_server
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - live_grid_server
                - live_grid
              - name: Deploy Live Grid Worker TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_worker
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - live_grid_worker
                - live_grid
              - name: Deploy Staging Grid Locator TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/staging_grid_locator
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - staging_grid_locator
                - TOML
                - Habitat
                - grid
                - staging_grid
              - name: Deploy Staging Grid Server TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_server
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - staging_grid
                - staging_grid_server
              - name: Deploy Live Grid Worker TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/staging_grid_worker
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - Habitat
                - grid
                - staging_grid_server2
                - staging_grid
            - name: Promote Live Grid
              type: xlrelease.SequentialGroup
              tags:
              - live_grid
              - grid
              tasks:
              - name: Promote Live Grid Locator- STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/live_grid_locator-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-live-locator.version}
                  channel=peat-stl
                  dryRun=false
                  platform=linux-kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/live_grid_locator-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_locator
                - live_grid
                - grid
                - Habitat
              - name: Promote Live Grid Server - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/live_grid_locator-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-live-server.version}
                  channel=peat-stl
                  dryRun=false
                  platform=linux-kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/live_grid_locator-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_server
                - live_grid
                - grid
                - Habitat
              - name: Promote Live Grid Worker - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/live_grid_locator-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-live-worker.version}
                  channel=peat-stl
                  dryRun=false
                  platform=linux-kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/live_grid_locator-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_worker
                - live_grid
                - grid
                - Habitat
            - name: Promote Staging Grid
              type: xlrelease.SequentialGroup
              tags:
              - staging_grid
              - grid
              tasks:
              - name: Promote Staging Grid Locator- STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/staging_grid_locator-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-staging-locator.version}
                  channel=peat-stl
                  dryRun=false
                  platform=linux-kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/staging_grid_locator-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_locator
                - staging_grid
                - grid
                - Habitat
              - name: Promote Staging Grid Server - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/staging_grid_server-promote-specific-param/
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-staging-server.version}
                  channel=peat-stl
                  dryRun=false
                  platform=linux-kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/staging_grid_server-promote-specific-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server
                - staging_grid
                - grid
                - Habitat
              - name: Promote Staging Grid Server2 - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/promote-specific-STL-peat-param
                jobParameters: |-
                  packageIdent=${folder.artifact.grid-staging-server2.version}
                  channel=peat-stl
                  dryRun=false
                  platform=linux-kernel2
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/promote-specific-STL-peat-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_worker
                - live_grid
                - grid
                - Habitat
          - name: Start Grid - STL
            type: xlrelease.SequentialGroup
            tags:
            - grid
            tasks:
            - name: Live Grid
              type: xlrelease.SequentialGroup
              tags:
              - live_grid
              - grid
              tasks:
              - name: Start Live Grid Locator - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/STL/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/STL/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_locator
                - live_grid
                - grid
                - Habitat
              - name: Start Live Grid Server - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/STL/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/STL/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_server
                - live_grid
                - grid
                - Habitat
              - name: Start Live Grid Worker - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/STL/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/STL/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - live_grid_worker
                - live_grid
                - grid
                - Habitat
              - name: Status
                type: xlrelease.SequentialGroup
                tasks:
                - name: Status Live Grid Locator - STL
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/STL/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_locator/job/PEAT/job/STL/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - live_grid_locator
                  - live_grid
                  - grid
                  - Habitat
                - name: Status Live Grid Server - STL
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/STL/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_server/job/PEAT/job/STL/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - live_grid_server
                  - live_grid
                  - grid
                  - Habitat
                - name: Status Live Grid Worker - STL
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/STL/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/live_grid_worker/job/PEAT/job/STL/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - live_grid_worker
                  - live_grid
                  - grid
                  - Habitat
                - name: Validate Status
                  type: xlrelease.GateTask
                  description: Jenkin's jobs should show that "status" is "up"
            - name: Staging Grid
              type: xlrelease.SequentialGroup
              tasks:
              - name: Start Staging Grid Locator - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_locator
                - staging_grid
                - grid
                - Habitat
              - name: Start Staging Grid Server - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server
                - staging_grid
                - grid
                - Habitat
              - name: Start Staging Grid Server 2 - KSC
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - staging_grid_server2
                - staging_grid
                - grid
                - Habitat
              - name: Status
                type: xlrelease.SequentialGroup
                tasks:
                - name: Status Staging Grid Locator - STL
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_locator/job/PEAT/job/STL/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - staging_grid_locator
                  - staging_grid
                  - grid
                  - Habitat
                - name: Status Staging Grid Server - STL
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server/job/PEAT/job/STL/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - staging_grid_server
                  - staging_grid
                  - grid
                  - Habitat
                - name: Status Staging Grid Server 2 - STL
                  type: jenkins.Build
                  jenkinsServer: Jenkins Production - cd5
                  username: "${folder.jenkins_eid}"
                  jobName: ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/status/
                  description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/staging_grid_server2/job/PEAT/job/STL/job/status/
                  variableMapping:
                    pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                  tags:
                  - staging_grid_server2
                  - staging_grid
                  - grid
                  - Habitat
                - name: Validate Status
                  type: xlrelease.GateTask
                  description: Jenkin's jobs should show that "status" is "up"
            - name: Validate Grid - STL has been deployed
              type: xlrelease.GateTask
              description: |-
                Login to rsk0stl61/62/63/64 and rsk0stl15

                cd /apps_01/fraud

                ls -ltr

                The grid symbolic link should point to the version you had deployed.
        - name: Habitat- Host Manager Deployment - STL
          type: xlrelease.SequentialGroup
          tags:
          - HM
          - Habitat
          tasks:
          - name: Habitat
            type: xlrelease.SequentialGroup
            tags:
            - Habitat
            tasks:
            - name: TOML
              type: xlrelease.SequentialGroup
              precondition: "False"
              tags:
              - TOML
              tasks:
              - name: TOML-FlexTP-STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-STL/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-STL/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - TOML
                - flextp
                - HM
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
          - name: Promote - flextp_host_manager - STL - linux_kernel2
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
            jobParameters: |-
              packageIdent=${folder.flextp_oel6_version}
              channel=peat-stl
              platform=linux_kernel2
              contactList=Chandra.Nerella@mastercard.com
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - flextp
            - HM
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote - flextp_host_manager - STL - linux
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
            jobParameters: |-
              packageIdent=${folder.flextp+oel7_version}
              channel=peat-stl
              platform=linux
              contactList=Chandra.Nerella@mastercard.com
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - flextp
            - HM
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Status - Host Manager - STL
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-stl-peat/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-stl-peat/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - flextp
            - HM
            - Habitat
          - name: Validate Hostmanager
            type: xlrelease.GateTask
            description: |-
              On the HOST LIST : ${folder.all_peat_stl_servers} perform the below steps

              1. Login to the box and Switch to fraud user
              2. cd /apps_01/fruad/hubernetes/bin
              3. run './h8s_version.sh'
              4. The Host Manager Configuration version must match - ${folder.artifact.host-manager-configuration.version}
              5. Host Manger CLI version must match ${folder.host_manager_cli_version}
              6. Host Manager version must match ${folder.artifact.host-manager.ver}
        - name: HM Deploy Flatpack - STL
          type: xlrelease.SequentialGroup
          tags:
          - HM
          tasks:
          - name: Deploy Flatpack for All Channels
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Run deploy flatpack command
              deploy flatpack -s WNG

              Before Selecting the "Y" option validate all flatpack version to match with apmate.
            tags:
            - Flatpack
            - HM
        - name: HM Recreate Site - STL
          type: xlrelease.SequentialGroup
          tags:
          - HM
          tasks:
          - name: Recreate Site - STL
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Recreate host with Force option
              recreate site -s WNG -f

              7. Use view status with the request id to check the status of the command. The command should show COMPLETED.
            tags:
            - HM
        - name: HM Start Hosts - STL
          type: xlrelease.SequentialGroup
          flagStatus: ATTENTION_NEEDED
          flagComment: PEAT team will start manually
          precondition: "False"
          tags:
          - HM
          tasks:
          - name: Start All Instances
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Start hosts
              start site -s WNG

              7. Verify all instances started using the view status command.
        - name: grid-udt-daemon Deploy
          type: xlrelease.SequentialGroup
          precondition: "False"
          tags:
          - grid
          - udt-daemon
          tasks:
          - name: Habitat deployment
            type: xlrelease.SequentialGroup
            tags:
            - Habitat
            tasks:
            - name: TOML - udt-daemon
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              jobParameters: |-
                habChannel=peat
                habServiceGroup=stage
                habService=decision_processing/grid_udt_daemon
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - TOML
              - grid
              - udt-daemon
            - name: "Sleep ${folder.metadata.time} seconds"
              type: xlrelease.ScriptTask
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: Promote - udt-daemon
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              jobParameters: |-
                artifactAndPackage=grid-udt-daemon decision_processing/grid_udt_daemon
                promoteToChannel=peat
                platform=linux_kernel2
                dryRun=false
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - grid
              - udt-daemon
            - name: grid-udt-daemon start/stop
              type: xlrelease.SequentialGroup
              tags:
              - grid
              - udt-daemon
              tasks:
              - name: grid-udt-daemon stop
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - grid
                - udt-daemon
              - name: validate stop
                type: xlrelease.Task
                description: |-
                  https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/stop/

                  build should be successful, and supervisor desired state should be down

                  package                                                   type        desired  state  elapsed (s)  pid     group
                  decision_processing/grid_udt_daemon  standalone  down     down   10           <none>  grid_udt_daemon.peat
              - name: grid-udt-daemon start
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - grid
                - udt-daemon
              - name: validate start
                type: xlrelease.Task
                description: |-
                  https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/start/

                  build should be successful and supervisor desired state should be up

                  package type desired state elapsed (s) pid group
                  decision_processing/grid_udt_daemon standalone up up 10 <none> grid_udt_daemon.peat
            - name: grid-udt-daemon status
              type: xlrelease.SequentialGroup
              tags:
              - grid
              - udt-daemon
              tasks:
              - name: grid-udt-daemon status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - grid
                - udt-daemon
              - name: validate status
                type: xlrelease.Task
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/grid_udt_daemon/job/peat/job/status/
        - name: ai-garage-validator Deploy
          type: xlrelease.SequentialGroup
          precondition: "False"
          tags:
          - ai_garage
          tasks:
          - name: Habitat deployment
            type: xlrelease.SequentialGroup
            tasks:
            - name: TOML - ai-garage
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              jobParameters: |-
                habChannel=peat
                habServiceGroup=stage
                habService=decision_processing/ai-garage-validator
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - TOML
              - ai_garage
              - Habitat
            - name: "Sleep ${folder.metadata.time} seconds (copy)"
              type: xlrelease.ScriptTask
              script: |-
                import time
                time.sleep(${folder.metadata.time})
                print "Done Sleeping"
            - name: Promote - ai-garage
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              jobParameters: |-
                artifactAndPackage=decision_processing/ai_garage_validator
                promoteToChannel=peat
                platform=linux_kernel2
                dryRun=false
              description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - ai_garage
              - Habitat
            - name: ai-garage-validator start/stop
              type: xlrelease.SequentialGroup
              tasks:
              - name: ai-garage-validator stop
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/stop/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/stop/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - ai_garage
                - Habitat
              - name: validate stop
                type: xlrelease.Task
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/stop/
              - name: ai-garage-validator start
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/start/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/start/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - ai_garage
                - Habitat
              - name: validate start
                type: xlrelease.Task
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/start/
            - name: ai-garage-validator status
              type: xlrelease.SequentialGroup
              tasks:
              - name: ai-garage-validator status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/status/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - ai_garage
                - Habitat
              - name: validate status
                type: xlrelease.Task
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/ai-garage-validator/job/stage/job/status/
    color: '#0099CC'
  realFlagStatus: ATTENTION_NEEDED
  tags:
  - "22.5"
  variables:
  - type: xlrelease.StringVariable
    key: FlexTPDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: etlDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPEnvNonProdBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPJSONBuildStatus
    requiresValue: false
    showOnReleaseStart: false
    description: FlexTP Global Seed Data JSON build status
  - type: xlrelease.StringVariable
    key: FlexTPDVTRunBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTDeployBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPFSDOverride-Rel2-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: ETLDeploy-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: DEPLOYMENT_DIR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: TMP_BKUP_DIR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonPR
    requiresValue: false
    showOnReleaseStart: false
    value: https://fusion.mastercard.int/stash/projects/DECISION_MANAGEMENT/repos/mc_dmp_chef_objects_nonprod/pull-requests/126/overview
  - type: xlrelease.StringVariable
    key: GridUDTDaemonBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
    value: 1.6.0
  - type: xlrelease.StringVariable
    key: ai-garage-validatorPR
    requiresValue: false
    showOnReleaseStart: false
    value: https://fusion.mastercard.int/stash/projects/DECISION_MANAGEMENT/repos/mc_dmp_chef_objects_nonprod/pull-requests/126/overview
  - type: xlrelease.StringVariable
    key: AIGarageValidatorBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: AIGarageValidatorArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
    value: 0.1.2
  - type: xlrelease.StringVariable
    key: FlextpFlatpackSite
    requiresValue: false
    showOnReleaseStart: false
    description: "For STL, set to WNG,  For KSC, set to KC"
    value: WNG
  - type: xlrelease.StringVariable
    key: FlextpFlatpackRealTimeServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackUDTManagementServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackNearRealTimeServersInvolved
    value: "rsk0stl101, rsk0stl125, rsk0stl52"
  - type: xlrelease.StringVariable
    key: FlextpFlatpackNotificationServersInvolved
  - type: xlrelease.StringVariable
    key: FlextpFlatpackAEM2DWServersInvolved
  - type: xlrelease.StringVariable
    key: release
  extensions:
  - name: Dashboard
    type: xlrelease.Dashboard
    owner: e025882
    tiles:
    - name: Release progress
      type: xlrelease.ReleaseProgressTile
    - name: Release summary
      type: xlrelease.ReleaseSummaryTile
    - name: Resource usage
      type: xlrelease.ResourceUsageTile
    - name: Release timeline
      type: xlrelease.TimelineTile
    - name: Release health
      type: xlrelease.ReleaseHealthTile
    - name: Grid
      type: xlrelease.TaskProgressTile
      row: 2
      col: 2
      tags:
      - grid
    - name: FlexTP
      type: xlrelease.TaskProgressTile
      row: 3
      col: 0
      tags:
      - flextp
  riskProfile: Default risk profile
- template: PEAT-TX-PROCESSING-STL-22.6
  description: This Template mirrors the PEAT DIP
  scheduledStartDate: 2019-02-06T09:00:00-06:00
  phases:
  - phase: XLR Release
    tasks:
    - name: Add Release tag
      type: xlr.AddTag
      newTag: "${release}"
      team: SCSSStageDeployment
      tags:
      - '#bizops'
    color: '#0079BC'
  - phase: Tx Processing Deployment
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
    - name: All Transactions
      type: xlrelease.ParallelGroup
      tasks:
      - name: Transaction Sequential
        type: xlrelease.SequentialGroup
        tasks:
        - name: Stop Flextp Instances - STL
          type: xlrelease.SequentialGroup
          tags:
          - flextp
          tasks:
          - name: HM Stop Site
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Stop all instances associated with the site WNG
              stop site -s WNG

              7. Verify all instances stopped using the view status command.
        - name: Grid - STL
          type: xlrelease.SequentialGroup
          tags:
          - grid
          tasks:
          - name: Stop Grid
            type: xlrelease.SequentialGroup
            tags:
            - grid
            tasks:
            - name: Stop staging grid (manual)
              type: xlrelease.Task
              description: |-
                - Log into rsk0stl15
                - `sesudo fraud`
                - `cd grid_REL2/scripts`
                - `./gfsh.sh`
                - `connect --locator=localhost[15000]`
                - `shutdown`
                - `list members`. Only the locator process should be present.
                - `shutdown --include-locators=true`
                - GFSH will disconnect.
                - `exit`. You will leave gfsh.
            - name: Stop live grid (manual)
              type: xlrelease.Task
              description: |-
                - Log into rsk0stl61
                - `sesudo fraud`
                - `cd grid_REL2/scripts`
                - `./gfsh.sh`
                - `connect --locator=localhost[15000]`
                - `shutdown`
                - `list members`. Only the locator process should be present.
                - `shutdown --include-locators=true`
                - GFSH will disconnect.
                - `exit`. You will leave gfsh.
            - name: Validate no Grid processes running
              type: xlrelease.Task
              description: '`ps -ef | grep pivotal` should list no Java results.'
          - name: Promote Grid
            type: xlrelease.SequentialGroup
            tags:
            - grid
            tasks:
            - name: TOML Live and Staging
              type: xlrelease.SequentialGroup
              precondition: "False"
              tags:
              - TOML
              - live_grid
              - grid
              tasks:
              - name: Deploy Live Grid Locator TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_locator
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - '#bizops'
                - Habitat
                - grid
                - live_grid_locator
                - live_grid
              - name: Deploy Live Grid Server TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_server
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - '#bizops'
                - Habitat
                - grid
                - live_grid_server
                - live_grid
              - name: Deploy Live Grid Worker TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_worker
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - '#bizops'
                - Habitat
                - grid
                - live_grid_worker
                - live_grid
              - name: Deploy Staging Grid Locator TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/staging_grid_locator
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - staging_grid_locator
                - TOML
                - '#bizops'
                - Habitat
                - grid
                - staging_grid
              - name: Deploy Staging Grid Server TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/live_grid_server
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - '#bizops'
                - Habitat
                - grid
                - staging_grid
                - staging_grid_server
              - name: Deploy Live Grid Worker TOML - STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd3
                username: "${folder.jenkins_eid}"
                jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                jobParameters: |-
                  habChannel=peat-stl
                  habServiceGroup=peat
                  habService=decision_processing/staging_grid_worker
                description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_toml-param/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
                tags:
                - TOML
                - '#bizops'
                - Habitat
                - grid
                - staging_grid_server2
                - staging_grid
            - name: Deploy grid (manual)
              type: xlrelease.Task
              description: |-
                - For each of the following servers:
                    - rsk0stl61, rsk0stl62, rsk0stl115, rsk0stl116, rsk0stl117, rsk0stl118, rsk0stl15
                - `sesudo fraud`
                - `cd staging`
                - `wget --no-check-certificate https://artifacts.mastercard.int/artifactory/releases/com/mastercard/risk/grid/GridConfig/${folder.GridConfig_version}/GridConfig-${folder.GridConfig_version}-package.zip`
                - `../bin/grid_deploy.sh ./GridConfig-${folder.GridConfig_version}-package.zip`
                - `../bin/grid_deploy.sh ./GridConfig-${folder.GridConfig_version}-package.zip -s`
            - name: Validate grid deployment (manual)
              type: xlrelease.GateTask
              description: |-
                For each of the following servers: rsk0stl61, rsk0stl62, rsk0stl115, rsk0stl116, rsk0stl117, rsk0stl118, rsk0stl15
                - `sesudo fraud`
                - `readlink grid_REL2` should point to `/apps_01/fraud/grid_builds_REL2/GridConfig-${folder.GridConfig_version}`

                For rsk0stl61, rsk0stl62, rsk0stl115, rsk0stl116, rsk0stl117, rsk0stl118:

                - `cat grid_REL2/config/env.config | grep SERVERS_WNG` should show rsk0stl115 rsk0stl116 rsk0stl117 rsk0stl118
                - `cat grid_REL2/config/env.config | grep LOCATOR_WNG` should show rsk0stl61 rsk0stl62
                - `cat grid_REL2/config/env.config | grep WORKERS_WNG` should show rsk0stl117 rsk0stl118

                For rsk0stl15:

                - `cat grid_REL2/config/env.config | grep SERVERS_WNG` should show rsk0stl15
                - `cat grid_REL2/config/env.config | grep LOCATOR_WNG` should show rsk0stl15
                - `cat grid_REL2/config/env.config | grep LIVE_LOCATORS_WNG` should show rsk0stl61
          - name: Start Grid - STL
            type: xlrelease.SequentialGroup
            tags:
            - grid
            tasks:
            - name: Start live grid (manual)
              type: xlrelease.Task
              description: |-
                For each of the following servers: rsk0stl61, rsk0stl62
                - `grid_REL2/scripts/startLocator.sh`
                - Wait until you receive a startup complete message
                - `grid_REL2/scripts/gfsh.sh -e "connect --locator=localhost[15000]"` should show "Connected to localhost[15000]"

                For each of the following servers: rsk0stl61, rsk0stl62, rsk0stl115, rsk0stl116, rsk0stl117, rsk0stl118
                - `grid_REL2/scripts/startPhysicalMachine.sh`
                - Wait until you receive a startup complete message
            - name: Start staging grid (manual)
              type: xlrelease.Task
              description: |-
                For each of the following servers: rsk0stl15
                - `grid_REL2/scripts/startLocator.sh`
                - Wait until you receive a startup complete message
                - `grid_REL2/scripts/gfsh.sh -e "connect --locator=localhost[15000]"` should show "Connected to localhost[15000]"

                For each of the following servers: rsk0stl15
                - `grid_REL2/scripts/startPhysicalMachine.sh`
                - Wait until you receive a startup complete message
            - name: Validate grid is started
              type: xlrelease.GateTask
              description: |-
                For rsk0stl61
                - `grid_REL2/scripts/gfsh.sh -e "connect --locator=localhost[15000]" -e "list members"` should show rsk0stl61-locator1, rsk0stl62-locator1, rsk0stl115-server1, rsk0stl116-server1, rsk0stl117-server1, rsk0stl117-worker1, rsk0stl118-server1, rsk0stl118-worker1

                For rsk0stl15
                - `grid_REL2/scripts/gfsh.sh -e "connect --locator=localhost[15000]" -e "list members"` should show rsk0stl15-locator1, rsk0stl15-server1, rsk0stl15-server2
        - name: Habitat- Host Manager Deployment - STL
          type: xlrelease.SequentialGroup
          tags:
          - HM
          - Habitat
          tasks:
          - name: Habitat
            type: xlrelease.SequentialGroup
            tags:
            - Habitat
            tasks:
            - name: TOML
              type: xlrelease.SequentialGroup
              precondition: "False"
              tags:
              - TOML
              tasks:
              - name: TOML-FlexTP-STL
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-STL/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/deploy-toml-STL/
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - TOML
                - flextp
                - HM
                - '#bizops'
              - name: "Sleep ${folder.metadata.time} seconds"
                type: xlrelease.ScriptTask
                tags:
                - '#bizops'
                script: |-
                  import time
                  time.sleep(${folder.metadata.time})
                  print "Done Sleeping"
          - name: Promote - flextp_host_manager - STL - linux_kernel2
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
            jobParameters: |-
              packageIdent=${folder.flextp_oel6_version}
              channel=peat-stl
              platform=linux_kernel2
              contactList=Chandra.Nerella@mastercard.com
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - flextp
            - HM
            - '#bizops'
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            tags:
            - '#bizops'
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote - flextp_host_manager - STL - linux
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
            jobParameters: |-
              packageIdent=${folder.flextp+oel7_version}
              channel=peat-stl
              platform=linux
              contactList=Chandra.Nerella@mastercard.com
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/flextp_host_manager-promote-specific-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - flextp
            - HM
            - '#bizops'
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            tags:
            - '#bizops'
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Status - Host Manager - STL
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-stl-peat/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/flextp/job/service-host-manager/job/peat/job/status-stl-peat/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - flextp
            - HM
            - Habitat
            - '#bizops'
          - name: Validate Hostmanager
            type: xlrelease.GateTask
            description: |-
              On the HOST LIST : ${folder.all_peat_stl_servers} perform the below steps

              1. Login to the box and Switch to fraud user
              2. cd /apps_01/fruad/hubernetes/bin
              3. run './h8s_version.sh'
              4. The Host Manager Configuration version must match - ${folder.artifact.host-manager-configuration.version}
              5. Host Manger CLI version must match ${folder.host_manager_cli_version}
              6. Host Manager version must match ${folder.artifact.host-manager.ver}
            tags:
            - '#bizops'
        - name: HM Deploy Flatpack - STL
          type: xlrelease.SequentialGroup
          tags:
          - HM
          tasks:
          - name: Deploy Flatpack for All Channels
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Run deploy flatpack command
              deploy flatpack -s WNG

              Before Selecting the "Y" option validate all flatpack version to match with apmate.
            tags:
            - Flatpack
            - HM
            - '#bizops'
        - name: HM Recreate Site - STL
          type: xlrelease.SequentialGroup
          tags:
          - HM
          tasks:
          - name: Recreate Site - STL
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Recreate host with Force option
              recreate site -s WNG -f

              7. Use view status with the request id to check the status of the command. The command should show COMPLETED.
            tags:
            - HM
            - '#bizops'
        - name: HM Start Hosts - STL
          type: xlrelease.SequentialGroup
          flagStatus: ATTENTION_NEEDED
          flagComment: PEAT team will start manually
          precondition: "False"
          tags:
          - HM
          tasks:
          - name: Start All Instances
            type: xlrelease.Task
            description: |-
              If already logged into H8s, skip to step #6.
              1. Login to the host.
              2. sudo su - fraud
              3. type 'h8sbin' or cd /apps_01/fraud/hubernetes/bin.
              4. Start HM CLI ./hm_and_cli_start.sh
              5. Provide RDS database login credentials for that given environment

              6. Start hosts
              start site -s WNG

              7. Verify all instances started using the view status command.
            tags:
            - '#bizops'
    color: '#0099CC'
  realFlagStatus: ATTENTION_NEEDED
  tags:
  - "22.6"
  variables:
  - type: xlrelease.StringVariable
    key: FlexTPDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: etlDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridLiveStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridStagingStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPEnvNonProdBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPJSONBuildStatus
    requiresValue: false
    showOnReleaseStart: false
    description: FlexTP Global Seed Data JSON build status
  - type: xlrelease.StringVariable
    key: FlexTPDVTRunBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPDVTDeployBuildStatusRel2
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlexTPFSDOverride-Rel2-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: ETLDeploy-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: DEPLOYMENT_DIR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: TMP_BKUP_DIR
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonPR
    requiresValue: false
    showOnReleaseStart: false
    value: https://fusion.mastercard.int/stash/projects/DECISION_MANAGEMENT/repos/mc_dmp_chef_objects_nonprod/pull-requests/126/overview
  - type: xlrelease.StringVariable
    key: GridUDTDaemonBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridUDTDaemonArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
    value: 1.6.0
  - type: xlrelease.StringVariable
    key: ai-garage-validatorPR
    requiresValue: false
    showOnReleaseStart: false
    value: https://fusion.mastercard.int/stash/projects/DECISION_MANAGEMENT/repos/mc_dmp_chef_objects_nonprod/pull-requests/126/overview
  - type: xlrelease.StringVariable
    key: AIGarageValidatorBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: AIGarageValidatorArtifactVersion
    requiresValue: false
    showOnReleaseStart: false
    value: 0.1.2
  - type: xlrelease.StringVariable
    key: FlextpFlatpackSite
    requiresValue: false
    showOnReleaseStart: false
    description: "For STL, set to WNG,  For KSC, set to KC"
    value: WNG
  - type: xlrelease.StringVariable
    key: FlextpFlatpackRealTimeServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackUDTManagementServersInvolved
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: FlextpFlatpackNearRealTimeServersInvolved
    value: "rsk0stl101, rsk0stl125, rsk0stl52"
  - type: xlrelease.StringVariable
    key: FlextpFlatpackNotificationServersInvolved
  - type: xlrelease.StringVariable
    key: FlextpFlatpackAEM2DWServersInvolved
  - type: xlrelease.StringVariable
    key: release
  extensions:
  - name: Dashboard
    type: xlrelease.Dashboard
    owner: e025882
    tiles:
    - name: Release progress
      type: xlrelease.ReleaseProgressTile
    - name: Release summary
      type: xlrelease.ReleaseSummaryTile
    - name: Resource usage
      type: xlrelease.ResourceUsageTile
    - name: Release timeline
      type: xlrelease.TimelineTile
    - name: Release health
      type: xlrelease.ReleaseHealthTile
    - name: Grid
      type: xlrelease.TaskProgressTile
      row: 2
      col: 2
      tags:
      - grid
    - name: FlexTP
      type: xlrelease.TaskProgressTile
      row: 3
      col: 0
      tags:
      - flextp
  riskProfile: Default risk profile
- template: PEAT-WEBAPPS-22.3
  description: This Template mirrors the PEAT DIP
  scheduledStartDate: 2019-02-06T09:00:00-06:00
  phases:
  - phase: XLR Release
    tasks:
    - name: Add Release Tag
      type: xlr.AddTag
    color: '#0079BC'
  - phase: WEBAPPS
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      tags:
      - WebApps
    - name: Parallel Deployment
      type: xlrelease.ParallelGroup
      tasks:
      - name: ODM applications
        type: xlrelease.SequentialGroup
        tags:
        - ODM
        tasks:
        - name: Habitat
          type: xlrelease.SequentialGroup
          tags:
          - Habitat
          tasks:
          - name: Promote-dmpdecisionserver_dvs_ext_0
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.dmp_decision_server_dvs_ext_0_version}
              channel=stage
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - Habitat
            - dmpdecisionserver_dvs_ext_0_peat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmpdecisionserver_dvs_ext_1_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.dmpdecisionserver_dvs_ext_1_peat.version}
              channel=stage
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmpdecisionserver_dvs_ext_1_peat
            - Habitat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmpdecisionserver_dvs_int_0_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.dmpdecisionserver_dvs_int_0_peat.version}
              channel=stage
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmpdecisionserver_dvs_int_0_peat
            - Habitat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmpdecisionserver_dvs_int_1_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.dmpdecisionserver_dvs_int_1_peat.version}
              channel=stage
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmpdecisionserver_dvs_int_1_peat
            - Habitat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmpdecisionserver_res_0_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.dmpdecisionserver_res_0_peat.version}
              channel=stage
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmpdecisionserver_res_0_peat
            - Habitat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmpdecisionserver_res_1_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.dmpdecisionserver_res_1_peat.version}
              channel=stage
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmpdecisionserver_res_1_peat
            - Habitat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-decisioncenter_bc_service_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.decisioncenter_bc_service_peat_version}
              channel=stage
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - decisioncenter_bc_service_peat
            - Habitat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-decision_center_ec_components_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.decision_center_ec_components_peat.version}
              channel=stage
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - decision_center_ec_components_peat
            - Habitat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-decision_center_ec_webservices_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.decision_center_ec_webservices_peat.version}
              channel=stage
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - decision_center_ec_webervices_peat
            - Habitat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmp_udt_ws_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.dmp_udt_ws_peat_version}
              channel=stage
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmp_udt_ws_peat
            - Habitat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Validation
            type: xlrelease.SequentialGroup
            tasks:
            - name: decisionserver_res_service
              type: xlrelease.SequentialGroup
              tags:
              - decisionserver_res_service
              - Habitat
              tasks:
              - name: DMPDecisionServer_dvs_ext_0 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_ext_0/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_ext_0/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_dvs_ext_0
                - Habitat
              - name: DMPDecisionServer_dvs_ext_1 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_ext_1/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_ext_1/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_dvs_ext_1
                - Habitat
              - name: DMPDecisionServer_dvs_int_0 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_int_0/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_int_0/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_dvs_int_0_peat
                - Habitat
              - name: DMPDecisionServer_dvs_int_1 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_int_1/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_int_1/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_dvs_int_1
                - Habitat
              - name: DMPDecisionServer_res_0 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_res_0/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_res_0/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_res_0
                - Habitat
              - name: DMPDecisionServer_res_1 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_res_1/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_res_1/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_res_1
                - Habitat
              - name: decisioncenter_bc_service status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisioncenter_bc_service/job/status/job/peat/job/Status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisioncenter_bc_service/job/status/job/peat/job/Status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - decisioncenter_bc_service
                - Habitat
              - name: dmp_decision_center_ec_components
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_components/job/status/job/peat/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_components/job/status/job/peat/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmp_decision_center_ec_components
                - Habitat
              - name: dmp_decision_center_ec_webservices
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_webservices/job/status/job/peat/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_webservices/job/status/job/peat/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmp_decision_center_ec_components
                - Habitat
              - name: dmp_udt_ws
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/dmp_udt_ws/job/status/job/peat/job/Status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/dmp_udt_ws/job/status/job/peat/job/Status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmp_udt_ws_peat
                - Habitat
              - name: Validate
                type: xlrelease.GateTask
      - name: TFC Tomcat Apps HABITAT & PCF
        type: xlrelease.SequentialGroup
        tags:
        - Tomcat Apps
        - Habitat
        tasks:
        - name: Lift this gate to begin deployment
          type: xlrelease.GateTask
        - name: ISSReports - PCF deployment
          type: xlrelease.SequentialGroup
          tasks:
          - name: PCF app BTE config PR merge
            type: stash.MergePullRequest
            server: Bitbucket Server
            username: dmp_xlr
            project: TFC-WS-PCF
            repository: tfc-pcf-config
            prid: "155"
            description: |-
              PR link to merge

              https://fusion.mastercard.int/stash/projects/TFC-WS-PCF/repos/tfc-pcf-config/pull-requests/155/overview

              Please take approval from all required person and merge this PR.
            scheduledStartDate: 2022-03-21T12:01:00-05:00
            dueDate: 2022-03-25T12:02:00-05:00
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: PCF app deployment jenkins job
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: TFCPCF/job/PCF/job/stl-stage/job/Deploy-ISS-Reports-Services-PEAT
            branch: Deploy-ISS-Reports-Services-PEAT
            description: |-
              Run this jenkins job to deploy ISSReportsservices on PCF (pcf_org: ESS-TFC and pcf_space: stage-peat)

              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-ISS-Reports-Services-PEAT/
            scheduledStartDate: 2022-03-25T12:02:00-05:00
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: PCF app deployment validation
            type: xlrelease.GateTask
            description: |-
              Validate ISS Report Deployment in PCF.

              Checks for Jenkins Job execution Is successful for IssReport TFC apps
              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-ISS-Reports-Services-PEAT/

              Verify if the deployment is successful in PCF for iss-reports-services application
              - Login into PEAT PCF Space: https://apps.system.stl.pcfstage00.mastercard.int/
              - Traverse to the ESS-TFC Org and go to stage-peat space.
              - iss-reports-services-peat

              Login to Dynatrace and verify the new application instance Is available
              - iss-reports-services-peat

              Login to Splunk and verify the logs are available for iss-reports-services

              Splunk URL
              https://dtl.splunk.mastercard.int

              Query String:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="iss-reports-services-peat"

              Query to verify app Is started:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="iss-reports-services-peat" "Started Application in * seconds (JVM running for *)"

              Verify the iss-reports-services service is registered in PEAT Krang
               - Login to Stage Krang - https://stage.eportal.mastercard.com/apie-stage-krang
               - Search for tfc
               - iss-reports-services should be registered with 4 instances and the pcf routes must be displayed and each instance is associated with PEAT tag
        - name: Deploy tfcgateway
          type: xlrelease.SequentialGroup
          tasks:
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=tfcgateway dmp_user_interface_frameworks/tfc_tfcgateway
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for Gateway to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Status tfc_gateway
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_gateway/job/PEAT/job/status/
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Gateway is not registered with synapse. Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/
        - name: Deploy DI
          type: xlrelease.SequentialGroup
          tasks:
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=di dmp_user_interface_frameworks/tfc_di
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for DI to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Status tfc_di
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_di/job/PEAT/job/status/
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_di/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
        - name: Deploy TFCConfig
          type: xlrelease.SequentialGroup
          tasks:
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=tfcconfig dmp_user_interface_frameworks/tfc_tfcconfig
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for tfcconfig to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: status tfc_tfcconfig
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcconfig/job/PEAT/job/status/
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
        - name: Deploy Rulemanager
          type: xlrelease.SequentialGroup
          tasks:
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=rulemanager dmp_user_interface_frameworks/tfc_rulemanager
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for tfcconfig to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: status tfc_rulemanager
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_rulemanager/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_rulemanager/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
        - name: Deploy Transactionmanager
          type: xlrelease.SequentialGroup
          tasks:
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=transactionmanager dmp_user_interface_frameworks/tfc_transactionmanager
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for transactionmanager to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: status tfc_transactionmanager
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_transactionmanager/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_transactionmanager/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
        - name: Deploy Casemanager
          type: xlrelease.SequentialGroup
          tasks:
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=casemanager dmp_user_interface_frameworks/tfc_casemanager
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for casemanager to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: status tfc_casemanager
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_casemanager/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_casemanager/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
        - name: Deploy Transactionviewer
          type: xlrelease.SequentialGroup
          tasks:
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=transactionviewer dmp_user_interface_frameworks/tfc_transactionviewer
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for transactionviewer to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: status tfc_transactionviewer
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_transactionviewer/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_transactionviewer/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
        - name: Deploy LIstmanager
          type: xlrelease.SequentialGroup
          tasks:
          - name: PUBLISH TOMLS
            type: xlrelease.SequentialGroup
            tasks:
            - name: Merge PR for TOML changes
              type: stash.MergePullRequest
              server: Bitbucket Server
              prid: "154"
              description: https://fusion.mastercard.int/stash/projects/DMPHAB/repos/dmp-service-config-nonprod/pull-requests/154/diff
            - name: Publish TOML's
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param
              jobParameters: |-
                appEnv=peat
                app=tfc_listmanager
              description: |-
                Publish TOML's on PEAT listmanager nodes

                https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=listmanager dmp_user_interface_frameworks/tfc_listmanager
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for listmanager to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: status tfc_listmanager
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_listmanager/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_listmanager/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
      - name: Fraud Center Apache Updates
        type: xlrelease.SequentialGroup
        scheduledStartDate: 2019-02-06T10:00:00-06:00
        tasks:
        - name: Lift this gate to begin with this Webapp
          type: xlrelease.GateTask
          description: |-
            To avoid Jenkins concurrency issues and job failures, this gate was added to all Webapp deployment sections.

            **_Note that the Webapps can still be deployed in parallel_**, but the deployment for each section will only start when this gate is lifted. If you are blocked waiting for investigation or for a deployment job to run, move on to the next app by lifting its gate.

            Note that some of these gates have preconditions (it will be a checkbox below this text box, if there is a precondition). For instance, some apps require Grid to be up before they are deployed.
          team: SCSSPeatDeployment
          tags:
          - Fraud Center Apache
        - name: Habitat-app_bootstrapper
          type: xlrelease.SequentialGroup
          tasks:
          - name: Habitat-app_bootstrapper
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=app-bootstrapper dmp_user_interface_frameworks/app_bootstrapper
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Status-app_bootstrapper
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
            jobParameters: |-
              habEnv=peat
              habService=dmp_user_interface_frameworks/app_bootstrapper
              habCommand=status
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/peat/job/status/
        - name: Habitat-app_platform
          type: xlrelease.SequentialGroup
          tasks:
          - name: Habitat-app_platform
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=app-platform dmp_user_interface_frameworks/app_platform
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Status-app_platform
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
            jobParameters: |-
              habEnv=peat
              habService=dmp_user_interface_frameworks/app_platform
              habCommand=status
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/peat/job/status/
        - name: Habitat-tfc_help
          type: xlrelease.SequentialGroup
          tasks:
          - name: Habitat-tfc_help
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=tfc-help dmp_user_interface_frameworks/tfc_help
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Status-tfc_help
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
            jobParameters: |-
              habEnv=peat
              habService=dmp_user_interface_frameworks/tfc_help
              habCommand=status
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/peat/job/status/
        - name: Customer-support-webapp - Manual Steps
          type: xlrelease.SequentialGroup
          scheduledStartDate: 2022-03-20T15:06:00-05:00
          dueDate: 2022-03-24T16:08:00-05:00
          tasks:
          - name: Customer-support-webapp - Manual steps
            type: xlrelease.Task
            description: |-
              Follow below steps for deploying app manually-

              Perform stagging task in the host: wjb4stl172, wjb4stl173

              Stagging Location: /tmp/tfc_ui

              Note: - create folder tfc_ui if its not there.
                     mkdir /tmp/tfc_ui
              Give necessary permission.
                     cd /tmp/tfc_ui
              Download artifact via wget command and stage the artifact on above stagging location.

              wget --no-check-certificate https://artifacts.mastercard.int/artifactory/releases/com/mastercard/fraudcenter/apps/customer-support-webapp/22.3.1/customer-support-webapp-22.3.1.zip

              //Unzip and rename the folder:

              unzip -q ./customer-support-webapp-22.3.1.zip -d ./customer-support

              //Take backup before moving the artifact with below:

              cd /apps_01/webcontent/Consumer.securitysolution/htdocs/fraudcenter/apps/

              cp -a customer-support  customer-support-$(date +"%Y-%m-%d")-backup

              //Move the artifact to the location:

              cd /tmp/tfc_ui

              mv customer-support /apps_01/webcontent/Consumer.securitysolution/htdocs/fraudcenter/apps/

              Validate the  UI is working on different browser.

              If validation fail run the roll back as below.

              cd /apps_01/webcontent/Consumer.securitysolution/htdocs/fraudcenter/apps/

              mv customer-support  customer-support-$(date +%Y-%m-%d)-failed

              mv customer-support-$(date +"%Y-%m-%d")-backup  customer-support
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              You can just go to PEAT and click on the customer support app


              It should show the UI on the browser.
        - name: Validate if Fraud Center Apache Updates has been deployed
          type: xlrelease.GateTask
          description: |-
            app_bootstrapper status:
            https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/peat/job/status/

            platform status:
            https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/peat/job/status/

            tfc-help status:
            https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/peat/job/status/



            Make sure Apache updates have been successfully deployed:

            Check correct versions are deployed on wjb4stl172 && wjb4stl173  :

            * Check app-bootstrapper version in

            /apps_01/webcontent/Consumer.securitysolution/htdocs/fraudcenter/version.txt matches expected deployed version: ${folder.app_bootstrapper_version}

            * Check app-platform version in

            /apps_01/webcontent/Consumer.securitysolution/htdocs/fraudcenter/apps/platform/version.txt matches expected deployed version: ${folder.artifact.app-platform.version}

            Make sure TFC Help has been deployed correctly:

            Log into TFC Validator
            Select a customer with access to ISS product
            Click on help icon (?)
            Click on Issuer Security Solutions Utilities Guide and ensure it opens

            Finally check by logging into TFC-UI
            https://dtl.mastercardconnect.com/mccpblcui/#/public/signin
            for username and password check with team
            login into fraudcenter-peat container
            In search bar select Banco Citi card S.A
            check all the UI-TABS (reports, transactions, Lists, Rules, Cases)
          team: SCSSPeatDeployment
          tags:
          - Fraud Center Apache
      - name: RBD apps
        type: xlrelease.SequentialGroup
        tasks:
        - name: Lift this gate to begin with this Webapp
          type: xlrelease.GateTask
          description: |-
            To avoid Jenkins concurrency issues and job failures, this gate was added to all Webapp deployment sections.

            **_Note that the Webapps can still be deployed in parallel_**, but the deployment for each section will only start when this gate is lifted. If you are blocked waiting for investigation or for a deployment job to run, move on to the next app by lifting its gate.

            Note that some of these gates have preconditions (it will be a checkbox below this text box, if there is a precondition). For instance, some apps require Grid to be up before they are deployed.
          team: SCSSPeatDeployment
        - name: RBD Web Service
          type: xlrelease.SequentialGroup
          tasks:
          - name: Publish Updated TOML's
            type: xlrelease.SequentialGroup
            team: SCSSPeatDeployment
            tasks:
            - name: Merge TOML changes
              type: stash.MergePullRequest
              server: Bitbucket Server
              project: DMPHAB
              repository: dmp-service-config-nonprod
              prid: "205"
              description: PR link for reference - https://fusion.mastercard.int/stash/projects/DMPHAB/repos/dmp-service-config-nonprod/pull-requests/205/overview
            - name: Publish - rsk4stl4
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: dmp_xlr
              jobName: ChefHabitat/job/dmp_api_frameworks/job/rbd_web_service/job/PEAT/job/publish-rsk4stl4/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/rbd_web_service/job/PEAT/job/publish-rsk4stl4/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Publish - rsk4stl5
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: dmp_xlr
              jobName: ChefHabitat/job/dmp_api_frameworks/job/rbd_web_service/job/PEAT/job/publish-rsk4stl5/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/rbd_web_service/job/PEAT/job/publish-rsk4stl5/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Deploy
            type: xlrelease.SequentialGroup
            tasks:
            - name: Promote RBD Web Service for peat OEL7
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param
              jobParameters: |-
                packageIdent=${folder.habitat.rbd-web-service.linux1.version}
                channel=peat
                dryRun=false
                platform=linux
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Promote RBD Web Service for peat OEL6
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: dmp_xlr
              jobParameters: |-
                packageIdent=${folder.rbd_web_service_linux2_version}
                channel=peat
                dryRun=false
                platform=linux_kernel2
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Validation
            type: xlrelease.SequentialGroup
            tasks:
            - name: Sleep for 30 seconds before validating
              type: xlrelease.ScriptTask
              script: |-
                import time
                # Sleep for 30 seconds before validation
                time.sleep(30)
            - name: Validate rbd-web-service for peat
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              jobName: ChefHabitat/job/dmp_api_frameworks/job/rbd_web_service/job/PEAT/job/status/
              description: |-
                Check rbd-web-service is up on peat nodes

                https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/rbd_web_service/job/PEAT/job/status/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Verify application status
              type: xlrelease.Task
              description: "Check the application status, it should be up for more\
                \ than 30 seconds"
              team: SCSSPeatDeployment
    color: '#0099CC'
  tags:
  - "22.3"
  variables:
  - type: xlrelease.StringVariable
    key: smJenkinsBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: smStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsDeployStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: StandinDeployStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: StandinDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: griLiveStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: platformServicesDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl832DeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl833DeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpbillingDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: mawsDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpBatchDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminUIDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: transactionDispositionDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: StandinStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: StandinStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsDIStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsDIDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsDIStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: platformServicesStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: platformServicesStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl833StopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl832StopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl832StartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl833StartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: mawsStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: mawsStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuUpdatesDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: transactionDispositionStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: transactionDispositionStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpKmsBatchJobBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: mpsEventBatchBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: lifeCycleWebServiceBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: etlDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsStopBuildStatus-1
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsDeployBuildStatus-1
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsStartBuildStatus-1
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsWebBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpmpseventBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdmockserviceDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdmockserviceStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdmockserviceStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpbillingStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpbillingStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuUpdatesStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuUpdatesStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStopAllBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStopNotifyIssuersBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStopNotifyIssuerscjb4stl832BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStopNotifyIssuerscjb4stl833BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushDeployAllBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStartAllBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStartNotifyIssuerscjb4stl832BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStartNotifyIssuerscjb4stl833BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: bintableStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: bintableDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: bintableStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: standINStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: standINDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: standINStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: sireportBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-riskbaseddecisioning-ws-cis4stl3BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl834StartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl835StartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl835DeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl834DeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl835StopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl834StopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStartNotifyIssuerscjb4stl835BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: DMPDeploymentManager2
    requiresValue: false
    showOnReleaseStart: false
    label: "deploymentmanager2 (Originally bundled in DeploymentManager2_EA-*.ear,\
      \ now deployed individually after Tomcat migration)"
    value: 4.8.3
  - type: xlrelease.StringVariable
    key: DMPRTSRestWebService
    requiresValue: false
    showOnReleaseStart: false
    label: "rtsrestwebservice (Originally bundled in RTSWebService_EA-*.ear, now deployed\
      \ individually after Tomcat migration)"
    value: 3.4.3
  - type: xlrelease.StringVariable
    key: DMPDecisionCenter_EC
    requiresValue: false
    showOnReleaseStart: false
    label: "emsruleteamserver  (Originally an EMSRuleTeamServer-*.ear, now updated\
      \ to war file)"
    value: 3.6.0
  - type: xlrelease.StringVariable
    key: DMPDecisionCenter_BC
    requiresValue: false
    showOnReleaseStart: false
    label: Newly added for Business console part of OdmUpgrade
    value: 2.1.0
  - type: xlrelease.StringVariable
    key: DMPDecisionServerConsole
    requiresValue: false
    showOnReleaseStart: false
    label: "DecisionServerConsole  (Originally an DecisionServerConsole -*.ear, now\
      \ updated to war file)"
    value: 3.1.0
  - type: xlrelease.StringVariable
    key: DMPDecisionValidationServerIntegration
    requiresValue: false
    showOnReleaseStart: false
    label: "DecisionValidationServerIntegration  (Originally an DecisionValidationServerIntegration-*.ear,\
      \ now updated to war file)"
    value: 3.12.0
  - type: xlrelease.StringVariable
    key: tfc-help-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminConfigcjb4stl332BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminConfigcjb4stl333BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-decisionadmin-cjb4stl332
    requiresValue: false
    showOnReleaseStart: false
    value: 5.0.0
  - type: xlrelease.StringVariable
    key: jboss-config-decisionadmin-cjb4stl333
    requiresValue: false
    showOnReleaseStart: false
    value: 5.0.0
  - type: xlrelease.StringVariable
    key: jboss-config-bintable-rsk4stl4-deployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-securitysolutions-cjb4stl332-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-securitysolutions-cjb4stl333-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-securitysolutions-cjb4stl996-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-securitysolutions-cjb4stl997-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: fc-platform-services-cjb4stl332-jboss-config-deploy-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: fc-platform-services-cjb4stl333-jboss-config-deploy-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: JBOSS-CONFIG-APACHE-wjb4stl172
    requiresValue: false
    showOnReleaseStart: false
    label: JBOSS-CONFIG-APACHE-wjb4stl172
    value: 4.2.0
  - type: xlrelease.StringVariable
    key: JBOSS-CONFIG-APACHE-wjb4stl173
    requiresValue: false
    showOnReleaseStart: false
    label: JBOSS-CONFIG-APACHE-wjb4stl173
    value: 4.2.0
  - type: xlrelease.StringVariable
    key: rbd-nudata-provider-PR-MergeStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbd-web-service-PR-MergeStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-RBD-rsk4stl4-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-RBD-rsk4stl5-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: consumer-controls-ws-PR-merge-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-riskbaseddecisioning-ws-rsk4stl4.version
    requiresValue: false
    showOnReleaseStart: false
    label: jboss-config-riskbaseddecisioning-ws-rsk4stl4.version
    value: 4.5.0
  - type: xlrelease.StringVariable
    key: jboss-config-riskbaseddecisioning-ws-rsk4stl5.version
    requiresValue: false
    showOnReleaseStart: false
    label: jboss-config-riskbaseddecisioning-ws-rsk4stl5.version
    value: 4.5.0
  - type: xlrelease.StringVariable
    key: consumer-controls-ws-stop-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: consumer-controls-ws-start-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: release
  extensions:
  - name: Dashboard
    type: xlrelease.Dashboard
    owner: e025882
    tiles:
    - name: Release progress
      type: xlrelease.ReleaseProgressTile
    - name: Release summary
      type: xlrelease.ReleaseSummaryTile
    - name: Resource usage
      type: xlrelease.ResourceUsageTile
    - name: Release timeline
      type: xlrelease.TimelineTile
    - name: Release health
      type: xlrelease.ReleaseHealthTile
    - name: ODM
      type: xlrelease.TaskProgressTile
      row: 2
      col: 2
      tags:
      - odm
    - name: Decision Admin
      type: xlrelease.TaskProgressTile
      row: 3
      col: 0
      tags:
      - decision admin
    - name: BRMSWS
      type: xlrelease.TaskProgressTile
      row: 3
      col: 1
      tags:
      - brmsws
    - name: Fraud Center
      type: xlrelease.TaskProgressTile
      row: 3
      col: 2
      tags:
      - fraud center apache
      - fraud center tomcat
    - name: PanProfile
      type: xlrelease.TaskProgressTile
      row: 4
      col: 0
      tags:
      - panprofile
    - name: RBD
      type: xlrelease.TaskProgressTile
      row: 4
      col: 1
      tags:
      - rbd ws
      - rbd nudata
    - name: ABU
      type: xlrelease.TaskProgressTile
      row: 4
      col: 2
      tags:
      - abu push
      - abu updates
      - abu maws
    - name: Consumer Controls
      type: xlrelease.TaskProgressTile
      row: 5
      col: 0
      tags:
      - consumer controls
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 5
      col: 1
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 5
      col: 2
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 6
      col: 0
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 6
      col: 1
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 6
      col: 2
  riskProfile: Default risk profile
- template: PEAT-WEBAPPS-22.4
  description: This Template mirrors the PEAT DIP
  scheduledStartDate: 2019-02-06T09:00:00-06:00
  phases:
  - phase: XLR Release
    tasks:
    - name: Add Release Tag
      type: xlr.AddTag
    color: '#0079BC'
  - phase: WEBAPPS
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      tags:
      - WebApps
    - name: Parallel Deployment
      type: xlrelease.ParallelGroup
      tasks:
      - name: ODM applications
        type: xlrelease.SequentialGroup
        tags:
        - ODM
        tasks:
        - name: DMPRuleWebService PCF
          type: xlrelease.SequentialGroup
          tasks:
          - name: Merge PR
            type: xlrelease.Task
            description: Merge PR https://fusion.mastercard.int/stash/projects/ESSDMP-CORE/repos/dmprulewebservices-jenkins/pull-requests/69/overview
            owner: riskps
          - name: Run Jenkins Job
            type: xlrelease.Task
            description: |-
              Run Jenkins job for deployment -
              https://cd5.mastercard.int/jenkins/job/DMPRuleWebService/job/stl-peat/job/Step1.DeployDMPRuleWebServiceApp/
            owner: riskps
          - name: Check DMPRuleWS is running in PCF
            type: xlrelease.Task
            description: |-
              Check dmp-rule-ws-peat appears in PCF dashboard

              link: https://apps.system.stl.pcfstage00.mastercard.int/

              Go to DMPRuleWebService PEAT STL section and check service is running
            owner: riskps
          - name: Validation - Run health check
            type: xlrelease.Task
            description: |-
              Run following URL in browser:
              https://dmp-rule-ws-peat.apps.stl.pcfstage00.mastercard.int/dmprule/healthCheck

              Expected result: {"status": true}
            owner: RiskPS
        - name: Habitat
          type: xlrelease.SequentialGroup
          tags:
          - Habitat
          tasks:
          - name: Promote-dmpdecisionserver_dvs_ext_0
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.dmp_decision_server_dvs_ext_0_version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - Habitat
            - dmpdecisionserver_dvs_ext_0_peat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmpdecisionserver_dvs_ext_1_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.dmpdecisionserver_dvs_ext_1_peat.version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmpdecisionserver_dvs_ext_1_peat
            - Habitat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmpdecisionserver_dvs_int_0_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.dmpdecisionserver_dvs_int_0_peat.version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmpdecisionserver_dvs_int_0_peat
            - Habitat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmpdecisionserver_dvs_int_1_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.dmpdecisionserver_dvs_int_1_peat.version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmpdecisionserver_dvs_int_1_peat
            - Habitat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmpdecisionserver_res_0_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.dmpdecisionserver_res_0_peat.version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmpdecisionserver_res_0_peat
            - Habitat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmpdecisionserver_res_1_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.dmpdecisionserver_res_1_peat.version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmpdecisionserver_res_1_peat
            - Habitat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-decisioncenter_bc_service_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.decisioncenter_bc_service_peat_version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - decisioncenter_bc_service_peat
            - Habitat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-decision_center_ec_components_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.decision_center_ec_components_peat.version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - decision_center_ec_components_peat
            - Habitat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-decision_center_ec_webservices_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.decision_center_ec_webservices_peat.version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - decision_center_ec_webervices_peat
            - Habitat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmp_udt_ws_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.dmp_udt_ws_peat_version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmp_udt_ws_peat
            - Habitat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Validation
            type: xlrelease.SequentialGroup
            tasks:
            - name: decisionserver_res_service
              type: xlrelease.SequentialGroup
              tags:
              - decisionserver_res_service
              - Habitat
              tasks:
              - name: DMPDecisionServer_dvs_ext_0 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_ext_0/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_ext_0/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_dvs_ext_0
                - Habitat
              - name: DMPDecisionServer_dvs_ext_1 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_ext_1/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_ext_1/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_dvs_ext_1
                - Habitat
              - name: DMPDecisionServer_dvs_int_0 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_int_0/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_int_0/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_dvs_int_0_peat
                - Habitat
              - name: DMPDecisionServer_dvs_int_1 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_int_1/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_int_1/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_dvs_int_1
                - Habitat
              - name: DMPDecisionServer_res_0 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_res_0/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_res_0/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_res_0
                - Habitat
              - name: DMPDecisionServer_res_1 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_res_1/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_res_1/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_res_1
                - Habitat
              - name: decisioncenter_bc_service status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisioncenter_bc_service/job/status/job/peat/job/Status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisioncenter_bc_service/job/status/job/peat/job/Status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - decisioncenter_bc_service
                - Habitat
              - name: dmp_decision_center_ec_components
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_components/job/status/job/peat/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_components/job/status/job/peat/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmp_decision_center_ec_components
                - Habitat
              - name: dmp_decision_center_ec_webservices
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_webservices/job/status/job/peat/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_webservices/job/status/job/peat/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmp_decision_center_ec_components
                - Habitat
              - name: dmp_udt_ws
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/dmp_udt_ws/job/status/job/peat/job/Status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/dmp_udt_ws/job/status/job/peat/job/Status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmp_udt_ws_peat
                - Habitat
              - name: Validate
                type: xlrelease.GateTask
      - name: TFC Tomcat Apps HABITAT & PCF
        type: xlrelease.SequentialGroup
        tags:
        - Tomcat Apps
        - Habitat
        tasks:
        - name: Lift this gate to begin deployment
          type: xlrelease.GateTask
        - name: Deploy tfcgateway
          type: xlrelease.SequentialGroup
          tasks:
          - name: PUBLISH TOMLS
            type: xlrelease.SequentialGroup
            flagStatus: ATTENTION_NEEDED
            flagComment: Only Continue if needed
            precondition: "True"
            tags:
            - TOML
            tasks:
            - name: Merge PR for TOML changes
              type: bitbucket.MergePullRequest
              server: NewConfigBitbucket
              repo_full_name: DMPHAB/dmp-service-config-nonprod
              prid: "224"
              message: Merging TFC tomcat app TOML file
              closebranch: true
              description: "Merging PR: https://fusion.mastercard.int/stash/projects/DMPHAB/repos/dmp-service-config-nonprod/pull-requests/224/overview"
            - name: Publish TOML's
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param
              jobParameters: |-
                appEnv=peat
                app=tfc_tfcgateway
              description: |-
                Publish TOML's on PEAT TFCGateway nodes

                https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=tfcgateway dmp_user_interface_frameworks/tfc_tfcgateway
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for Gateway to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Gateway is not registered with synapse. Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/
        - name: Deploy DI
          type: xlrelease.SequentialGroup
          tasks:
          - name: PUBLISH TOMLS
            type: xlrelease.SequentialGroup
            flagStatus: ATTENTION_NEEDED
            flagComment: Only Continue if needed
            precondition: "True"
            tasks:
            - name: Merge PR for TOML changes
              type: bitbucket.MergePullRequest
              server: NewConfigBitbucket
              repo_full_name: DMPHAB/dmp-service-config-nonprod
              prid: "211"
              message: Merging TFC tomcat app TOML file
              closebranch: true
              description: "PR merged: https://fusion.mastercard.int/stash/projects/DMPHAB/repos/dmp-service-config-nonprod/pull-requests/211/overview"
            - name: Publish TOML's
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param
              jobParameters: |-
                appEnv=peat
                app=tfc_di
              description: |-
                Publish TOML's on PEAT DI nodes

                https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=di dmp_user_interface_frameworks/tfc_di
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for DI to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Status tfc_di
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_di/job/PEAT/job/status/
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
        - name: Deploy TFCConfig
          type: xlrelease.SequentialGroup
          tasks:
          - name: PUBLISH TOMLS
            type: xlrelease.SequentialGroup
            flagStatus: ATTENTION_NEEDED
            flagComment: Only Continue if needed
            precondition: "True"
            tasks:
            - name: Merge PR for TOML changes
              type: bitbucket.MergePullRequest
              server: NewConfigBitbucket
              repo_full_name: DMPHAB/dmp-service-config-nonprod
              prid: "208"
              message: Merging TFC tomcat app TOML file
              closebranch: true
              description: "Merge PR: https://fusion.mastercard.int/stash/projects/DMPHAB/repos/dmp-service-config-nonprod/pull-requests/208/overview"
            - name: Publish TOML's
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param
              jobParameters: |-
                appEnv=peat
                app=tfc_tfcconfig
              description: |-
                Publish TOML's on PEAT tfcconfig nodes

                https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=tfcconfig dmp_user_interface_frameworks/tfc_tfcconfig
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for tfcconfig to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: status tfc_tfcconfig
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcconfig/job/PEAT/job/status/
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
        - name: Deploy Rulemanager
          type: xlrelease.SequentialGroup
          tasks:
          - name: PUBLISH TOMLS
            type: xlrelease.SequentialGroup
            flagStatus: ATTENTION_NEEDED
            flagComment: Only Continue if needed
            precondition: "True"
            tasks:
            - name: Merge PR for TOML changes
              type: bitbucket.MergePullRequest
              server: NewConfigBitbucket
              repo_full_name: DMPHAB/dmp-service-config-nonprod
              prid: "222"
              message: Merging TFC tomcat app TOML file
              closebranch: true
              description: "Merge PR: https://fusion.mastercard.int/stash/projects/DMPHAB/repos/dmp-service-config-nonprod/pull-requests/222/overview"
            - name: Publish TOML's
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param
              jobParameters: |-
                appEnv=peat
                app=tfc_rulemanager
              description: |-
                Publish TOML's on PEAT rulemanager nodes

                https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=rulemanager dmp_user_interface_frameworks/tfc_rulemanager
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for tfcconfig to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: status tfc_rulemanager
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_rulemanager/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_rulemanager/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
        - name: Deploy Transactionmanager
          type: xlrelease.SequentialGroup
          tasks:
          - name: PUBLISH TOMLS
            type: xlrelease.SequentialGroup
            flagStatus: ATTENTION_NEEDED
            flagComment: Only Continue if needed
            precondition: "True"
            tasks:
            - name: Merge PR for TOML changes
              type: bitbucket.MergePullRequest
              server: NewConfigBitbucket
              repo_full_name: DMPHAB/dmp-service-config-nonprod
              prid: "225"
              message: Merging TFC tomcat app TOML file
              closebranch: true
              description: "Merge PR: https://fusion.mastercard.int/stash/projects/DMPHAB/repos/dmp-service-config-nonprod/pull-requests/225/overview"
            - name: Publish TOML's
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param
              jobParameters: |-
                appEnv=peat
                app=tfc_transactionmanager
              description: |-
                Publish TOML's on PEAT transactionmanager nodes

                https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=transactionmanager dmp_user_interface_frameworks/tfc_transactionmanager
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for transactionmanager to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: status tfc_transactionmanager
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_transactionmanager/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_transactionmanager/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
        - name: Deploy Casemanager
          type: xlrelease.SequentialGroup
          tasks:
          - name: PUBLISH TOMLS
            type: xlrelease.SequentialGroup
            flagStatus: ATTENTION_NEEDED
            flagComment: Only Continue if needed
            precondition: "True"
            tasks:
            - name: Merge PR for TOML changes
              type: bitbucket.MergePullRequest
              server: NewConfigBitbucket
              repo_full_name: DMPHAB/dmp-service-config-nonprod
              prid: "220"
              message: Merging TFC tomcat app TOML file
              closebranch: true
              description: "Merge PR: https://fusion.mastercard.int/stash/projects/DMPHAB/repos/dmp-service-config-nonprod/pull-requests/220/overview"
            - name: Publish TOML's
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param
              jobParameters: |-
                appEnv=peat
                app=tfc_casemanager
              description: |-
                Publish TOML's on PEAT Casemanager nodes

                https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=casemanager dmp_user_interface_frameworks/tfc_casemanager
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for casemanager to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: status tfc_casemanager
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_casemanager/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_casemanager/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
        - name: Deploy Transactionviewer
          type: xlrelease.SequentialGroup
          tasks:
          - name: PUBLISH TOMLS
            type: xlrelease.SequentialGroup
            flagStatus: ATTENTION_NEEDED
            flagComment: Only Continue if needed
            precondition: "True"
            tasks:
            - name: Merge PR for TOML changes
              type: bitbucket.MergePullRequest
              server: NewConfigBitbucket
              repo_full_name: DMPHAB/dmp-service-config-nonprod
              prid: "216"
              message: Merging TFC tomcat app TOML file
              closebranch: true
              description: "Merge PR: https://fusion.mastercard.int/stash/projects/DMPHAB/repos/dmp-service-config-nonprod/pull-requests/216/overview"
            - name: Publish TOML's
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param
              jobParameters: |-
                appEnv=peat
                app=tfc_transactionviewer
              description: |-
                Publish TOML's on PEAT transactionviewer nodes

                https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=transactionviewer dmp_user_interface_frameworks/tfc_transactionviewer
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for transactionviewer to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: status tfc_transactionviewer
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_transactionviewer/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_transactionviewer/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
        - name: Deploy LIstmanager
          type: xlrelease.SequentialGroup
          tasks:
          - name: PUBLISH TOMLS
            type: xlrelease.SequentialGroup
            flagStatus: ATTENTION_NEEDED
            flagComment: Only Continue if needed
            precondition: "True"
            tasks:
            - name: Merge PR for TOML changes
              type: bitbucket.MergePullRequest
              server: NewConfigBitbucket
              repo_full_name: DMPHAB/dmp-service-config-nonprod
              prid: "212"
              message: Merging TFC tomcat app TOML file
              closebranch: true
              description: "Merge PR: https://fusion.mastercard.int/stash/projects/DMPHAB/repos/dmp-service-config-nonprod/pull-requests/212/overview"
            - name: Publish TOML's
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param
              jobParameters: |-
                appEnv=peat
                app=tfc_listmanager
              description: |-
                Publish TOML's on PEAT listmanager nodes

                https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=listmanager dmp_user_interface_frameworks/tfc_listmanager
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for listmanager to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: status tfc_listmanager
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_listmanager/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_listmanager/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
        - name: ISSReports - PCF deployment
          type: xlrelease.SequentialGroup
          tasks:
          - name: PCF app deployment jenkins job
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: TFCPCF/job/PCF/job/stl-stage/job/Deploy-ISS-Reports-Services-PEAT
            description: |-
              Run this jenkins job to deploy ISSReportsservices on PCF (pcf_org: ESS-TFC and pcf_space: stage-peat)

              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-ISS-Reports-Services-PEAT/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: PCF app deployment validation
            type: xlrelease.GateTask
            description: |-
              Validate ISS Report Deployment in PCF.

              Checks for Jenkins Job execution Is successful for IssReport TFC apps
              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-ISS-Reports-Services-PEAT/

              Verify if the deployment is successful in PCF for iss-reports-services application
              - Login into PEAT PCF Space: https://apps.system.stl.pcfstage00.mastercard.int/
              - Traverse to the ESS-TFC Org and go to stage-peat space.
              - iss-reports-services-peat

              Login to Dynatrace and verify the new application instance Is available
              - iss-reports-services-peat

              Login to Splunk and verify the logs are available for iss-reports-services

              Splunk URL
              https://dtl.splunk.mastercard.int

              Query String:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="iss-reports-services-peat"

              Query to verify app Is started:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="iss-reports-services-peat" "Started Application in * seconds (JVM running for *)"

              Verify the iss-reports-services service is registered in PEAT Krang
               - Login to Stage Krang - https://stage.eportal.mastercard.com/apie-stage-krang
               - Search for tfc
               - iss-reports-services should be registered with 4 instances and the pcf routes must be displayed and each instance is associated with PEAT tag
        - name: Rule Testing Service - PCF deployment
          type: xlrelease.SequentialGroup
          tasks:
          - name: PCF app deployment jenkins job
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: TFCPCF/PCF/stl-stage/Deploy-Rule-Testing-Service-PEAT
            description: |-
              Run this jenkins job to deploy Rule Testing Service on PCF (pcf_org: ESS-TFC and pcf_space: stage-peat)

              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-Rule-Testing-Service-PEAT/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: PCF app deployment validation
            type: xlrelease.GateTask
            description: |-
              Validate Rule Testing Service Deployment in PCF.

              Checks for Jenkins Job execution Is successful for Rule Testing Service TFC apps
              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-Rule-Testing-Service-PEAT/

              Verify if the deployment is successful in PCF for Rule Testing Service application
              - Login into PEAT PCF Space: https://apps.system.stl.pcfstage00.mastercard.int/
              - Traverse to the ESS-TFC Org and go to stage-peat space.
              - rule-testing-service-peat

              Login to Dynatrace and verify the new application instance Is available
              - rule-testing-service-peat

              Login to Splunk and verify the logs are available for rule-testing-service

              Splunk URL
              https://dtl.splunk.mastercard.int

              Query String:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="rule-testing-*"

              Query to verify app Is started:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="rule-testing-*" "Started Application in * seconds (JVM running for *)"

              Verify the rule-testing-service service is registered in PEAT Krang
               - Login to Stage Krang - https://stage.eportal.mastercard.com/apie-stage-krang
               - Search for tfc
               - rule-testing-service should be registered with 4 instances and the pcf routes must be displayed and each instance is associated with PEAT tag
        - name: Rule Metrics Service - PCF deployment
          type: xlrelease.SequentialGroup
          tasks:
          - name: PCF app deployment jenkins job
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: TFCPCF/PCF/stl-stage/Deploy-Rule-Metrics-Service-PEAT
            description: |-
              Run this jenkins job to deploy Rule Metrics Service on PCF (pcf_org: ESS-TFC and pcf_space: stage-peat)

              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-Rule-Metrics-Service-PEAT/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: PCF app deployment validation
            type: xlrelease.GateTask
            description: |-
              Validate Rule Metrics Service Deployment in PCF.

              Checks for Jenkins Job execution Is successful for Rule Metrics Service TFC apps
              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-Rule-Metrics-Service-PEAT/

              Verify if the deployment is successful in PCF for Rule Metrics Service application
              - Login into PEAT PCF Space: https://apps.system.stl.pcfstage00.mastercard.int/
              - Traverse to the ESS-TFC Org and go to stage-peat space.
              - rule-metrics-service-peat

              Login to Dynatrace and verify the new application instance Is available
              - rule-metrics-service-peat

              Login to Splunk and verify the logs are available for rule-metrics-service

              Splunk URL
              https://dtl.splunk.mastercard.int

              Query String:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="rule-metrics-service-peat"

              Query to verify app Is started:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="rule-metrics-service-peat" "Started Application in * seconds (JVM running for *)"

              Verify the rule-metrics-service is registered in PEAT Krang
               - Login to Stage Krang - https://stage.eportal.mastercard.com/apie-stage-krang
               - Search for tfc
               - rule-metrics-service should be registered with 4 instances and the pcf routes must be displayed and each instance is associated with PEAT tag
      - name: Fraud Center Apache Updates
        type: xlrelease.SequentialGroup
        scheduledStartDate: 2019-02-06T10:00:00-06:00
        tasks:
        - name: Lift this gate to begin with this Webapp
          type: xlrelease.GateTask
          description: |-
            To avoid Jenkins concurrency issues and job failures, this gate was added to all Webapp deployment sections.

            **_Note that the Webapps can still be deployed in parallel_**, but the deployment for each section will only start when this gate is lifted. If you are blocked waiting for investigation or for a deployment job to run, move on to the next app by lifting its gate.

            Note that some of these gates have preconditions (it will be a checkbox below this text box, if there is a precondition). For instance, some apps require Grid to be up before they are deployed.
          team: SCSSPeatDeployment
          tags:
          - Fraud Center Apache
        - name: Habitat-app_bootstrapper
          type: xlrelease.SequentialGroup
          tasks:
          - name: Habitat-app_bootstrapper
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=app-bootstrapper dmp_user_interface_frameworks/app_bootstrapper
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Status-app_bootstrapper
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
            jobParameters: |-
              habEnv=peat
              habService=dmp_user_interface_frameworks/app_bootstrapper
              habCommand=status
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/peat/job/status/
        - name: Habitat-app_platform
          type: xlrelease.SequentialGroup
          tasks:
          - name: Habitat-app_platform
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=app-platform dmp_user_interface_frameworks/app_platform
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Status-app_platform
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
            jobParameters: |-
              habEnv=peat
              habService=dmp_user_interface_frameworks/app_platform
              habCommand=status
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/peat/job/status/
        - name: Habitat-tfc_help
          type: xlrelease.SequentialGroup
          tasks:
          - name: Habitat-tfc_help
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=tfc-help dmp_user_interface_frameworks/tfc_help
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Status-tfc_help
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
            jobParameters: |-
              habEnv=peat
              habService=dmp_user_interface_frameworks/tfc_help
              habCommand=status
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/hab-command-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/peat/job/status/
        - name: Apache restart
          type: xlrelease.SequentialGroup
          tasks:
          - name: Apache Config Jenkins build
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd
            username: dmp_xlr
            jobName: ChefObjectPipeline/job/ESS/job/mc_dmp_chef_objects_nonprod
            description: |-
              Trigger Chef Converge Jenkins with updated node config

              https://cd.mastercard.int/jenkins/job/ChefObjectPipeline/job/ESS/job/mc_dmp_chef_objects_nonprod/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd1}"
          - name: Node validation in chef Automate
            type: xlrelease.GateTask
            description: |-
              Confirm in Chef automate that the host is converged
              Hosts:
              wjb4stl172.mastercard.int
              https://automate.chef.mastercard.int/infrastructure/client-runs?name=wjb4stl172

              wjb4stl173.mastercard.int
              https://automate.chef.mastercard.int/infrastructure/client-runs?name=wjb4stl173
        - name: Validate if Fraud Center Apache Updates has been deployed
          type: xlrelease.GateTask
          description: |-
            app_bootstrapper status:
            https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/peat/job/status/

            platform status:
            https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/peat/job/status/

            tfc-help status:
            https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/peat/job/status/



            Make sure Apache updates have been successfully deployed:

            Check correct versions are deployed on wjb4stl172 && wjb4stl173  :

            * Check app-bootstrapper version in

            /apps_01/webcontent/Consumer.securitysolution/htdocs/fraudcenter/version.txt matches expected deployed version: ${folder.app_bootstrapper_version}

            * Check app-platform version in

            /apps_01/webcontent/Consumer.securitysolution/htdocs/fraudcenter/apps/platform/version.txt matches expected deployed version: ${folder.artifact.app-platform.version}

            Make sure TFC Help has been deployed correctly:

            Log into TFC Validator
            Select a customer with access to ISS product
            Click on help icon (?)
            Click on Issuer Security Solutions Utilities Guide and ensure it opens

            Finally check by logging into TFC-UI
            https://dtl.mastercardconnect.com/mccpblcui/#/public/signin
            for username and password check with team
            login into fraudcenter-peat container
            In search bar select Banco Citi card S.A
            check all the UI-TABS (reports, transactions, Lists, Rules, Cases)
          team: SCSSPeatDeployment
          tags:
          - Fraud Center Apache
      - name: Fraud Center Apache via Habitat
        type: xlrelease.SequentialGroup
        scheduledStartDate: 2019-02-06T10:00:00-06:00
        flagStatus: ATTENTION_NEEDED
        flagComment: This isn't expected to be used until 22.5 release
        team: SCSSPeatDeployment
        tasks:
        - name: Lift this gate to begin with this Webapp
          type: xlrelease.GateTask
          description: |-
            To avoid Jenkins concurrency issues and job failures, this gate was added to all Webapp deployment sections.

            **_Note that the Webapps can still be deployed in parallel_**, but the deployment for each section will only start when this gate is lifted. If you are blocked waiting for investigation or for a deployment job to run, move on to the next app by lifting its gate.

            Note that some of these gates have preconditions (it will be a checkbox below this text box, if there is a precondition). For instance, some apps require Grid to be up before they are deployed.
          team: SCSSPeatDeployment
          tags:
          - Fraud Center Apache
        - name: First time release steps
          type: xlrelease.SequentialGroup
          team: SCSSPeatDeployment
          tasks:
          - name: Stop apache instance
            type: xlrelease.Task
            team: SCSSPeatDeployment
          - name: Promote-the_fraud_center_apache24
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/promote-specific-param/
            jobParameters: |-
              packageIdent=${folder.the_fraud_center_apache24_version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/promote-specific-param/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Onboard new apache habitat packages
            type: stash.MergePullRequest
            server: Bitbucket Server
            username: dmp_xlr
            project: DECISION_MANAGEMENT
            repository: mc_dmp_chef_objects_nonprod
            team: SCSSPeatDeployment
          - name: Build Chef Object pipeline
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd
            username: dmp_xlr
            jobName: ChefObjectPipeline/job/ESS/job/mc_dmp_chef_objects_nonprod
            description: |-
              Trigger Chef Converge Jenkins with updated node config

              https://cd.mastercard.int/jenkins/job/ChefObjectPipeline/job/ESS/job/mc_dmp_chef_objects_nonprod/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd1}"
          - name: Node validation in chef Automate
            type: xlrelease.GateTask
            description: |-
              Confirm in Chef automate that the host is converged
              Hosts:
              wjb4stl172.mastercard.int
              https://automate.chef.mastercard.int/infrastructure/client-runs?name=wjb4stl172

              wjb4stl173.mastercard.int
              https://automate.chef.mastercard.int/infrastructure/client-runs?name=wjb4stl173
        - name: Deploy the_fraud_center_apache24
          type: xlrelease.SequentialGroup
          description: This is the actual apache instance that needs to be the deployed
            first before any of the webcontent packages
          flagComment: This needs to be the first webcontent package that's deployed
          tasks:
          - name: Promote-the_fraud_center_apache24
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/promote-specific-param/
            jobParameters: |-
              packageIdent=${folder.the_fraud_center_apache24_version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/promote-specific-param/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Merge any TOML changes if needed
            type: stash.MergePullRequest
            server: Bitbucket Server
            username: dmp_xlr
            team: SCSSPeatDeployment
            precondition: "False"
          - name: Publish TOML's wjb4stl172
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/publish-wjb4stl172/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/publish-wjb4stl172/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Publish TOML's wjb4stl173
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/publish-wjb4stl173/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/publish-wjb4stl172/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Sleep for 30 seconds
            type: xlrelease.ScriptTask
            team: SCSSPeatDeployment
            script: |-
              import time
              # Sleep for 30 seconds before validation
              time.sleep(30)
          - name: Status-the_fraud_center_apache24
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/status/
            team: SCSSPeatDeployment
            watchers:
            - E111441
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd2}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status by checking the last build from the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/status
        - name: Deploy app_bootstrapper
          type: xlrelease.SequentialGroup
          description: Bootstrapper needs to be run first since it set's up the fraud
            center directory
          flagComment: This needs to be the first webcontent package that's deployed
          tasks:
          - name: Promote-app_bootstrapper
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/app_bootstrapper-promote-specific-param/
            jobParameters: |-
              packageIdent=${folder.app_bootstrapper_version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/app_bootstrapper-promote-specific-param/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Sleep for 30 seconds
            type: xlrelease.ScriptTask
            team: SCSSPeatDeployment
            script: |-
              import time
              # Sleep for 30 seconds before validation
              time.sleep(30)
          - name: Status-app_bootstrapper
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/peat/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/peat/job/status/
            team: SCSSPeatDeployment
            watchers:
            - E111441
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd2}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/peat/job/status/
        - name: Deploy apps under htdocs/fraudcenter
          type: xlrelease.ParallelGroup
          tasks:
          - name: Deploy app_platform
            type: xlrelease.SequentialGroup
            tasks:
            - name: Promote-app_platform
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/app_platform-promote-specific-param/
              jobParameters: |-
                packageIdent=${folder.app_platform_version}
                channel=peat
                dryRun=false
                platform=linux
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/app_platform-promote-specific-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Sleep for 30 seconds
              type: xlrelease.ScriptTask
              team: SCSSPeatDeployment
              script: |-
                import time
                # Sleep for 30 seconds before validation
                time.sleep(30)
            - name: Status-app_platform
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/peat/job/status/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/peat/job/status/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Verify Status
              type: xlrelease.GateTask
              description: |-
                Verify habitat app status using the following job

                https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/peat/job/status/
          - name: Deploy tfc_help
            type: xlrelease.SequentialGroup
            tasks:
            - name: Promote-tfc_help
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/tfc_help-promote-specific-param/
              jobParameters: |-
                packageIdent=${folder.tfc_help_version}
                channel=stage
                dryRun=false
                platform=linux
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/tfc_help-promote-specific-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Sleep for 30 seconds
              type: xlrelease.ScriptTask
              team: SCSSPeatDeployment
              script: |-
                import time
                # Sleep for 30 seconds before validation
                time.sleep(30)
            - name: Status-tfc_help
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/peat/job/status/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/peat/job/status/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Verify Status
              type: xlrelease.GateTask
              description: |-
                Verify habitat app status using the following job

                https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/peat/job/status/
          - name: Deploy app_customer_support
            type: xlrelease.SequentialGroup
            team: SCSSPeatDeployment
            tasks:
            - name: Promote-app_customer_support
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_customer_support/job/promote-specific-param/
              jobParameters: |-
                packageIdent=${folder.habitat.app_customer_support.version}
                channel=peat
                dryRun=false
                platform=linux
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_customer_support/job/promote-specific-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Sleep for 30 seconds
              type: xlrelease.ScriptTask
              team: SCSSPeatDeployment
              script: |-
                import time
                # Sleep for 30 seconds before validation
                time.sleep(30)
            - name: Status-app_customer_support
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_customer_support/job/peat/job/status/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_customer_support/job/peat/job/status/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Verify Status
              type: xlrelease.GateTask
              description: |-
                Verify habitat app status using the following job

                https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_customer_support/job/peat/job/status/
    color: '#0099CC'
  realFlagStatus: ATTENTION_NEEDED
  tags:
  - habitat
  - "22.4"
  variables:
  - type: xlrelease.StringVariable
    key: smJenkinsBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: smStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsDeployStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: StandinDeployStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: StandinDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: griLiveStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: platformServicesDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl832DeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl833DeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpbillingDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: mawsDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpBatchDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminUIDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: transactionDispositionDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: StandinStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: StandinStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsDIStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsDIDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsDIStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: platformServicesStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: platformServicesStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl833StopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl832StopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl832StartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl833StartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: mawsStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: mawsStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuUpdatesDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: transactionDispositionStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: transactionDispositionStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpKmsBatchJobBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: mpsEventBatchBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: lifeCycleWebServiceBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: etlDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsStopBuildStatus-1
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsDeployBuildStatus-1
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsStartBuildStatus-1
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsWebBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpmpseventBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdmockserviceDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdmockserviceStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdmockserviceStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpbillingStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpbillingStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuUpdatesStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuUpdatesStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStopAllBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStopNotifyIssuersBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStopNotifyIssuerscjb4stl832BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStopNotifyIssuerscjb4stl833BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushDeployAllBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStartAllBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStartNotifyIssuerscjb4stl832BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStartNotifyIssuerscjb4stl833BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: bintableStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: bintableDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: bintableStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: standINStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: standINDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: standINStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: sireportBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-riskbaseddecisioning-ws-cis4stl3BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl834StartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl835StartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl835DeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl834DeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl835StopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl834StopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStartNotifyIssuerscjb4stl835BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: DMPDeploymentManager2
    requiresValue: false
    showOnReleaseStart: false
    label: "deploymentmanager2 (Originally bundled in DeploymentManager2_EA-*.ear,\
      \ now deployed individually after Tomcat migration)"
    value: 4.8.3
  - type: xlrelease.StringVariable
    key: DMPRTSRestWebService
    requiresValue: false
    showOnReleaseStart: false
    label: "rtsrestwebservice (Originally bundled in RTSWebService_EA-*.ear, now deployed\
      \ individually after Tomcat migration)"
    value: 3.4.3
  - type: xlrelease.StringVariable
    key: DMPDecisionCenter_EC
    requiresValue: false
    showOnReleaseStart: false
    label: "emsruleteamserver  (Originally an EMSRuleTeamServer-*.ear, now updated\
      \ to war file)"
    value: 3.6.0
  - type: xlrelease.StringVariable
    key: DMPDecisionCenter_BC
    requiresValue: false
    showOnReleaseStart: false
    label: Newly added for Business console part of OdmUpgrade
    value: 2.1.0
  - type: xlrelease.StringVariable
    key: DMPDecisionServerConsole
    requiresValue: false
    showOnReleaseStart: false
    label: "DecisionServerConsole  (Originally an DecisionServerConsole -*.ear, now\
      \ updated to war file)"
    value: 3.1.0
  - type: xlrelease.StringVariable
    key: DMPDecisionValidationServerIntegration
    requiresValue: false
    showOnReleaseStart: false
    label: "DecisionValidationServerIntegration  (Originally an DecisionValidationServerIntegration-*.ear,\
      \ now updated to war file)"
    value: 3.12.0
  - type: xlrelease.StringVariable
    key: tfc-help-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminConfigcjb4stl332BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminConfigcjb4stl333BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-decisionadmin-cjb4stl332
    requiresValue: false
    showOnReleaseStart: false
    value: 5.0.0
  - type: xlrelease.StringVariable
    key: jboss-config-decisionadmin-cjb4stl333
    requiresValue: false
    showOnReleaseStart: false
    value: 5.0.0
  - type: xlrelease.StringVariable
    key: jboss-config-bintable-rsk4stl4-deployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-securitysolutions-cjb4stl332-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-securitysolutions-cjb4stl333-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-securitysolutions-cjb4stl996-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-securitysolutions-cjb4stl997-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: fc-platform-services-cjb4stl332-jboss-config-deploy-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: fc-platform-services-cjb4stl333-jboss-config-deploy-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: JBOSS-CONFIG-APACHE-wjb4stl172
    requiresValue: false
    showOnReleaseStart: false
    label: JBOSS-CONFIG-APACHE-wjb4stl172
    value: 4.2.0
  - type: xlrelease.StringVariable
    key: JBOSS-CONFIG-APACHE-wjb4stl173
    requiresValue: false
    showOnReleaseStart: false
    label: JBOSS-CONFIG-APACHE-wjb4stl173
    value: 4.2.0
  - type: xlrelease.StringVariable
    key: rbd-nudata-provider-PR-MergeStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbd-web-service-PR-MergeStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-RBD-rsk4stl4-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-RBD-rsk4stl5-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: consumer-controls-ws-PR-merge-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-riskbaseddecisioning-ws-rsk4stl4.version
    requiresValue: false
    showOnReleaseStart: false
    label: jboss-config-riskbaseddecisioning-ws-rsk4stl4.version
    value: 4.5.0
  - type: xlrelease.StringVariable
    key: jboss-config-riskbaseddecisioning-ws-rsk4stl5.version
    requiresValue: false
    showOnReleaseStart: false
    label: jboss-config-riskbaseddecisioning-ws-rsk4stl5.version
    value: 4.5.0
  - type: xlrelease.StringVariable
    key: consumer-controls-ws-stop-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: consumer-controls-ws-start-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: release
  extensions:
  - name: Dashboard
    type: xlrelease.Dashboard
    owner: e025882
    tiles:
    - name: Release progress
      type: xlrelease.ReleaseProgressTile
    - name: Release summary
      type: xlrelease.ReleaseSummaryTile
    - name: Resource usage
      type: xlrelease.ResourceUsageTile
    - name: Release timeline
      type: xlrelease.TimelineTile
    - name: Release health
      type: xlrelease.ReleaseHealthTile
    - name: ODM
      type: xlrelease.TaskProgressTile
      row: 2
      col: 2
      tags:
      - odm
    - name: Decision Admin
      type: xlrelease.TaskProgressTile
      row: 3
      col: 0
      tags:
      - decision admin
    - name: BRMSWS
      type: xlrelease.TaskProgressTile
      row: 3
      col: 1
      tags:
      - brmsws
    - name: Fraud Center
      type: xlrelease.TaskProgressTile
      row: 3
      col: 2
      tags:
      - fraud center apache
      - fraud center tomcat
    - name: PanProfile
      type: xlrelease.TaskProgressTile
      row: 4
      col: 0
      tags:
      - panprofile
    - name: RBD
      type: xlrelease.TaskProgressTile
      row: 4
      col: 1
      tags:
      - rbd ws
      - rbd nudata
    - name: ABU
      type: xlrelease.TaskProgressTile
      row: 4
      col: 2
      tags:
      - abu push
      - abu updates
      - abu maws
    - name: Consumer Controls
      type: xlrelease.TaskProgressTile
      row: 5
      col: 0
      tags:
      - consumer controls
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 5
      col: 1
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 5
      col: 2
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 6
      col: 0
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 6
      col: 1
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 6
      col: 2
  riskProfile: Default risk profile
- template: PEAT-WEBAPPS-22.5
  description: This Template mirrors the PEAT DIP
  scheduledStartDate: 2019-02-06T09:00:00-06:00
  phases:
  - phase: XLR Release
    tasks:
    - name: Add Release Tag
      type: xlr.AddTag
      owner: e123250
    color: '#0079BC'
  - phase: WEBAPPS
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      tags:
      - WebApps
    - name: Parallel Deployment
      type: xlrelease.ParallelGroup
      tasks:
      - name: ODM applications
        type: xlrelease.SequentialGroup
        tags:
        - ODM
        tasks:
        - name: DMPRuleWebService PCF
          type: xlrelease.SequentialGroup
          owner: riskps
          tasks:
          - name: Merge PR
            type: xlrelease.Task
            description: https://fusion.mastercard.int/stash/projects/ESSDMP-CORE/repos/dmprulewebservices-jenkins/pull-requests/78/overview
            owner: riskps
          - name: Run Jenkins Job
            type: xlrelease.Task
            description: |-
              Run Jenkins job for deployment -
              https://cd5.mastercard.int/jenkins/job/DMPRuleWebService/job/stl-peat/job/Step1.DeployDMPRuleWebServiceApp/
            owner: riskps
            tags:
            - ODM
          - name: Check DMPRuleWS is running in PCF
            type: xlrelease.Task
            description: |-
              Check dmp-rule-ws-peat appears in PCF dashboard

              link: https://apps.system.stl.pcfstage00.mastercard.int/

              Go to DMPRuleWebService PEAT STL section and check service is running
            owner: riskps
            tags:
            - ODM
          - name: Validation - Run health check
            type: xlrelease.Task
            description: |-
              Run following URL in browser:
              https://dmp-rule-ws-peat.apps.stl.pcfstage00.mastercard.int/dmprule/healthCheck

              Expected result: {"status": true}
            owner: RiskPS
        - name: Habitat
          type: xlrelease.SequentialGroup
          tags:
          - Habitat
          tasks:
          - name: Promote-dmpdecisionserver_dvs_ext_0
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.dmp_decision_server_dvs_ext_0_version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - Habitat
            - dmpdecisionserver_dvs_ext_0_peat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmpdecisionserver_dvs_ext_1_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.dmpdecisionserver_dvs_ext_1_peat.version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmpdecisionserver_dvs_ext_1_peat
            - Habitat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmpdecisionserver_dvs_int_0_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.dmpdecisionserver_dvs_int_0_peat.version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmpdecisionserver_dvs_int_0_peat
            - Habitat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmpdecisionserver_dvs_int_1_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.dmpdecisionserver_dvs_int_1_peat.version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmpdecisionserver_dvs_int_1_peat
            - Habitat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmpdecisionserver_res_0_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.dmpdecisionserver_res_0_peat.version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmpdecisionserver_res_0_peat
            - Habitat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmpdecisionserver_res_1_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.dmpdecisionserver_res_1_peat.version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmpdecisionserver_res_1_peat
            - Habitat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-decisioncenter_bc_service_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.decisioncenter_bc_service_peat_version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - decisioncenter_bc_service_peat
            - Habitat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-decision_center_ec_components_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.decision_center_ec_components_peat.version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - decision_center_ec_components_peat
            - Habitat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-decision_center_ec_webservices_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.decision_center_ec_webservices_peat.version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - decision_center_ec_webervices_peat
            - Habitat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmp_udt_ws_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.dmp_udt_ws_peat_version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmp_udt_ws_peat
            - Habitat
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Validation
            type: xlrelease.SequentialGroup
            tasks:
            - name: decisionserver_res_service
              type: xlrelease.SequentialGroup
              tags:
              - decisionserver_res_service
              - Habitat
              tasks:
              - name: DMPDecisionServer_dvs_ext_0 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_ext_0/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_ext_0/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_dvs_ext_0
                - Habitat
              - name: DMPDecisionServer_dvs_ext_1 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_ext_1/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_ext_1/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_dvs_ext_1
                - Habitat
              - name: DMPDecisionServer_dvs_int_0 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_int_0/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_int_0/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_dvs_int_0_peat
                - Habitat
              - name: DMPDecisionServer_dvs_int_1 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_int_1/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_int_1/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_dvs_int_1
                - Habitat
              - name: DMPDecisionServer_res_0 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_res_0/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_res_0/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_res_0
                - Habitat
              - name: DMPDecisionServer_res_1 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_res_1/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_res_1/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_res_1
                - Habitat
              - name: decisioncenter_bc_service status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisioncenter_bc_service/job/status/job/peat/job/Status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisioncenter_bc_service/job/status/job/peat/job/Status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - decisioncenter_bc_service
                - Habitat
              - name: dmp_decision_center_ec_components
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_components/job/status/job/peat/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_components/job/status/job/peat/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmp_decision_center_ec_components
                - Habitat
              - name: dmp_decision_center_ec_webservices
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_webservices/job/status/job/peat/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_webservices/job/status/job/peat/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmp_decision_center_ec_components
                - Habitat
              - name: dmp_udt_ws
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/dmp_udt_ws/job/status/job/peat/job/Status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/dmp_udt_ws/job/status/job/peat/job/Status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmp_udt_ws_peat
                - Habitat
              - name: Validate
                type: xlrelease.GateTask
      - name: TFC Tomcat Apps HABITAT & PCF
        type: xlrelease.SequentialGroup
        tags:
        - Tomcat Apps
        - Habitat
        tasks:
        - name: Lift this gate to begin deployment
          type: xlrelease.GateTask
        - name: Deploy tfcgateway
          type: xlrelease.SequentialGroup
          tasks:
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=tfcgateway dmp_user_interface_frameworks/tfc_tfcgateway
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for Gateway to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Gateway is not registered with synapse. Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/
        - name: Deploy DI
          type: xlrelease.SequentialGroup
          tasks:
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=di dmp_user_interface_frameworks/tfc_di
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for DI to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Status tfc_di
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_di/job/PEAT/job/status/
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_di/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
        - name: Deploy TFCConfig
          type: xlrelease.SequentialGroup
          tasks:
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=tfcconfig dmp_user_interface_frameworks/tfc_tfcconfig
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for tfcconfig to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: status tfc_tfcconfig
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcconfig/job/PEAT/job/status/
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcconfig/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
        - name: Deploy Rulemanager
          type: xlrelease.SequentialGroup
          tasks:
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=rulemanager dmp_user_interface_frameworks/tfc_rulemanager
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for tfcconfig to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: status tfc_rulemanager
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_rulemanager/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_rulemanager/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_rulemanager/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
        - name: Transactionviewer -  PCF deployment
          type: xlrelease.SequentialGroup
          tasks:
          - name: Stop tfc_transactionviewer
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: ChefHabitat/dmp_user_interface_frameworks/tfc_transactionviewer/PEAT/stop
            description: |-
              Run this jenkins job to stop Transactionviewer on tomcat (pcf_org: ESS-TFC and pcf_space: peat)

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_transactionviewer/job/PEAT/job/stop/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: PCF app deployment jenkins job
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: TFCPCF/PCF/stl-stage/Deploy-Transaction-Viewer-Peat
            description: |-
              Run this jenkins job to deploy Transactionviewer on PCF (pcf_org: ESS-TFC and pcf_space: peat)

              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/view/TransactionViewer/job/Deploy-Transaction-Viewer-Peat/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: PCF app deployment validation
            type: xlrelease.GateTask
            description: |-
              Validate Transaction-Viewer Deployment in PCF.

              Checks for Jenkins Job execution Is successful for Rule Metrics Service TFC apps
              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/view/TransactionViewer/job/Deploy-Transaction-Viewer-Peat/

              Verify if the deployment is successful in PCF for Transaction-Viewer application
              - Login into PEAT PCF Space: https://apps.system.stl.pcfstage00.mastercard.int/
              - Traverse to the ESS-TFC Org and go to stage-peat space.
              - Transaction-Viewer-Peat

              Login to Dynatrace and verify the new application instance Is available
              - Transaction-Viewer-Peat

              Login to Splunk and verify the logs are available for transaction-viewer

              Splunk URL
              https://dtl.splunk.mastercard.int

              Query String:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="transaction-viewer-*"

              Query to verify app Is started:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="transaction-viewer-*" "Started Application in * seconds (JVM running for *)"

              Verify the rule-metrics-service is registered in PEAT Krang
               - Login to Stage Krang - https://stage.eportal.mastercard.com/apie-stage-krang
               - Search for tfc
               - transaction-viewer should be registered with 4 instances and the pcf routes must be displayed and each instance is associated with PEAT tag
        - name: Deploy LIstmanager
          type: xlrelease.SequentialGroup
          tasks:
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=listmanager dmp_user_interface_frameworks/tfc_listmanager
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for listmanager to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: status tfc_listmanager
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_listmanager/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_listmanager/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_listmanager/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
        - name: Rule Testing Service - PCF deployment
          type: xlrelease.SequentialGroup
          precondition: "False"
          tasks:
          - name: PCF app deployment jenkins job
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: TFCPCF/PCF/stl-stage/Deploy-Rule-Testing-Service-PEAT
            description: |-
              Run this jenkins job to deploy Rule Testing Service on PCF (pcf_org: ESS-TFC and pcf_space: stage-peat)

              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-Rule-Testing-Service-PEAT/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: PCF app deployment validation
            type: xlrelease.GateTask
            description: |-
              Validate Rule Testing Service Deployment in PCF.

              Checks for Jenkins Job execution Is successful for Rule Testing Service TFC apps
              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-Rule-Testing-Service-PEAT/

              Verify if the deployment is successful in PCF for Rule Testing Service application
              - Login into PEAT PCF Space: https://apps.system.stl.pcfstage00.mastercard.int/
              - Traverse to the ESS-TFC Org and go to stage-peat space.
              - rule-testing-service-peat

              Login to Dynatrace and verify the new application instance Is available
              - rule-testing-service-peat

              Login to Splunk and verify the logs are available for rule-testing-service

              Splunk URL
              https://dtl.splunk.mastercard.int

              Query String:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="rule-testing-*"

              Query to verify app Is started:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="rule-testing-*" "Started Application in * seconds (JVM running for *)"

              Verify the rule-testing-service service is registered in PEAT Krang
               - Login to Stage Krang - https://stage.eportal.mastercard.com/apie-stage-krang
               - Search for tfc
               - rule-testing-service should be registered with 4 instances and the pcf routes must be displayed and each instance is associated with PEAT tag
        - name: Rule Metrics Service - PCF deployment
          type: xlrelease.SequentialGroup
          precondition: "False"
          tasks:
          - name: PCF app deployment jenkins job
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: TFCPCF/PCF/stl-stage/Deploy-Rule-Metrics-Service-PEAT
            description: |-
              Run this jenkins job to deploy Rule Metrics Service on PCF (pcf_org: ESS-TFC and pcf_space: stage-peat)

              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-Rule-Metrics-Service-PEAT/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: PCF app deployment validation
            type: xlrelease.GateTask
            description: |-
              Validate Rule Metrics Service Deployment in PCF.

              Checks for Jenkins Job execution Is successful for Rule Metrics Service TFC apps
              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-Rule-Metrics-Service-PEAT/

              Verify if the deployment is successful in PCF for Rule Metrics Service application
              - Login into PEAT PCF Space: https://apps.system.stl.pcfstage00.mastercard.int/
              - Traverse to the ESS-TFC Org and go to stage-peat space.
              - rule-metrics-service-peat

              Login to Dynatrace and verify the new application instance Is available
              - rule-metrics-service-peat

              Login to Splunk and verify the logs are available for rule-metrics-service

              Splunk URL
              https://dtl.splunk.mastercard.int

              Query String:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="rule-metrics-service-peat"

              Query to verify app Is started:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="rule-metrics-service-peat" "Started Application in * seconds (JVM running for *)"

              Verify the rule-metrics-service is registered in PEAT Krang
               - Login to Stage Krang - https://stage.eportal.mastercard.com/apie-stage-krang
               - Search for tfc
               - rule-metrics-service should be registered with 4 instances and the pcf routes must be displayed and each instance is associated with PEAT tag
      - name: Fraud Center Apache via Habitat
        type: xlrelease.SequentialGroup
        scheduledStartDate: 2019-02-06T10:00:00-06:00
        flagStatus: ATTENTION_NEEDED
        flagComment: This isn't expected to be used until 22.5 release
        team: SCSSPeatDeployment
        tasks:
        - name: Lift this gate to begin with this Webapp
          type: xlrelease.GateTask
          description: |-
            To avoid Jenkins concurrency issues and job failures, this gate was added to all Webapp deployment sections.

            **_Note that the Webapps can still be deployed in parallel_**, but the deployment for each section will only start when this gate is lifted. If you are blocked waiting for investigation or for a deployment job to run, move on to the next app by lifting its gate.

            Note that some of these gates have preconditions (it will be a checkbox below this text box, if there is a precondition). For instance, some apps require Grid to be up before they are deployed.
          team: SCSSPeatDeployment
          tags:
          - Fraud Center Apache
        - name: First time release steps
          type: xlrelease.SequentialGroup
          team: SCSSPeatDeployment
          tasks:
          - name: Stop apache instance
            type: xlrelease.Task
            description: |-
              Request Internet Operations to stop the Consumer.securitysolutions apache instance on the following servers

              wjb4stl172
              wjb4stl173
            team: SCSSPeatDeployment
          - name: Promote-the_fraud_center_apache24
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/promote-specific-param/
            jobParameters: |-
              packageIdent=${folder.the_fraud_center_apache24_version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/promote-specific-param/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Onboard new apache habitat packages
            type: stash.MergePullRequest
            server: Bitbucket Server
            username: dmp_xlr
            project: DECISION_MANAGEMENT
            repository: mc_dmp_chef_objects_nonprod
            prid: "954"
            description: https://fusion.mastercard.int/stash/projects/DECISION_MANAGEMENT/repos/mc_dmp_chef_objects_nonprod/pull-requests/954/overview
            team: SCSSPeatDeployment
          - name: Build Chef Object pipeline
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd
            username: dmp_xlr
            jobName: ChefObjectPipeline/job/ESS/job/mc_dmp_chef_objects_nonprod
            description: |-
              Trigger Chef Converge Jenkins with updated node config

              https://cd.mastercard.int/jenkins/job/ChefObjectPipeline/job/ESS/job/mc_dmp_chef_objects_nonprod/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd1}"
          - name: Node validation in chef Automate
            type: xlrelease.GateTask
            description: |-
              Confirm in Chef automate that the host is converged
              Hosts:
              wjb4stl172.mastercard.int
              https://automate.chef.mastercard.int/infrastructure/client-runs?name=wjb4stl172

              wjb4stl173.mastercard.int
              https://automate.chef.mastercard.int/infrastructure/client-runs?name=wjb4stl173
        - name: Deploy the_fraud_center_apache24
          type: xlrelease.SequentialGroup
          description: This is the actual apache instance that needs to be the deployed
            first before any of the webcontent packages
          flagComment: This needs to be the first webcontent package that's deployed
          tasks:
          - name: Promote-the_fraud_center_apache24
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/promote-specific-param/
            jobParameters: |-
              packageIdent=${folder.the_fraud_center_apache24_version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/promote-specific-param/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Merge any TOML changes if needed
            type: stash.MergePullRequest
            server: Bitbucket Server
            username: dmp_xlr
            team: SCSSPeatDeployment
            precondition: "False"
          - name: Publish TOML's wjb4stl172
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/publish-wjb4stl172/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/publish-wjb4stl172/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Publish TOML's wjb4stl173
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/publish-wjb4stl173/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/publish-wjb4stl172/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Sleep for 30 seconds
            type: xlrelease.ScriptTask
            team: SCSSPeatDeployment
            script: |-
              import time
              # Sleep for 30 seconds before validation
              time.sleep(30)
          - name: Status-the_fraud_center_apache24
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/status/
            team: SCSSPeatDeployment
            watchers:
            - E111441
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd2}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status by checking the last build from the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/status
        - name: Deploy app_bootstrapper
          type: xlrelease.SequentialGroup
          description: Bootstrapper needs to be run first since it set's up the fraud
            center directory
          flagComment: This needs to be the first webcontent package that's deployed
          tasks:
          - name: Promote-app_bootstrapper
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/app_bootstrapper-promote-specific-param/
            jobParameters: |-
              packageIdent=${folder.app_bootstrapper_version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/app_bootstrapper-promote-specific-param/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Sleep for 30 seconds
            type: xlrelease.ScriptTask
            team: SCSSPeatDeployment
            script: |-
              import time
              # Sleep for 30 seconds before validation
              time.sleep(30)
          - name: Status-app_bootstrapper
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/peat/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/peat/job/status/
            team: SCSSPeatDeployment
            watchers:
            - E111441
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd2}"
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/peat/job/status/
        - name: Deploy apps under htdocs/fraudcenter
          type: xlrelease.ParallelGroup
          tasks:
          - name: Deploy app_platform
            type: xlrelease.SequentialGroup
            tasks:
            - name: Promote-app_platform
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/app_platform-promote-specific-param/
              jobParameters: |-
                packageIdent=${folder.app_platform_version}
                channel=peat
                dryRun=false
                platform=linux
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/app_platform-promote-specific-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Sleep for 30 seconds
              type: xlrelease.ScriptTask
              team: SCSSPeatDeployment
              script: |-
                import time
                # Sleep for 30 seconds before validation
                time.sleep(30)
            - name: Status-app_platform
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/peat/job/status/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/peat/job/status/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Verify Status
              type: xlrelease.GateTask
              description: |-
                Verify habitat app status using the following job

                https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/peat/job/status/
          - name: Deploy tfc_help
            type: xlrelease.SequentialGroup
            tasks:
            - name: Promote-tfc_help
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/tfc_help-promote-specific-param/
              jobParameters: |-
                packageIdent=${folder.tfc_help_version}
                channel=stage
                dryRun=false
                platform=linux
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/tfc_help-promote-specific-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Sleep for 30 seconds
              type: xlrelease.ScriptTask
              team: SCSSPeatDeployment
              script: |-
                import time
                # Sleep for 30 seconds before validation
                time.sleep(30)
            - name: Status-tfc_help
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/peat/job/status/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/peat/job/status/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Verify Status
              type: xlrelease.GateTask
              description: |-
                Verify habitat app status using the following job

                https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/peat/job/status/
          - name: Deploy app_customer_support
            type: xlrelease.SequentialGroup
            team: SCSSPeatDeployment
            tasks:
            - name: Promote-app_customer_support
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_customer_support/job/promote-specific-param/
              jobParameters: |-
                packageIdent=${folder.habitat.app_customer_support.version}
                channel=peat
                dryRun=false
                platform=linux
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_customer_support/job/promote-specific-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Sleep for 30 seconds
              type: xlrelease.ScriptTask
              team: SCSSPeatDeployment
              script: |-
                import time
                # Sleep for 30 seconds before validation
                time.sleep(30)
            - name: Status-app_customer_support
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_customer_support/job/peat/job/status/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_customer_support/job/peat/job/status/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Verify Status
              type: xlrelease.GateTask
              description: |-
                Verify habitat app status using the following job

                https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_customer_support/job/peat/job/status/
      - name: RBD apps
        type: xlrelease.SequentialGroup
        tasks:
        - name: RBD Web Service
          type: xlrelease.SequentialGroup
          tasks:
          - name: Lift this gate to begin with this Webapp
            type: xlrelease.GateTask
            description: |-
              To avoid Jenkins concurrency issues and job failures, this gate was added to all Webapp deployment sections.

              **_Note that the Webapps can still be deployed in parallel_**, but the deployment for each section will only start when this gate is lifted. If you are blocked waiting for investigation or for a deployment job to run, move on to the next app by lifting its gate.

              Note that some of these gates have preconditions (it will be a checkbox below this text box, if there is a precondition). For instance, some apps require Grid to be up before they are deployed.
            team: SCSSPeatDeployment
          - name: Publish Updated TOML's
            type: xlrelease.SequentialGroup
            team: SCSSPeatDeployment
            tasks:
            - name: Merge TOML changes
              type: stash.MergePullRequest
              server: Bitbucket Server
              project: DMPHAB
              repository: dmp-service-config-nonprod
              prid: "262"
              description: |-
                Waiting for a PR from the dev team
                PR link for reference - https://fusion.mastercard.int/stash/projects/DMPHAB/repos/dmp-service-config-nonprod/pull-requests/262/overview
            - name: Publish - rsk4stl4
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: dmp_xlr
              jobName: ChefHabitat/job/dmp_api_frameworks/job/rbd_web_service/job/PEAT/job/publish-rsk4stl4/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/rbd_web_service/job/PEAT/job/publish-rsk4stl4/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Publish - rsk4stl5
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: dmp_xlr
              jobName: ChefHabitat/job/dmp_api_frameworks/job/rbd_web_service/job/PEAT/job/publish-rsk4stl5/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/rbd_web_service/job/PEAT/job/publish-rsk4stl5/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Deploy
            type: xlrelease.SequentialGroup
            tasks:
            - name: Promote RBD Web Service for peat OEL7
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param
              jobParameters: |-
                packageIdent=${folder.rbd_web_service_linux_version}
                channel=peat
                dryRun=false
                platform=linux
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Promote RBD Web Service for peat OEL6
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: dmp_xlr
              jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param
              jobParameters: |-
                packageIdent=${folder.rbd_web_service_linux2_version}
                channel=peat
                dryRun=false
                platform=linux_kernel2
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Validation
            type: xlrelease.SequentialGroup
            tasks:
            - name: Sleep for 30 seconds before validating
              type: xlrelease.ScriptTask
              script: |-
                import time
                # Sleep for 30 seconds before validation
                time.sleep(30)
            - name: Validate rbd-web-service for peat
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              jobName: ChefHabitat/job/dmp_api_frameworks/job/rbd_web_service/job/PEAT/job/status/
              description: |-
                Check rbd-web-service is up on peat nodes

                https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/rbd_web_service/job/PEAT/job/status/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Verify application status
              type: xlrelease.Task
              description: "Check the application status, it should be up for more\
                \ than 30 seconds"
              team: SCSSPeatDeployment
        - name: RBD NuData Provider via Habitat
          type: xlrelease.SequentialGroup
          tasks:
          - name: Lift this gate to begin deployment
            type: xlrelease.GateTask
          - name: Deploy
            type: xlrelease.SequentialGroup
            tasks:
            - name: Promote RBD NuData Provider OEL7
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: dmp_xlr
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
              jobParameters: |-
                packageIdent=${folder.rbd_nudata_provider_linux_version}
                channel=peat
                dryRun=false
                platform=linux
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Promote RBD NuData Provider for OEL6
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: dmp_xlr
              jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param
              jobParameters: |-
                packageIdent=${folder.habitat.rbd-nudata-provider.linux2.version}
                channel=peat
                dryRun=false
                platform=linux_kernel2
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Publish TOML's
            type: xlrelease.SequentialGroup
            description: No TOML changes for 22.5.
            precondition: "False"
            tasks:
            - name: Merge TOML changes
              type: stash.MergePullRequest
              server: Bitbucket Server
              project: DMPHAB
              repository: dmp-service-config-nonprod
              description: Waiting for a PR from the dev team
              variableMapping:
                pythonScript.password: "${folder.metadata.bitbucket.token}"
            - name: Publish - rsk4stl4
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: dmp_xlr
              jobName: ChefHabitat/dmp_api_frameworks/rbd_nudata_provider/PEAT/publish-rsk4stl4
              jobParameters: |-
                appEnv=peat
                app=rbd_nudata_provider
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/rbd_nudata_provider/job/PEAT/job/publish-rsk4stl4/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Publish - rsk4stl5
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: dmp_xlr
              jobName: ChefHabitat/dmp_api_frameworks/rbd_nudata_provider/PEAT/publish-rsk4stl5
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/rbd_nudata_provider/job/PEAT/job/publish-rsk4stl5/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
          - name: Validation
            type: xlrelease.SequentialGroup
            tasks:
            - name: Sleep for 30 seconds
              type: xlrelease.ScriptTask
            - name: Validate RBD Nudata Provider for PEAT
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: dmp_xlr
              jobName: ChefHabitat/dmp_api_frameworks/rbd_nudata_provider/PEAT/status
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/rbd_nudata_provider/job/PEAT/job/status/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            - name: Validate application status
              type: xlrelease.Task
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/rbd_nudata_provider/job/PEAT/job/status/
      - name: Grid Profile Loader Deployments
        type: xlrelease.SequentialGroup
        flagStatus: ATTENTION_NEEDED
        precondition: "False"
        tasks:
        - name: Lift Gate to being Grid Profile Loader Deployment
          type: xlrelease.GateTask
        - name: Habitat promote grid_profile_loader pkg
          type: xlrelease.SequentialGroup
          tasks:
          - name: Promote grid-profile-loader
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=grid-profile-loader dmp_api_frameworks/grid_profile_loader
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Validate pkg promotion to peat channel
            type: xlrelease.GateTask
            description: "Check the version in Apmate and verify the correct version\
              \ has been promoted in the Habitat blr : https://bldr.chef.mastercard.int/#/pkgs/dmp_api_frameworks/grid_profile_loader/"
        - name: Merge PR & Publish TOML
          type: xlrelease.SequentialGroup
          precondition: "False"
          tasks:
          - name: MERGE TOML
            type: stash.MergePullRequest
            server: Bitbucket Server
            project: DMPHAB
            repository: dmp-service-config-nonprod
            prid: "29"
            description: https://fusion.mastercard.int/stash/projects/DMPHAB/repos/dmp-service-config-nonprod/pull-requests/29/overview
          - name: Successful merge on preceding PR
            type: xlrelease.GateTask
          - name: Publish toml
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/grid-profile-loader/job/PEAT/job/grid_profile_loader-publish-peat-rsk0stl53-toml/
          - name: Successful build on preceding publish toml job
            type: xlrelease.GateTask
          - name: Publish toml
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/grid-profile-loader/job/PEAT/job/grid_profile_loader-publish-peat-rsk0stl54-toml/
          - name: Successful build on preceding publish toml job
            type: xlrelease.GateTask
        - name: Validation
          type: xlrelease.SequentialGroup
          tasks:
          - name: Validate grid_profile_loader service Peat Nodes
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd
            description: check console log of job for to ensure app is up for both
              rsk0stl53 and rsk0stl54 https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_api_frameworks/job/grid-profile-loader/job/PEAT/job/status/
      - name: Account Intelligence Batch Processor Deployment
        type: xlrelease.SequentialGroup
        flagStatus: ATTENTION_NEEDED
        precondition: "False"
        tasks:
        - name: Lift gate to start deployments
          type: xlrelease.GateTask
        - name: Promote Package
          type: xlrelease.SequentialGroup
          tasks:
          - name: Promote OEL6
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=account-intelligence-batch-processor dmp_api_frameworks/account_intelligence_batch_processor
              promoteToChannel=peat
              platform=linux_kernel2
              dryRun=false
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Promote OEL7
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=account-intelligence-batch-processor dmp_api_frameworks/account_intelligence_batch_processor
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: Publish Updated TOML's
          type: xlrelease.SequentialGroup
          tasks:
          - name: Merge new configs
            type: stash.MergePullRequest
            server: Bitbucket Server
          - name: Publish TOML's
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
            jobParameters: |-
              appEnv=peat
              app=account_intelligence_batch_processor
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
      - name: Pan Profile Lifecycle Event Transformer
        type: xlrelease.SequentialGroup
        tasks:
        - name: Lift gate to start deployment
          type: xlrelease.GateTask
        - name: Promote Application
          type: xlrelease.SequentialGroup
          tasks:
          - name: Promote PPLE Transformer package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=pan-profile-lifecycle-event-transformer dmp_api_frameworks/pan_profile_lifecycle_event_transformer
              promoteToChannel=${folder.pple_transformer_channel}
              platform=linux
              dryRun=false
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: Habitat Version Validation
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/habitat-version-checker/
            jobParameters: |-
              scriptAction=askHabitat
              passedName=dmp_api_frameworks/pan_profile_lifecycle_event_transformer
              passedEnv=${folder.pple_transformer_channel}
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd2}"
        - name: Publish Updated TOMLs
          type: xlrelease.SequentialGroup
          tasks:
          - name: Merge config changes
            type: bitbucket.MergePullRequest
            server: NewConfigBitbucket
            username: dmp_xlr_merging
            repo_full_name: DMPHAB/dmp-service-config-nonprod
            prid: "264"
            message: Merging for PPLE Transformer PEAT 22.5 Release
            closebranch: true
            description: https://fusion.mastercard.int/stash/projects/DMPHAB/repos/dmp-service-config-nonprod/pull-requests/264/overview
            variableMapping:
              pythonScript.password: "${folder.metadata.bitbucket.dmp_xlr_merging}"
          - name: Publish TOMLs
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
            jobParameters: |-
              appEnv=${folder.release_environment_lowercase}
              app=pan_profile_lifecycle_event_transformer
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
    color: '#0099CC'
  realFlagStatus: ATTENTION_NEEDED
  tags:
  - habitat
  - "22.5"
  variables:
  - type: xlrelease.StringVariable
    key: smJenkinsBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: smStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsDeployStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: StandinDeployStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: StandinDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: griLiveStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: platformServicesDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl832DeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl833DeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpbillingDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: mawsDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpBatchDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminUIDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: transactionDispositionDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: StandinStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: StandinStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsDIStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsDIDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsDIStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: platformServicesStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: platformServicesStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl833StopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl832StopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl832StartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl833StartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: mawsStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: mawsStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuUpdatesDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: transactionDispositionStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: transactionDispositionStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpKmsBatchJobBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: mpsEventBatchBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: lifeCycleWebServiceBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: etlDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsStopBuildStatus-1
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsDeployBuildStatus-1
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsStartBuildStatus-1
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsWebBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpmpseventBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdmockserviceDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdmockserviceStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdmockserviceStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpbillingStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpbillingStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuUpdatesStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuUpdatesStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStopAllBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStopNotifyIssuersBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStopNotifyIssuerscjb4stl832BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStopNotifyIssuerscjb4stl833BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushDeployAllBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStartAllBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStartNotifyIssuerscjb4stl832BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStartNotifyIssuerscjb4stl833BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: bintableStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: bintableDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: bintableStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: standINStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: standINDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: standINStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: sireportBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-riskbaseddecisioning-ws-cis4stl3BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl834StartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl835StartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl835DeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl834DeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl835StopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl834StopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStartNotifyIssuerscjb4stl835BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: DMPDeploymentManager2
    requiresValue: false
    showOnReleaseStart: false
    label: "deploymentmanager2 (Originally bundled in DeploymentManager2_EA-*.ear,\
      \ now deployed individually after Tomcat migration)"
    value: 4.8.3
  - type: xlrelease.StringVariable
    key: DMPRTSRestWebService
    requiresValue: false
    showOnReleaseStart: false
    label: "rtsrestwebservice (Originally bundled in RTSWebService_EA-*.ear, now deployed\
      \ individually after Tomcat migration)"
    value: 3.4.3
  - type: xlrelease.StringVariable
    key: DMPDecisionCenter_EC
    requiresValue: false
    showOnReleaseStart: false
    label: "emsruleteamserver  (Originally an EMSRuleTeamServer-*.ear, now updated\
      \ to war file)"
    value: 3.6.0
  - type: xlrelease.StringVariable
    key: DMPDecisionCenter_BC
    requiresValue: false
    showOnReleaseStart: false
    label: Newly added for Business console part of OdmUpgrade
    value: 2.1.0
  - type: xlrelease.StringVariable
    key: DMPDecisionServerConsole
    requiresValue: false
    showOnReleaseStart: false
    label: "DecisionServerConsole  (Originally an DecisionServerConsole -*.ear, now\
      \ updated to war file)"
    value: 3.1.0
  - type: xlrelease.StringVariable
    key: DMPDecisionValidationServerIntegration
    requiresValue: false
    showOnReleaseStart: false
    label: "DecisionValidationServerIntegration  (Originally an DecisionValidationServerIntegration-*.ear,\
      \ now updated to war file)"
    value: 3.12.0
  - type: xlrelease.StringVariable
    key: tfc-help-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminConfigcjb4stl332BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminConfigcjb4stl333BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-decisionadmin-cjb4stl332
    requiresValue: false
    showOnReleaseStart: false
    value: 5.0.0
  - type: xlrelease.StringVariable
    key: jboss-config-decisionadmin-cjb4stl333
    requiresValue: false
    showOnReleaseStart: false
    value: 5.0.0
  - type: xlrelease.StringVariable
    key: jboss-config-bintable-rsk4stl4-deployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-securitysolutions-cjb4stl332-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-securitysolutions-cjb4stl333-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-securitysolutions-cjb4stl996-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-securitysolutions-cjb4stl997-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: fc-platform-services-cjb4stl332-jboss-config-deploy-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: fc-platform-services-cjb4stl333-jboss-config-deploy-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: JBOSS-CONFIG-APACHE-wjb4stl172
    requiresValue: false
    showOnReleaseStart: false
    label: JBOSS-CONFIG-APACHE-wjb4stl172
    value: 4.2.0
  - type: xlrelease.StringVariable
    key: JBOSS-CONFIG-APACHE-wjb4stl173
    requiresValue: false
    showOnReleaseStart: false
    label: JBOSS-CONFIG-APACHE-wjb4stl173
    value: 4.2.0
  - type: xlrelease.StringVariable
    key: rbd-nudata-provider-PR-MergeStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbd-web-service-PR-MergeStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-RBD-rsk4stl4-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-RBD-rsk4stl5-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: consumer-controls-ws-PR-merge-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-riskbaseddecisioning-ws-rsk4stl4.version
    requiresValue: false
    showOnReleaseStart: false
    label: jboss-config-riskbaseddecisioning-ws-rsk4stl4.version
    value: 4.5.0
  - type: xlrelease.StringVariable
    key: jboss-config-riskbaseddecisioning-ws-rsk4stl5.version
    requiresValue: false
    showOnReleaseStart: false
    label: jboss-config-riskbaseddecisioning-ws-rsk4stl5.version
    value: 4.5.0
  - type: xlrelease.StringVariable
    key: consumer-controls-ws-stop-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: consumer-controls-ws-start-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: release
  - type: xlrelease.StringVariable
    key: pple-transformer-channel
    value: peat
  extensions:
  - name: Dashboard
    type: xlrelease.Dashboard
    owner: e025882
    tiles:
    - name: Release progress
      type: xlrelease.ReleaseProgressTile
    - name: Release summary
      type: xlrelease.ReleaseSummaryTile
    - name: Resource usage
      type: xlrelease.ResourceUsageTile
    - name: Release timeline
      type: xlrelease.TimelineTile
    - name: Release health
      type: xlrelease.ReleaseHealthTile
    - name: ODM
      type: xlrelease.TaskProgressTile
      row: 2
      col: 2
      tags:
      - odm
    - name: Decision Admin
      type: xlrelease.TaskProgressTile
      row: 3
      col: 0
      tags:
      - decision admin
    - name: BRMSWS
      type: xlrelease.TaskProgressTile
      row: 3
      col: 1
      tags:
      - brmsws
    - name: Fraud Center
      type: xlrelease.TaskProgressTile
      row: 3
      col: 2
      tags:
      - fraud center apache
      - fraud center tomcat
    - name: PanProfile
      type: xlrelease.TaskProgressTile
      row: 4
      col: 0
      tags:
      - panprofile
    - name: RBD
      type: xlrelease.TaskProgressTile
      row: 4
      col: 1
      tags:
      - rbd ws
      - rbd nudata
    - name: ABU
      type: xlrelease.TaskProgressTile
      row: 4
      col: 2
      tags:
      - abu push
      - abu updates
      - abu maws
    - name: Consumer Controls
      type: xlrelease.TaskProgressTile
      row: 5
      col: 0
      tags:
      - consumer controls
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 5
      col: 1
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 5
      col: 2
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 6
      col: 0
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 6
      col: 1
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 6
      col: 2
  riskProfile: Default risk profile
- template: PEAT-WEBAPPS-22.6
  description: This Template mirrors the PEAT DIP
  scheduledStartDate: 2019-02-06T09:00:00-06:00
  phases:
  - phase: XLR Release
    tasks:
    - name: Add Release Tag
      type: xlr.AddTag
      newTag: "22.6"
      owner: e124197
      tags:
      - '#bizops'
    color: '#0079BC'
  - phase: WEBAPPS
    tasks:
    - name: Gate to avoid unintentionally start of release
      type: xlrelease.GateTask
      owner: e124197
      tags:
      - WebApps
      - '#bizops'
    - name: Parallel Deployment
      type: xlrelease.ParallelGroup
      tasks:
      - name: ODM applications
        type: xlrelease.SequentialGroup
        tags:
        - ODM
        tasks:
        - name: Merge PR for new datasource
          type: stash.MergePullRequest
          server: Bitbucket Server
          username: dmp_xlr_merging
          project: DECISION_MANAGEMENT
          repository: mc_dmp_chef_objects_nonprod
          prid: "984"
          description: https://fusion.mastercard.int/stash/projects/DECISION_MANAGEMENT/repos/mc_dmp_chef_objects_nonprod/pull-requests/984/overview
          owner: riskps
          variableMapping:
            pythonScript.password: "${folder.metadata.bitbucket.token}"
          tags:
          - '#bizops'
        - name: DMPRuleWebService PCF
          type: xlrelease.SequentialGroup
          owner: riskps
          tasks:
          - name: Merge PR
            type: stash.MergePullRequest
            server: Bitbucket Server
            username: dmp_xlr_merging
            project: ESSDMP-CORE
            repository: dmprulewebservices-jenkins
            prid: "97"
            description: Merge PR https://fusion.mastercard.int/stash/projects/ESSDMP-CORE/repos/dmprulewebservices-jenkins/pull-requests/97/overview
            owner: riskps
            variableMapping:
              pythonScript.password: "${folder.metadata.bitbucket.dmp_xlr_merging}"
            tags:
            - '#bizops'
          - name: Run Jenkins Job
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: DMPRuleWebService/job/stl-peat/job/Step1.DeployDMPRuleWebServiceApp/
            description: |-
              Run Jenkins job for deployment -
              https://cd5.mastercard.int/jenkins/job/DMPRuleWebService/job/stl-peat/job/Step1.DeployDMPRuleWebServiceApp/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - ODM
            - '#bizops'
          - name: Check DMPRuleWS is running in PCF
            type: xlrelease.Task
            description: |-
              Check dmp-rule-ws-peat appears in PCF dashboard

              link: https://apps.system.stl.pcfstage00.mastercard.int/

              Go to DMPRuleWebService PEAT STL section and check service is running
            tags:
            - ODM
            - '#bizops'
          - name: Validation - Run health check
            type: xlrelease.Task
            description: |-
              Run following URL in browser:
              https://dmp-rule-ws-peat.apps.stl.pcfstage00.mastercard.int/dmprule/healthCheck

              Expected result: {"status": true}
            team: SCSSPeatDeployment
            tags:
            - '#bizops'
        - name: Habitat
          type: xlrelease.SequentialGroup
          tags:
          - Habitat
          tasks:
          - name: Promote-dmpdecisionserver_dvs_ext_0
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.dmp_decision_server_dvs_ext_0_version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - Habitat
            - dmpdecisionserver_dvs_ext_0_peat
            - '#bizops'
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            tags:
            - '#bizops'
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmpdecisionserver_dvs_ext_1_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.dmpdecisionserver_dvs_ext_1_peat.version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmpdecisionserver_dvs_ext_1_peat
            - Habitat
            - '#bizops'
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            tags:
            - '#bizops'
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmpdecisionserver_dvs_int_0_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.dmpdecisionserver_dvs_int_0_peat.version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmpdecisionserver_dvs_int_0_peat
            - Habitat
            - '#bizops'
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            tags:
            - '#bizops'
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmpdecisionserver_dvs_int_1_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.dmpdecisionserver_dvs_int_1_peat.version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmpdecisionserver_dvs_int_1_peat
            - Habitat
            - '#bizops'
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            tags:
            - '#bizops'
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmpdecisionserver_res_0_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.dmpdecisionserver_res_0_peat.version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmpdecisionserver_res_0_peat
            - Habitat
            - '#bizops'
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            tags:
            - '#bizops'
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmpdecisionserver_res_1_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.dmpdecisionserver_res_1_peat.version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmpdecisionserver_res_1_peat
            - Habitat
            - '#bizops'
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            tags:
            - '#bizops'
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-decisioncenter_bc_service_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.decisioncenter_bc_service_peat_version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - decisioncenter_bc_service_peat
            - Habitat
            - '#bizops'
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            tags:
            - '#bizops'
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-decision_center_ec_components_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.decision_center_ec_components_peat.version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - decision_center_ec_components_peat
            - Habitat
            - '#bizops'
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            tags:
            - '#bizops'
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-decision_center_ec_webservices_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.artifact.decision_center_ec_webservices_peat.version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - decision_center_ec_webervices_peat
            - Habitat
            - '#bizops'
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Promote-dmp_udt_ws_peat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            jobParameters: |-
              packageIdent=${folder.dmp_udt_ws_peat_version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/RELEASE_JOBS/job/promote_package-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - dmp_udt_ws_peat
            - Habitat
            - '#bizops'
          - name: "Sleep ${folder.metadata.time} seconds"
            type: xlrelease.ScriptTask
            tags:
            - '#bizops'
            script: |-
              import time
              time.sleep(${folder.metadata.time})
              print "Done Sleeping"
          - name: Validation
            type: xlrelease.SequentialGroup
            tasks:
            - name: decisionserver_res_service
              type: xlrelease.SequentialGroup
              tags:
              - decisionserver_res_service
              - Habitat
              tasks:
              - name: DMPDecisionServer_dvs_ext_0 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_ext_0/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_ext_0/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_dvs_ext_0
                - Habitat
                - '#bizops'
              - name: DMPDecisionServer_dvs_ext_1 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_ext_1/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_ext_1/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_dvs_ext_1
                - Habitat
                - '#bizops'
              - name: DMPDecisionServer_dvs_int_0 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_int_0/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_int_0/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_dvs_int_0_peat
                - Habitat
                - '#bizops'
              - name: DMPDecisionServer_dvs_int_1 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_int_1/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_dvs_int_1/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_dvs_int_1
                - Habitat
                - '#bizops'
              - name: DMPDecisionServer_res_0 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_res_0/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_res_0/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_res_0
                - Habitat
                - '#bizops'
              - name: DMPDecisionServer_res_1 status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_res_1/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisionserver_res_service/job/status/job/peat/job/decisionserver_res_1/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmpdecisionserver_res_1
                - Habitat
                - '#bizops'
              - name: decisioncenter_bc_service status
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/decisioncenter_bc_service/job/status/job/peat/job/Status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/decisioncenter_bc_service/job/status/job/peat/job/Status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - decisioncenter_bc_service
                - Habitat
                - '#bizops'
              - name: dmp_decision_center_ec_components
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_components/job/status/job/peat/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_components/job/status/job/peat/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmp_decision_center_ec_components
                - Habitat
                - '#bizops'
              - name: dmp_decision_center_ec_webservices
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_webservices/job/status/job/peat/job/status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/dmp_decision_center_ec/job/dmp_decision_center_ec_webservices/job/status/job/peat/job/status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmp_decision_center_ec_components
                - Habitat
                - '#bizops'
              - name: dmp_udt_ws
                type: jenkins.Build
                jenkinsServer: Jenkins Production - cd5
                username: "${folder.jenkins_eid}"
                jobName: ChefHabitat/job/decision_processing/job/dmp_udt_ws/job/status/job/peat/job/Status/
                description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/decision_processing/job/dmp_udt_ws/job/status/job/peat/job/Status/configure
                variableMapping:
                  pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
                tags:
                - dmp_udt_ws_peat
                - Habitat
                - '#bizops'
              - name: Validate
                type: xlrelease.GateTask
                description: "Make sure, the above status jobs reported the status\
                  \ as UP with latest timestamp and the versions are right. You can\
                  \ compare the versions with apmate."
                tags:
                - '#bizops'
      - name: TFC Tomcat Apps HABITAT & PCF
        type: xlrelease.SequentialGroup
        tags:
        - Tomcat Apps
        - Habitat
        tasks:
        - name: Lift this gate to begin deployment
          type: xlrelease.GateTask
          tags:
          - '#bizops'
        - name: Deploy tfcgateway
          type: xlrelease.SequentialGroup
          precondition: "releaseVariables['tfc-tfcgateway-deploy'] == 'True'"
          tasks:
          - name: PUBLISH TOMLS
            type: xlrelease.SequentialGroup
            flagStatus: ATTENTION_NEEDED
            flagComment: Only Continue if needed
            precondition: "False"
            tags:
            - TOML
            tasks:
            - name: Merge PR for TOML changes
              type: bitbucket.MergePullRequest
              server: NewConfigBitbucket
              username: dmp_xlr_merging
              variableMapping:
                pythonScript.password: "${folder.metadata.bitbucket.dmp_xlr_merging}"
              tags:
              - '#bizops'
            - name: Publish TOML's
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param
              jobParameters: |-
                appEnv=peat
                app=tfc_tfcgateway
              description: |-
                Publish TOML's on PEAT TFCGateway nodes

                https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - '#bizops'
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=tfcgateway dmp_user_interface_frameworks/tfc_tfcgateway
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for Gateway to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Gateway is not registered with synapse. Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/
            tags:
            - '#bizops'
        - name: Deploy DI
          type: xlrelease.SequentialGroup
          precondition: "releaseVariables['tfc-di-deploy'] == 'True'"
          tasks:
          - name: PUBLISH TOMLS
            type: xlrelease.SequentialGroup
            flagStatus: ATTENTION_NEEDED
            flagComment: Only Continue if needed
            precondition: "False"
            tasks:
            - name: Merge PR for TOML changes
              type: bitbucket.MergePullRequest
              server: NewConfigBitbucket
              tags:
              - '#bizops'
            - name: Publish TOML's
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param
              jobParameters: |-
                appEnv=peat
                app=tfc_di
              description: |-
                Publish TOML's on PEAT DI nodes

                https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - '#bizops'
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=di dmp_user_interface_frameworks/tfc_di
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for DI to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: Status tfc_di
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_di/job/PEAT/job/status/
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_di/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
            tags:
            - '#bizops'
        - name: Deploy TFCConfig
          type: xlrelease.SequentialGroup
          precondition: "releaseVariables['tfc-tfcconfig-deploy'] == 'True'"
          tasks:
          - name: PUBLISH TOMLS
            type: xlrelease.SequentialGroup
            flagStatus: ATTENTION_NEEDED
            flagComment: Only Continue if needed
            precondition: "False"
            tasks:
            - name: Merge PR for TOML changes
              type: bitbucket.MergePullRequest
              server: NewConfigBitbucket
              tags:
              - '#bizops'
            - name: Publish TOML's
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param
              jobParameters: |-
                appEnv=peat
                app=tfc_tfcconfig
              description: |-
                Publish TOML's on PEAT tfcconfig nodes

                https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - '#bizops'
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=tfcconfig dmp_user_interface_frameworks/tfc_tfcconfig
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for tfcconfig to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: status tfc_tfcconfig
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcconfig/job/PEAT/job/status/
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcgateway/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_tfcconfig/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
            tags:
            - '#bizops'
        - name: Deploy Rulemanager
          type: xlrelease.SequentialGroup
          precondition: "releaseVariables['tfc-rulemanager-deploy'] == 'True'"
          tasks:
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=rulemanager dmp_user_interface_frameworks/tfc_rulemanager
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for tfcconfig to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: status tfc_rulemanager
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_rulemanager/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_rulemanager/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_rulemanager/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
            tags:
            - '#bizops'
        - name: Deploy Transactionviewer
          type: xlrelease.SequentialGroup
          precondition: "releaseVariables['tfc_transactionviewer_deploy'] == 'True'"
          tasks:
          - name: PUBLISH TOMLS
            type: xlrelease.SequentialGroup
            flagStatus: ATTENTION_NEEDED
            flagComment: Only Continue if needed
            precondition: "False"
            tasks:
            - name: Merge PR for TOML changes
              type: bitbucket.MergePullRequest
              server: NewConfigBitbucket
              tags:
              - '#bizops'
            - name: Publish TOML's
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param
              jobParameters: |-
                appEnv=peat
                app=tfc_transactionviewer
              description: |-
                Publish TOML's on PEAT transactionviewer nodes

                https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - '#bizops'
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=transactionviewer dmp_user_interface_frameworks/tfc_transactionviewer
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for transactionviewer to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: status tfc_transactionviewer
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_transactionviewer/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_transactionviewer/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_transactionviewer/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
            tags:
            - '#bizops'
        - name: ISSReports - PCF deployment
          type: xlrelease.SequentialGroup
          precondition: "releaseVariables['iisreports-pfc-deploy'] == 'True'"
          tasks:
          - name: PCF app deployment jenkins job
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: TFCPCF/job/PCF/job/stl-stage/job/Deploy-ISS-Reports-Services-PEAT
            description: |-
              Run this jenkins job to deploy ISSReportsservices on PCF (pcf_org: ESS-TFC and pcf_space: stage-peat)

              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-ISS-Reports-Services-PEAT/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: PCF app deployment validation
            type: xlrelease.GateTask
            description: |-
              Validate ISS Report Deployment in PCF.

              Checks for Jenkins Job execution Is successful for IssReport TFC apps
              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-ISS-Reports-Services-PEAT/

              Verify if the deployment is successful in PCF for iss-reports-services application
              - Login into PEAT PCF Space: https://apps.system.stl.pcfstage00.mastercard.int/
              - Traverse to the ESS-TFC Org and go to stage-peat space.
              - iss-reports-services-peat

              Login to Dynatrace and verify the new application instance Is available
              - iss-reports-services-peat

              Login to Splunk and verify the logs are available for iss-reports-services

              Splunk URL
              https://dtl.splunk.mastercard.int

              Query String:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="iss-reports-services-peat"

              Query to verify app Is started:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="iss-reports-services-peat" "Started Application in * seconds (JVM running for *)"

              Verify the iss-reports-services service is registered in PEAT Krang
               - Login to Stage Krang - https://stage.eportal.mastercard.com/apie-stage-krang
               - Search for tfc
               - iss-reports-services should be registered with 4 instances and the pcf routes must be displayed and each instance is associated with PEAT tag
            tags:
            - '#bizops'
        - name: Deploy LIstmanager
          type: xlrelease.SequentialGroup
          precondition: "releaseVariables['tfc-listmanager-deploy'] == 'True'"
          tasks:
          - name: PUBLISH TOMLS
            type: xlrelease.SequentialGroup
            flagStatus: ATTENTION_NEEDED
            flagComment: Only Continue if needed
            precondition: "False"
            tasks:
            - name: Merge PR for TOML changes
              type: bitbucket.MergePullRequest
              server: NewConfigBitbucket
              tags:
              - '#bizops'
            - name: Publish TOML's
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: dmp_xlr
              jobName: SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param
              jobParameters: |-
                appEnv=peat
                app=tfc_listmanager
              description: |-
                Publish TOML's on PEAT listmanager nodes

                https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/node_specific_promote_toml-param/
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              tags:
              - '#bizops'
          - name: Promote Package
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            jobParameters: |-
              artifactAndPackage=listmanager dmp_user_interface_frameworks/tfc_listmanager
              promoteToChannel=peat
              platform=linux
              dryRun=false
            description: |-
              Promote Package for listmanager to peat channel

              https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/promote_apmate_to_channel-param/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: status tfc_listmanager
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_listmanager/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_listmanager/job/PEAT/job/status/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_listmanager/job/PEAT/job/status/

              Verify app nodes are registered on synapse

              https://stage.eportal.mastercard.com/apie-stage-krang under PEAT tag
            tags:
            - '#bizops'
        - name: Rule Testing Service - PCF deployment
          type: xlrelease.SequentialGroup
          precondition: "releaseVariables['rule-test-service-pcf-deploy'] == 'True'"
          tasks:
          - name: PCF app deployment jenkins job
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: TFCPCF/PCF/stl-stage/Deploy-Rule-Testing-Service-PEAT
            description: |-
              Run this jenkins job to deploy Rule Testing Service on PCF (pcf_org: ESS-TFC and pcf_space: stage-peat)

              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-Rule-Testing-Service-PEAT/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: PCF app deployment validation
            type: xlrelease.GateTask
            description: |-
              Validate Rule Testing Service Deployment in PCF.

              Checks for Jenkins Job execution Is successful for Rule Testing Service TFC apps
              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-Rule-Testing-Service-PEAT/

              Verify if the deployment is successful in PCF for Rule Testing Service application
              - Login into PEAT PCF Space: https://apps.system.stl.pcfstage00.mastercard.int/
              - Traverse to the ESS-TFC Org and go to stage-peat space.
              - rule-testing-service-peat

              Login into Dynatrace ,
              -Log credentials for Dynatrace is your email and standard LDAP password: https://zak33936.live.dynatrace.com/ui/services?gtf=-2h&gf=all&sorting=name;asc
              - verify the new application instance is available by filtering by name of app under Services e.g. rule-testing-service-peat
              - rule-testing-service-peat

              Login to Splunk, Log credentials for Splunk is your email and MCTest  password
              - verify the logs are available for rule-testing-service-peat
              Splunk URL
              https://dtl.splunk.mastercard.int

              Query String:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="rule-testing-*"

              Query to verify app Is started:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="rule-testing-*" "Started Application in * seconds (JVM running for *)"

              Verify the rule-testing-service service is registered in PEAT Krang
               - Login to Stage Krang - https://stage.eportal.mastercard.com/apie-stage-krang
               - Search for tfc
               - rule-testing-service should be registered with 4 instances and the pcf routes must be displayed and each instance is associated with PEAT tag
            tags:
            - '#bizops'
        - name: Rule Metrics Service - PCF deployment
          type: xlrelease.SequentialGroup
          precondition: "releaseVariables['rule-metric-service-pcf-deploy'] == 'True'"
          tasks:
          - name: PCF app deployment jenkins job
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: dmp_xlr
            jobName: TFCPCF/PCF/stl-stage/Deploy-Rule-Metrics-Service-PEAT
            description: |-
              Run this jenkins job to deploy Rule Metrics Service on PCF (pcf_org: ESS-TFC and pcf_space: stage-peat)

              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-Rule-Metrics-Service-PEAT/
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            tags:
            - '#bizops'
          - name: PCF app deployment validation
            type: xlrelease.GateTask
            description: |-
              Validate Rule Metrics Service Deployment in PCF.

              Checks for Jenkins Job execution Is successful for Rule Metrics Service TFC apps
              https://cd3.mastercard.int/jenkins/job/TFCPCF/job/PCF/job/stl-stage/job/Deploy-Rule-Metrics-Service-PEAT/

              Verify if the deployment is successful in PCF for Rule Metrics Service application
              - Login into PEAT PCF Space: https://apps.system.stl.pcfstage00.mastercard.int/
              - Traverse to the ESS-TFC Org and go to stage-peat space.
              - rule-metrics-service-peat

              Login into Dynatrace ,
              -Log credentials for Dynatrace is your email and standard LDAP password: https://zak33936.live.dynatrace.com/ui/services?gtf=-2h&gf=all&sorting=name;asc
              - verify the new application instance is available by filtering by name of app under Services e.g. rule-metrics-service-peat
              - rule-metrics-service-peat

              Login to Splunk, Log credentials for Splunk is your email and MCTest  password
              - verify the logs are available for rule-metrics-service-peat
              Splunk URL
              https://dtl.splunk.mastercard.int

              Query String:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="rule-metrics-service-peat"

              Query to verify app Is started:
              index=app_pcf cf_org_name="ESS-TFC" cf_space_name="stage-peat" cf_app_name="rule-metrics-service-peat" "Started Application in * seconds (JVM running for *)"

              Verify the rule-metrics-service is registered in PEAT Krang
               - Login to Stage Krang - https://stage.eportal.mastercard.com/apie-stage-krang
               - Search for tfc
               - rule-metrics-service should be registered with 4 instances and the pcf routes must be displayed and each instance is associated with PEAT tag
            tags:
            - '#bizops'
      - name: Fraud Center Apache via Habitat
        type: xlrelease.SequentialGroup
        scheduledStartDate: 2019-02-06T10:00:00-06:00
        team: SCSSPeatDeployment
        tasks:
        - name: Lift this gate to begin with this Webapp
          type: xlrelease.GateTask
          description: |-
            To avoid Jenkins concurrency issues and job failures, this gate was added to all Webapp deployment sections.

            **_Note that the Webapps can still be deployed in parallel_**, but the deployment for each section will only start when this gate is lifted. If you are blocked waiting for investigation or for a deployment job to run, move on to the next app by lifting its gate.

            Note that some of these gates have preconditions (it will be a checkbox below this text box, if there is a precondition). For instance, some apps require Grid to be up before they are deployed.
          team: SCSSPeatDeployment
          tags:
          - Fraud Center Apache
          - '#bizops'
        - name: Deploy the_fraud_center_apache24
          type: xlrelease.SequentialGroup
          description: This is the actual apache instance that needs to be the deployed
            first before any of the webcontent packages
          flagComment: This needs to be the first webcontent package that's deployed
          precondition: "False"
          tasks:
          - name: Promote-the_fraud_center_apache24
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/promote-specific-param/
            jobParameters: |-
              packageIdent=${folder.the_fraud_center_apache24_version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/promote-specific-param/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
          - name: Merge any TOML changes if needed
            type: stash.MergePullRequest
            server: Bitbucket Server
            username: dmp_xlr
            team: SCSSPeatDeployment
            precondition: "False"
            tags:
            - '#bizops'
          - name: Publish TOML's wjb4stl172
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/publish-wjb4stl172/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/publish-wjb4stl172/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
          - name: Publish TOML's wjb4stl173
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: dmp_xlr
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/publish-wjb4stl173/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/publish-wjb4stl172/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
          - name: Sleep for 30 seconds
            type: xlrelease.ScriptTask
            team: SCSSPeatDeployment
            tags:
            - '#bizops'
            script: |-
              import time
              # Sleep for 30 seconds before validation
              time.sleep(30)
          - name: Status-the_fraud_center_apache24
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/status/
            team: SCSSPeatDeployment
            watchers:
            - E111441
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd2}"
            tags:
            - '#bizops'
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status by checking the last build from the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/the_fraud_center_apache24/job/PEAT/job/status
            tags:
            - '#bizops'
        - name: Deploy app_bootstrapper
          type: xlrelease.SequentialGroup
          description: Bootstrapper needs to be run first since it set's up the fraud
            center directory
          flagComment: This needs to be the first webcontent package that's deployed
          precondition: "releaseVariables['app-bootstrapper-deploy'] == 'True'"
          tasks:
          - name: Promote-app_bootstrapper
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/app_bootstrapper-promote-specific-param/
            jobParameters: |-
              packageIdent=${folder.app_bootstrapper_version}
              channel=peat
              dryRun=false
              platform=linux
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/app_bootstrapper-promote-specific-param/
            team: SCSSPeatDeployment
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
            tags:
            - '#bizops'
          - name: Sleep for 30 seconds
            type: xlrelease.ScriptTask
            team: SCSSPeatDeployment
            tags:
            - '#bizops'
            script: |-
              import time
              # Sleep for 30 seconds before validation
              time.sleep(30)
          - name: Status-app_bootstrapper
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd5
            username: "${folder.jenkins_eid}"
            jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/peat/job/status/
            description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/peat/job/status/
            team: SCSSPeatDeployment
            watchers:
            - E111441
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd2}"
            tags:
            - '#bizops'
          - name: Verify Status
            type: xlrelease.GateTask
            description: |-
              Verify habitat app status using the following job

              https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_bootstrapper/job/peat/job/status/
            tags:
            - '#bizops'
        - name: Deploy apps under htdocs/fraudcenter
          type: xlrelease.ParallelGroup
          tasks:
          - name: Deploy app_platform
            type: xlrelease.SequentialGroup
            precondition: "releaseVariables['app-platform-deploy'] == 'True'"
            tasks:
            - name: Promote-app_platform
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/app_platform-promote-specific-param/
              jobParameters: |-
                packageIdent=${folder.app_platform_version}
                channel=peat
                dryRun=false
                platform=linux
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/app_platform-promote-specific-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
            - name: Sleep for 30 seconds
              type: xlrelease.ScriptTask
              team: SCSSPeatDeployment
              tags:
              - '#bizops'
              script: |-
                import time
                # Sleep for 30 seconds before validation
                time.sleep(30)
            - name: Status-app_platform
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd3
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/peat/job/status/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/peat/job/status/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
            - name: Verify Status
              type: xlrelease.GateTask
              description: |-
                Verify habitat app status using the following job

                https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_platform/job/peat/job/status/
              tags:
              - '#bizops'
          - name: Deploy tfc_help
            type: xlrelease.SequentialGroup
            precondition: "False"
            tasks:
            - name: Promote-tfc_help
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/tfc_help-promote-specific-param/
              jobParameters: |-
                packageIdent=${folder.tfc_help_version}
                channel=stage
                dryRun=false
                platform=linux
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/tfc_help-promote-specific-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
            - name: Sleep for 30 seconds
              type: xlrelease.ScriptTask
              team: SCSSPeatDeployment
              tags:
              - '#bizops'
              script: |-
                import time
                # Sleep for 30 seconds before validation
                time.sleep(30)
            - name: Status-tfc_help
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/peat/job/status/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/peat/job/status/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
            - name: Verify Status
              type: xlrelease.GateTask
              description: |-
                Verify habitat app status using the following job

                https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/tfc_help/job/peat/job/status/
              tags:
              - '#bizops'
          - name: Deploy app_customer_support
            type: xlrelease.SequentialGroup
            team: SCSSPeatDeployment
            precondition: "False"
            tasks:
            - name: Promote-app_customer_support
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_customer_support/job/promote-specific-param/
              jobParameters: |-
                packageIdent=${folder.habitat.app_customer_support.version}
                channel=peat
                dryRun=false
                platform=linux
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_customer_support/job/promote-specific-param/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
            - name: Sleep for 30 seconds
              type: xlrelease.ScriptTask
              team: SCSSPeatDeployment
              tags:
              - '#bizops'
              script: |-
                import time
                # Sleep for 30 seconds before validation
                time.sleep(30)
            - name: Status-app_customer_support
              type: jenkins.Build
              jenkinsServer: Jenkins Production - cd5
              username: "${folder.jenkins_eid}"
              jobName: ChefHabitat/job/dmp_user_interface_frameworks/job/app_customer_support/job/peat/job/status/
              description: https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_customer_support/job/peat/job/status/
              team: SCSSPeatDeployment
              variableMapping:
                pythonScript.password: "${folder.metadata.jenkins.token.cd5}"
              tags:
              - '#bizops'
            - name: Verify Status
              type: xlrelease.GateTask
              description: |-
                Verify habitat app status using the following job

                https://cd5.mastercard.int/jenkins/job/ChefHabitat/job/dmp_user_interface_frameworks/job/app_customer_support/job/peat/job/status/
              tags:
              - '#bizops'
    color: '#0099CC'
  realFlagStatus: ATTENTION_NEEDED
  tags:
  - habitat
  - "22.6"
  variables:
  - type: xlrelease.StringVariable
    key: smJenkinsBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: smStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsDeployStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: StandinDeployStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: StandinDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: griLiveStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: platformServicesDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl832DeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl833DeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpbillingDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: mawsDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpBatchDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminUIDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: transactionDispositionDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: StandinStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: StandinStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsDIStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsDIDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsDIStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: platformServicesStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: platformServicesStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl833StopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl832StopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl832StartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl833StartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: mawsStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: mawsStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuUpdatesDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: transactionDispositionStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: transactionDispositionStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpKmsBatchJobBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: mpsEventBatchBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: lifeCycleWebServiceBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: etlDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsStopBuildStatus-1
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsDeployBuildStatus-1
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: brmswsStartBuildStatus-1
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: securitySolutionsWebBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpmpseventBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdmockserviceDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdmockserviceStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbdmockserviceStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpbillingStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpbillingStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuUpdatesStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abuUpdatesStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStopAllBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStopNotifyIssuersBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStopNotifyIssuerscjb4stl832BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStopNotifyIssuerscjb4stl833BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushDeployAllBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStartAllBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStartNotifyIssuerscjb4stl832BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStartNotifyIssuerscjb4stl833BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: bintableStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: bintableDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: bintableStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: standINStopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: standINDeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: standINStartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: sireportBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-riskbaseddecisioning-ws-cis4stl3BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl834StartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl835StartBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl835DeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl834DeployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl835StopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: panProfileWebServicescjb4stl834StopBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: abupushStartNotifyIssuerscjb4stl835BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: DMPDeploymentManager2
    requiresValue: false
    showOnReleaseStart: false
    label: "deploymentmanager2 (Originally bundled in DeploymentManager2_EA-*.ear,\
      \ now deployed individually after Tomcat migration)"
    value: 4.8.3
  - type: xlrelease.StringVariable
    key: DMPRTSRestWebService
    requiresValue: false
    showOnReleaseStart: false
    label: "rtsrestwebservice (Originally bundled in RTSWebService_EA-*.ear, now deployed\
      \ individually after Tomcat migration)"
    value: 3.4.3
  - type: xlrelease.StringVariable
    key: DMPDecisionCenter_EC
    requiresValue: false
    showOnReleaseStart: false
    label: "emsruleteamserver  (Originally an EMSRuleTeamServer-*.ear, now updated\
      \ to war file)"
    value: 3.6.0
  - type: xlrelease.StringVariable
    key: DMPDecisionCenter_BC
    requiresValue: false
    showOnReleaseStart: false
    label: Newly added for Business console part of OdmUpgrade
    value: 2.1.0
  - type: xlrelease.StringVariable
    key: DMPDecisionServerConsole
    requiresValue: false
    showOnReleaseStart: false
    label: "DecisionServerConsole  (Originally an DecisionServerConsole -*.ear, now\
      \ updated to war file)"
    value: 3.1.0
  - type: xlrelease.StringVariable
    key: DMPDecisionValidationServerIntegration
    requiresValue: false
    showOnReleaseStart: false
    label: "DecisionValidationServerIntegration  (Originally an DecisionValidationServerIntegration-*.ear,\
      \ now updated to war file)"
    value: 3.12.0
  - type: xlrelease.StringVariable
    key: tfc-help-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminConfigcjb4stl332BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisionAdminConfigcjb4stl333BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-decisionadmin-cjb4stl332
    requiresValue: false
    showOnReleaseStart: false
    value: 5.0.0
  - type: xlrelease.StringVariable
    key: jboss-config-decisionadmin-cjb4stl333
    requiresValue: false
    showOnReleaseStart: false
    value: 5.0.0
  - type: xlrelease.StringVariable
    key: jboss-config-bintable-rsk4stl4-deployBuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-securitysolutions-cjb4stl332-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-securitysolutions-cjb4stl333-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-securitysolutions-cjb4stl996-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-securitysolutions-cjb4stl997-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: fc-platform-services-cjb4stl332-jboss-config-deploy-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: fc-platform-services-cjb4stl333-jboss-config-deploy-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: JBOSS-CONFIG-APACHE-wjb4stl172
    requiresValue: false
    showOnReleaseStart: false
    label: JBOSS-CONFIG-APACHE-wjb4stl172
    value: 4.2.0
  - type: xlrelease.StringVariable
    key: JBOSS-CONFIG-APACHE-wjb4stl173
    requiresValue: false
    showOnReleaseStart: false
    label: JBOSS-CONFIG-APACHE-wjb4stl173
    value: 4.2.0
  - type: xlrelease.StringVariable
    key: rbd-nudata-provider-PR-MergeStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbd-web-service-PR-MergeStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-RBD-rsk4stl4-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-RBD-rsk4stl5-BuildStatus
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: consumer-controls-ws-PR-merge-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: jboss-config-riskbaseddecisioning-ws-rsk4stl4.version
    requiresValue: false
    showOnReleaseStart: false
    label: jboss-config-riskbaseddecisioning-ws-rsk4stl4.version
    value: 4.5.0
  - type: xlrelease.StringVariable
    key: jboss-config-riskbaseddecisioning-ws-rsk4stl5.version
    requiresValue: false
    showOnReleaseStart: false
    label: jboss-config-riskbaseddecisioning-ws-rsk4stl5.version
    value: 4.5.0
  - type: xlrelease.StringVariable
    key: consumer-controls-ws-stop-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: consumer-controls-ws-start-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: release
  - type: xlrelease.StringVariable
    key: pple-transformer-channel
    value: peat
  extensions:
  - name: Dashboard
    type: xlrelease.Dashboard
    owner: e025882
    tiles:
    - name: Release progress
      type: xlrelease.ReleaseProgressTile
    - name: Release summary
      type: xlrelease.ReleaseSummaryTile
    - name: Resource usage
      type: xlrelease.ResourceUsageTile
    - name: Release timeline
      type: xlrelease.TimelineTile
    - name: Release health
      type: xlrelease.ReleaseHealthTile
    - name: ODM
      type: xlrelease.TaskProgressTile
      row: 2
      col: 2
      tags:
      - odm
    - name: Decision Admin
      type: xlrelease.TaskProgressTile
      row: 3
      col: 0
      tags:
      - decision admin
    - name: BRMSWS
      type: xlrelease.TaskProgressTile
      row: 3
      col: 1
      tags:
      - brmsws
    - name: Fraud Center
      type: xlrelease.TaskProgressTile
      row: 3
      col: 2
      tags:
      - fraud center apache
      - fraud center tomcat
    - name: PanProfile
      type: xlrelease.TaskProgressTile
      row: 4
      col: 0
      tags:
      - panprofile
    - name: RBD
      type: xlrelease.TaskProgressTile
      row: 4
      col: 1
      tags:
      - rbd ws
      - rbd nudata
    - name: ABU
      type: xlrelease.TaskProgressTile
      row: 4
      col: 2
      tags:
      - abu push
      - abu updates
      - abu maws
    - name: Consumer Controls
      type: xlrelease.TaskProgressTile
      row: 5
      col: 0
      tags:
      - consumer controls
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 5
      col: 1
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 5
      col: 2
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 6
      col: 0
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 6
      col: 1
    - name: Task Progress
      type: xlrelease.TaskProgressTile
      row: 6
      col: 2
  riskProfile: Default risk profile
- template: XLR-APMATE-HABITAT-VALIDATOR
  scheduledStartDate: 2021-11-08T09:00:00-06:00
  phases:
  - phase: Apmate Validations
    tasks:
    - name: overall phase skippability
      type: xlrelease.SequentialGroup
      tasks:
      - name: app_bootstrapper
        type: xlrelease.SequentialGroup
        precondition: "${folder.app_bootstrapper_deploy}"
        tasks:
        - name: app_bootstrapper check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=app-bootstrapper
            passedEnv=${environment}
            passedVersionToCheck=${folder.app_bootstrapper_version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${app_bootstrapper.apmate.status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: app_bootstrapper validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['app_bootstrapper.apmate.status'] or\
            \ releaseVariables['app_bootstrapper.apmate.status'] == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: app_bootstrapper in ${environment}"
          body: "app_bootstrapper variable (**folder.app_bootstrapper_version**)\
            \ with the value **${folder.app_bootstrapper_version}** has experienced\
            \ a validation failure in the ${environment} environment. Please correct\
            \ the XLR folder variable to contain the correct value."
          bcc:
          - e025882
      - name: app-platform
        type: xlrelease.SequentialGroup
        precondition: "${folder.app_platform_deploy}"
        tasks:
        - name: app-platform check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=app-platform
            passedEnv=${environment}
            passedVersionToCheck=${folder.artifact.app-platform.version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${app-platform.apmate.status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: app-platform validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['app-platform.apmate.status'] or releaseVariables['app-platform.apmate.status']\
            \ == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: app-platform in ${environment}"
          body: "app-platform variable (**folder.artifact.app-platform.version**)\
            \ with the value **${folder.artifact.app-platform.version}** has experienced\
            \ a validation failure in the ${environment} environment. Please correct\
            \ the XLR folder variable to contain the correct value."
          bcc:
          - e025882
      - name: ai-garage-validator
        type: xlrelease.SequentialGroup
        precondition: "${folder.ai_garage_validator_deploy}"
        tasks:
        - name: ai-garage-validator check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=ai-garage-validator
            passedEnv=${environment}
            passedVersionToCheck=${folder.ai_garage_validator_version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${ai-garage-validator.apmate.status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: ai-garage-validator validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['ai-garage-validator.apmate.status']\
            \ or releaseVariables['ai-garage-validator.apmate.status'] == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: ai-garage-validator in ${environment}"
          body: "ai-garage-validator variable (**folder.ai_garage_validator_version**)\
            \ with value **${folder.ai_garage_validator_version}** has experienced\
            \ a validation failure in the ${environment} environment. Please correct\
            \ the XLR folder variable to contain the correct value."
      - name: casemanager
        type: xlrelease.SequentialGroup
        precondition: "${folder.tfc-casemanager-deploy}"
        tasks:
        - name: casemanager check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=casemanager
            passedEnv=${environment}
            passedVersionToCheck=${folder.artifact.casemanager.version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            pythonScript.buildStatus: "${casemanager.apmate.status}"
        - name: casemanager validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['casemanager.apmate.status'] or releaseVariables['casemanager.apmate.status']\
            \ == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: casemanager in ${environment}"
          body: "casemanager variable (**folder.artifact.casemanager.version**) with\
            \ value **${folder.artifact.casemanager.version}** has experienced a validation\
            \ failure in the ${environment} environment. Please correct the XLR folder\
            \ variable to contain the correct value."
      - name: di
        type: xlrelease.SequentialGroup
        precondition: "${folder.tfc_di_deploy}"
        tasks:
        - name: di check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=di
            passedEnv=${environment}
            passedVersionToCheck=${folder.tfc_di_version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${di.apmate.status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: di validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['di.apmate.status'] or releaseVariables['di.apmate.status']\
            \ == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: di in ${environment}"
          body: "di variable (**folder.tfc_di_version**) with value **${folder.tfc_di_version}**\
            \ has experienced a validation failure in the ${environment} environment.\
            \ Please correct the XLR folder variable to contain the correct value."
      - name: GridConfig
        type: xlrelease.SequentialGroup
        precondition: "${folder.grid_deploy}"
        tasks:
        - name: GridConfig check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=GridConfig
            passedEnv=${environment}
            passedVersionToCheck=${folder.GridConfig_version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${GridConfig.apmate.status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: GridConfig validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['GridConfig.apmate.status'] or releaseVariables['GridConfig.apmate.status']\
            \ == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: GridConfig in ${environment}"
          body: "GridConfig variable (**folder.GridConfig_version**) with\
            \ value **${folder.GridConfig_version}** has experienced a validation\
            \ failure in the ${environment} environment. Please correct the XLR folder\
            \ variable to contain the correct value."
      - name: grid-udt-daemon
        type: xlrelease.SequentialGroup
        precondition: "${folder.grid-udt-daemon-deploy}"
        tasks:
        - name: grid-udt-daemon check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=grid-udt-daemon
            passedEnv=${environment}
            passedVersionToCheck=${folder.grid_udt_daemon_version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${grid-udt-daemon.apmate.status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: grid-udt-daemon validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['grid-udt-daemon.apmate.status'] or\
            \ releaseVariables['grid-udt-daemon.apmate.status'] == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: grid-udt-daemon in ${environment}"
          body: "grid-udt-daemon variable (**folder.grid_udt_daemon_version**)\
            \ with value **${folder.grid_udt_daemon_version}** has experienced\
            \ a validation failure in the ${environment} environment. Please correct\
            \ the XLR folder variable to contain the correct value."
      - name: host-manager-cli
        type: xlrelease.SequentialGroup
        tasks:
        - name: host-manager-cli check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=host-manager-cli
            passedEnv=${environment}
            passedVersionToCheck=${folder.host_manager_cli_version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${host-manager-cli.apmate.status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: host-manager-cli validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['host-manager-cli.apmate.status'] or\
            \ releaseVariables['host-manager-cli.apmate.status'] == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: host-manager-cli in ${environment}"
          body: "host-manager-cli variable (**folder.host_manager_cli_version**)\
            \ with value **${folder.host_manager_cli_version}** has experienced\
            \ a validation failure in the ${environment} environment. Please correct\
            \ the XLR folder variable to contain the correct value."
      - name: host-manager-configuration
        type: xlrelease.SequentialGroup
        tasks:
        - name: host-manager-configuration check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=host-manager-configuration
            passedEnv=${environment}
            passedVersionToCheck=${folder.artifact.host-manager-configuration.version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${host-manager-configuration.apmate.status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: host-manager-configuration validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['host-manager-configuration.apmate.status']\
            \ or releaseVariables['host-manager-configuration.apmate.status'] == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: host-manager-configuration in ${environment}"
          body: "host-manager-configuration variable (**folder.artifact.host-manager-configuration.version**)\
            \ with value **${folder.artifact.host-manager-configuration.version}**\
            \ has experienced a validation failure in the ${environment} environment.\
            \ Please correct the XLR folder variable to contain the correct value."
      - name: host-manager
        type: xlrelease.SequentialGroup
        precondition: "${folder.flextp-deploy}"
        tasks:
        - name: host-manager check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=host-manager
            passedEnv=${environment}
            passedVersionToCheck=${folder.host_manager_version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${host-manager.apmate.status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: host-manager validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['host-manager.apmate.status'] or releaseVariables['host-manager.apmate.status']\
            \ == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: host-manager in ${environment}"
          body: "host-manager variable (**folder.host_manager_version**)\
            \ with value **${folder.host_manager_version}** has experienced\
            \ a validation failure in the ${environment} environment. Please correct\
            \ the XLR folder variable to contain the correct value."
      - name: listmanager
        type: xlrelease.SequentialGroup
        precondition: "${folder.tfc_listmanager_deploy}"
        tasks:
        - name: listmanager check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=listmanager
            passedEnv=${environment}
            passedVersionToCheck=${folder.tfc_listmanager_version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${listmanager.apmate.status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: listmanager validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['listmanager.apmate.status'] or releaseVariables['listmanager.apmate.status']\
            \ == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: listmanager in ${environment}"
          body: "listmanager variable (**folder.tfc_listmanager_version**) with\
            \ value **${folder.tfc_listmanager_version}** has experienced a validation\
            \ failure in the ${environment} environment. Please correct the XLR folder\
            \ variable to contain the correct value."
      - name: pan-profile-web-service
        type: xlrelease.SequentialGroup
        precondition: "${folder.pan-profile-deploy}"
        tasks:
        - name: pan-profile-web-service check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=pan-profile-web-service
            passedEnv=${environment}
            passedVersionToCheck=${folder.pan_profile_web_service_version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            pythonScript.buildStatus: "${pan-profile-web-service.apmate.status}"
        - name: pan-profile-web-service validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['pan-profile-web-service.apmate.status']\
            \ or releaseVariables['pan-profile-web-service.apmate.status'] == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: pan-profile-web-service in ${environment}"
          body: "pan-profile-web-service variable (**folder.pan_profile_web_service_version**)\
            \ with value **${folder.pan_profile_web_service_version}** has\
            \ experienced a validation failure in the ${environment} environment.\
            \ Please correct the XLR folder variable to contain the correct value."
      - name: rbd-web-service
        type: xlrelease.SequentialGroup
        tasks:
        - name: rbd-web-service check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=rbd-web-service
            passedEnv=${environment}
            passedVersionToCheck=${folder.artifact.rbd-web-service.version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${rbd-web-service.apmate.status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: rbd-web-service validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['rbd-web-service.apmate.status'] or\
            \ releaseVariables['rbd-web-service.apmate.status'] == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: rbd-web-service in ${environment}"
          body: "rbd-web-service variable (**folder.artifact.rbd-web-service.version**)\
            \ with value **${folder.artifact.rbd-web-service.version}** has experienced\
            \ a validation failure in the ${environment} environment. Please correct\
            \ the XLR folder variable to contain the correct value."
      - name: rulemanager
        type: xlrelease.SequentialGroup
        precondition: "${folder.tfc_rulemanager_deploy}"
        tasks:
        - name: rulemanager check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=rulemanager
            passedEnv=${environment}
            passedVersionToCheck=${folder.tfc_rulemanager_version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            pythonScript.buildStatus: "${rulemanager.apmate.status}"
        - name: rulemanager validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['rulemanager.apmate.status'] or releaseVariables['rulemanager.apmate.status']\
            \ == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: rulemanager in ${environment}"
          body: "rulemanager variable (**folder.tfc_rulemanager_version**) with\
            \ value **${folder.tfc_rulemanager_version}** has experienced a validation\
            \ failure in the ${environment} environment. Please correct the XLR folder\
            \ variable to contain the correct value."
      - name: rulestudio.projects
        type: xlrelease.SequentialGroup
        tasks:
        - name: rulestudio.projects check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=rulestudio.projects
            passedEnv=${environment}
            passedVersionToCheck=${folder.rulestudio_projects_version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${rulestudio.projects.apmate.status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: rulestudio.projects validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['rulestudio.projects.apmate.status']\
            \ or releaseVariables['rulestudio.projects.apmate.status'] == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: rulestudio.projects in ${environment}"
          body: "rulestudio.projects variable (**folder.rulestudio_projects_version**)\
            \ with value **${folder.rulestudio_projects_version}** has experienced\
            \ a validation failure in the ${environment} environment. Please correct\
            \ the XLR folder variable to contain the correct value."
      - name: tfcconfig
        type: xlrelease.SequentialGroup
        precondition: "${folder.tfc_tfcconfig_deploy}"
        tasks:
        - name: tfcconfig check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=tfcconfig
            passedEnv=${environment}
            passedVersionToCheck=${folder.tfc_config_version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            pythonScript.buildStatus: "${tfcconfig_apmate_status}"
        - name: tfcconfig validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['tfcconfig_apmate_status'] or releaseVariables['tfcconfig_apmate_status']\
            \ == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: tfcconfig in ${environment}"
          body: "tfcconfig variable (**folder.tfc_config_version**) with value\
            \ **${folder.tfc_config_version}** has experienced a validation\
            \ failure in the ${environment} environment. Please correct the XLR folder\
            \ variable to contain the correct value."
      - name: tfcgateway
        type: xlrelease.SequentialGroup
        precondition: "${folder.tfc_tfcgateway_deploy}"
        tasks:
        - name: tfcgateway check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=tfcgateway
            passedEnv=${environment}
            passedVersionToCheck=${folder.tfc_gateway_version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${tfcgateway.apmate.status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: tfcgateway validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['tfcgateway.apmate.status'] or releaseVariables['tfcgateway.apmate.status']\
            \ == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: tfcgateway in ${environment}"
          body: "tfcgateway variable (**folder.tfc_gateway_version**) with\
            \ value **${folder.tfc_gateway_version}** has experienced a validation\
            \ failure in the ${environment} environment. Please correct the XLR folder\
            \ variable to contain the correct value."
      - name: transaction-disposition
        type: xlrelease.SequentialGroup
        tasks:
        - name: transaction-disposition check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=transaction-disposition
            passedEnv=${environment}
            passedVersionToCheck=${folder.transaction_disposition_version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${transaction-disposition.apmate.status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: transaction-disposition validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['transaction-disposition.apmate.status']\
            \ or releaseVariables['transaction-disposition.apmate.status'] == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: transaction-disposition in ${environment}"
          body: "transaction-disposition variable (**folder.transaction_disposition_version**)\
            \ with value **${folder.transaction_disposition_version}** has\
            \ experienced a validation failure in the ${environment} environment.\
            \ Please correct the XLR folder variable to contain the correct value."
      - name: transactionmanager
        type: xlrelease.SequentialGroup
        precondition: "${folder.tfc-transactionmanager-deploy}"
        tasks:
        - name: transactionmanager check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=transactionmanager
            passedEnv=${environment}
            passedVersionToCheck=${folder.artifact.transactionmanager.version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${transactionmanager.apmate.status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: transactionmanager validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['transactionmanager.apmate.status']\
            \ or releaseVariables['transactionmanager.apmate.status'] == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: transactionmanager in ${environment}"
          body: "transactionmanager variable (**folder.artifact.transactionmanager.version**)\
            \ with value **${folder.artifact.transactionmanager.version}** has experienced\
            \ a validation failure in the ${environment} environment. Please correct\
            \ the XLR folder variable to contain the correct value."
      - name: transactionviewer
        type: xlrelease.SequentialGroup
        precondition: "${folder.tfc-transactioner-deploy}"
        tasks:
        - name: transactionviewer check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=transactionviewer
            passedEnv=${environment}
            passedVersionToCheck=${folder.transactionviewer_version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${transactionviewer.apmate.status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: transactionviewer validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['transactionviewer.apmate.status'] or\
            \ releaseVariables['transactionviewer.apmate.status'] == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: transactionviewer in ${environment}"
          body: "transactionviewer variable (**folder.transactionviewer_version**)\
            \ with value **${folder.transactionviewer_version}** has experienced\
            \ a validation failure in the ${environment} environment. Please correct\
            \ the XLR folder variable to contain the correct value."
    color: '#0079BC'
  - phase: Habitat Validations
    tasks:
    - name: overall phase skippability
      type: xlrelease.SequentialGroup
      tasks:
      - name: decision_center_ec_components_stage
        type: xlrelease.SequentialGroup
        tasks:
        - name: decision_center_ec_components_stage check habitat
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          jobParameters: |-
            scriptAction=verifyPkgIdent
            passedName=${folder.decision_center_ec_components_stage_version}
            passedEnv=${environment}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${decision_center_ec_components_stage-hab-status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: decision_center_ec_components_stage validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['decision_center_ec_components_stage-hab-status']\
            \ or releaseVariables['decision_center_ec_components_stage-hab-status']\
            \ == 'FAILURE'"
          taskRecoverOp: RUN_SCRIPT
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: decision_center_ec_components_stage\
            \ in ${environment}"
          body: "decision_center_ec_components_stage variable (**folder.decision_center_ec_components_stage.version**)\
            \ with value **${folder.decision_center_ec_components_stage_version}**\
            \ has experienced a validation failure in the ${environment} environment.\
            \ Please correct the XLR folder variable to contain the correct value."
      - name: decision_center_ec_webservices_stage
        type: xlrelease.SequentialGroup
        tasks:
        - name: decision_center_ec_webservices_stage check habitat
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          jobParameters: |-
            scriptAction=verifyPkgIdent
            passedName=${folder.decision_center_ec_webservices_stage_version}
            passedEnv=${environment}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${decision_center_ec_webservices_stage-hab-status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: decision_center_ec_webservices_stage validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['decision_center_ec_webservices_stage-hab-status']\
            \ or releaseVariables['decision_center_ec_webservices_stage-hab-status']\
            \ == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: decision_center_ec_webservices_stage\
            \ in ${environment}"
          body: "decision_center_ec_webservices_stage variable (**folder.decision_center_ec_webservices_stage_version**)\
            \ with value **${folder.decision_center_ec_webservices_stage_version}**\
            \ has experienced a validation failure in the ${environment} environment.\
            \ Please correct the XLR folder variable to contain the correct value."
      - name: decisioncenter_bc_service
        type: xlrelease.SequentialGroup
        tasks:
        - name: decisioncenter_bc_service check habitat
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          jobParameters: |-
            scriptAction=verifyPkgIdent
            passedName=${folder.decisioncenter_bc_service_version}
            passedEnv=${environment}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${decisioncenter_bc_service-hab-status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: decisioncenter_bc_service validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['decisioncenter_bc_service-hab-status']\
            \ or releaseVariables['decisioncenter_bc_service-hab-status'] == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: decisioncenter_bc_service in ${environment}"
          body: "decisioncenter_bc_service variable (**folder.decisioncenter_bc_service_version**)\
            \ with value **${folder.decisioncenter_bc_service_version}**\
            \ has experienced a validation failure in the ${environment} environment.\
            \ Please correct the XLR folder variable to contain the correct value."
      - name: dmp_udt_ws
        type: xlrelease.SequentialGroup
        precondition: "${folder.dmp_udt_ws_deploy}"
        tasks:
        - name: dmp_udt_ws check habitat
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          jobParameters: |-
            scriptAction=verifyPkgIdent
            passedName=${folder.dmp_udt_ws_version}
            passedEnv=${environment}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${dmp_udt_ws-hab-status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: dmp_udt_ws validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['dmp_udt_ws-hab-status'] or releaseVariables['dmp_udt_ws-hab-status']\
            \ == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: dmp_udt_ws in ${environment}"
          body: "dmp_udt_ws variable (**folder.dmp_udt_ws_version**) with\
            \ value **${folder.dmp_udt_ws_version}** has experienced a validation\
            \ failure in the ${environment} environment. Please correct the XLR folder\
            \ variable to contain the correct value."
      - name: dmpdecisionserver_dvs_ext_0_stage
        type: xlrelease.SequentialGroup
        tasks:
        - name: dmpdecisionserver_dvs_ext_0_stage check habitat
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          jobParameters: |-
            scriptAction=verifyPkgIdent
            passedName=${folder.dmp_decision_server_dvs_ext_0_stage_version}
            passedEnv=${environment}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            pythonScript.buildStatus: "${dmpdecisionserver_dvs_ext_0_stage-hab-status}"
        - name: dmpdecisionserver_dvs_ext_0_stage validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['dmpdecisionserver_dvs_ext_0_stage-hab-status']\
            \ or releaseVariables['dmpdecisionserver_dvs_ext_0_stage-hab-status']\
            \ == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: dmpdecisionserver_dvs_ext_0_stage\
            \ in ${environment}"
          body: "dmpdecisionserver_dvs_ext_0_stage variable (**folder.dmp_decision_server_dvs_ext_0_stage_version**)\
            \ with value **${folder.dmp_decision_server_dvs_ext_0_stage_version}**\
            \ has experienced a validation failure in the ${environment} environment.\
            \ Please correct the XLR folder variable to contain the correct value."
      - name: dmpdecisionserver_dvs_ext_1_stage
        type: xlrelease.SequentialGroup
        tasks:
        - name: dmpdecisionserver_dvs_ext_1_stage check habitat
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          jobParameters: |-
            scriptAction=verifyPkgIdent
            passedName=${folder.dmp_decision_server_dvs_ext_1_stage_version}
            passedEnv=${environment}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${dmpdecisionserver_dvs_ext_1_stage-hab-status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: dmpdecisionserver_dvs_ext_1_stage validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['dmpdecisionserver_dvs_ext_1_stage-hab-status']\
            \ or releaseVariables['dmpdecisionserver_dvs_ext_1_stage-hab-status']\
            \ == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: dmpdecisionserver_dvs_ext_1_stage\
            \ in ${environment}"
          body: "dmpdecisionserver_dvs_ext_1_stage variable (**folder.dmp_decision_server_dvs_ext_1_stage_version**)\
            \ with value **${folder.dmp_decision_server_dvs_ext_1_stage_version}**\
            \ has experienced a validation failure in the ${environment} environment.\
            \ Please correct the XLR folder variable to contain the correct value."
      - name: dmpdecisionserver_dvs_int_0_stage
        type: xlrelease.SequentialGroup
        tasks:
        - name: dmpdecisionserver_dvs_int_0_stage check habitat
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          jobParameters: |-
            scriptAction=verifyPkgIdent
            passedName=${folder.dmp_decision_server_dvs_int_0_stage_version}
            passedEnv=${environment}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${dmpdecisionserver_dvs_int_0_stage-hab-status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: dmpdecisionserver_dvs_int_0_stage validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['dmpdecisionserver_dvs_int_0_stage-hab-status']\
            \ or releaseVariables['dmpdecisionserver_dvs_int_0_stage-hab-status']\
            \ == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: dmpdecisionserver_dvs_int_0_stage\
            \ in ${environment}"
          body: "dmpdecisionserver_dvs_int_0_stage variable (**folder.dmp_decision_server_dvs_int_0_stage_version**)\
            \ with value **${folder.dmp_decision_server_dvs_int_0_stage_version}**\
            \ has experienced a validation failure in the ${environment} environment.\
            \ Please correct the XLR folder variable to contain the correct value."
      - name: dmpdecisionserver_dvs_int_1_stage
        type: xlrelease.SequentialGroup
        tasks:
        - name: dmpdecisionserver_dvs_int_1_stage check habitat
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          jobParameters: |-
            scriptAction=verifyPkgIdent
            passedName=${folder.dmp_decision_server_dvs_int_1_stage_version}
            passedEnv=${environment}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${dmpdecisionserver_dvs_int_1_stage-hab-status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: dmpdecisionserver_dvs_int_1_stage validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['dmpdecisionserver_dvs_int_1_stage-hab-status']\
            \ or releaseVariables['dmpdecisionserver_dvs_int_1_stage-hab-status']\
            \ == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: dmpdecisionserver_dvs_int_1_stage\
            \ in ${environment}"
          body: "dmpdecisionserver_dvs_int_1_stage variable (**folder.dmp_decision_server_dvs_int_1_stage_version**)\
            \ with value **${folder.dmp_decision_server_dvs_int_1_stage_version}**\
            \ has experienced a validation failure in the ${environment} environment.\
            \ Please correct the XLR folder variable to contain the correct value."
      - name: dmpdecisionserver_res_0_stage
        type: xlrelease.SequentialGroup
        tasks:
        - name: dmpdecisionserver_res_0_stage check habitat
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          jobParameters: |-
            scriptAction=verifyPkgIdent
            passedName=${folder.dmp_decision_server_res_0_stage_version}
            passedEnv=${environment}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${dmpdecisionserver_res_0_stage-hab-status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: dmpdecisionserver_res_0_stage validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['dmpdecisionserver_res_0_stage-hab-status']\
            \ or releaseVariables['dmpdecisionserver_res_0_stage-hab-status'] == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: dmpdecisionserver_res_0_stage in\
            \ ${environment}"
          body: "dmpdecisionserver_res_0_stage variable (**folder.dmp_decision_server_res_0_stage_version**)\
            \ with value **${folder.dmp_decision_server_res_0_stage_version}**\
            \ has experienced a validation failure in the ${environment} environment.\
            \ Please correct the XLR folder variable to contain the correct value."
      - name: dmpdecisionserver_res_1_stage
        type: xlrelease.SequentialGroup
        tasks:
        - name: dmpdecisionserver_res_1_stage check habitat
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          jobParameters: |-
            scriptAction=verifyPkgIdent
            passedName=${folder.dmp_decision_server_res_1_stage_version}
            passedEnv=${environment}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${dmpdecisionserver_res_1_stage-hab-status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: dmpdecisionserver_res_1_stage validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['dmpdecisionserver_res_1_stage-hab-status']\
            \ or releaseVariables['dmpdecisionserver_res_1_stage-hab-status'] == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: dmpdecisionserver_res_1_stage in\
            \ ${environment}"
          body: "dmpdecisionserver_res_1_stage variable (**folder.dmp_decision_server_res_1_stage_version**)\
            \ with value **${folder.dmp_decision_server_res_1_stage_version}**\
            \ has experienced a validation failure in the ${environment} environment.\
            \ Please correct the XLR folder variable to contain the correct value."
      - name: hostmanager
        type: xlrelease.SequentialGroup
        precondition: "${folder.flextp-deploy}"
        tasks:
        - name: hostmanager check habitat
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          jobParameters: |-
            scriptAction=verifyPkgIdent
            passedName=${folder.hostmanager_version}
            passedEnv=${environment}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${hostmanager-hab-status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: hostmanager validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['hostmanager-hab-status'] or releaseVariables['hostmanager-hab-status']\
            \ == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - juan.gallegos@mastercard.com
          subject: "Variable Validation Failure: hostmanager in ${environment}"
          body: "hostmanager variable (**folder.hostmanager_version**) with\
            \ value **${folder.hostmanager_version}** has experienced a validation\
            \ failure in the ${environment} environment. Please correct the XLR folder\
            \ variable to contain the correct value."
      - name: grid variables
        type: xlrelease.SequentialGroup
        precondition: "${folder.grid_deploy}"
        tasks:
        - name: grid-live-locator
          type: xlrelease.SequentialGroup
          tasks:
          - name: grid-live-locator check habitat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
            jobParameters: |-
              scriptAction=verifyPkgIdent
              passedName=${folder.artifact.grid-live-locator.version}
              passedEnv=${environment}
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
            taskFailureHandlerEnabled: true
            taskRecoverOp: SKIP_TASK
            variableMapping:
              pythonScript.buildStatus: "${grid-live-locator-hab-status}"
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: grid-live-locator validation failure
            type: xlrelease.NotificationTask
            precondition: "not releaseVariables['grid-live-locator-hab-status'] or\
              \ releaseVariables['grid-live-locator-hab-status'] == 'FAILURE'"
            addresses:
            - melissa.niswonger@mastercard.com
            - juan.gallegos@mastercard.com
            subject: "Variable Validation Failure: grid-live-locator in ${environment}"
            body: "grid-live-locator variable (**folder.artifact.grid-live-locator.version**)\
              \ with value **${folder.artifact.grid-live-locator.version}** has experienced\
              \ a validation failure in the ${environment} environment. Please correct\
              \ the XLR folder variable to contain the correct value."
        - name: grid-live-server
          type: xlrelease.SequentialGroup
          tasks:
          - name: grid-live-server check habitat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
            jobParameters: |-
              scriptAction=verifyPkgIdent
              passedName=${folder.artifact.grid-live-server.version}
              passedEnv=${environment}
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
            taskFailureHandlerEnabled: true
            taskRecoverOp: SKIP_TASK
            variableMapping:
              pythonScript.buildStatus: "${${grid-live-server-hab-status}}}"
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: grid-live-server validation failure
            type: xlrelease.NotificationTask
            precondition: "not releaseVariables['grid-live-server-hab-status'] or\
              \ releaseVariables['grid-live-server-hab-status'] == 'FAILURE'"
            addresses:
            - melissa.niswonger@mastercard.com
            - juan.gallegos@mastercard.com
            subject: "Variable Validation Failure: grid-live-server in ${environment}"
            body: "grid-live-server variable (**folder.artifact.grid-live-server.version**)\
              \ with value **${folder.artifact.grid-live-server.version}** has experienced\
              \ a validation failure in the ${environment} environment. Please correct\
              \ the XLR folder variable to contain the correct value."
        - name: grid-live-server2
          type: xlrelease.SequentialGroup
          tasks:
          - name: grid-live-server2 check habitat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
            jobParameters: |-
              scriptAction=verifyPkgIdent
              passedName=${folder.artifact.grid-live-server2.version}
              passedEnv=${environment}
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
            taskFailureHandlerEnabled: true
            taskRecoverOp: SKIP_TASK
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              pythonScript.buildStatus: "${grid-live-server2-hab-status}"
          - name: grid-live-server2 validation failure
            type: xlrelease.NotificationTask
            precondition: "not releaseVariables['grid-live-server2-hab-status'] or\
              \ releaseVariables['grid-live-server2-hab-status'] == 'FAILURE'"
            addresses:
            - melissa.niswonger@mastercard.com
            - juan.gallegos@mastercard.com
            subject: "Variable Validation Failure: grid-live-server2 in ${environment}"
            body: "grid-live-server2 variable (**folder.artifact.grid-live-server2.version**)\
              \ with value **${folder.artifact.grid-live-server2.version}** has experienced\
              \ a validation failure in the ${environment} environment. Please correct\
              \ the XLR folder variable to contain the correct value."
        - name: grid-live-worker
          type: xlrelease.SequentialGroup
          tasks:
          - name: grid-live-worker check habitat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
            jobParameters: |-
              scriptAction=verifyPkgIdent
              passedName=${folder.artifact.grid-live-worker.version}
              passedEnv=${environment}
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
            taskFailureHandlerEnabled: true
            taskRecoverOp: SKIP_TASK
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              pythonScript.buildStatus: "${grid-live-worker-hab-status}"
          - name: grid-live-worker validation failure
            type: xlrelease.NotificationTask
            precondition: "not releaseVariables['grid-live-worker-hab-status'] or\
              \ releaseVariables['grid-live-worker-hab-status'] == 'FAILURE'"
            addresses:
            - melissa.niswonger@mastercard.com
            - juan.gallegos@mastercard.com
            subject: "Variable Validation Failure: grid-live-worker in ${environment}"
            body: "grid-live-worker variable (**folder.artifact.grid-live-worker.version**)\
              \ with value **${folder.artifact.grid-live-worker.version}** has experienced\
              \ a validation failure in the ${environment} environment. Please correct\
              \ the XLR folder variable to contain the correct value."
        - name: grid-staging-locator
          type: xlrelease.SequentialGroup
          tasks:
          - name: grid-staging-locator check habitat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
            jobParameters: |-
              scriptAction=verifyPkgIdent
              passedName=${folder.artifact.grid-staging-locator.version}
              passedEnv=${environment}
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
            taskFailureHandlerEnabled: true
            taskRecoverOp: SKIP_TASK
            variableMapping:
              pythonScript.buildStatus: "${grid-staging-locator-hab-status}"
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: grid-staging-locator validation failure
            type: xlrelease.NotificationTask
            precondition: "not releaseVariables['grid-staging-locator-hab-status']\
              \ or releaseVariables['grid-staging-locator-hab-status'] == 'FAILURE'"
            addresses:
            - melissa.niswonger@mastercard.com
            - juan.gallegos@mastercard.com
            subject: "Variable Validation Failure: grid-staging-locator in ${environment}"
            body: "grid-staging-locator variable (**folder.artifact.grid-staging-locator.version**)\
              \ with value **${folder.artifact.grid-staging-locator.version}** has\
              \ experienced a validation failure in the ${environment} environment.\
              \ Please correct the XLR folder variable to contain the correct value."
        - name: grid-staging-server
          type: xlrelease.SequentialGroup
          tasks:
          - name: grid-staging-server check habitat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
            jobParameters: |-
              scriptAction=verifyPkgIdent
              passedName=${folder.artifact.grid-staging-server.version}
              passedEnv=${environment}
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
            taskFailureHandlerEnabled: true
            taskRecoverOp: SKIP_TASK
            variableMapping:
              pythonScript.buildStatus: "${${${grid-staging-server-hab-status}}}}"
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: grid-staging-server validation failure
            type: xlrelease.NotificationTask
            precondition: "not releaseVariables['grid-staging-server-hab-status']\
              \ or releaseVariables['grid-staging-server-hab-status'] == 'FAILURE'"
            addresses:
            - melissa.niswonger@mastercard.com
            - juan.gallegos@mastercard.com
            subject: "Variable Validation Failure: grid-staging-server in ${environment}"
            body: "grid-staging-server variable (**folder.artifact.grid-staging-server.version**)\
              \ with value **${folder.artifact.grid-staging-server.version}** has\
              \ experienced a validation failure in the ${environment} environment.\
              \ Please correct the XLR folder variable to contain the correct value."
        - name: grid-staging-server2
          type: xlrelease.SequentialGroup
          tasks:
          - name: grid-staging-server2 check habitat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
            jobParameters: |-
              scriptAction=verifyPkgIdent
              passedName=${folder.artifact.grid-staging-server2.version}
              passedEnv=${environment}
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
            taskFailureHandlerEnabled: true
            taskRecoverOp: SKIP_TASK
            variableMapping:
              pythonScript.buildStatus: "${grid-staging-server2-hab-status}"
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: grid-staging-server2 validation failure
            type: xlrelease.NotificationTask
            precondition: "not releaseVariables['grid-staging-server2-hab-status']\
              \ or releaseVariables['grid-staging-server2-hab-status'] == 'FAILURE'"
            addresses:
            - melissa.niswonger@mastercard.com
            - juan.gallegos@mastercard.com
            subject: "Variable Validation Failure: grid-staging-server2 in ${environment}"
            body: "grid-staging-server2 variable (**folder.artifact.grid-staging-server2.version**)\
              \ with value **${folder.artifact.grid-staging-server2.version}** has\
              \ experienced a validation failure in the ${environment} environment.\
              \ Please correct the XLR folder variable to contain the correct value."
    color: '#0079BC'
  tags:
  - rewrite
  variables:
  - type: xlrelease.StringVariable
    key: app_bootstrapper.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: ai-garage-validator.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: environment
    showOnReleaseStart: false
    value: peat
  - type: xlrelease.StringVariable
    key: grid-live-locator-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: grid-live-server-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: grid-live-server2-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: grid-live-worker-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: grid-staging-locator-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: grid-staging-server2-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: "${grid-staging-server-hab-status}}"
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: "${grid-staging-server-hab-status"
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridConfig.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decision_center_ec_components_stage-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decision_center_ec_webservices_stage-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisioncenter_bc_service-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmp_udt_ws-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpdecisionserver_dvs_ext_0_stage-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpdecisionserver_dvs_ext_1_stage-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpdecisionserver_dvs_int_0_stage-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpdecisionserver_dvs_int_1_stage-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpdecisionserver_res_0_stage-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpdecisionserver_res_1_stage-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: hostmanager-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: grid-udt-daemon.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: host-manager-cli.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: host-manager-configuration.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: host-manager.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: listmanager.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: pan-profile-web-service.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbd-web-service.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rulemanager.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rulestudio.projects.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: tfcconfig_apmate_status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: tfcgateway.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: transaction-disposition.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: transactionmanager.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: transactionviewer.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: app-platform.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: casemanager.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: di.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: "${${grid-staging-server-hab-status}}}"
  - type: xlrelease.StringVariable
    key: "${${grid-staging-server-hab-status"
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: "${grid-live-server-hab-status"
    requiresValue: false
    showOnReleaseStart: false
  riskProfile: Default risk profile
- template: XLR-APMATE-HABITAT-VALIDATOR-PEAT
  scheduledStartDate: 2021-11-08T09:00:00-06:00
  phases:
  - phase: Apmate Only
    tasks:
    - name: GridConfig Apmate ONLY
      type: xlrelease.SequentialGroup
      precondition: "folderVariables['folder.grid_deploy'] == True"
      tasks:
      - name: GridConfig check apmate
        type: jenkins.Build
        jenkinsServer: Jenkins Production - cd3
        username: "${folder.jenkins_eid}"
        jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
        jobParameters: |-
          scriptAction=verifyApmateVersion
          passedName=GridConfig
          passedEnv=${environment}
          passedVersionToCheck=${folder.GridConfig_version}
        description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/apmate-only-checker/
        taskFailureHandlerEnabled: true
        taskRecoverOp: SKIP_TASK
        variableMapping:
          pythonScript.buildStatus: "${GridConfig.apmate.status}"
          pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
      - name: GridConfig validation failure
        type: xlrelease.NotificationTask
        precondition: "not releaseVariables['GridConfig.apmate.status'] or releaseVariables['GridConfig.apmate.status']\
          \ == 'FAILURE'"
        addresses:
        - melissa.niswonger@mastercard.com
        - hondo.gallegos@mastercard.com
        subject: "Variable Validation Failure: GridConfig in ${environment}"
        body: "GridConfig variable (**folder.GridConfig_version**) with value\
          \ **${folder.GridConfig_version}** has experienced a validation\
          \ failure in the ${environment} environment. Please correct the XLR folder\
          \ variable to contain the correct value."
    color: '#0079BC'
  - phase: Apmate Validations
    tasks:
    - name: overall phase skippability
      type: xlrelease.SequentialGroup
      tasks:
      - name: app_bootstrapper
        type: xlrelease.SequentialGroup
        precondition: "folderVariables['folder.app_bootstrapper_deploy'] == True"
        tasks:
        - name: app_bootstrapper check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=app-bootstrapper
            passedEnv=${environment}
            passedVersionToCheck=${folder.app_bootstrapper_version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${app_bootstrapper.apmate.status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: app_bootstrapper validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['app_bootstrapper.apmate.status'] or\
            \ releaseVariables['app_bootstrapper.apmate.status'] == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - hondo.gallegos@mastercard.com
          subject: "Variable Validation Failure: app_bootstrapper in ${environment}"
          body: "app_bootstrapper variable (**folder.app_bootstrapper_version**)\
            \ with the value **${folder.app_bootstrapper_version}** has experienced\
            \ a validation failure in the ${environment} environment. Please correct\
            \ the XLR folder variable to contain the correct value."
      - name: app-platform
        type: xlrelease.SequentialGroup
        precondition: "folderVariables['folder.app_platform_deploy'] == True"
        tasks:
        - name: app-platform check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=app-platform
            passedEnv=${environment}
            passedVersionToCheck=${folder.artifact.app-platform.version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${app-platform.apmate.status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: app-platform validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['app-platform.apmate.status'] or releaseVariables['app-platform.apmate.status']\
            \ == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - hondo.gallegos@mastercard.com
          subject: "Variable Validation Failure: app-platform in ${environment}"
          body: "app-platform variable (**folder.artifact.app-platform.version**)\
            \ with the value **${folder.artifact.app-platform.version}** has experienced\
            \ a validation failure in the ${environment} environment. Please correct\
            \ the XLR folder variable to contain the correct value."
          bcc:
          - e025882
      - name: ai-garage-validator
        type: xlrelease.SequentialGroup
        precondition: "folderVariables['folder.ai_garage_validator_deploy'] == True"
        tasks:
        - name: ai-garage-validator check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=ai-garage-validator
            passedEnv=${environment}
            passedVersionToCheck=${folder.ai_garage_validator_version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${ai-garage-validator.apmate.status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: ai-garage-validator validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['ai-garage-validator.apmate.status']\
            \ or releaseVariables['ai-garage-validator.apmate.status'] == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - hondo.gallegos@mastercard.com
          subject: "Variable Validation Failure: ai-garage-validator in ${environment}"
          body: "ai-garage-validator variable (**folder.ai_garage_validator_version**)\
            \ with value **${folder.ai_garage_validator_version}** has experienced\
            \ a validation failure in the ${environment} environment. Please correct\
            \ the XLR folder variable to contain the correct value."
      - name: grid-udt-daemon
        type: xlrelease.SequentialGroup
        precondition: "folderVariables['folder.grid-udt-daemon-deploy'] == True"
        tasks:
        - name: grid-udt-daemon check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=grid-udt-daemon
            passedEnv=${environment}
            passedVersionToCheck=${folder.grid_udt_daemon_version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${grid-udt-daemon.apmate.status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: grid-udt-daemon validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['grid-udt-daemon.apmate.status'] or\
            \ releaseVariables['grid-udt-daemon.apmate.status'] == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - hondo.gallegos@mastercard.com
          subject: "Variable Validation Failure: grid-udt-daemon in ${environment}"
          body: "grid-udt-daemon variable (**folder.grid_udt_daemon_version**)\
            \ with value **${folder.grid_udt_daemon_version}** has experienced\
            \ a validation failure in the ${environment} environment. Please correct\
            \ the XLR folder variable to contain the correct value."
      - name: host-manager-cli
        type: xlrelease.SequentialGroup
        tasks:
        - name: host-manager-cli check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=host-manager-cli
            passedEnv=${environment}
            passedVersionToCheck=${folder.host_manager_cli_version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${host-manager-cli.apmate.status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: host-manager-cli validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['host-manager-cli.apmate.status'] or\
            \ releaseVariables['host-manager-cli.apmate.status'] == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - hondo.gallegos@mastercard.com
          subject: "Variable Validation Failure: host-manager-cli in ${environment}"
          body: "host-manager-cli variable (**folder.host_manager_cli_version**)\
            \ with value **${folder.host_manager_cli_version}** has experienced\
            \ a validation failure in the ${environment} environment. Please correct\
            \ the XLR folder variable to contain the correct value."
      - name: host-manager-configuration
        type: xlrelease.SequentialGroup
        tasks:
        - name: host-manager-configuration check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=host-manager-configuration
            passedEnv=${environment}
            passedVersionToCheck=${folder.artifact.host-manager-configuration.version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${host-manager-configuration.apmate.status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: host-manager-configuration validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['host-manager-configuration.apmate.status']\
            \ or releaseVariables['host-manager-configuration.apmate.status'] == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - hondo.gallegos@mastercard.com
          subject: "Variable Validation Failure: host-manager-configuration in ${environment}"
          body: "host-manager-configuration variable (**folder.artifact.host-manager-configuration.version**)\
            \ with value **${folder.artifact.host-manager-configuration.version}**\
            \ has experienced a validation failure in the ${environment} environment.\
            \ Please correct the XLR folder variable to contain the correct value."
      - name: host-manager
        type: xlrelease.SequentialGroup
        precondition: "folderVariables['folder.flextp-deploy'] == True"
        tasks:
        - name: host-manager check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=host-manager
            passedEnv=${environment}
            passedVersionToCheck=${folder.host_manager_version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${host-manager.apmate.status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: host-manager validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['host-manager.apmate.status'] or releaseVariables['host-manager.apmate.status']\
            \ == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - hondo.gallegos@mastercard.com
          subject: "Variable Validation Failure: host-manager in ${environment}"
          body: "host-manager variable (**folder.host_manager_version**)\
            \ with value **${folder.host_manager_version}** has experienced\
            \ a validation failure in the ${environment} environment. Please correct\
            \ the XLR folder variable to contain the correct value."
      - name: TFC
        type: xlrelease.SequentialGroup
        tasks:
        - name: transactionviewer
          type: xlrelease.SequentialGroup
          precondition: "folderVariables['folder.tfc_transactionviewer_deploy'] ==\
            \ True"
          tasks:
          - name: transactionviewer check apmate
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/apmate-to-habitat-version-checker/
            jobParameters: |-
              scriptAction=askApmate
              passedName=transactionviewer
              passedEnv=${environment}
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/apmate-to-habitat-version-checker/
            taskFailureHandlerEnabled: true
            taskRecoverOp: SKIP_TASK
            variableMapping:
              pythonScript.buildStatus: "${transactionviewer.apmate.status}"
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: transactionviewer validation failure
            type: xlrelease.NotificationTask
            precondition: "not releaseVariables['transactionviewer.apmate.status']\
              \ or releaseVariables['transactionviewer.apmate.status'] == 'FAILURE'"
            addresses:
            - melissa.niswonger@mastercard.com
            - hondo.gallegos@mastercard.com
            subject: "Variable Validation Failure: transactionviewer in ${environment}"
            body: "transactionviewer variable (**folder.tfc_transactionviewer_deploy**)\
              \  has experienced a validation failure in the ${environment} environment.\
              \ Please review the version in Apmate vs Habitat."
        - name: tfcconfig
          type: xlrelease.SequentialGroup
          precondition: "folderVraiables['folder.tfc_tfcconfig_deploy'] == True"
          tasks:
          - name: tfcconfig check apmate
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/apmate-to-habitat-version-checker/
            jobParameters: |-
              scriptAction=askApmate
              passedName=tfcconfig
              passedEnv=${environment}
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/apmate-to-habitat-version-checker/
            taskFailureHandlerEnabled: true
            taskRecoverOp: SKIP_TASK
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              pythonScript.buildStatus: "${tfcconfig_apmate_status}"
          - name: tfcconfig validation failure
            type: xlrelease.NotificationTask
            precondition: "not releaseVariables['tfcconfig_apmate_status'] or releaseVariables['tfcconfig_apmate_status']\
              \ == 'FAILURE'"
            addresses:
            - melissa.niswonger@mastercard.com
            - hondo.gallegos@mastercard.com
            subject: "Variable Validation Failure: tfcconfig in ${environment}"
            body: "tfcconfig variable (**folder.tfc_tfcconfig_deploy**) has experienced\
              \ a validation failure in the ${environment} environment. Please verify\
              \ the versions of Apmate vs Habitat."
        - name: listmanager
          type: xlrelease.SequentialGroup
          precondition: "folderVariables['folder.tfc_listmanager_deploy'] == True"
          tasks:
          - name: listmanager check apmate
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/apmate-to-habitat-version-checker/
            jobParameters: |-
              scriptAction=askApmate
              passedName=listmanager
              passedEnv=${environment}
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/apmate-to-habitat-version-checker/
            taskFailureHandlerEnabled: true
            taskRecoverOp: SKIP_TASK
            variableMapping:
              pythonScript.buildStatus: "${listmanager.apmate.status}"
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: listmanager validation failure
            type: xlrelease.NotificationTask
            precondition: "not releaseVariables['listmanager.apmate.status'] or releaseVariables['listmanager.apmate.status']\
              \ == 'FAILURE'"
            addresses:
            - melissa.niswonger@mastercard.com
            - hondo.gallegos@mastercard.com
            subject: "Variable Validation Failure: listmanager in ${environment}"
            body: "listmanager variable (**folder.tfc_listmanager_deploy**) has experienced\
              \ a validation failure in the ${environment} environment. Please validate\
              \ habitat vs Apmate versions."
        - name: tfcgateway
          type: xlrelease.SequentialGroup
          precondition: "folderVariables['folder.tfc_tfcgateway_deploy'] == True"
          tasks:
          - name: tfcgateway check apmate
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/apmate-to-habitat-version-checker/
            jobParameters: |-
              scriptAction=askApmate
              passedName=tfcgateway
              passedEnv=${environment}
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/apmate-to-habitat-version-checker/
            taskFailureHandlerEnabled: true
            taskRecoverOp: SKIP_TASK
            variableMapping:
              pythonScript.buildStatus: "${tfcgateway.apmate.status}"
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: tfcgateway validation failure
            type: xlrelease.NotificationTask
            precondition: "not releaseVariables['tfcgateway.apmate.status'] or releaseVariables['tfcgateway.apmate.status']\
              \ == 'FAILURE'"
            addresses:
            - melissa.niswonger@mastercard.com
            - hondo.gallegos@mastercard.com
            subject: "Variable Validation Failure: tfcgateway in ${environment}"
            body: "tfcgateway variable (**folder.tfc_tfcgateway_deploy**) has experienced\
              \ a validation failure in the ${environment} environment. Please verify\
              \ the Apmate and habitat versions match."
        - name: di
          type: xlrelease.SequentialGroup
          precondition: "folderVariables['folder.tfc_di_deploy'] == True"
          tasks:
          - name: di check apmate
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/apmate-to-habitat-version-checker/
            jobParameters: |-
              scriptAction=askApmate
              passedName=di
              passedEnv=${environment}
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/apmate-to-habitat-version-checker/
            taskFailureHandlerEnabled: true
            taskRecoverOp: SKIP_TASK
            variableMapping:
              pythonScript.buildStatus: "${di.apmate.status}"
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: di validation failure
            type: xlrelease.NotificationTask
            precondition: "not releaseVariables['di.apmate.status'] or releaseVariables['di.apmate.status']\
              \ == 'FAILURE'"
            addresses:
            - melissa.niswonger@mastercard.com
            - hondo.gallegos@mastercard.com
            subject: "Variable Validation Failure: di in ${environment}"
            body: "di variable (**folder.tfc_di_deploy**) has experienced a validation\
              \ failure in the ${environment} environment. Please verify Apmate and\
              \ habitat have the same version."
        - name: rulemanager
          type: xlrelease.SequentialGroup
          precondition: "folderVariables['folder.tfc_rulemanager_deploy'] == True"
          tasks:
          - name: rulemanager check apmate
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/apmate-to-habitat-version-checker
            jobParameters: |-
              scriptAction=askApmate
              passedName=rulemanager
              passedEnv=${environment}
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/apmate-to-habitat-version-checker
            taskFailureHandlerEnabled: true
            taskRecoverOp: SKIP_TASK
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              pythonScript.buildStatus: "${rulemanager.apmate.status}"
          - name: rulemanager validation failure
            type: xlrelease.NotificationTask
            precondition: "not releaseVariables['rulemanager.apmate.status'] or releaseVariables['rulemanager.apmate.status']\
              \ == 'FAILURE'"
            addresses:
            - melissa.niswonger@mastercard.com
            - hondo.gallegos@mastercard.com
            subject: "Variable Validation Failure: rulemanager in ${environment}"
            body: "rulemanager variable (**folder.tfc_rulemanager_deploy**) has experienced\
              \ a validation failure in the ${environment} environment. Please Apmate\
              \ and Habitat have the same version."
        - name: IssReports - PCF deployment
          type: xlrelease.SequentialGroup
          precondition: "folderVariables['folder.tfc_iisreports_pfc_deploy'] == True"
          tasks:
          - name: IssReports check apmate
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/apmate-to-habitat-version-checker
            jobParameters: |-
              scriptAction=askApmate
              passedName=issreportsservicespcf
              passedEnv=${environment}
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/apmate-to-habitat-version-checker
            taskFailureHandlerEnabled: true
            taskRecoverOp: SKIP_TASK
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              pythonScript.buildStatus: "${rulemanager.apmate.status}"
          - name: ISS Reports validation failure
            type: xlrelease.NotificationTask
            precondition: "not releaseVariables['rulemanager.apmate.status'] or releaseVariables['rulemanager.apmate.status']\
              \ == 'FAILURE'"
            addresses:
            - melissa.niswonger@mastercard.com
            - hondo.gallegos@mastercard.com
            subject: "Variable Validation Failure: rulemanager in ${environment}"
            body: "ISSReports variable (**folder.tfc_iisreports_pfc_deploy**)  has experienced\
              \ a validation failure in the ${environment} environment. Please verify\
              \ Apmate and Habitat have the same version."
        - name: Rule Testing Service - PCF deployment
          type: xlrelease.SequentialGroup
          precondition: "folderVariables['folder.tfc_rule_test_service_pcf_deploy'] ==\
            \ True"
          tasks:
          - name: Rule Testing Service check apmate
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/apmate-to-habitat-version-checker
            jobParameters: |-
              scriptAction=askApmate
              passedName=rule-testing-service
              passedEnv=${environment}
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/apmate-to-habitat-version-checker
            taskFailureHandlerEnabled: true
            taskRecoverOp: SKIP_TASK
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              pythonScript.buildStatus: "${rulemanager.apmate.status}"
          - name: rulemanager validation failure
            type: xlrelease.NotificationTask
            precondition: "not releaseVariables['rulemanager.apmate.status'] or releaseVariables['rulemanager.apmate.status']\
              \ == 'FAILURE'"
            addresses:
            - melissa.niswonger@mastercard.com
            - hondo.gallegos@mastercard.com
            subject: "Variable Validation Failure: rulemanager in ${environment}"
            body: "rulemanager variable (**folder.tfc_rule_test_service_pcf_deploy**)\
              \ has experienced a validation failure in the ${environment} environment.\
              \ Please validate the correct version is available on Habitat and Apmate."
        - name: Rule Metrics Service - PCF deployment
          type: xlrelease.SequentialGroup
          precondition: "folderVariables['folder.ttfc_rule_metric_service_pcf_deploy']\
            \ == True"
          tasks:
          - name: IssReports check apmate
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/apmate-to-habitat-version-checker
            jobParameters: |-
              scriptAction=askApmate
              passedName=rule-testing-service
              passedEnv=${environment}
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/apmate-to-habitat-version-checker
            taskFailureHandlerEnabled: true
            taskRecoverOp: SKIP_TASK
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              pythonScript.buildStatus: "${rulemanager.apmate.status}"
          - name: rulemanager validation failure
            type: xlrelease.NotificationTask
            precondition: "not releaseVariables['rulemanager.apmate.status'] or releaseVariables['rulemanager.apmate.status']\
              \ == 'FAILURE'"
            addresses:
            - melissa.niswonger@mastercard.com
            - hondo.gallegos@mastercard.com
            subject: "Variable Validation Failure: rulemanager in ${environment}"
            body: "rulemanager variable (**folder.ttfc_rule_metric_service_pcf_deploy**)\
              \  has experienced a validation failure in the ${environment} environment.\
              \ Please validate the correct version in Apmate and Habitat match."
      - name: pan-profile-web-service
        type: xlrelease.SequentialGroup
        flagStatus: ATTENTION_NEEDED
        precondition: "folderVraiables['folder.pan_profile_lifecycle_event_transformer_deploy']\
          \ == True"
        tasks:
        - name: pan-profile-web-service check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=pan-profile-lifecycle-event-transformer
            passedEnv=${environment}
            passedVersionToCheck=${folder.pan_profile_web_service_version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
            pythonScript.buildStatus: "${pan-profile-web-service.apmate.status}"
        - name: pan-profile-web-service validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['pan-profile-web-service.apmate.status']\
            \ or releaseVariables['pan-profile-web-service.apmate.status'] == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - hondo.gallegos@mastercard.com
          subject: "Variable Validation Failure: pan-profile-web-service in ${environment}"
          body: "pan-profile-web-service variable (**folder.pan_profile_web_service_version**)\
            \ with value **${folder.pan_profile_web_service_version}** has\
            \ experienced a validation failure in the ${environment} environment.\
            \ Please correct the XLR folder variable to contain the correct value."
      - name: rbd-web-service
        type: xlrelease.SequentialGroup
        precondition: "folderVariables['folder.rbd_webservices_deploy'] == True"
        tasks:
        - name: rbd-web-service check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=rbd-web-service
            passedEnv=${environment}
            passedVersionToCheck=${folder.artifact.rbd-web-service.version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${rbd-web-service.apmate.status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: rbd-web-service validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['rbd-web-service.apmate.status'] or\
            \ releaseVariables['rbd-web-service.apmate.status'] == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - hondo.gallegos@mastercard.com
          subject: "Variable Validation Failure: rbd-web-service in ${environment}"
          body: "rbd-web-service variable (**folder.artifact.rbd-web-service.version**)\
            \ with value **${folder.artifact.rbd-web-service.version}** has experienced\
            \ a validation failure in the ${environment} environment. Please correct\
            \ the XLR folder variable to contain the correct value."
      - name: rulestudio.projects
        type: xlrelease.SequentialGroup
        tasks:
        - name: rulestudio.projects check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=rulestudio.projects
            passedEnv=${environment}
            passedVersionToCheck=${folder.rulestudio_projects_version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${rulestudio.projects.apmate.status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: rulestudio.projects validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['rulestudio.projects.apmate.status']\
            \ or releaseVariables['rulestudio.projects.apmate.status'] == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - hondo.gallegos@mastercard.com
          subject: "Variable Validation Failure: rulestudio.projects in ${environment}"
          body: "rulestudio.projects variable (**folder.rulestudio_projects_version**)\
            \ with value **${folder.rulestudio_projects_version}** has experienced\
            \ a validation failure in the ${environment} environment. Please correct\
            \ the XLR folder variable to contain the correct value."
      - name: transaction-disposition
        type: xlrelease.SequentialGroup
        flagStatus: ATTENTION_NEEDED
        tasks:
        - name: transaction-disposition check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=transaction-disposition
            passedEnv=${environment}
            passedVersionToCheck=${folder.transaction_disposition_version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${transaction-disposition.apmate.status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: transaction-disposition validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['transaction-disposition.apmate.status']\
            \ or releaseVariables['transaction-disposition.apmate.status'] == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - hondo.gallegos@mastercard.com
          subject: "Variable Validation Failure: transaction-disposition in ${environment}"
          body: "transaction-disposition variable (**folder.transaction_disposition_version**)\
            \ with value **${folder.transaction_disposition_version}** has\
            \ experienced a validation failure in the ${environment} environment.\
            \ Please correct the XLR folder variable to contain the correct value."
      - name: transactionmanager
        type: xlrelease.SequentialGroup
        precondition: "folderVariables['folder.tfc-transactionmanager-deploy'] = True"
        tasks:
        - name: transactionmanager check apmate
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          jobParameters: |-
            scriptAction=verifyApmateVersion
            passedName=transactionmanager
            passedEnv=${environment}
            passedVersionToCheck=${folder.artifact.transactionmanager.version}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-apmate-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${transactionmanager.apmate.status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: transactionmanager validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['transactionmanager.apmate.status']\
            \ or releaseVariables['transactionmanager.apmate.status'] == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - hondo.gallegos@mastercard.com
          subject: "Variable Validation Failure: transactionmanager in ${environment}"
          body: "transactionmanager variable (**folder.artifact.transactionmanager.version**)\
            \ with value **${folder.artifact.transactionmanager.version}** has experienced\
            \ a validation failure in the ${environment} environment. Please correct\
            \ the XLR folder variable to contain the correct value."
    color: '#0079BC'
  - phase: Habitat Validations
    tasks:
    - name: overall phase skippability
      type: xlrelease.SequentialGroup
      tasks:
      - name: Habitat-decisionserver_res_service
        type: xlrelease.SequentialGroup
        precondition: "folderVariables['folder.decisionserver_res_service-deploy'\
          \ == True"
        tasks:
        - name: dmpdecisionserver_dvs_ext_0_stage
          type: xlrelease.SequentialGroup
          tasks:
          - name: dmpdecisionserver_dvs_ext_0_stage check habitat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
            jobParameters: |-
              scriptAction=verifyPkgIdent
              passedName=${folder.dmp_decision_server_dvs_ext_0_stage_version}
              passedEnv=${environment}
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
            taskFailureHandlerEnabled: true
            taskRecoverOp: SKIP_TASK
            variableMapping:
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
              pythonScript.buildStatus: "${dmpdecisionserver_dvs_ext_0_stage-hab-status}"
          - name: dmpdecisionserver_dvs_ext_0_stage validation failure
            type: xlrelease.NotificationTask
            precondition: "not releaseVariables['dmpdecisionserver_dvs_ext_0_stage-hab-status']\
              \ or releaseVariables['dmpdecisionserver_dvs_ext_0_stage-hab-status']\
              \ == 'FAILURE'"
            addresses:
            - melissa.niswonger@mastercard.com
            - hondo.gallegos@mastercard.com
            subject: "Variable Validation Failure: dmpdecisionserver_dvs_ext_0_stage\
              \ in ${environment}"
            body: "dmpdecisionserver_dvs_ext_0_stage variable (**folder.dmp_decision_server_dvs_ext_0_stage_version**)\
              \ with value **${folder.dmp_decision_server_dvs_ext_0_stage_version}**\
              \ has experienced a validation failure in the ${environment} environment.\
              \ Please correct the XLR folder variable to contain the correct value."
        - name: dmpdecisionserver_dvs_ext_1_stage
          type: xlrelease.SequentialGroup
          tasks:
          - name: dmpdecisionserver_dvs_ext_1_stage check habitat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
            jobParameters: |-
              scriptAction=verifyPkgIdent
              passedName=${folder.dmp_decision_server_dvs_ext_1_stage_version}
              passedEnv=${environment}
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
            taskFailureHandlerEnabled: true
            taskRecoverOp: SKIP_TASK
            variableMapping:
              pythonScript.buildStatus: "${dmpdecisionserver_dvs_ext_1_stage-hab-status}"
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: dmpdecisionserver_dvs_ext_1_stage validation failure
            type: xlrelease.NotificationTask
            precondition: "not releaseVariables['dmpdecisionserver_dvs_ext_1_stage-hab-status']\
              \ or releaseVariables['dmpdecisionserver_dvs_ext_1_stage-hab-status']\
              \ == 'FAILURE'"
            addresses:
            - melissa.niswonger@mastercard.com
            - hondo.gallegos@mastercard.com
            subject: "Variable Validation Failure: dmpdecisionserver_dvs_ext_1_stage\
              \ in ${environment}"
            body: "dmpdecisionserver_dvs_ext_1_stage variable (**folder.dmp_decision_server_dvs_ext_1_stage_version**)\
              \ with value **${folder.dmp_decision_server_dvs_ext_1_stage_version}**\
              \ has experienced a validation failure in the ${environment} environment.\
              \ Please correct the XLR folder variable to contain the correct value."
        - name: dmpdecisionserver_dvs_int_0_stage
          type: xlrelease.SequentialGroup
          tasks:
          - name: dmpdecisionserver_dvs_int_0_stage check habitat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
            jobParameters: |-
              scriptAction=verifyPkgIdent
              passedName=${folder.dmp_decision_server_dvs_int_0_stage_version}
              passedEnv=${environment}
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
            taskFailureHandlerEnabled: true
            taskRecoverOp: SKIP_TASK
            variableMapping:
              pythonScript.buildStatus: "${dmpdecisionserver_dvs_int_0_stage-hab-status}"
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: dmpdecisionserver_dvs_int_0_stage validation failure
            type: xlrelease.NotificationTask
            precondition: "not releaseVariables['dmpdecisionserver_dvs_int_0_stage-hab-status']\
              \ or releaseVariables['dmpdecisionserver_dvs_int_0_stage-hab-status']\
              \ == 'FAILURE'"
            addresses:
            - melissa.niswonger@mastercard.com
            - hondo.gallegos@mastercard.com
            subject: "Variable Validation Failure: dmpdecisionserver_dvs_int_0_stage\
              \ in ${environment}"
            body: "dmpdecisionserver_dvs_int_0_stage variable (**folder.dmp_decision_server_dvs_int_0_stage_version**)\
              \ with value **${folder.dmp_decision_server_dvs_int_0_stage_version}**\
              \ has experienced a validation failure in the ${environment} environment.\
              \ Please correct the XLR folder variable to contain the correct value."
        - name: dmpdecisionserver_dvs_int_1_stage
          type: xlrelease.SequentialGroup
          tasks:
          - name: dmpdecisionserver_dvs_int_1_stage check habitat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
            jobParameters: |-
              scriptAction=verifyPkgIdent
              passedName=${folder.dmp_decision_server_dvs_int_1_stage_version}
              passedEnv=${environment}
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
            taskFailureHandlerEnabled: true
            taskRecoverOp: SKIP_TASK
            variableMapping:
              pythonScript.buildStatus: "${dmpdecisionserver_dvs_int_1_stage-hab-status}"
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: dmpdecisionserver_dvs_int_1_stage validation failure
            type: xlrelease.NotificationTask
            precondition: "not releaseVariables['dmpdecisionserver_dvs_int_1_stage-hab-status']\
              \ or releaseVariables['dmpdecisionserver_dvs_int_1_stage-hab-status']\
              \ == 'FAILURE'"
            addresses:
            - melissa.niswonger@mastercard.com
            - hondo.gallegos@mastercard.com
            subject: "Variable Validation Failure: dmpdecisionserver_dvs_int_1_stage\
              \ in ${environment}"
            body: "dmpdecisionserver_dvs_int_1_stage variable (**folder.dmp_decision_server_dvs_int_1_stage_version**)\
              \ with value **${folder.dmp_decision_server_dvs_int_1_stage_version}**\
              \ has experienced a validation failure in the ${environment} environment.\
              \ Please correct the XLR folder variable to contain the correct value."
        - name: dmpdecisionserver_res_0_stage
          type: xlrelease.SequentialGroup
          tasks:
          - name: dmpdecisionserver_res_0_stage check habitat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
            jobParameters: |-
              scriptAction=verifyPkgIdent
              passedName=${folder.dmp_decision_server_res_0_stage_version}
              passedEnv=${environment}
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
            taskFailureHandlerEnabled: true
            taskRecoverOp: SKIP_TASK
            variableMapping:
              pythonScript.buildStatus: "${dmpdecisionserver_res_0_stage-hab-status}"
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: dmpdecisionserver_res_0_stage validation failure
            type: xlrelease.NotificationTask
            precondition: "not releaseVariables['dmpdecisionserver_res_0_stage-hab-status']\
              \ or releaseVariables['dmpdecisionserver_res_0_stage-hab-status'] ==\
              \ 'FAILURE'"
            addresses:
            - melissa.niswonger@mastercard.com
            - hondo.gallegos@mastercard.com
            subject: "Variable Validation Failure: dmpdecisionserver_res_0_stage in\
              \ ${environment}"
            body: "dmpdecisionserver_res_0_stage variable (**folder.dmp_decision_server_res_0_stage_version**)\
              \ with value **${folder.dmp_decision_server_res_0_stage_version}**\
              \ has experienced a validation failure in the ${environment} environment.\
              \ Please correct the XLR folder variable to contain the correct value."
        - name: dmpdecisionserver_res_1_stage
          type: xlrelease.SequentialGroup
          tasks:
          - name: dmpdecisionserver_res_1_stage check habitat
            type: jenkins.Build
            jenkinsServer: Jenkins Production - cd3
            username: "${folder.jenkins_eid}"
            jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
            jobParameters: |-
              scriptAction=verifyPkgIdent
              passedName=${folder.dmp_decision_server_res_1_stage_version}
              passedEnv=${environment}
            description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
            taskFailureHandlerEnabled: true
            taskRecoverOp: SKIP_TASK
            variableMapping:
              pythonScript.buildStatus: "${dmpdecisionserver_res_1_stage-hab-status}"
              pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
          - name: dmpdecisionserver_res_1_stage validation failure
            type: xlrelease.NotificationTask
            precondition: "not releaseVariables['dmpdecisionserver_res_1_stage-hab-status']\
              \ or releaseVariables['dmpdecisionserver_res_1_stage-hab-status'] ==\
              \ 'FAILURE'"
            addresses:
            - melissa.niswonger@mastercard.com
            - hondo.gallegos@mastercard.com
            subject: "Variable Validation Failure: dmpdecisionserver_res_1_stage in\
              \ ${environment}"
            body: "dmpdecisionserver_res_1_stage variable (**folder.dmp_decision_server_res_1_stage_version**)\
              \ with value **${folder.dmp_decision_server_res_1_stage_version}**\
              \ has experienced a validation failure in the ${environment} environment.\
              \ Please correct the XLR folder variable to contain the correct value."
      - name: decisioncenter_bc_service
        type: xlrelease.SequentialGroup
        precondition: "folderVariables['folder.decisioncenter_bc_service_deploy']\
          \ == True"
        tasks:
        - name: decisioncenter_bc_service check habitat
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          jobParameters: |-
            scriptAction=verifyPkgIdent
            passedName=${folder.decisioncenter_bc_service_version}
            passedEnv=${environment}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${decisioncenter_bc_service-hab-status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: decisioncenter_bc_service validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['decisioncenter_bc_service-hab-status']\
            \ or releaseVariables['decisioncenter_bc_service-hab-status'] == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - hondo.gallegos@mastercard.com
          subject: "Variable Validation Failure: decisioncenter_bc_service in ${environment}"
          body: "decisioncenter_bc_service variable (**folder.decisioncenter_bc_service_version**)\
            \ with value **${folder.decisioncenter_bc_service_version}**\
            \ has experienced a validation failure in the ${environment} environment.\
            \ Please correct the XLR folder variable to contain the correct value."
      - name: decision_center_ec_components_stage
        type: xlrelease.SequentialGroup
        tasks:
        - name: decision_center_ec_components_stage check habitat
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          jobParameters: |-
            scriptAction=verifyPkgIdent
            passedName=${folder.decision_center_ec_components_stage_version}
            passedEnv=${environment}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${decision_center_ec_components_stage-hab-status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: decision_center_ec_components_stage validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['decision_center_ec_components_stage-hab-status']\
            \ or releaseVariables['decision_center_ec_components_stage-hab-status']\
            \ == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - hondo.gallegos@mastercard.com
          subject: "Variable Validation Failure: decision_center_ec_components_stage\
            \ in ${environment}"
          body: "decision_center_ec_components_stage variable (**folder.decision_center_ec_components_stage.version**)\
            \ with value **${folder.decision_center_ec_components_stage_version}**\
            \ has experienced a validation failure in the ${environment} environment.\
            \ Please correct the XLR folder variable to contain the correct value."
      - name: decision_center_ec_webservices_stage
        type: xlrelease.SequentialGroup
        tasks:
        - name: decision_center_ec_webservices_stage check habitat
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          jobParameters: |-
            scriptAction=verifyPkgIdent
            passedName=${folder.decision_center_ec_webservices_stage_version}
            passedEnv=${environment}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${decision_center_ec_webservices_stage-hab-status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: decision_center_ec_webservices_stage validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['decision_center_ec_webservices_stage-hab-status']\
            \ or releaseVariables['decision_center_ec_webservices_stage-hab-status']\
            \ == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - hondo.gallegos@mastercard.com
          subject: "Variable Validation Failure: decision_center_ec_webservices_stage\
            \ in ${environment}"
          body: "decision_center_ec_webservices_stage variable (**folder.decision_center_ec_webservices_stage_version**)\
            \ with value **${folder.decision_center_ec_webservices_stage_version}**\
            \ has experienced a validation failure in the ${environment} environment.\
            \ Please correct the XLR folder variable to contain the correct value."
      - name: dmp_udt_ws
        type: xlrelease.SequentialGroup
        precondition: "${folder.dmp_udt_ws_deploy}"
        tasks:
        - name: dmp_udt_ws check habitat
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          jobParameters: |-
            scriptAction=verifyPkgIdent
            passedName=${folder.dmp_udt_ws_version}
            passedEnv=${environment}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${dmp_udt_ws-hab-status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: dmp_udt_ws validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['dmp_udt_ws-hab-status'] or releaseVariables['dmp_udt_ws-hab-status']\
            \ == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - hondo.gallegos@mastercard.com
          subject: "Variable Validation Failure: dmp_udt_ws in ${environment}"
          body: "dmp_udt_ws variable (**folder.dmp_udt_ws_version**) with\
            \ value **${folder.dmp_udt_ws_version}** has experienced a validation\
            \ failure in the ${environment} environment. Please correct the XLR folder\
            \ variable to contain the correct value."
      - name: hostmanager
        type: xlrelease.SequentialGroup
        precondition: "${folder.flextp-deploy}"
        tasks:
        - name: hostmanager check habitat
          type: jenkins.Build
          jenkinsServer: Jenkins Production - cd3
          username: "${folder.jenkins_eid}"
          jobName: SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          jobParameters: |-
            scriptAction=verifyPkgIdent
            passedName=${folder.hostmanager_version}
            passedEnv=${environment}
          description: https://cd3.mastercard.int/jenkins/job/SCSSDevOps/job/HABITAT_JOBS/job/version-checkers/job/xlr-var-habitat-pkgIdent-checker/
          taskFailureHandlerEnabled: true
          taskRecoverOp: SKIP_TASK
          variableMapping:
            pythonScript.buildStatus: "${hostmanager-hab-status}"
            pythonScript.password: "${folder.metadata.jenkins.token.cd3}"
        - name: hostmanager validation failure
          type: xlrelease.NotificationTask
          precondition: "not releaseVariables['hostmanager-hab-status'] or releaseVariables['hostmanager-hab-status']\
            \ == 'FAILURE'"
          addresses:
          - melissa.niswonger@mastercard.com
          - hondo.gallegos@mastercard.com
          subject: "Variable Validation Failure: hostmanager in ${environment}"
          body: "hostmanager variable (**folder.hostmanager_version**) with\
            \ value **${folder.hostmanager_version}** has experienced a validation\
            \ failure in the ${environment} environment. Please correct the XLR folder\
            \ variable to contain the correct value."
    color: '#0079BC'
  realFlagStatus: ATTENTION_NEEDED
  tags:
  - rewrite
  - master
  variables:
  - type: xlrelease.StringVariable
    key: app_bootstrapper.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: ai-garage-validator.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: environment
    showOnReleaseStart: false
    value: stage
  - type: xlrelease.StringVariable
    key: grid-live-locator-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: "grid-live-server-hab-status}"
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: grid-live-server-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: grid-live-server2-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: grid-live-worker-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: grid-staging-locator-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: grid-staging-server2-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: "${grid-staging-server-hab-status}}"
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: "${grid-staging-server-hab-status"
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: GridConfig.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decision_center_ec_components_stage-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decision_center_ec_webservices_stage-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: decisioncenter_bc_service-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmp_udt_ws-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpdecisionserver_dvs_ext_0_stage-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpdecisionserver_dvs_ext_1_stage-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpdecisionserver_dvs_int_0_stage-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpdecisionserver_dvs_int_1_stage-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpdecisionserver_res_0_stage-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: dmpdecisionserver_res_1_stage-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: hostmanager-hab-status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: grid-udt-daemon.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: host-manager-cli.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: host-manager-configuration.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: host-manager.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: listmanager.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: pan-profile-web-service.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rbd-web-service.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rulemanager.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: rulestudio.projects.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: tfcconfig_apmate_status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: tfcgateway.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: transaction-disposition.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: transactionmanager.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: transactionviewer.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: app-platform.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: casemanager.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  - type: xlrelease.StringVariable
    key: di.apmate.status
    requiresValue: false
    showOnReleaseStart: false
  riskProfile: Default risk profile
- notifications:
  - notification: AUDIT_REPORT_JOB_ABORTED
    priority: Normal
    subject: "[Release] Audit report was aborted"
    body: |-
      **Your audit report was aborted!**

       Please try to generate it again or contact your Release administrator for assistance.
  - notification: TASK_FLAGGED
    priority: High
    subject: "[Release] ${release.title}: ${task.title}"
    body: |-
      The status of the **${task.title}** task in the **${release.title}** release was changed to **${task.flagStatus}** with the following comment:

      **${release.flagComment}**
    roles:
    - Watcher
    - Release Admin
    - Task Team
  - notification: TASK_OVERDUE
    priority: High
    subject: "[Release] ${release.title}: ${task.title}"
    body: |-
      The **${task.title}** task in the **${release.title}** release is overdue.

      After the task is completed, please mark it as Completed in Release.
    roles:
    - Watcher
    - Release Admin
    - Task Owner
  - notification: TASK_FAILED
    priority: High
    subject: "[Release] ${release.title}: ${task.title}"
    body: |-
      The **${task.title}** task in the **${release.title}** release has failed.

      Other tasks could still be in progress, but the release will stop after they complete.

      You can retry the task, reassign it to somebody else or abort the release.
    roles:
    - Watcher
    - Task Team
    - Task Owner
  - notification: MANUAL_TASK_STARTED
    priority: Normal
    subject: "[Release] ${release.title}: ${task.title}"
    body: |-
      The **${task.title}** task in the **${release.title}** release has started and is assigned to you or your team.

      After the task is completed, please mark it as Completed in Release.
    roles:
    - Watcher
    - Task Owner
  - notification: USER_MENTIONED
    priority: Normal
    subject: "[Release] ${mentionedByFullName} mentioned you on ${release.title}:\
      \ ${task.title}"
    body: "**${mentionedByFullName}** mentioned you on the **${task.title}** task\
      \ in the **${release.title}** release:"
  - notification: COMMENT_ADDED
    priority: Normal
    subject: "[Release] ${release.title}: ${task.title}"
    body: |-
      **${comment.authorFullName}** commented on the **${task.title}** task in the **${release.title}** release:

      ${comment.text}
    roles:
    - Watcher
    - Task Team
    - Task Owner
  - notification: AUDIT_REPORT_JOB_FAILED
    priority: Normal
    subject: "[Release] Audit report has failed"
    body: |-
      **Your audit report has failed!**

       Please try to generate it again or contact your Release administrator for assistance.
  - notification: RELEASE_FAILED
    priority: High
    subject: "[Release] ${release.title}"
    body: |-
      The **${release.title}** release has failed due to a task failure.

      The release is now stopped.

      You can retry the failed task, reassign it to somebody else or abort the release.
    roles:
    - Release Admin
  - notification: TASK_DUE_SOON
    priority: Normal
    subject: "[Release] ${release.title}: ${task.title}"
    body: |-
      The **${task.title}** task in the **${release.title}** release is due in **${task.dueInHours}** hours and **${task.dueInMinutes}** minutes.

      After the task is completed, please mark it as Completed in Release.
    roles:
    - Watcher
    - Release Admin
    - Task Owner
  - notification: ACTIVE_TASK_UNASSIGNED
    priority: Normal
    subject: "[Release] ${release.title}: ${task.title}"
    body: |-
      The **${task.title}** task in the **${release.title}** release is active but not assigned to anyone anymore.

      Please assign the task to a user or a team.
    roles:
    - Watcher
    - Task Team
    - Task Owner
  - notification: RELEASE_FAILING
    priority: High
    subject: "[Release] ${release.title}"
    body: |-
      The **${release.title}** release is failing due to a task failure.

      Other tasks may still be in progress, but the release will stop after they complete.

      You can retry the failed task, reassign it to somebody else or abort the release.
    roles:
    - Release Admin
  - notification: RELEASE_FLAGGED
    priority: High
    subject: "[Release] ${release.title}"
    body: |-
      The status of the **${release.title}** release was changed to **${release.flagStatus}** with the following comment:

      **${release.flagComment}**
    roles:
    - Release Admin
  - notification: MANUAL_TASK_STARTED_WITHOUT_OWNER
    priority: Normal
    subject: "[Release] ${release.title}: ${task.title}"
    body: |-
      The **${task.title}** task in the **${release.title}** release has started, but it is not assigned.

      Please assign the task to a user or a team.
    roles:
    - Watcher
    - Release Admin
  - notification: RELEASE_COMPLETED
    priority: Normal
    subject: "[Release] ${release.title}"
    body: "The **${release.title}** release has been completed."
    roles:
    - Release Admin
  - notification: TASK_WAITING_FOR_INPUT
    priority: Normal
    subject: "[Release] ${release.title}: ${task.title}"
    body: |-
      The **${task.title}** task in the **${release.title}** release needs your input.

      Please enter the required information so the release can continue.
    roles:
    - Watcher
    - Task Team
    - Task Owner
  - notification: AUDIT_REPORT_JOB_COMPLETED
    priority: Normal
    subject: "[Release] Report '${report.reportName}' is ready"
    body: |-
      **Your audit report is complete!**

       '${report.reportName}' is ready for download.
  - notification: RELEASE_ABORTED
    priority: Normal
    subject: "[Release] ${release.title}"
    body: "The **${release.title}** release has been aborted."
    bulkSubject: "[Release] Multiple releases aborted"
    bulkBody: |-
      The following releases have been aborted:

      ${#releases}
      * [${title}](${url})
      ${/releases}
    roles:
    - Release Admin
  - notification: RELEASE_STARTED
    priority: Normal
    subject: "[Release] ${release.title}"
    body: "The **${release.title}** release has been started."
    bulkSubject: "[Release] Multiple releases started"
    bulkBody: |-
      The following releases have been started:

      ${#releases}
      * [${title}](${url})
      ${/releases}
    roles:
    - Release Admin
  - notification: ACTIVE_TASK_ASSIGNED
    priority: Normal
    subject: "[Release] ${release.title}: ${task.title}"
    body: "The active task **${task.title}** in the **${release.title}** release is\
      \ now assigned to ${task.ownerFullName}."
    roles:
    - Watcher
    - Task Team
    - Task Owner
---
apiVersion: xl-release/v1
kind: Permissions
metadata:
  home: Decision Management/Lower Environment Releases/PEAT Release/Current release
spec:
- directory: "."
  teams:
  - name: SCSSItfDeployment
    roles:
    - SCSS-ItfDeployment
    permissions:
    - release#view
  - name: Release Admin
    roles:
    - XLR_DMP_ADMIN
    permissions:
    - release#edit_precondition
    - release#edit
    - release#lock_task
    - release#start
    - release#reassign_task
    - release#edit_blackout
    - release#edit_failure_handler
    - folder#view
    - release#abort
    - release#view
    - release#edit_task
  - name: SCSS-DevOpsRead
    roles:
    - SCSS-DevOpsRead
    permissions:
    - folder#edit_variables
    - template#create_release_other_folder
    - template#view
    - folder#view
    - dashboard#view
    - group#view
    - release#view
  - name: INTERNETOPS
    roles:
    - SCSSProdDeployment
  - name: SCSS-NonProdAdmin
    roles:
    - SCSS-NonProd-Admin
    permissions:
    - release#edit_precondition
    - release#edit
    - template#edit
    - release#reassign_task
    - template#create_release
    - release#view
    - release#lock_task
    - template#create_release_other_folder
    - release#start
    - template#view
    - template#edit_precondition
    - release#abort
    - release#edit_task
  - name: Folder Owner
    roles:
    - SCSS-NonProd-Admin
    - XLR_DMP_ADMIN
    permissions:
    - folder#edit_variables
    - delivery_pattern#edit
    - folder#edit_configuration
    - delivery#edit
    - folder#view_versions
    - folder#apply_changes
    - group#view
    - folder#edit_versions
    - folder#edit_notifications
    - delivery_pattern#view
    - group#edit
    - delivery#view
    - folder#view
    - folder#edit_security
    - dashboard#edit
    - folder#edit
    - dashboard#view
    - folder#generate_configuration
  - name: Template Owner
    roles:
    - XLR_DMP_ADMIN
    permissions:
    - template#create_release_other_folder
    - template#edit
    - template#lock_task
    - template#view
    - folder#view
    - template#edit_precondition
    - template#create_release
    - template#edit_failure_handler
    - trigger#edit_trigger
  - name: SCSS-ReleaseManagement
    roles:
    - SCSS-Release-Management
    permissions:
    - folder#edit_variables
    - release#edit
    - template#create_release_other_folder
    - template#edit
    - release#start
    - template#view
    - template#edit_precondition
    - template#create_release
    - release#abort
    - folder#edit
    - release#view
  - name: OCC
    roles:
    - SCSSProdDeployment
  - name: DBA
    roles:
    - SCSSProdDeployment
  - name: SCSS-Development
    roles:
    - SCSS-Development
    permissions:
    - folder#edit_variables
    - release#edit_precondition
    - release#edit
    - template#edit
    - template#create_release
    - group#view
    - release#view
    - template#create_release_other_folder
    - release#start
    - template#view
    - folder#view
    - dashboard#view
    - release#edit_task
  - name: SCSSStageDeployment
    roles:
    - SCSS-StageDeployment
    permissions:
    - release#start
    - release#view
  - name: SCSSPeatDeployment
    roles:
    - SCSS-PeatDeployment
    users:
    - E091616
    permissions:
    - folder#edit_variables
    - release#edit_precondition
    - release#edit
    - release#view
    - release#edit_task
  - name: SCSS-ProdAdmin
    roles:
    - SCSS-ProdAdmin
    permissions:
    - release#lock_task
    - template#create_release_other_folder
    - release#start
    - release#reassign_task
    - template#view
    - release#view
  - name: IOWA
    roles:
    - SCSSProdDeployment
  - name: SCSSProdDeployment
    roles:
    - SCSSProdDeployment
    permissions:
    - template#create_release_other_folder
    - release#start
    - release#reassign_task
    - template#view
    - folder#view
    - release#view
